{"version":3,"sources":["components/SidebarContent.module.css","components/DataTransmat.module.css","components/view/ViewerPageLine.module.css","pages/Editor.module.css","components/view/ViewerPersonCard.module.css","components/BlockTree.module.css","components/Header.module.css","pages/App.module.css","components/Sidebar.module.css","components/edit/HtmlInput.module.css","fluent/fluentBy.js","components/view/ViewerAuto.module.css","components/edit/FancyInput.module.css","locales lazy /^/.//.*/.ftl$/ groupOptions: {} namespace object","hooks/useMediaQuery.js","fluent/Localized.js","graphql/mutations.js","hooks/useSaveBlock.js","graphql/queries.js","hooks/useUser.js","components/Popover.js","components/PopoverMenu.js","components/edit/AddMenu.js","hooks/useArchiveBlock.js","components/SubMenu.js","components/edit/BlockMenu.js","components/DataTransmat.js","markdown.js","components/view/ViewerHeadlineCard.js","components/view/ViewerTextCard.js","components/view/ViewerButtonCard.js","components/view/ViewerDividerCard.js","components/view/ViewerCheckboxCard.js","components/view/ViewerPageLine.js","components/view/ViewerPersonCard.js","components/view/ViewerAutomationCard.js","hooks/useMutation.js","components/view/ViewerAuto.js","hooks/useLoadBlocks.js","components/BlockTree.js","components/SidebarContent.js","components/Sidebar.js","hooks/useLoadBlock.js","hooks/useBlockMatchesRoles.js","components/Header.js","components/edit/HtmlInput.js","components/edit/SharingEditor.js","components/edit/FancyInput.js","components/edit/EmailInput.js","components/edit/PermissionsEditor.js","components/edit/CheckboxInput.js","components/MultiButton.js","components/edit/UrlInput.js","images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png","images/coverphotos/thumbs/Aktion.png","images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png","images/coverphotos/thumbs/Welcome-to-Volt.png","images/coverphotos/thumbs/portugal.jpg","components/edit/CoverphotoPicker.js","components/edit/IconPicker.js","components/edit/TriggerInput.js","components/edit/ActionInput.js","components/edit/PropertiesEditor.js","components/edit/InlineEditorBlockText.js","components/edit/InlineEditorBlockButton.js","components/edit/InlineEditorBlockHeadline.js","components/edit/InlineEditorBlockDivider.js","components/edit/InlineEditorBlockCheckbox.js","components/edit/InlineEditorBlockPerson.js","components/edit/InlineEditorBlockPage.js","components/edit/InlineEditorBlock.js","components/edit/ContentEditor.js","components/ErrorPages.js","pages/Editor.js","pages/Viewer.js","pages/App.js","fluent/l10n.js","index.js","components/view/ViewerAutomationCard.module.css","components/edit/PermissionsEditor.module.css","pages/Viewer.module.css","functions.js","components/edit/IconPicker.module.css","Snackbar.module.css","components/edit/CoverphotoPicker.module.css","components/edit/PropertiesEditor.module.css","components/edit/SharingEditor.module.css","components/edit/InlineEditorBlock.module.css","components/edit/ContentEditor.module.css"],"names":["module","exports","negotiateLanguages","require","fluentByObject","object","userLocales","supportedLocales","Object","keys","length","lookupedLocale","defaultLocale","strategy","fluentByArray","array","key","map","item","filter","Boolean","fluentByAny","any","fallback","Array","isArray","result","value","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","useMediaQuery","query","useState","matches","setMatches","useEffect","media","window","matchMedia","listener","addEventListener","removeEventListener","Localized","props","elems","br","Fragment","children","withLocalization","Inner","l10n","React","useContext","FluentContext","createElement","globalSupportedLocales","thisSupportedLocales","locale","includes","currentLocales","getString","args","useLocalization","fluentBy","saveBlock_Mutation","gql","archiveBlock_Mutation","unarchiveBlock_Mutation","moveBlock_Mutation","removeProperty","obj","prop","i","JSON","parse","stringify","hasOwnProperty","useSaveBlock","apollo_client","useApolloClient","useSnackbar","enqueueSnackbar","closeSnackbar","handleSaveBlock","useCallback","newBlock","final_resolve","snackbarKey","content","contentConfig","blockId","loadingDataPromise","mutate","mutation","variables","block","a","data","error","variant","preventDuplicate","autoHideDuration","_id","saveBlock","catch","console","message","race","setTimeout","response","persist","getBlock_Query","getBlocks_Query","getSelf_Query","getSiblingBlocks_Query","getParentBlocks_Query","blockMatchesRoles_Query","useUser","forceRefetch","user","setUser","loggedIn","setLoggedIn","self","logged_in","Popover","trigger","onToogle","setOpenBlockMenuRef","anchorRef","useRef","open","setOpen","setOpenExternal","newOpen","current","closePopover","Math","random","toString","substring","undefined","ref","onClick","prevOpen","style","pointerEvents","Portal","display","position","top","right","bottom","left","zIndex","cursor","Popper","anchorEl","transition","placement","disablePortal","modifiers","name","enabled","options","altBoundary","rootBoundary","padding","altAxis","tether","TransitionProps","Fade","transformOrigin","PopoverMenu","popoverProps","Paper","sx","maxWidth","maxHeight","overflow","background","color","elevation","MenuList","autoFocus","width","marginTop","Divider","opacity","marginBottom","MenuItem","className","ListItemIcon","Close","ListItemText","blockTypeIcons","button","headline","headline3","text","divider","checkbox","page","person","automation","default_types","AddMenuContent","createBlock","types","type","AddMenu","useArchiveBlock","archive","SubMenu","parentMenuIsOpen","label","triggerProps","MenuListProps","onOpen","triggerRef","isSubMenuOpen","setIsSubMenuOpen","toggleSubmenu","closeSubmenu","justifyContent","ArrowRight","marginRight","Menu","anchorOrigin","vertical","horizontal","disableAutoFocus","disableEnforceFocus","onClose","setType","toggle_active","active","onRemoveRow","addRowBefore","onArchivedToggle","navigate","useNavigate","properties","archived","setArchived","archiveBlock","viewBlock","editBlock","createChildBlock","parent","toggleArchiveBlock","newArchived","metadata","ListSubheader","whiteSpace","lineHeight","margin","backgroundColor","height","icon","option","selected","Add","VisibilityOff","Visibility","Unarchive","Archive","ListItem","paddingTop","paddingBottom","primary","secondary","modified","replace","DataBothWays","onTransmit","onReceive","draggable","bothwayRef","unlistenTransmit","addListeners","event","transmat","Transmat","setData","unlistenReceive","hasType","accept","payload","getData","preventDefault","obs","TransmatObserver","entries","entry","target","classList","toggle","classes","drag_over","isTarget","drag_active","isActive","observe","disconnect","tabIndex","md","mdit","html","xhtmlOut","linkify","typographer","breaks","renderInlineMarkdown","renderInline","twemoji","folder","ext","base","use","kbd","emoji","ViewerHeadlineCard","__html","setHtml","dir","dangerouslySetInnerHTML","ViewerTextCard","ViewerButtonCard","actions","url","action","hasClickAction","href","disabled","onclick","ViewerDividerCard","ViewerCheckboxCard","checked","checkboxStyle","verticalAlign","paddingInlineEnd","CheckBox","CheckBoxOutlineBlank","ViewerPageLine","icon_url","getImageUrl","coverphoto","click","root","alignItems","backgroundImage","domains","backend","encodeURIComponent","alt","title","ViewerPersonCard","ViewerAautomationLine","triggerInfo","triggerProperties","triggerType","path","mdiOpenInApp","size","mdiGestureTapButton","mdiTimer","cron","mdiSetRight","iconLine","useMutation","reject","ViewerAuto","dragable","component","ViewerAutomationCard","mutationFunction","movingBlock","movingBlockId","newParentId","newIndex","useLoadBlocks","handleLoadBlocks","errors","blocks","treeWalker","getViewportHeight","max","document","documentElement","clientHeight","innerHeight","treeRoots","stack","unshift","nestingLevel","node","f","pop","isOpen","isLeaf","push","BlockRow","index","toggleOpenById","refetchData","blockMenuIsOpen","setBlockMenuIsOpen","toggleOpen","onBlockMenuToogle","newValue","onArchiveToggle","newArchivedValue","force","rowContent","flexGrow","blockRowActions","flexShrink","inset","flexDirection","marginLeft","minWidth","blockRow","fakeHover","BlockTree","onGetRefetch","scrollContainer","outerTreeRef","innerTreeRef","treeRef","outerHeight","setOuterHeight","bottomMargin","setBottomMargin","nodes","setNodes","openById","setOpenById","treeNodes","setTreeNodes","prevFetchArguments","viewportHeight","setHeight","timeoutId","resizeListener","clearTimeout","useViewportHeight","updateHeight","outerBounds","getBoundingClientRect","fullHeight","isNaN","newHeight","min","useScrollPosition","updateTree","parentBlock","find","n","buildTree","flatTree","walker","done","next","new_done","getFlatTree","loadBlocks","loadedBlocks","row","disableWidth","itemData","itemCount","innerRef","itemSize","overflowY","overflowX","itemKey","SidebarContent","mounted","showBlockTree","setShowBlockTree","efficientSetShowBlockTree","func","wait","immediate","timeout","context","this","arguments","later","apply","callNow","debounce","toggleSidebar","useSidebarContext","matchesStartpage","useMatch","refetchRef","refetch","setTypes","filteredTypes","showArchived","setShowArchived","gottenBlock","toggleType","type2toggle","newTypes","scrollContainerRef","header","headerBar","MenuOpen","FilterList","frontend","Help","location","Logout","Login","rel","blockMenu","newRefetchFunction","SidebarContext","createContext","SidebarProvider","realOpen","oldOpen","Provider","Sidebar","iOS","navigator","test","userAgent","isDesktop","SwipeableDrawer","anchor","disableBackdropTransition","disableDiscovery","boxSizing","border","PaperProps","Main","main","sidebarWidth","useLoadBlock","handleLoadBlock","loadedBlock","useBlockMatchesRoles","handleLoadRoles","roles","blockMatchesRoles","Header","rightActions","notificationBanner","parentBlocks","setParentBlocks","siblingBlocks","setSiblingBlocks","loadParentBlocks","loadSiblingBlocks","leftActions","to","Home","MoreHoriz","fontWeight","getInLineRangeLength","element","whichLine","normalize","getSelection","selection","range","rangeCount","getRangeAt","clonedRange","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","cloneContents","rangeLength","childNodes","nodeType","detach","getCaretPosition","cs","getComputedStyle","paddingY","parseFloat","borderY","borderTopWidth","borderBottomWidth","elementHeight","offsetHeight","offset","getOffset","caretOffset","getCaretOffset","inFirstLine","inLastLine","caretPositionFromStart","textContent","nodeName","getRangeLengthWithLinebreaks","textLength","innerText","caretPositionFromEnd","positionFromLineStart","positionFromStart","positionFromEnd","HtmlInput","defaultValue","onChange","onBlur","linebreaks","onError","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeFromNextInput","inputRef","setText","fakeDefaultValue","setFakeDefaultValue","updateText","newHtmlValue","temporalDivElement","innerHTML","stripHtml","handleTextChange","trim","handleTextBlur","keyDownHandler","shiftKey","execCommand","caret","start","slice","end","texts","handlePaste","originalEvent","clipboardData","onKeyDown","onInput","onPaste","rebuild_textarea","show_placeholder","contentEditable","copyTextToClipboard","clipboard","writeText","info","err","textArea","body","appendChild","focus","select","msg","removeChild","fallbackCopyTextToClipboard","SharingEditor","defaultBlock","setPath","initialPath","savePath","newPath","newProperties","Modal","hideBackdrop","backdrop","dialog","inputWrapper","paddingRight","linebreak","input","marginInlineStart","marginInlineEnd","FancyInput","setError","email_regex","emails_regex","EmailInput","multiple","isSubmittable","emails","match","LocalizedRole","role","RolesMenu","changeRole","removePermission","setAnchorEl","handleClose","currentTarget","Edit","Delete","sortPermissions","permissions","owner","p","sort","b","email","localeCompare","special","other","PermissionsEditor","defaultPermissions","user_data","user_email","inputRepaintKey","setInputRepaintKey","setPermissions","newEmails","setNewEmails","newRole","setNewRole","setNewPermission","newPermissions","obj_new","tmp_id","uuidv4","permission","addPermissions","newEmail","addNewPermissionFromInput","oldInputRepaintKey","doesNotHaveVoltEuropa","doesNotHavePublic","dialogsWrapper","emailInput","menuButton","KeyboardArrowDown","permissionRow","ownerInfo","CheckboxInput","setChecked","publishChanges","checkBlock","uncheckBlock","MultiButton","ariaLabel","items","choosen","setChoosen","handleClick","dataset","url_regex","is_email_not_url_regex","UrlInput","schema_parts","split","schema","shift","after_schema","join","handleBlur","coverphotoValue","iconValue","onUrlChange","newUrl","isAbsoluteUrlRegexp","RegExp","coverphotoValueUrl","coverphotoIsSet","iconIsSet","coverphotoIsNotSet","iconIsNotSet","button_wrapper","changeCoverphotoButton","volt_bonn_thumb","welcome_to_volt_thumb","plakatschlange_thumb","portugal_thumb","aktion_thumb","src","iconValueUrl","iconWrapper","no_image","changeIconButton","TriggerInput","setProperties","updateProperty","propertyKey","newPropertyValue","propertyTypes","morePropsInput","flexWrap","gap","ActionInput","defaultProperties","silent","imprint","privacy_policy","tags","pronouns","publishProperties","propertiesFrameContent","properties_row","main_headline","propertiesFrame","InlineEditorBlockText","onSaveBlock","onAddRowAfter","publishTextChange","InlineEditorBlockButton","link","setLink","InlineEditorBlockHeadline","InlineEditorBlockDivider","InlineEditorBlockCheckbox","saveChecked","InlineEditorBlockPerson","InlineEditorBlockPage","InlineEditorBlockInbetweenComponent","InlineEditorBlock","reorderHandle","actionButton","addRowAfter","onRemoveSelf","setBlock","handleChange_Type","handleBlockChange","callback","block_input","form_active","form_deactivated","addTmpIds","getFirstLineStartNode","getLastLineStartNode","reverse","lastLineNode","childNode","thisChildNodes","moveCursorToOffsetInLine","contentEditableElement","lastLineStartNode","lastLineStartNodeLength","createRange","setStart","collapse","sel","removeAllRanges","addRange","ContentEditor","contentConfigs_Ref","contentConfigs","inputRefs_Ref","inputRefs","updateCounter","setUpdateCounter","setAutoFocus","firstLineStartNode","newContentConfigs","ids2load","old","loadMissingBlocks","saveInputRef","newInputRefs","goToPrevInput","prevInputRef","thisIndex","goToNextInput","nextInputRef","focusLastLine","lastInputRef","handleRowChange","newContentConfig","oldContentConfig","addRowByIndex","new_rows","splice","clonedContentConfigs","prev_index","prev_contentConfig","prev_tmp_id","this_block","prev_block","new_prev_block","savedPrevBlock","new_tmp_id","next_index","this_old_contentConfig","next_block","new_block","savedBlock","splitText","firstBlock","secondBlock","savedFirstBlock","savedSecondBlock","nextContentConfig","handleRemoveSelf","filteredContentConfigs","onDragEnd","destination","source","list","startIndex","endIndex","from","removed","reorder","droppableId","isDropDisabled","provided","droppableProps","boxShadow","draggableId","isDragDisabled","disableInteractiveElementBlocking","shouldRespectForcePress","draggableProps","form","Tooltip","textAlign","inlineRowButton","dragHandleButton","dragHandleProps","attr","ErrorPage","errorName","description","buttons","Editor","loadBlock","isSharingEditorOpen","setIsSharingEditorOpen","openSharingEditor","closeSharingEditor","isPermissionsEditorOpen","setIsPermissionsEditorOpen","openPermissionsEditor","closePermissionsEditor","loadedTheBlock","useParams","canEdit","setCanEdit","matchesRoles","saveType","newType","saveProperties","saveContent","newContent","savePermissions","manuallySaveEverything","app","spine_aligned","contentWrapper","rightHeaderActions","editor","Viewer","loadingTheBlock","contentBlocks","setContentBlocks","canView","setCanView","newLoadedBlock","loadedContentBlocks","coverphoto_url","l","contentBlock","App","useLocation","customLocation","setCustomLocation","slugAndIdMatch","pathname","slugOrId","suffix","newPathname","isStartpage","locales","de","en","fr","_supportedLocales_","_defaultLocale_","fetchMessages","fetch","default","messages","FluentResource","createMessagesGenerator","all","fetched","reduce","cur","assign","generateBundles","bundle","FluentBundle","addResource","AppLocalizationProvider","onLocaleChange","ReactLocalization","getDefaultBundles","bundles","setBundles","new_bundles","loadBundles","client","ApolloClient","uri","cache","InMemoryCache","credentials","defaultOptions","watchQuery","fetchPolicy","errorPolicy","Start","languages","setUserLocales","currentLocale","setCurrentLocale","umami","systemLocales","language","toLowerCase","trackEvent","handleLanguageChange","handleCurrentLocalesChange","prefersDarkMode","theme","useMemo","createTheme","palette","mode","ApolloProvider","ThemeProvider","variantSuccess","snackbarClasses","snackbar","success","variantError","variantWarning","warning","variantInfo","domRoot","getElementById","onLanguageChange","ReactDOM","render","imageObj"],"mappings":"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","file":"static/js/main.ff3c8f84.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"SidebarContent_content__RAi8X\",\"header\":\"SidebarContent_header__1pYRG\",\"headerBar\":\"SidebarContent_headerBar__2xkje\",\"scrollContainer\":\"SidebarContent_scrollContainer__2eS9U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"drag_over\":\"DataTransmat_drag_over__3XVzh\",\"drag_active\":\"DataTransmat_drag_active__2nwCM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"ViewerPageLine_icon__GiwAD\",\"title\":\"ViewerPageLine_title__3zDUr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"Editor_app__3WzMm\",\"spine_aligned\":\"Editor_spine_aligned__1h8Ra\",\"contentWrapper\":\"Editor_contentWrapper__1cY6-\",\"editor\":\"Editor_editor__2hX0g\",\"loadingContent\":\"Editor_loadingContent__2fqdK\",\"editor_form_row\":\"Editor_editor_form_row__17Pul\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"icon\":\"ViewerPersonCard_icon__3fe_H\",\"name\":\"ViewerPersonCard_name__3Ddq3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"blockRow\":\"BlockTree_blockRow__80Vim\",\"blockRowActions\":\"BlockTree_blockRowActions__GDOGf\",\"fakeHover\":\"BlockTree_fakeHover__TKaWl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3mObx\",\"headerBar\":\"Header_headerBar__2YU41\",\"notificationBanner\":\"Header_notificationBanner__104SP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3hbGO\",\"isStartpage\":\"App_isStartpage__1Q6rs\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Sidebar_main__1MCX5\",\"open\":\"Sidebar_open__gnBQb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"rebuild_textarea\":\"HtmlInput_rebuild_textarea__ZfRzZ\",\"show_placeholder\":\"HtmlInput_show_placeholder__hM8g2\"};","const { negotiateLanguages } = require('@fluent/langneg')\n\nfunction fluentByObject(object = {}, userLocales = ['en']){\n  const supportedLocales = Object.keys(object)\n\n  if (supportedLocales.length === 0) {\n    return null\n  }\n\n  const lookupedLocale = negotiateLanguages(\n    userLocales,\n    supportedLocales,\n    {\n      defaultLocale: supportedLocales[0],\n      strategy: 'lookup',\n    }\n  )\n\n  if (lookupedLocale.length === 0) {\n    return null\n  }\n\n  return object[lookupedLocale[0]]\n}\n\nfunction fluentByArray(array = [], userLocales = ['en'], key = 'locale') {\n  const supportedLocales = array.map(item => item[key]).filter(Boolean)\n\n  if (supportedLocales.length === 0) {\n    return null\n  }\n\n  const lookupedLocale = negotiateLanguages(\n    userLocales,\n    supportedLocales,\n    {\n      defaultLocale: supportedLocales[0],\n      strategy: 'lookup',\n    }\n  )\n\n  if (lookupedLocale.length === 0) {\n    return null\n  }\n\n  return array.filter(item => item[key] === lookupedLocale[0])\n}\n\nfunction fluentByAny(any = '', userLocales = ['en'], fallback = '') {\n  if (Array.isArray(any)) {\n    const result = fluentByArray(any, userLocales)\n    if (Array.isArray(result) && result.length > 0) {\n      any = result[0].value\n    }\n  } else if (typeof any === 'object') {\n    any = fluentByObject(any, userLocales)\n  }\n  if (typeof any !== 'string') {\n    any = fallback\n  }\n  return any\n}\n\nmodule.exports = {\n  fluentByObject,\n  fluentByArray,\n  fluentByAny,\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"ViewerAuto_root__1p6KG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"FancyInput_error__2DFWE\"};","var map = {\n\t\"./de.ftl\": [\n\t\t321,\n\t\t3\n\t],\n\t\"./en.ftl\": [\n\t\t322,\n\t\t4\n\t],\n\t\"./fr.ftl\": [\n\t\t323,\n\t\t5\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 310;\nmodule.exports = webpackAsyncContext;","import { useState, useEffect } from \"react\";\n\nconst useMediaQuery = (query) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n    const listener = () => setMatches(media.matches);\n    window.addEventListener(\"resize\", listener);\n    return () => window.removeEventListener(\"resize\", listener);\n  }, [matches, query]);\n\n  return matches;\n}\n\nexport default useMediaQuery;\n","import React from 'react'\nimport {\n  Localized as LocalizedOriginal,\n  // withLocalization,\n} from '@fluent/react'\nimport { negotiateLanguages } from '@fluent/langneg'\n\nimport { FluentContext } from '../../node_modules/@fluent/react/esm/context.js'\nimport fluentBy from './fluentBy.js'\n\nconst Localized = props => (\n  <LocalizedOriginal\n    key={props.id}\n    {...props}\n    elems={{\n      br: <br />,\n      ...props.elems,\n    }}\n  >\n    <React.Fragment>{props.children}</React.Fragment>\n  </LocalizedOriginal>\n)\n\n// A custom withLocalization to have an empty fallback.\n// It is nearly identical to the original.\nfunction withLocalization(Inner) {\n  function WithLocalization(props) {\n    const l10n = React.useContext(FluentContext)\n\n    const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n\n    const fluentByObject = (object, fallback) => {\n      if (!(!!fallback)) {\n        fallback = null\n      }\n\n      if (!!object) {\n        const globalSupportedLocales = l10n.supportedLocales || []\n        const thisSupportedLocales = Object.keys(object).filter(locale => globalSupportedLocales.includes(locale))\n\n        const currentLocales = negotiateLanguages(\n          l10n.userLocales,\n          thisSupportedLocales,\n          { defaultLocale: l10n.defaultLocale }\n        )\n\n        for (const locale of currentLocales) {\n          if (!!object[locale]) {\n            return object[locale]\n          }\n        }\n\n        return fallback\n      }\n\n      return fallback\n    }\n\n    return React.createElement(Inner, { fluentByObject, getString, ...props })\n  }\n  return WithLocalization\n}\n\nfunction useLocalization() {\n  const l10n = React.useContext(FluentContext)\n\n  const getString = (id, args, fallback) => l10n.getString(id, args, fallback || ' ')\n  const fluentByAny = (any = [], fallback = '') => fluentBy.fluentByAny(any, l10n.userLocales, fallback)\n\n  return {\n    ...l10n,\n    getString,\n    fluentByAny,\n  }\n}\n\nexport {\n  negotiateLanguages,\n  withLocalization,\n  Localized,\n  Localized as default,\n  useLocalization,\n}\n\n/*\n\nimport { Localized, withLocalization } from '../Localized/'\n\n<Localized id=\"translation_id\" />\nexport default withLocalization(componentName)\n\n\nimport Localized from '../Localized/'\n<Localized id=\"translation_id\" />\n\nimport { withLocalization } from '@fluent/react'\nexport default withLocalization(componentName)\n\n*/\n","import { gql } from '@apollo/client'\n\nexport const saveBlock_Mutation = gql`\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n`\n\nexport const archiveBlock_Mutation = gql`\n  mutation archiveBlock ($_id: ObjectID!) {\n    archiveBlock (_id: $_id)\n  }\n`\n\nexport const unarchiveBlock_Mutation = gql`\n  mutation unarchiveBlock ($_id: ObjectID!) {\n    unarchiveBlock (_id: $_id)\n  }\n`\n\nexport const moveBlock_Mutation = gql`\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n`\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { saveBlock_Mutation } from '../graphql/mutations.js'\n\nimport { useSnackbar } from 'notistack'\n\nfunction removeProperty(obj, prop) {\n  // remove property from objects, arrays and sub-objects\n\n  obj = JSON.parse(JSON.stringify(obj)) // clone object to make everything mutable\n\n  if (obj.hasOwnProperty(prop)) {\n    delete obj[prop]\n  }\n  for (const i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      if (typeof obj[i] == 'object' && obj[i] !== null) {\n        removeProperty(obj[i], prop)\n      }\n    }\n  }\n\n  return obj\n}\n\nfunction useSaveBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleSaveBlock = useCallback((newBlock) => {\n    return new Promise(final_resolve => {\n      let snackbarKey = null\n\n      newBlock = {...newBlock}\n      newBlock = removeProperty(newBlock, '__typename')\n      if (newBlock.hasOwnProperty('content') && Array.isArray(newBlock.content)) {\n        newBlock.content = newBlock.content.map(contentConfig => ({\n          blockId: contentConfig.blockId,\n        }))\n      }\n\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.mutate({\n          mutation: saveBlock_Mutation,\n          variables: {\n            block: newBlock\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string') {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 2000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 2000,\n                })\n              }\n            } else {\n              final_resolve({\n                ...newBlock,\n                _id: data.saveBlock,\n              })\n\n              enqueueSnackbar(getString('path_editor_status_saved'), {\n                variant: 'success',\n                preventDuplicate: false,\n                autoHideDuration: 2000,\n              })\n            }\n          })\n          .catch(async error => {\n            console.error(error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar(getString('path_editor_status_error_while_saving', {\n              error: error.message,\n            }), {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_saving'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleSaveBlock\n}\n\nexport default useSaveBlock\n","import { gql } from '@apollo/client'\n\nexport const getBlock_Query = gql`\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n    }\n  }\n`\n\nexport const getBlocks_Query = gql`\n  query getBlocks ($ids: [ObjectID], $types: [String], $archived: Boolean) {\n    blocks (ids: $ids, types: $types, archived: $archived) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n    }\n  }\n`\n\nexport const getSelf_Query = gql`\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n    }\n  }\n`\n\nexport const getSiblingBlocks_Query = gql`\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n`\n\nexport const getParentBlocks_Query = gql`\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed\n    }\n  }\n`\n\nexport const blockMatchesRoles_Query = gql`\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n`\n","import { useState, useEffect } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getSelf_Query } from '../graphql/queries'\n\nexport default function useUser(forceRefetch = false) {\n  const [user, setUser] = useState({})\n  const [loggedIn, setLoggedIn] = useState(false)\n\n  const apollo_client = useApolloClient()\n\n  useEffect(() => {\n    apollo_client.query({\n      query: getSelf_Query,\n    })\n      .then(async ({ data }) => {\n        if (data.hasOwnProperty('self')) {\n          setUser(data.self)\n          setLoggedIn(data.self.logged_in)\n        } else {\n          setUser({})\n          setLoggedIn(false)\n        }\n      })\n      .catch(error => {\n        console.error(error)\n        setUser({})\n        setLoggedIn(false)\n      })\n  }, [forceRefetch, setUser, setLoggedIn, apollo_client])\n\n  return {\n    ...user,\n    loggedIn,\n  }\n}\n","import { useState, useRef, useEffect, useCallback } from 'react'\n\nimport {\n  Portal,\n  Fade,\n  Popper,\n} from '@mui/material'\n\nconst randomString = () => (Math.random() + 1).toString(36).substring(7)\n\nfunction Popover ({\n  trigger,\n  children = () => {},\n  onToogle = () => {},\n  setOpenBlockMenuRef,\n}) {\n  const anchorRef = useRef(null)\n  const [open, setOpen] = useState(false)\n\n  const setOpenExternal = useCallback((newOpen) => {\n    setOpen(newOpen)\n  }, [ setOpen ])\n\n  useEffect(() => {\n    if (!!setOpenBlockMenuRef) {\n      setOpenBlockMenuRef.current = setOpenExternal\n    }\n  }, [ setOpenExternal, setOpenBlockMenuRef ])\n\n  const handlePopoverToggleClick = () => {\n    setOpen((prevOpen) => {\n      onToogle(!prevOpen)\n      return !prevOpen\n    })\n  }\n\n  const closePopover = () => {\n    onToogle(false)\n    setOpen(false)\n  }\n\n  const id = open ? 'popover-'+randomString() : undefined\n\n  return <>\n\n    {trigger({\n      ref: anchorRef,\n      'aria-describedby': id,\n      onClick: handlePopoverToggleClick,\n      style: {\n        pointerEvents: open ? 'none' : 'all',\n      },\n    })}\n\n  <Portal>\n    <div\n      onClick={closePopover}\n      style={{\n        display: (open ? 'block' : 'none'),\n        position: 'fixed',\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0,\n        zIndex: 1299,\n        cursor: 'pointer',\n      }}\n    />\n\n    <Popper\n      id={id}\n      open={open}\n      anchorEl={anchorRef.current}\n      transition\n      placement=\"bottom-start\"\n      disablePortal={true}\n      modifiers={[\n        {\n          name: 'flip',\n          enabled: true,\n          options: {\n            altBoundary: true,\n            rootBoundary: 'viewport',\n            padding: 8,\n          },\n        },\n        {\n          name: 'preventOverflow',\n          enabled: true,\n          options: {\n            altAxis: true,\n            altBoundary: true,\n            tether: true,\n            rootBoundary: 'viewport',\n            padding: 8,\n          },\n        },\n      ]}\n      style={{\n        zIndex: 1300,\n      }}\n    >\n      {({ TransitionProps }) => (\n        <Fade {...TransitionProps}>\n          <div>\n          {\n            !!children && typeof children === 'function'\n            ? children({\n              open,\n              style: {\n                transformOrigin: 'top left',\n              },\n              closePopover,\n            })\n            : null\n          }\n          </div>\n        </Fade>\n      )}\n    </Popper>\n\n    </Portal>\n  </>\n}\n\nexport default Popover\n","import {\n  Paper,\n  MenuList,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n} from '@mui/material'\n\nimport {\n  Close as CloseIcon,\n} from '@mui/icons-material'\n\nimport { Localized } from '../fluent/Localized.js'\n\nimport Popover from './Popover.js'\n\nexport default function PopoverMenu ({\n  trigger,\n  children,\n  onToogle,\n}) {\n  return <Popover\n    trigger={trigger}\n    onToogle={onToogle}\n  >\n    {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 380,\n            // height: 325,\n            maxHeight: 'calc(100vh - 32px)',\n            overflow: 'auto',\n            background: 'var(--background-contrast)',\n            color: 'var(--on-background)',\n          }}\n          elevation={8}\n        >\n          <MenuList\n            autoFocus={true}\n            style={{\n              width: '100%',\n              maxWidth: '100%',\n              marginTop: '-8px',\n            }}\n          >\n            {children}\n\n            <Divider style={{opacity: 0.2, marginBottom:'8px'}}  />\n\n            <MenuItem className=\"roundMenuItem\" onClick={closePopover}>\n              <ListItemIcon>\n                <CloseIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <Localized id=\"block_menu_close_menu\" />\n              </ListItemText>\n            </MenuItem>\n\n          </MenuList>\n        </Paper>\n    )}\n  </Popover>\n}\n","\nimport {\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n} from '@mui/material'\n\nimport {\n  InsertDriveFileSharp as PageIcon,\n  AutoAwesomeSharp as AutomationIcon,\n  // LinkSharp as RedirectIcon,\n  PersonSharp as PersonIcon,\n  Crop75Sharp as ButtonIcon,\n  TitleSharp as HeadlineIcon,\n  NotesSharp as TextIcon,\n  Remove as DividerIcon,\n  CodeSharp as CodeIcon,\n  CheckBox as CheckboxIcon,\n  // EditSharp as EditIcon,\n} from '@mui/icons-material'\n\nimport useUser from '../../hooks/useUser.js'\nimport PopoverMenu from '../PopoverMenu.js'\nimport { Localized } from '../../fluent/Localized.js'\n\nconst blockTypeIcons = {\n  button: <ButtonIcon />,\n  headline: <HeadlineIcon />,\n  headline3: <HeadlineIcon />,\n  text: <TextIcon />,\n  code: <CodeIcon />,\n  divider: <DividerIcon />,\n  checkbox: <CheckboxIcon />,\n  page: <PageIcon />,\n  person: <PersonIcon />,\n  automation: <AutomationIcon />,\n}\n\nconst default_types = [\n  'page',\n  'automation',\n]\n\nfunction AddMenuContent({ createBlock, types }) {\n  if (!types || !Array.isArray(types)) {\n    types = default_types\n  }\n\n  return <>\n    {\n      types\n        .map(type => (\n          <MenuItem className=\"roundMenuItem\" key={type} onClick={() => createBlock({ type })}>\n            <ListItemIcon>\n              {blockTypeIcons[type]}\n            </ListItemIcon>\n            <ListItemText>\n              <Localized id={'block_menu_type_label_'+type} />\n            </ListItemText>\n          </MenuItem>\n        ))\n    }\n  </>\n}\n\nfunction AddMenu ({ trigger, createBlock, types }) {\n  const { loggedIn } = useUser()\n\n  if (loggedIn) {\n    return <PopoverMenu trigger={trigger}>\n      <div style={{ marginTop: '8px' }}></div>\n      <AddMenuContent createBlock={createBlock} types={types} />\n    </PopoverMenu>\n  }\n\n  return null\n}\n\nexport {\n  AddMenuContent,\n  AddMenu as default,\n}\n","import { useCallback } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\nimport { archiveBlock_Mutation, unarchiveBlock_Mutation } from '../graphql/mutations.js'\n\nfunction useArchiveBlock() {\n  const apollo_client = useApolloClient()\n\n  const handleArchiveBlock = useCallback(({ _id, archive }) => {\n    return apollo_client.mutate({\n      mutation: archive ? archiveBlock_Mutation : unarchiveBlock_Mutation,\n      variables: { _id }\n    })\n  }, [ apollo_client ])\n\n  return handleArchiveBlock\n}\n\nexport default useArchiveBlock\n","import { useRef, useState, useCallback } from 'react'\n\nimport {\n  Divider,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n} from '@mui/material'\n\nimport {\n  Close as CloseIcon,\n  ArrowRight as ArrowRightIcon,\n} from '@mui/icons-material'\n\nimport { Localized } from '../fluent/Localized.js'\n\n// INFO: Some code is copied from: https://github.com/azmenak/material-ui-nested-menu-item/blob/master/src/index.tsx\n\nexport default function SubMenu ({\n  parentMenuIsOpen = true,\n  label = '',\n  triggerProps = {},\n  MenuListProps = {},\n  position = 'right',\n  onOpen = () => {},\n  children,\n}) {\n  const triggerRef = useRef(null)\n  const [isSubMenuOpen, setIsSubMenuOpen] = useState(false)\n  const open = isSubMenuOpen && parentMenuIsOpen\n\n  const toggleSubmenu = useCallback(() => {\n    const newOpen = !open\n    setIsSubMenuOpen(newOpen)\n    if (newOpen === true) {\n      onOpen()\n    }\n  }, [ setIsSubMenuOpen, open, onOpen ])\n\n  const closeSubmenu = useCallback(() => {\n    setIsSubMenuOpen(false)\n  }, [ setIsSubMenuOpen ])\n\n  return <>\n    <MenuItem\n      {...triggerProps}\n\n      ref={triggerRef}\n      onClick={toggleSubmenu}\n      className=\"roundMenuItem\"\n      style={{\n        display: 'flex',\n        justifyContent: 'space-between',\n        ...triggerProps.style,\n      }}\n    >\n      <div style={{ display: 'flex' }}>\n        {label}\n      </div>\n      <ArrowRightIcon style={{ marginRight: '-10px' }} />\n    </MenuItem>\n    <Menu\n      // Set pointer events to 'none' to prevent the invisible Popover div from capturing events for clicks and hovers\n      style={{ pointerEvents: 'none' }}\n      anchorEl={triggerRef.current}\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: (position === 'right' ? 'right' : 'left'),\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: (position === 'right' ? 'left' : 'right'),\n      }}\n      open={open}\n      autoFocus={false}\n      disableAutoFocus\n      disableEnforceFocus\n      onClose={closeSubmenu}\n      sx={{\n        marginTop: '-8px', // align with parent menu\n      }}\n      MenuListProps={{\n        ...MenuListProps,\n        sx: {\n          maxWidth: 380,\n          maxHeight: 'calc(100vh - 32px)',\n          overflow: 'auto',\n          background: 'var(--background-contrast)',\n          color: 'var(--on-background)',\n          ...MenuListProps.sx,\n        },\n      }}\n    >\n      <div style={{pointerEvents: 'auto'}}>\n        {children}\n\n        <Divider style={{opacity: 0.2}} />\n\n        <MenuItem className=\"roundMenuItem\" style={{marginTop:'8px'}} onClick={closeSubmenu}>\n          <ListItemIcon>\n            <CloseIcon />\n          </ListItemIcon>\n          <Localized id=\"block_menu_close_menu\" />\n        </MenuItem>\n      </div>\n    </Menu>\n  </>\n}\n","import { useCallback, useState } from 'react'\n\nimport {\n  useNavigate,\n} from 'react-router-dom'\n\nimport {\n  Paper,\n  MenuList,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListSubheader,\n  ListItemText,\n  ListItem,\n} from '@mui/material'\n\nimport {\n  Archive as ArchiveIcon,\n  Unarchive as UnarchiveIcon,\n\n  Visibility as VisibilityIcon,\n  VisibilityOff as VisibilityOffIcon,\n  // Delete as DeleteIcon,\n  Close as CloseIcon,\n  // VerticalAlignTop as VerticalAlignTopIcon,\n  // VerticalAlignBottom as VerticalAlignBottomIcon,\n  Add as AddIcon,\n  RepeatSharp as RepeatIcon,\n  // RemoveCircleSharp as RemoveCircleIcon,\n\n  InsertDriveFileSharp as PageIcon,\n  // LinkSharp as RedirectIcon,\n  PersonSharp as PersonIcon,\n  Crop75Sharp as ButtonIcon,\n  TitleSharp as HeadlineIcon,\n  NotesSharp as TextIcon,\n  // CodeSharp as CodeIcon,\n  Remove as DividerIcon,\n  // CheckBox as CheckboxIcon,\n  AutoAwesomeSharp as AutomationIcon,\n\n  PreviewSharp as ViewIcon,\n  EditSharp as EditIcon,\n} from '@mui/icons-material'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\n\nimport useArchiveBlock from '../../hooks/useArchiveBlock.js'\n\nimport Popover from '../Popover.js'\nimport SubMenu from '../SubMenu.js'\nimport { AddMenuContent } from './AddMenu.js'\n\nfunction BlockMenu ({\n  block = {},\n  getString,\n\n  trigger,\n  onToogle,\n\n  setType,\n  createBlock,\n\n  toggle_active = null,\n  active = null,\n  onRemoveRow = null,\n  addRowBefore = null,\n  // addRowAfter = null,\n  onArchivedToggle = null,\n\n  setOpenBlockMenuRef,\n}) {\n  const navigate = useNavigate()\n\n  const { _id = '', type = '', properties = {} } = block\n\n  const [archived, setArchived] = useState(properties.archived === true)\n  const archiveBlock = useArchiveBlock()\n\n  // const handleAddRowBefore = useCallback(() => {\n  //\n  //   // const newBlock = {\n  //   //   type,\n  //   // }\n  //\n  //   const newBlockId = ''\n  //\n  //   addRowBefore({\n  //     blockId: newBlockId,\n  //   })\n  // }, [ addRowBefore ])\n\n  const viewBlock = useCallback(() => {\n    navigate(`/${_id}/view`)\n  }, [ _id, navigate ])\n\n  const editBlock = useCallback(() => {\n    navigate(`/${_id}/edit`)\n  }, [ _id, navigate ])\n\n  const createChildBlock = useCallback(newBlock => {\n    createBlock({\n      ...newBlock,\n      parent: _id,\n    })\n  }, [ createBlock, _id ])\n\n  const toggleArchiveBlock = useCallback(() => {\n    const newArchived = !archived\n    archiveBlock({ _id: block._id, archive: newArchived })\n      .then(() => {\n        setArchived(newArchived)\n        if (typeof onArchivedToggle === 'function') {\n          onArchivedToggle(newArchived)\n        }\n      })\n      .catch(console.error)\n  }, [ archiveBlock, setArchived, archived, block, onArchivedToggle ])\n\n  const metadata = block.metadata || {}\n\n  return <>\n  <Popover\n    trigger={trigger}\n    onToogle={onToogle}\n    setOpenBlockMenuRef={setOpenBlockMenuRef}\n  >\n    {({closePopover, open, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 380,\n            // height: 325,\n            maxHeight: 'calc(100vh - 32px)',\n            overflow: 'auto',\n            background: 'var(--background-contrast)',\n            color: 'var(--on-background)',\n          }}\n          elevation={8}\n        >\n          <MenuList\n            autoFocus={true}\n            style={{\n              width: '100%',\n              maxWidth: '100%',\n              // marginTop: '-8px',\n            }}\n          >\n\n            {\n              typeof setType === 'function'\n              ? <SubMenu\n                  parentMenuIsOpen={open}\n                  label={<>\n                    <ListItemIcon>\n                      <RepeatIcon />\n                    </ListItemIcon>\n                    <Localized id=\"block_menu_choose_type_label\" />\n                  </>}\n                  MenuListProps={{\n                    style: {\n                      marginTop: '-8px',\n                    },\n                  }}\n                >\n                  <ListSubheader\n                    style={{\n                      whiteSpace: 'nowrap',\n                      lineHeight: '1',\n                      margin: '0',\n                      padding: '12px 16px 12px',\n                      backgroundColor: 'var(--background-contrast)',\n                      color: 'var(--on-background)',\n                    }}\n                  >\n                    <Localized id=\"block_menu_choose_type_label\" />\n                  </ListSubheader>\n\n                  <div style={{height: '4px'}}></div>\n\n                  {\n                    [\n                      { value: 'button', icon: <ButtonIcon />, label: getString('block_menu_type_label_button') },\n                      { value: 'headline', icon: <HeadlineIcon />, label: getString('block_menu_type_label_headline') },\n                      // { value: 'headline3', label: getString('block_menu_type_label_headline3') },\n                      { value: 'text', icon: <TextIcon />, label: getString('block_menu_type_label_text') },\n                      // { value: 'code', icon: <CodeIcon />, label: getString('block_menu_type_label_code') },\n                      { value: 'divider', icon: <DividerIcon />, label: getString('block_menu_type_label_divider') },\n                      // { value: 'checkbox', icon: <CheckboxIcon />, label: getString('block_menu_type_label_checkbox') },\n                      { value: 'page', icon: <PageIcon />, label: getString('block_menu_type_label_page') },\n                      { value: 'person', icon: <PersonIcon />, label: getString('block_menu_type_label_person') },\n                      { value: 'automation', icon: <AutomationIcon />, label: getString('block_menu_type_label_automation') },\n                    ]\n                    .map(option => (\n                      <MenuItem\n                        key={option.value}\n                        selected={option.value === type}\n                        onClick={() => setType(option.value)}\n                        className=\"roundMenuItem\"\n                      >\n                        <ListItemIcon>\n                          {option.icon}\n                        </ListItemIcon>\n                        {option.label}\n                      </MenuItem>\n                    ))\n                  }\n                </SubMenu>\n              : null\n            }\n\n            {/*\n              addRowBefore\n                ? <MenuItem onClick={handleAddRowBefore}>\n                    <ListItemIcon>\n                      <VerticalAlignTopIcon />\n                    </ListItemIcon>\n                    <Localized id=\"block_menu_add_before\" />\n                  </MenuItem>\n                : null\n            */}\n\n            {/*\n              addRowAfter\n                ? <MenuItem onClick={addRowAfter}>\n                    <ListItemIcon>\n                      <VerticalAlignBottomIcon />\n                    </ListItemIcon>\n                    <Localized id=\"block_menu_add_after\" />\n                  </MenuItem>\n                : null\n            */}\n\n            {/*\n              onRemoveRow\n                ? <MenuItem style={{marginTop:'8px'}} onClick={onRemoveRow}>\n                    <ListItemIcon>\n                      <DeleteIcon />\n                    </ListItemIcon>\n                    <Localized id=\"block_menu_delete\" />\n                  </MenuItem>\n                : null\n            */}\n\n            {\n              typeof createBlock === 'function'\n                ? <SubMenu\n                    parentMenuIsOpen={open}\n                    label={<>\n                      <ListItemIcon>\n                        <AddIcon />\n                      </ListItemIcon>\n                      <Localized id=\"block_menu_create_child_block\" />\n                    </>}\n                  >\n                    <AddMenuContent createBlock={createChildBlock} />\n                  </SubMenu>\n                : null\n            }\n\n            {\n              typeof active === 'boolean' && toggle_active\n                ? <MenuItem className=\"roundMenuItem\" onClick={toggle_active}>\n                    <ListItemIcon>\n                      {\n                        active\n                        ? <VisibilityOffIcon />\n                        : <VisibilityIcon />\n                      }\n                    </ListItemIcon>\n                    {\n                      active\n                      ? <Localized id=\"block_menu_hide\" />\n                      : <Localized id=\"block_menu_show\" />\n                    }\n                  </MenuItem>\n                : null\n            }\n\n            {\n              typeof onArchivedToggle === 'function'\n              ? <MenuItem className=\"roundMenuItem\" onClick={toggleArchiveBlock}>\n                  <ListItemIcon>\n                    {\n                      archived === true\n                      ? <UnarchiveIcon />\n                      : <ArchiveIcon />\n                    }\n                  </ListItemIcon>\n                  {\n                    archived === true\n                    ? <Localized id=\"block_menu_unarchive\" />\n                    : <Localized id=\"block_menu_archive\" />\n                  }\n                </MenuItem>\n              : null\n            }\n\n            {\n              typeof _id === 'string' && _id !== ''\n                ? <div>\n                    {\n                      typeof setType === 'function'\n                      // || addRowBefore\n                      // || addRowAfter\n                      || (typeof active === 'boolean' && toggle_active)\n                      || onRemoveRow\n                      || typeof createBlock === 'function'\n                        ? <Divider style={{opacity: 0.2, marginTop:'8px', marginBottom:'8px' }} />\n                        : null\n                    }\n\n                    <MenuItem className=\"roundMenuItem\" style={{marginTop:'8px'}} onClick={viewBlock}>\n                      <ListItemIcon>\n                        <ViewIcon />\n                      </ListItemIcon>\n                      <Localized id=\"view_block\" />\n                    </MenuItem>\n                    <MenuItem className=\"roundMenuItem\" onClick={editBlock}>\n                      <ListItemIcon>\n                        <EditIcon />\n                      </ListItemIcon>\n                      <Localized id=\"edit_block\" />\n                    </MenuItem>\n                  </div>\n                : null\n            }\n\n            <Divider style={{opacity: 0.2, marginTop:'8px', marginBottom:'8px'}} />\n\n            <MenuItem className=\"roundMenuItem\" onClick={closePopover}>\n              <ListItemIcon>\n                <CloseIcon />\n              </ListItemIcon>\n              <Localized id=\"block_menu_close_menu\" />\n            </MenuItem>\n\n            <Divider style={{opacity: 0.2, marginTop:'8px', marginBottom:'8px'}} />\n\n            {/*\n            <ListItem sx={{ paddingTop: '0', paddingBottom: '0' }}>\n              <ListItemText\n                primary={<Localized id=\"block_menu_info_created\" />}\n                secondary={(metadata.created || '').replace(/[TZ]/g, ' ')}\n              />\n            </ListItem>\n            */}\n            <ListItem sx={{ paddingTop: '0', paddingBottom: '0' }}>\n              <ListItemText\n                primary={<Localized id=\"block_menu_info_modified\" />}\n                secondary={(metadata.modified || '').replace(/[TZ]/g, ' ')}\n              />\n            </ListItem>\n            <ListItem sx={{ paddingTop: '0', paddingBottom: '0' }}>\n              <ListItemText\n                primary={<Localized id=\"block_menu_info_id\" />}\n                secondary={_id}\n              />\n            </ListItem>\n\n          </MenuList>\n        </Paper>\n    )}\n  </Popover>\n  </>\n}\n\nexport default withLocalization(BlockMenu)\n","import { useRef, useEffect } from 'react'\n\nimport { Transmat, addListeners, TransmatObserver } from 'transmat'\nimport classes from './DataTransmat.module.css'\n\nexport function DataReceiver({ onReceive, style, className, children }){\n  const receiverRef = useRef(null)\n\n  useEffect(() => {\n    const unlisten = addListeners(receiverRef.current, 'receive', event => {\n      const transmat = new Transmat(event)\n      if (transmat.hasType('application/json') && transmat.accept()) {\n        const payload = transmat.getData('application/json')\n        if (typeof onReceive === 'function') {\n          onReceive({ data: JSON.parse(payload) })\n        }\n        event.preventDefault()\n      }\n    })\n\n    const obs = new TransmatObserver(entries => {\n      for (const entry of entries) {\n        const transmat = new Transmat(entry.event)\n        if (transmat.hasType('application/json')) { // TODO: accept more than just json\n          entry.target.classList.toggle(classes.drag_over, entry.isTarget)\n          entry.target.classList.toggle(classes.drag_active, entry.isActive)\n        }\n      }\n    })\n    obs.observe(receiverRef.current)\n\n    return () => {\n      unlisten()\n      obs.disconnect()\n    }\n  }, [ onReceive ])\n\n  return <div ref={receiverRef} style={style} className={className}>\n    {children}\n  </div>\n}\n\nexport function DataTransmiter({ onTransmit, draggable, style, className, children }){\n  const transmiterRef = useRef(null)\n\n  useEffect(() => {\n    return addListeners(transmiterRef.current, 'transmit', async event => {\n      const transmat = new Transmat(event)\n      if (typeof onTransmit === 'function') {\n        const options = await onTransmit(transmat)\n        if (\n          typeof options === 'object'\n          && options !== null\n          && !Array.isArray(options.data)\n          && typeof options.data === 'object'\n          && options.data !== null\n        ) {\n          transmat.setData(options.data)\n          // transmat.setData({\n          //   'text/plain': 'Hello world!',\n          //   'text/html': '<h1>Hello world!</h1>',\n          //   'text/uri-list': 'http://example.com',\n          //   'application/json': {foo:'bar'},\n          // })\n        }\n      }\n    })\n  }, [ onTransmit ])\n\n  return <div ref={transmiterRef} style={style} className={className} draggable={draggable ? 'true' : 'false'} tabIndex=\"0\">\n    {children}\n  </div>\n}\n\nexport function DataBothWays({ onTransmit, onReceive, draggable, style, className, children }){\n  const bothwayRef = useRef(null)\n\n  useEffect(() => {\n    const unlistenTransmit = addListeners(bothwayRef.current, 'transmit', async event => {\n      const transmat = new Transmat(event)\n      if (typeof onTransmit === 'function') {\n        const options = await onTransmit(transmat)\n        if (\n          typeof options === 'object'\n          && options !== null\n          && !Array.isArray(options.data)\n          && typeof options.data === 'object'\n          && options.data !== null\n        ) {\n          transmat.setData(options.data)\n          // transmat.setData({\n          //   'text/plain': 'Hello world!',\n          //   'text/html': '<h1>Hello world!</h1>',\n          //   'text/uri-list': 'http://example.com',\n          //   'application/json': {foo:'bar'},\n          // })\n        }\n      }\n    })\n\n    const unlistenReceive = addListeners(bothwayRef.current, 'receive', event => {\n      const transmat = new Transmat(event)\n      if (transmat.hasType('application/json') && transmat.accept()) {\n        const payload = transmat.getData('application/json')\n        if (typeof onReceive === 'function') {\n          onReceive({ data: JSON.parse(payload) })\n        }\n        event.preventDefault()\n      }\n    })\n\n    const obs = new TransmatObserver(entries => {\n      for (const entry of entries) {\n        const transmat = new Transmat(entry.event)\n        if (transmat.hasType('application/json')) { // TODO: accept more than just json\n          entry.target.classList.toggle(classes.drag_over, entry.isTarget)\n          entry.target.classList.toggle(classes.drag_active, entry.isActive)\n        }\n      }\n    })\n    obs.observe(bothwayRef.current)\n\n    return () => {\n      unlistenTransmit()\n      unlistenReceive()\n      obs.disconnect()\n    }\n  }, [ onTransmit, onReceive ])\n\n  return <div\n    ref={bothwayRef}\n    style={style}\n    className={className}\n    draggable={draggable ? 'true' : 'false'}\n    tabIndex=\"0\"\n  >\n    {children}\n  </div>\n}\n\n// Examples:\n//\n// <DataTransmiter\n//   draggable={true}\n//   style={{\n//     width: '100%',\n//     height: '200px',\n//     backgroundColor: 'blue',\n//   }}\n//   onTransmit={() => ({\n//     'text/plain': 'Hello world!',\n//     'text/html': '<h1>Hello world!</h1>',\n//     'text/uri-list': 'http://example.com',\n//     'application/json': {foo:'bar'},\n//   })}\n// >\n//   DataTransmiter\n// </DataTransmiter>\n//\n// <DataReceiver\n//   style={{\n//     width: '100%',\n//     height: '200px',\n//     backgroundColor: 'red',\n//   }}\n//   onReceive={data => console.log('received', data)}\n// >\n//   DataReceiver\n// </DataReceiver>\n","import mdit from 'markdown-it'\nimport kbd from 'markdown-it-kbd'\nimport emoji from 'markdown-it-emoji'\nimport twemoji from 'twemoji'\n\n// var hljs = require('highlight.js') // https://highlightjs.org/\nconst md = mdit({\n  html: false,\n  xhtmlOut: false,\n  linkify: true,\n  typographer: true,\n  breaks: false,\n  // highlight: function (str, lang) {\n  //   const language_obj = hljs.getLanguage(lang)\n  //   if (lang && language_obj) {\n  //     const language = language_obj.aliases[0]\n  //     return '<pre class=\"hljs language-'+language+'\"><code>' +\n  //       hljs.highlight(str, { language, ignoreIllegals: true }).value +\n  //     '</code></pre>';\n  //   } else {\n  //     const html = hljs.highlightAuto(str, { ignoreIllegals: true })\n  //     return '<pre class=\"hljs language-'+html.language+'\"><code>' +\n  //       html.value +\n  //     '</code></pre>';\n  //   }\n\n  //   return '<pre class=\"hljs\"><code>' + md.utils.escapeHtml(str) + '</code></pre>';\n  // }\n})\n\n// md.disable([ 'heading', 'heading', 'lheading', 'paragraph', 'image' ])\nmd.use(kbd)\nmd.use(emoji)\n\nfunction renderInlineMarkdown(text) {\n  text = text || ''\n  // text = text.replace(/\\n/g, '<br>')\n  // text = text.replace(/\\t/g, '&emsp;')\n\n  text = text\n  .replace(/\\(TM\\)/gi, '™')\n  .replace(/\\(SM\\)/gi, '℠')\n  .replace(/\\(C\\)/gi, '©')\n  .replace(/\\(R\\)/gi, '®')\n\n  text = md.renderInline(text)\n\n  text = twemoji.parse(text, {\n    folder: 'svg',\n    ext: '.svg',\n    base: '/public/twemoji/assets/',\n    // callback: function(icon, options, variant) {\n    //   switch ( icon ) {\n    //     case 'a9':      // © copyright\n    //     case 'ae':      // ® registered trademark\n    //     case '2122':    // ™ trademark\n    //       return false\n    //     default:\n    //       return ''.concat(options.base, options.size, '/', icon, options.ext)\n    //   }\n    // }\n  })\n    \n  return text\n}\n\nexport {\n  renderInlineMarkdown,\n}\n","import { useState, useEffect } from 'react'\n\nimport { renderInlineMarkdown } from '../../markdown.js'\n\nfunction ViewerHeadlineCard ({ block }) {\n  const [html, setHtml] = useState({ __html: '' })\n\n  useEffect(() => {\n    const text = renderInlineMarkdown(block.properties.text)\n    setHtml({ __html: text })\n  }, [block, setHtml])\n\n  return <h2\n    dir=\"auto\"\n    dangerouslySetInnerHTML={html}\n    style={{\n      whiteSpace: 'pre-wrap',\n    }}\n  ></h2>\n}\n\nexport default ViewerHeadlineCard\n","import { useState, useEffect } from 'react'\n\nimport { renderInlineMarkdown } from '../../markdown.js'\n\nfunction ViewerTextCard ({ block }) {\n  const [html, setHtml] = useState({ __html: '' })\n\n  useEffect(() => {\n    const text = renderInlineMarkdown(block.properties.text)\n    setHtml({ __html: text })\n  }, [block, setHtml])\n\n  return <p\n    dir=\"auto\"\n    dangerouslySetInnerHTML={html}\n    style={{\n      whiteSpace: 'pre-wrap',\n    }}\n  ></p>\n}\n\nexport default ViewerTextCard\n","import { useState, useEffect } from 'react'\n\nimport { renderInlineMarkdown } from '../../markdown.js'\n\nfunction ViewerButtonCard ({ block, actions = {} }) {\n  const [html, setHtml] = useState({ __html: '' })\n\n  useEffect(() => {\n    const text = renderInlineMarkdown(block.properties.text)\n    setHtml({ __html: text })\n  }, [block, setHtml])\n\n  let url = ''\n  if (\n    block\n    && block.properties\n    && block.properties.trigger\n    && block.properties.action\n    && block.properties.action.url\n    && block.properties.trigger.type === 'click'\n    && block.properties.action.type === 'open_url'\n  ) {\n    url = block.properties.action.url\n  }\n\n  const hasClickAction = actions.hasOwnProperty('click')\n\n  if (hasClickAction === false && url !== '') {\n    return <a href={url}>\n      <button\n        dir=\"auto\"\n        dangerouslySetInnerHTML={html}\n        className=\"default square\"\n        style={{\n          margin: '0',\n          whiteSpace: 'pre-wrap',\n        }}\n      ></button>\n    </a>\n  }\n\n  if (hasClickAction === true) {\n    return <button\n      dir=\"auto\"\n      dangerouslySetInnerHTML={html}\n      disabled=\"disabled\"\n      className=\"default square\"\n      style={{\n        margin: '0',\n        whiteSpace: 'pre-wrap',\n      }}\n      onClick={actions.onclick}\n    ></button>\n  }\n\n  return <button\n    dir=\"auto\"\n    dangerouslySetInnerHTML={html}\n    disabled=\"disabled\"\n    className=\"default square\"\n    style={{\n      margin: '0',\n      whiteSpace: 'pre-wrap',\n    }}\n  ></button>\n}\n\nexport default ViewerButtonCard\n","export default function ViewerDividerCard () {\n  return <hr />\n}\n","import {\n  CheckBox as CheckBoxIcon,\n  CheckBoxOutlineBlank as CheckBoxOutlineBlankIcon,\n} from '@mui/icons-material'\n\nfunction ViewerCheckboxCard ({ block }) {\n  const text = block.properties.text || ''\n\n  const checked = Boolean(block.properties.checked)\n\n  const checkboxStyle = {\n    verticalAlign: 'middle',\n    paddingInlineEnd: 'var(--basis)',\n    height: 'calc(var(--font-add) + var(--basis))',\n    width: 'auto',\n  }\n\n  return <p dir=\"auto\">\n    {\n      checked\n      ? <CheckBoxIcon style={checkboxStyle} />\n      : <CheckBoxOutlineBlankIcon style={checkboxStyle} />\n    }\n    {text}\n  </p>\n}\n\nexport default ViewerCheckboxCard\n","import { useCallback } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useLocalization } from '../../fluent/Localized.js'\n\nimport { getImageUrl } from '../../functions.js'\n\nimport {\n  InsertDriveFile as PagePlaceholderIcon,\n} from '@mui/icons-material'\n\nimport classes from './ViewerPageLine.module.css'\n\nfunction ViewerPageLine ({ block, actions = {} }) {\n  const { getString } = useLocalization()\n\n  let navigate = useNavigate()\n\n  const blockId = block._id\n\n  const viewBlock = useCallback(()=>{\n    navigate(`/${blockId}/view`)\n  }, [navigate, blockId])\n\n  let icon_url = getImageUrl(block.properties.icon)\n  if (!icon_url) {\n    icon_url = getImageUrl(block.properties.coverphoto)\n  }\n  const text = block.properties.text || getString('placeholder_main_headline')\n\n  return <div\n    onClick={actions.hasOwnProperty('click') ? actions.click : viewBlock}\n    className={`clickable_card ${classes.root}`}\n  >\n    <div style={{ display: 'flex', alignItems: 'center' }}>\n      {\n        icon_url === ''\n          ? <PagePlaceholderIcon className={classes.icon} />\n          : <div className={classes.icon} style={{ backgroundImage: `url(${window.domains.backend}download_url?f=jpg&w=40&h=40&url=${encodeURIComponent(icon_url)})` }} alt={text}></div>\n      }\n\n      <span dir=\"auto\" className={classes.title}>{text}</span>\n    </div>\n  </div>\n}\n\nexport default ViewerPageLine\n","import { useCallback } from 'react'\nimport { useNavigate } from 'react-router-dom'\n\nimport { getImageUrl } from '../../functions.js'\n\nimport {\n  Face as PersonPlaceholderIcon,\n} from '@mui/icons-material'\n\nimport classes from './ViewerPersonCard.module.css'\n\nfunction ViewerPersonCard ({ block, actions = {} }) {\n  let navigate = useNavigate()\n\n  const blockId = block._id\n\n  const viewBlock = useCallback(()=>{\n    navigate(`/${blockId}/view`)\n  }, [navigate, blockId])\n\n  const icon_url = getImageUrl(block.properties.icon)\n  const text = block.properties.text || ''\n\n  return <div\n    onClick={actions.hasOwnProperty('click') ? actions.click : viewBlock}\n    className=\"clickable_card\"\n    style={{ display: 'flex', alignItems: 'center' }}\n  >\n    {\n      icon_url === ''\n        ? <PersonPlaceholderIcon className={classes.icon} />\n        : <div className={classes.icon} style={{ backgroundImage: `url(${window.domains.backend}download_url?f=jpg&w=40&h=40&url=${encodeURIComponent(icon_url)})` }} alt={text}></div>\n    }\n    <span className={classes.name} dir=\"auto\">{text}</span>\n  </div>\n}\n\nexport default ViewerPersonCard\n","import { useCallback } from 'react'\nimport { useNavigate } from 'react-router-dom'\n\nimport { getImageUrl } from '../../functions.js'\n\nimport {\n  AutoAwesomeSharp as AutomationIcon,\n} from '@mui/icons-material'\n\nimport MdiIcon from '@mdi/react'\nimport {\n  mdiGestureTapButton,\n  mdiSetRight,\n  mdiTimer,\n  mdiOpenInApp,\n  // mdiRayStartArrow,\n  // mdiWeb,\n  // mdiApplicationOutline,\n  // mdiFileCode,\n  // mdiCubeSend,\n} from '@mdi/js'\n\nimport classes from './ViewerAutomationCard.module.css'\n\nconst triggerIconSize = 1\n// const actionIconSize = 1\n\nfunction ViewerAautomationLine ({ block = {}, actions = {} }) {\n  const navigate = useNavigate()\n\n  const blockId = block._id\n\n  const viewBlock = useCallback(()=>{\n    navigate(`/${blockId}/view`)\n  }, [navigate, blockId])\n\n  const icon_url = getImageUrl(block.properties.icon)\n  const text = block.properties.text || '' // getString('placeholder_main_headline'))\n\n  let triggerInfo = null\n  const triggerProperties = ((block.properties || {}).trigger || {})\n  const triggerType = triggerProperties.type\n  if (triggerType === 'path') {\n    triggerInfo = <>\n      <MdiIcon\n        path={mdiOpenInApp}\n        size={triggerIconSize}\n        className={classes.icon}\n      />\n      <p>/{triggerProperties.path}</p>\n    </>\n  } else if (triggerType === 'click') {\n    triggerInfo = <>\n      <MdiIcon\n        path={mdiGestureTapButton}\n        size={triggerIconSize}\n        className={classes.icon}\n      />\n      <p>{triggerProperties.blockId}</p>\n    </>\n  } else if (triggerType === 'cron') {\n    triggerInfo = <>\n      <MdiIcon\n        path={mdiTimer}\n        size={triggerIconSize}\n        className={classes.icon}\n      />\n      <p>{triggerProperties.cron}</p>\n    </>\n  } else if (triggerType === 'block_change') {\n    triggerInfo = <>\n      <MdiIcon\n        path={mdiSetRight}\n        size={triggerIconSize}\n        className={classes.icon}\n      />\n      <p>{triggerProperties.blockId}</p>\n    </>\n  } else {\n    triggerInfo = <>\n      <AutomationIcon\n        className={classes.icon}\n      />\n      <p>{\n        Object.keys(triggerProperties).length > 0\n        ? JSON.stringify(triggerProperties)\n        : null\n      }</p>\n    </>\n  }\n\n  /*\n  let actionInfo = null\n  const actionProperties = ((block.properties || {}).action || {})\n  const actionType = actionProperties.type\n  if (actionType === 'open_url') {\n    actionInfo = <>\n      <MdiIcon\n        path={mdiWeb}\n        size={actionIconSize}\n        className={classes.icon}\n      />\n      <p>{actionProperties.url}</p>\n    </>\n  } else if (actionType === 'render_block') {\n    actionInfo = <>\n      <MdiIcon\n        path={mdiApplicationOutline}\n        size={actionIconSize}\n        className={classes.icon}\n      />\n      <p>{actionProperties.blockId}</p>\n    </>\n  } else if (actionType === 'run_block') {\n    actionInfo = <>\n      <MdiIcon\n        path={mdiFileCode}\n        size={actionIconSize}\n        className={classes.icon}\n      />\n      <p>{actionProperties.blockId}</p>\n    </>\n  } else if (actionType === 'send_payload') {\n    actionInfo = <>\n      <MdiIcon\n        path={mdiCubeSend}\n        size={actionIconSize}\n        className={classes.icon}\n      />\n      <p>{actionProperties.blockId}</p>\n    </>\n  } else {\n    actionInfo = <>\n      <MdiIcon\n        path={mdiRayStartArrow}\n        size={actionIconSize}\n        className={classes.icon}\n      />\n      <p>{\n        Object.keys(actionProperties).length > 0\n        ? JSON.stringify(actionProperties)\n        : null\n      }</p>\n    </>\n  }\n  */\n\n  return <div\n    onClick={actions.hasOwnProperty('click') ? actions.click : viewBlock}\n    className={`clickable_card ${classes.root}`}\n  >\n    <div style={{ display: 'flex', alignItems: 'flex-start' }}>\n      {\n        icon_url === ''\n          ? <AutomationIcon className={classes.icon} />\n          : <div className={classes.icon} style={{ backgroundImage: `url(${window.domains.backend}download_url?f=jpg&w=40&h=40&url=${encodeURIComponent(icon_url)})` }} alt={text}></div>\n      }\n\n      <div className={classes.content}>\n        {\n          text !== ''\n          ? <div dir=\"auto\" className={classes.title}>{text}</div>\n          : null // <div dir=\"auto\" className={classes.title} style={{ opacity: 0.4 }}>Untitled Automation</div>\n        }\n        \n        {triggerInfo !== null ? <div className={classes.iconLine}>{triggerInfo}</div> : null}\n        {/* {actionInfo !== null ? <div className={classes.iconLine}>{actionInfo}</div> : null} */}\n\n      </div>\n    </div>\n  </div>\n\n\n  // return <div\n  //   onClick={actions.hasOwnProperty('click') ? actions.click : viewBlock}\n  //   className={`clickable_card ${classes.root}`}\n  // >\n  //   <div>\n  //     {text !== '' ? <div dir=\"auto\" className={classes.title}>{text}</div> : null}\n  //\n  //     {triggerInfo !== null ? <div className={classes.iconLine}>{triggerInfo}</div> : null}\n  //     {actionInfo !== null ? <div className={classes.iconLine}>{actionInfo}</div> : null}\n  //\n  //   </div>\n  // </div>\n\n}\n\nexport default ViewerAautomationLine\n","import { useCallback } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\n\nfunction useMutation() {\n  const apollo_client = useApolloClient()\n\n  const handleMutation = useCallback(option => {\n    return new Promise((resolve,reject) => {\n      apollo_client.mutate(option)\n        .then(({ data }) => {\n          if (typeof data.error === 'string') {\n            reject(data.error)\n          } else {\n            resolve(data)\n          }\n        })\n        .catch(reject)\n    })\n  }, [ apollo_client ])\n\n  return handleMutation\n}\n\nexport default useMutation\n","import React, { useCallback } from 'react'\n\nimport { DataBothWays } from '../DataTransmat.js'\n\nimport ViewerHeadlineCard from './ViewerHeadlineCard.js'\nimport ViewerTextCard from './ViewerTextCard.js'\nimport ViewerButtonCard from './ViewerButtonCard.js'\nimport ViewerDividerCard from './ViewerDividerCard.js'\nimport ViewerCheckboxCard from './ViewerCheckboxCard.js'\nimport ViewerPageLine from './ViewerPageLine.js'\n// import ViewerPageCard from './ViewerPageCard.js'\nimport ViewerPersonCard from './ViewerPersonCard.js'\nimport ViewerAutomationCard from './ViewerAutomationCard.js'\n\nimport classes from './ViewerAuto.module.css'\n\nimport { moveBlock_Mutation } from '../../graphql/mutations.js'\nimport useMutation from '../../hooks/useMutation.js'\n\nfunction ViewerAuto ({ block = {}, actions = {}, size = 'card', style, dragable = false, ...props }) {\n  let component = null\n\n  const type = block.type || null\n\n  switch (type) {\n    case 'headline':\n      component = <ViewerHeadlineCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    case 'text':\n      component = <ViewerTextCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    case 'button':\n      component = <ViewerButtonCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    case 'divider':\n      component = <ViewerDividerCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    case 'checkbox':\n      component = <ViewerCheckboxCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    case 'page':\n      // switch (size) {\n      //   case 'line':\n          component = <ViewerPageLine key={block._id} block={block} actions={actions} {...props} />\n      //     break\n      //   default:\n      //     component = <ViewerPageCard key={block._id} block={block} actions={actions} {...props} />\n      // }\n      break\n    case 'person':\n      component = <ViewerPersonCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    case 'automation':\n      component = <ViewerAutomationCard key={block._id} block={block} actions={actions} {...props} />\n      break\n    default:\n      component = JSON.stringify(block) // <ViewerTextCard key={block._id} block={block} actions={actions} {...props} />\n  }\n\n  const mutationFunction = useMutation()\n\n  const onReceive = useCallback(({ data: movingBlock }) => {\n    if (movingBlock._id !== block._id) {\n      mutationFunction({\n        mutation: moveBlock_Mutation,\n        variables: {\n          movingBlockId: movingBlock._id,\n          newParentId: block._id,\n          newIndex: 0,\n        },\n      })\n        // .then(() => {\n        //   // TODO: reload sidebar\n        // })\n        .catch(console.error)\n    }\n  }, [ mutationFunction, block ])\n\n  return <DataBothWays\n    key={block._id}\n    draggable={dragable}\n    className={classes.root}\n    style={style}\n    onTransmit={() => ({\n      data: {\n        // 'text/plain': 'Hello world!',\n        // 'text/html': '<h1>Hello world!</h1>',\n        // 'text/uri-list': 'http://example.com',\n        'application/json': block,\n      }\n    })}\n    onReceive={onReceive}\n  >\n    {component}\n  </DataBothWays>\n}\n\nexport default ViewerAuto\n","import { useCallback } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlocks_Query } from '../graphql/queries'\n\nfunction useLoadBlocks() {\n  const apollo_client = useApolloClient()\n\n  const handleLoadBlocks = useCallback(variables => {\n    return new Promise(resolve => {\n      apollo_client.query({\n        query: getBlocks_Query,\n        variables,\n      })\n        .then(async ({ errors, data }) => {\n          if (Array.isArray(errors) && errors.length > 0) {\n            throw errors\n          } else if (Array.isArray(data.blocks)) {\n            resolve(data.blocks)\n          }else{\n            throw new Error('Unknown error while loading blocks.')\n          }\n        })\n        .catch(async error => {\n          console.error('error', error)\n          resolve([])\n        })\n    })\n  }, [apollo_client])\n\n  return handleLoadBlocks\n}\n\nexport default useLoadBlocks\n","import React, { useCallback, useEffect, useState, useRef } from 'react'\nimport AutoSizer from 'react-virtualized-auto-sizer'\nimport { FixedSizeList } from 'react-window';\n\nimport { useScrollPosition } from '@n8tb1t/use-scroll-position'\n\nimport BlockMenu from './edit/BlockMenu.js'\nimport ViewerAuto from './view/ViewerAuto.js'\n\nimport classes from './BlockTree.module.css'\n\nimport {\n  MoreHorizSharp as BlockMenuIcon,\n  ArrowDropDownSharp as ExpandLessIcon,\n  ArrowRightSharp as ExpandMoreIcon,\n} from '@mui/icons-material'\n\nimport useLoadBlocks from '../hooks/useLoadBlocks.js'\n\nconst minItemSize = 40\n\n// const getWidth = () => window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth\n// const getHeight = () => window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight\n\n// const getViewportWidth = () => Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)\nconst getViewportHeight = () => Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)\n\nfunction useViewportHeight() {\n  // save current window width in the state object\n  let [height, setHeight] = useState(getViewportHeight())\n\n  // in this case useEffect will execute only once because\n  // it does not have any dependencies.\n  useEffect(() => {\n    // timeoutId for debounce mechanism\n    let timeoutId = null\n    const resizeListener = () => {\n      // prevent execution of previous setTimeout\n      clearTimeout(timeoutId)\n      // change width from the state object after 150 milliseconds\n      timeoutId = setTimeout(() => {\n        setHeight(getViewportHeight())\n      }, 150)\n    }\n    // set resize listener\n    window.addEventListener('resize', resizeListener)\n\n    // clean up function\n    return () => {\n      // remove resize listener\n      window.removeEventListener('resize', resizeListener)\n    }\n  }, [])\n\n  return { height }\n}\n\nfunction buildTree(nodes){\n  // Build a tree from the blocks.\n  // Where each block has a parentId property.\n  // Each tree item should have the block itself, a list of children and a nesting level.\n  \n  const treeRoots = []\n\n  for (let node of nodes) {\n    let parentBlock = null\n    if (node.block.parent) {\n      parentBlock = nodes.find(n => n._id === node.block.parent)\n      if (!parentBlock) {\n        console.error('Invalid parent')\n      }\n    }\n\n    if (!parentBlock) {\n      treeRoots.push(node)\n    } else {\n      // If the parentBlock has no children, create the children array.\n      if (!parentBlock.children) {\n        parentBlock.children = []\n      }\n      parentBlock.children.push(node)\n    }\n  }\n\n  return treeRoots\n}\n\nfunction* treeWalker(treeRoots) {\n  const stack = []\n \n  // Remember all the necessary data of the first node in the stack.\n  for (const root of treeRoots) {\n    stack.unshift({\n      nestingLevel: 0,\n      node: root,\n    })\n  }\n \n  // Walk through the tree until we have no nodes available.\n  while (stack.length !== 0) {\n    const {\n      node: {children = [], _id, block, isOpen},\n      nestingLevel,\n    } = stack.pop()\n\n    yield {\n      _id,\n      isLeaf: children.length === 0,\n      isOpen,\n      block,\n      nestingLevel,\n    }\n \n    // Basing on the node openness state we are deciding if we need to render\n    // the child nodes (if they exist).\n    if (children.length !== 0 && isOpen) {\n      // Since it is a stack structure, we need to put nodes we want to render\n      // first to the end of the stack.\n      for (let i = children.length - 1; i >= 0; i--) {\n        stack.push({\n          nestingLevel: nestingLevel + 1,\n          node: children[i],\n        });\n      }\n    }\n  }\n}\n\nfunction getFlatTree(treeRoots){\n  const flatTree = []\n\n  const walker = treeWalker(treeRoots)\n\n  let done = false\n  while (!done) {\n    const { done: new_done, value } = walker.next()\n    done = new_done\n    if (!done) {\n      flatTree.push(value)\n    }\n  }\n\n  return flatTree\n}\n\nconst BlockRow = ({\n  createBlock,\n  onClick,\n  index,\n  style,\n  data,\n  toggleOpenById,\n  refetchData,\n}) => {\n  const {\n    _id,\n    isLeaf,\n    isOpen,\n    block,\n    nestingLevel,\n  } = data[index]\n\n  const [blockMenuIsOpen, setBlockMenuIsOpen] = useState(false)\n\n  const toggleOpen = useCallback(() => {\n    if (typeof toggleOpenById === 'function') {\n      toggleOpenById(_id)\n    }\n  }, [ toggleOpenById, _id ])\n\n  const onBlockMenuToogle = useCallback(newValue => {\n    if (newValue === false) {\n      setTimeout(() => {\n        setBlockMenuIsOpen(newValue)\n      }, 200) // The fade-out animation is 200ms. Only rerender after it, for it not to loose the element.\n    } else {\n      setBlockMenuIsOpen(newValue)\n    }\n  }, [ setBlockMenuIsOpen ])\n\n  const setOpenBlockMenuRef = useRef(null)\n  const onArchiveToggle = useCallback(newArchivedValue => {\n    if (\n      typeof setOpenBlockMenuRef.current === 'function'\n      && typeof refetchData === 'function'\n    ) {\n      setOpenBlockMenuRef.current(false)\n      setTimeout(() => {\n        refetchData({ force: true })\n      }, 200) // The fade-out animation is 200ms. Only rerender after it, for it not to loose the element.\n    }\n  }, [ refetchData, setOpenBlockMenuRef ])\n\n  const actions = {\n    click: () => {\n      onClick(block)\n      // navigate(`/${block._id}/view`)\n    }\n  }\n\n  const rowContent = <>\n    <ViewerAuto\n      dragable={true}\n      size=\"line\"\n      block={block}\n      actions={actions}\n      style={{\n        flexGrow: '1',\n        width: '100%',\n      }}\n    />\n\n    <div className={classes.blockRowActions}>\n      <BlockMenu\n        onToogle={onBlockMenuToogle}\n        onArchivedToggle={onArchiveToggle}\n        setOpenBlockMenuRef={setOpenBlockMenuRef}\n        {...{\n          block,\n          createBlock,\n          // setType: saveType,\n        }}\n        trigger={props => (\n          <button\n            {...props}\n            className={`text hasIcon ${blockMenuIsOpen ? 'fakeHover' : ''}`}\n            style={{\n              margin: '0',\n              padding: 'var(--basis) 0',\n              flexShrink: '0',\n            }}\n          >\n            <BlockMenuIcon className=\"icon\" />\n          </button>\n        )}\n      />\n    </div>\n  </>\n\n  const inset = ~~(nestingLevel * 25 + (isLeaf ? 24 : 0))\n\n  return <div\n    key={block._id}\n    style={{\n      display: 'flex',\n      alignItems: 'center',\n      flexDirection: 'row',\n      ...style,\n      marginLeft: inset,\n      minWidth: `calc(100% - ${(isLeaf ? 24 : 0)}px)`,\n      width: `calc(100% - ${inset}px)`,\n    }}\n    className={`${classes.blockRow} ${blockMenuIsOpen ? classes.fakeHover : ''}`}\n  >\n    {!isLeaf && (\n      <button\n        onClick={toggleOpen}\n        className=\"text hasIcon\"\n        style={{\n          margin: '0',\n          padding: 'var(--basis) 0',\n          flexShrink: '0',\n        }}\n      >\n        {\n          isOpen\n            ? <ExpandLessIcon style={{ verticalAlign: 'middle' }} />\n            : <ExpandMoreIcon style={{ verticalAlign: 'middle' }} />\n        }\n      </button>\n    )}\n    {rowContent}\n  </div>\n}\n\nfunction BlockTree({\n  createBlock = ()=>{},\n  onClick = ()=>{},\n  onGetRefetch = ()=>{},\n  types = ['page', 'person', 'action'],\n  archived = false,\n  scrollContainer = window,\n}) {\n  const outerTreeRef = React.useRef(null)\n  const innerTreeRef = React.useRef(null)\n  const treeRef = React.useRef(null)\n  const [outerHeight, setOuterHeight] = useState(minItemSize)\n  const [bottomMargin, setBottomMargin] = useState(0)\n  const [nodes, setNodes] = useState({})\n  const [openById, setOpenById] = useState({})\n  const [treeNodes, setTreeNodes] = useState([])\n  const prevFetchArguments = React.useRef({})\n\n\n\n  const { height: viewportHeight } = useViewportHeight()\n\n  const updateHeight = useCallback(() => {\n    if (innerTreeRef.current && outerTreeRef.current) {\n      const outerBounds = outerTreeRef.current.getBoundingClientRect()      \n      const maxHeight = viewportHeight - outerBounds.top\n\n      const innerBounds = innerTreeRef.current.getBoundingClientRect()\n      const fullHeight = innerBounds.height\n      if (typeof fullHeight === 'number' && !isNaN(fullHeight) && fullHeight > minItemSize) {\n        const newHeight = Math.min(maxHeight, fullHeight)\n        setOuterHeight(~~(newHeight))\n        setBottomMargin(~~(Math.max(fullHeight - newHeight, 0)))\n      }\n    }\n  }, [ viewportHeight, innerTreeRef, outerTreeRef, setOuterHeight, setBottomMargin ])\n\n  useScrollPosition(updateHeight, [ updateHeight ], null, false, 300, scrollContainer)\n\n  useEffect(() => {\n    updateHeight()\n  }, [ updateHeight ])\n\n  const updateTree = useCallback(nodes => {\n    if (nodes.length > 0) {\n      nodes = nodes.map(node => ({\n        ...node,\n        isOpen: openById[node._id] || false,\n      }))\n      const treeRoots = buildTree(JSON.parse(JSON.stringify(nodes)))\n      const flatTree = getFlatTree(treeRoots)\n      setTreeNodes(flatTree)\n    } else {\n      setTreeNodes([])\n    }\n    updateHeight()\n  }, [ setTreeNodes, updateHeight, openById ])\n\n  const loadBlocks = useLoadBlocks()\n  const refetchData = useCallback(options => {\n    const { force = false } = options || {}\n\n    if (\n      force === true\n      || nodes.length === 0\n      || prevFetchArguments.current.archived !== archived\n      || prevFetchArguments.current.types !== types\n    ) {\n      prevFetchArguments.current.types = types\n      prevFetchArguments.current.archived = archived\n      \n      loadBlocks({ types, archived })\n        .then(async loadedBlocks => {\n          const nodes = loadedBlocks\n          .map(block => ({\n            _id: block._id,\n            block,\n            children: [],\n            isOpen: false,\n          }))\n\n          if (nodes.length > 0) {\n            // TODO: This prevents from displaying empty trees.\n            setNodes(nodes)\n            updateTree(nodes)\n          }\n        })\n        .catch(error => console.error(error))\n    }\n  }, [ nodes, loadBlocks, types, archived, setNodes, updateTree ])\n\n  useEffect(() => {\n    refetchData()\n  }, [ refetchData ])\n\n  useEffect(() => {\n    onGetRefetch(refetchData)\n  }, [ onGetRefetch, refetchData ])\n\n\n\n  const toggleOpenById = useCallback((_id) => {\n    openById[_id] = !openById[_id]\n    setOpenById(openById)\n    updateTree(nodes)\n  }, [setOpenById, openById, updateTree, nodes])\n\n  const row = (props) => {\n    return <BlockRow\n      createBlock={createBlock}\n      onClick={onClick}\n      toggleOpenById={toggleOpenById}\n      refetchData={refetchData}\n      {...props}\n    />\n  }\n\n  return <div\n    style={{\n      height: outerHeight,\n      marginRight: '-12px',\n      marginLeft: '-12px',\n      marginBottom: bottomMargin,\n    }}\n    ref={outerTreeRef}\n  >\n    <AutoSizer disableWidth>\n      {({height}) => (\n        <FixedSizeList\n          itemData={treeNodes}\n          itemCount={treeNodes.length}\n          ref={treeRef}\n          innerRef={innerTreeRef}\n          // onScroll={updateHeight}\n          itemSize={minItemSize}\n          height={height}\n          width=\"100%\"\n          style={{\n            overflowY: 'hidden',\n            overflowX: 'auto',\n            // overflowX: 'hidden',\n          }}\n          itemKey={(index, data) => data[index]._id}\n        >\n          {row}\n        </FixedSizeList>\n      )}\n    </AutoSizer>\n  </div>\n}\n\nexport default BlockTree\n\n\n\n// const defaultButtonStyle = { fontFamily: 'Courier New' }\n\n// Tree component can work with any possible tree structure because it uses an\n// iterator function that the user provides. Structure, approach, and iterator\n// function below is just one of many possible variants.\n// const defaultTree = {\n//   name: 'Root #1',\n//   id: 'root-1',\n//   children: [\n//     {\n//       children: [\n//         {id: 'child-2', name: 'Child #2'},\n//         {id: 'child-3', name: 'Child #3'},\n//         {id: 'child-5', name: 'Child #3'},\n//         {id: 'child-6', name: 'Child #3'},\n//         {id: 'child-7', name: 'Child #3'},\n//         {id: 'child-8', name: 'Child #3'},\n//         {id: 'child-9', name: 'Child #3'},\n//         {id: 'child-10', name: 'Child #3'},\n//         {id: 'child-11', name: 'Child #3'},\n//       ],\n//       id: 'child-1',\n//       name: 'Child #1',\n//     },\n//   ],\n// }\n\n  /*\nasync function* treeWalker(refresh) {\n  const stack = []\n \n  // Remember all the necessary data of the first node in the stack.\n  stack.push({\n    nestingLevel: 0,\n    node: tree,\n  })\n \n  // Walk through the tree until we have no nodes available.\n  while (stack.length !== 0) {\n    const {\n      node: {children = [], id, name},\n      nestingLevel,\n    } = stack.pop()\n \n    // Here we are sending the information about the node to the Tree component\n    // and receive an information about the openness state from it. The\n    // `refresh` parameter tells us if the full update of the tree is requested;\n    // basing on it we decide to return the full node data or only the node\n    // id to update the nodes order.\n    const isOpened = yield refresh\n      ? {\n          id,\n          isLeaf: children.length === 0,\n          isOpenByDefault: false,\n          name,\n          nestingLevel,\n        }\n      : id\n \n    // Basing on the node openness state we are deciding if we need to render\n    // the child nodes (if they exist).\n    if (children.length !== 0 && isOpened) {\n      // Since it is a stack structure, we need to put nodes we want to render\n      // first to the end of the stack.\n      for (let i = children.length - 1; i >= 0; i--) {\n        stack.push({\n          nestingLevel: nestingLevel + 1,\n          node: children[i],\n        });\n      }\n    }\n  }\n}\n*/\n\n  /*\n  // Node component receives all the data we created in the `treeWalker` +\n  // internal openness state (`isOpen`), function to change internal openness\n  // state (`toggle`) and `style` parameter that should be added to the root div.\n  const Node = ({data: {isLeaf, name, nestingLevel}, isOpen, style, toggle}) => {\n\n    const toogleAndUpdate = () => {\n      toggle()\n      setTimeout(updateHeight, 100)\n    }\n\n    return <div\n      style={{\n        ...style,\n        alignItems: 'center',\n        display: 'flex',\n        marginLeft: nestingLevel * 30 + (isLeaf ? 48 : 0),\n      }}\n    >\n      {!isLeaf && (\n        <div>\n          <button\n            type=\"button\"\n            onClick={toogleAndUpdate}\n            style={defaultButtonStyle}\n          >\n            {isOpen ? '-' : '+'}\n          </button>\n        </div>\n      )}\n      <div>{name}</div>\n    </div>\n  }\n*/\n","import { useState, useCallback, useRef, useEffect } from 'react'\nimport classes from './SidebarContent.module.css'\n\nimport {\n  MenuList,\n  MenuItem,\n  ListItemIcon,\n  ListItemText,\n  Divider,\n} from '@mui/material'\n\nimport {\n  MenuOpen as MenuOpenIcon,\n  Replay as RequeryIcon,\n  Add as AddIcon,\n  FilterList as FilterListIcon,\n  Archive as ArchiveIcon,\n\n  Email as ContactIcon,\n  GitHub as SourceCodeIcon,\n  Login as LoginIcon,\n  Logout as LogoutIcon,\n\n  Help as HelpIcon,\n\n  // Search as SearchIcon,\n\n  InsertDriveFileSharp as PageIcon,\n  AutoAwesomeSharp as AutomationIcon,\n  // LinkSharp as RedirectIcon,\n  PersonSharp as PersonIcon,\n  // Crop75Sharp as ButtonIcon,\n  // TitleSharp as HeadlineIcon,\n  // NotesSharp as TextIcon,\n  // Remove as DividerIcon,\n  // EditSharp as EditIcon,\n} from '@mui/icons-material'\n\nimport useSaveBlock from '../hooks/useSaveBlock.js'\n\nimport { useNavigate, useMatch } from 'react-router-dom'\n\nimport { Localized } from '../fluent/Localized.js'\nimport useUser from '../hooks/useUser.js'\nimport { useSidebarContext } from './Sidebar.js'\nimport AddMenu from './edit/AddMenu.js'\nimport BlockTree from './BlockTree.js'\n\nimport PopoverMenu from './PopoverMenu.js'\n\nconst blockTypeIcons = {\n  page: <PageIcon />,\n  person: <PersonIcon />,\n  automation: <AutomationIcon />,\n}\n\nfunction debounce(func, wait, immediate) {\n  // Source: underscore.js\n\tvar timeout\n\treturn function() {\n\t\tvar context = this, args = arguments\n\t\tvar later = function() {\n\t\t\ttimeout = null\n\t\t\tif (!immediate) func.apply(context, args)\n\t\t}\n\t\tvar callNow = immediate && !timeout\n\t\tclearTimeout(timeout)\n\t\ttimeout = setTimeout(later, wait)\n\t\tif (callNow) func.apply(context, args)\n\t}\n}\n\nexport default function SidebarContent() {\n  const mounted = useRef(false)\n  useEffect(() => {\n    mounted.current = true\n    return () => {\n      mounted.current = false\n    }\n  }, [])\n\n  const [showBlockTree, setShowBlockTree] = useState(false)\n  var efficientSetShowBlockTree = useCallback(()=>{\n    if (mounted.current) {\n      debounce(() => {\n        if (mounted.current) {\n\t        setShowBlockTree(true)\n        }\n      }, 10)()\n    }\n  }, [ setShowBlockTree, mounted ])\n  useEffect(() => {\n    efficientSetShowBlockTree()\n  }, [ efficientSetShowBlockTree ])\n  \n  const { loggedIn } = useUser()\n  const { toggleSidebar } = useSidebarContext()\n\n  const matchesStartpage = useMatch('/')\n\n  const refetchRef = useRef(null)\n  const refetch = refetchRef.current\n  const saveRefetchFunction = newRefetchFunction => {\n    refetchRef.current = newRefetchFunction\n  }\n\n  const [types, setTypes] = useState({\n    page: true,\n    person: false,\n    // automation: true,\n  })\n  const filteredTypes = Object.entries(types)\n    .filter(([, value]) => value === true)\n    .map(([key, ]) => key)\n  \n  const [showArchived, setShowArchived] = useState(false)\n  function toggleShowArchived() {\n    setShowArchived(setShowArchived => !setShowArchived)\n  }\n\n  const saveBlock = useSaveBlock()\n  const navigate = useNavigate()\n\n  const createBlock = useCallback(newBlock => {\n    saveBlock(newBlock)\n      .then(gottenBlock => {\n        navigate(`/${gottenBlock._id}/edit`)\n      })\n      .catch(error => {\n        console.error(error)\n      })\n  }, [ saveBlock, navigate ])\n\n  const toggleType = useCallback(type2toggle => {\n    const newTypes = { ...types }\n    for (const type of Object.keys(newTypes)) {\n      if (type === type2toggle) {\n        newTypes[type] = true\n      } else {\n        newTypes[type] = false\n      }\n    }\n\n    setTypes(newTypes)\n    if (typeof refetch === 'function') {\n      refetch()\n    }\n  }, [ types, setTypes, refetch ])\n\n  const viewBlock = useCallback(block => {\n    navigate(`/${block._id}/view`)\n  }, [ navigate ])\n\n  const scrollContainerRef = useRef(null)\n\n  return <div ref={scrollContainerRef} className={classes.scrollContainer}>\n    <div className={classes.content}>\n    <header className={classes.header}>\n      <div className={classes.headerBar}>\n        {\n          matchesStartpage\n          ? <h1>Volt.Link</h1>\n          : <button onClick={toggleSidebar} className=\"text hasIcon\" style={{ margin: '0' }}>\n              <MenuOpenIcon className=\"icon\" />\n            </button>\n        }\n\n        <div>\n\n          <button className=\"text hasIcon\" onClick={() => refetch()}>\n            <RequeryIcon className=\"icon\" />\n            {/* <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}>Reload</span> */}\n          </button>\n\n          <PopoverMenu\n            trigger={triggerProps => (\n              <button className=\"text hasIcon\" {...triggerProps}>\n                <FilterListIcon className=\"icon\" />\n                {/* <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}>Filter</span> */}\n              </button>\n            )}\n          >\n            {/*\n              { value: 'page', icon: <PageIcon className=\"icon\"/>, title: getString('block_menu_type_label_plural_page') },\n              { value: 'person', icon: <PersonIcon className=\"icon\" />, title: getString('block_menu_type_label_plural_person') },\n              { value: 'automation', icon: <ActionIcon className=\"icon\" />, title: getString('block_menu_type_label_plural_automation') },\n            */}\n\n            <div style={{ marginTop: '8px' }}></div>\n\n            {\n              Object.keys(types)\n                .map(type => (\n                  <MenuItem\n                    className=\"roundMenuItem\"\n                    key={type}\n                    onClick={() => toggleType(type)}\n                    selected={filteredTypes.includes(type)}\n                  >\n                    <ListItemIcon>\n                      {blockTypeIcons[type]}\n                    </ListItemIcon>\n                    <ListItemText>\n                      <Localized id={'block_menu_type_label_plural_'+type} />\n                    </ListItemText>\n                  </MenuItem>\n                ))\n            }\n\n            <Divider style={{opacity: 0.2}} />\n\n            <MenuItem\n              className=\"roundMenuItem\"\n              onClick={toggleShowArchived}\n              selected={showArchived === true}\n            >\n              <ListItemIcon>\n                <ArchiveIcon className=\"icon\" />\n              </ListItemIcon>\n              <ListItemText>\n                <Localized id={showArchived ? 'filter_menu_showing_archiv' : 'filter_menu_show_archiv'} />\n              </ListItemText>\n            </MenuItem>\n\n          </PopoverMenu>\n\n          <AddMenu\n            trigger={triggerProps => (\n              <button className=\"default hasIcon\" {...triggerProps}>\n                <AddIcon className=\"icon\" />\n                {/* <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}>Add</span> */}\n              </button>\n            )}\n            createBlock={createBlock}\n          />\n        </div>\n      </div>\n    </header>\n\n      <MenuList style={{ maxWidth: '100%' }}>\n\n        {\n          loggedIn\n            ? <a href={`${window.domains.frontend}help`}>\n                <MenuItem className=\"roundMenuItem\">\n                  <ListItemIcon>\n                    <HelpIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={<Localized id=\"help_page\" />} />\n                </MenuItem>\n              </a>\n            : null\n        }\n\n        {\n          loggedIn\n            ? <a href={`${window.domains.backend}logout?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n                <MenuItem className=\"roundMenuItem\">\n                  <ListItemIcon>\n                    <LogoutIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={<Localized id=\"logout\" />} />\n                </MenuItem>\n              </a>\n            : <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n                <MenuItem className=\"roundMenuItem\">\n                  <ListItemIcon>\n                    <LoginIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={<Localized id=\"login\" />} />\n                </MenuItem>\n              </a>\n        }\n\n        <a href=\"mailto:thomas.rosen@volteuropa.org\">\n          <MenuItem className=\"roundMenuItem\">\n            <ListItemIcon>\n              <ContactIcon />\n            </ListItemIcon>\n            <ListItemText primary={<Localized id=\"contact\" />} />\n          </MenuItem>\n        </a>\n\n        <a href=\"https://github.com/voltbonn/edit.volt.link\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <MenuItem className=\"roundMenuItem\">\n            <ListItemIcon>\n              <SourceCodeIcon />\n            </ListItemIcon>\n            <ListItemText primary={<Localized id=\"source_code\" />} />\n          </MenuItem>\n        </a>\n\n      </MenuList>\n\n      <br/>\n      <Divider style={{ opacity: 0.2 }} />\n      <br/>\n\n      {\n        showBlockTree\n        ? <BlockTree\n            onClick={viewBlock}\n            createBlock={createBlock}\n            blockMenu={true}\n            onGetRefetch={saveRefetchFunction}\n            types={filteredTypes}\n            archived={showArchived}\n            scrollContainer={scrollContainerRef}\n          />\n        : null\n      }\n    </div>\n  </div>\n}\n","import React, {\n  useState,\n  useCallback,\n  createContext,\n  useContext,\n} from 'react'\n\nimport {\n  SwipeableDrawer,\n} from '@mui/material'\n\nimport { useMatch } from 'react-router-dom'\n\nimport useMediaQuery from '../hooks/useMediaQuery.js'\nimport SidebarContent from './SidebarContent.js'\n\nimport classes from './Sidebar.module.css'\n\nconst SidebarContext = createContext({})\n\nfunction useSidebarContext() {\n  return useContext(SidebarContext)\n}\n\nfunction SidebarProvider({ children }) {\n  const [open, setOpen] = useState(false)\n\n  const matchesStartpage = useMatch('/')\n  const realOpen = matchesStartpage ? false : open\n\n  const toggleSidebar = useCallback(() => {\n    setOpen(oldOpen => !oldOpen)\n  }, [ setOpen ])\n\n  return (\n    <SidebarContext.Provider value={{\n      open: realOpen,\n      setOpen,\n      toggleSidebar,\n    }}>\n      {children}\n    </SidebarContext.Provider>\n  )\n}\n\nconst sidebarWidth = 320\n\nfunction Sidebar() {\n  const { open, toggleSidebar } = useSidebarContext()\n\n  const iOS = (typeof navigator !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent))\n  const isDesktop = useMediaQuery('(min-width: 960px)')\n\n  if (open) {\n    return <SwipeableDrawer\n      variant={isDesktop ? 'permanent' : 'temporary'}\n      anchor=\"left\"\n      open={open}\n      onOpen={toggleSidebar}\n      onClose={toggleSidebar}\n      disableBackdropTransition={!iOS}\n      disableDiscovery={iOS}\n      sx={{\n        width: sidebarWidth,\n        flexShrink: 0,\n        [`& .MuiDrawer-paper`]: {\n          width: sidebarWidth,\n          boxSizing: 'border-box',\n          backgroundColor: 'var(--background-contrast)',\n          color: 'var(--on-background)',\n          border: 'none',\n        },\n      }}\n      PaperProps={{\n        sx: {\n          background: 'var(--background-contrast)',\n          color: 'var(--on-background)',\n        }\n      }}\n    >\n      <SidebarContent />\n    </SwipeableDrawer>\n  }\n\n  return null\n}\nfunction Main({ children }) {\n  const { open } = useSidebarContext()\n\n  return <main\n    className={`${classes.main} ${open ? classes.open : ''}`}\n    style={{\n      '--sidebarWidth': sidebarWidth+'px',\n    }}\n  >\n    {children}\n  </main>\n}\n\nexport {\n  SidebarContext,\n  useSidebarContext,\n  SidebarProvider,\n  SidebarContent,\n  Sidebar,\n  Main,\n}\n\n/*\n      <Drawer\n        variant={isDesktop ? 'permanent' : ''}\n        anchor=\"left\"\n        open={open}\n        sx={{\n          width: drawerWidth,\n          flexShrink: 0,\n          [`& .MuiDrawer-paper`]: {\n            width: drawerWidth,\n            boxSizing: 'border-box',\n            backgroundColor: 'var(--background)',\n            color: 'var(--on-background)',\n          },\n        }}\n        PaperProps={{\n          sx: {\n            background: 'var(--background-contrast)',\n            color: 'var(--on-background)',\n          }\n        }}\n      >\n        <Sidebar />\n      </Drawer>\n      */\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlock_Query } from '../graphql/queries'\n\nimport { useSnackbar } from 'notistack'\n\nfunction useLoadBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleLoadBlock = useCallback(_id => {\n    return new Promise(final_resolve => {\n    let snackbarKey = null\n\n    if (!_id || _id === '') {\n      final_resolve({\n        type: 'text',\n      })\n    } else {\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.query({\n          query: getBlock_Query,\n          variables: {\n            _id,\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string' || !data.block) {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              }\n            }else{\n              const loadedBlock = data.block\n              final_resolve(loadedBlock)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar('[could not load data] '+error.message, {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_loading'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n    }\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleLoadBlock\n}\n\nexport default useLoadBlock\n","import { useCallback } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\nimport { blockMatchesRoles_Query } from '../graphql/queries'\n\nexport default function useBlockMatchesRoles() {\n  const apollo_client = useApolloClient()\n\n  const handleLoadRoles = useCallback((_id, roles = []) => {\n    return new Promise(resolve => {\n      if (!_id || _id === '') {\n        resolve(false)\n      } else {\n        apollo_client.query({\n          query: blockMatchesRoles_Query,\n          variables: {\n            _id,\n            roles,\n          },\n        })\n          .then(async ({ data }) => {\n            if (data.hasOwnProperty('blockMatchesRoles')) {\n              resolve(data.blockMatchesRoles)\n            }else{\n              resolve(false)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve(false)\n          })\n      }\n    })\n  }, [ apollo_client ])\n\n  return handleLoadRoles\n}\n","import { useState, useCallback, useEffect } from 'react'\n\nimport classes from './Header.module.css'\n\nimport {\n  Menu as MenuIcon,\n  MoreHoriz as MoreHorizIcon,\n  Home as HomeIcon,\n} from '@mui/icons-material'\n\nimport { Link } from 'react-router-dom'\n\nimport { useSidebarContext } from './Sidebar.js'\nimport ViewerAuto from './view/ViewerAuto.js'\nimport PopoverMenu from './PopoverMenu.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getSiblingBlocks_Query, getParentBlocks_Query } from '../graphql/queries'\n\nexport default function Header({ title, block = {}, rightActions, notificationBanner }) {\n  const { open, toggleSidebar } = useSidebarContext()\n  const apollo_client = useApolloClient()\n\n  const blockId = block ? block._id : null\n\n  const [parentBlocks, setParentBlocks] = useState([])\n  const [siblingBlocks, setSiblingBlocks] = useState([])\n\n  const loadParentBlocks = useCallback(blockId => {\n    apollo_client.query({\n      query: getParentBlocks_Query,\n      variables: {\n        _id: blockId,\n      },\n    })\n      .then(async ({ data }) => {\n        if (typeof data.error === 'string' || !data.blocks) {\n          console.error(data.error)\n          setParentBlocks([])\n        }else{\n          setParentBlocks(data.blocks || [])\n        }\n      })\n      .catch(async error => {\n        console.error('error', error)\n        setParentBlocks([])\n      })\n  }, [apollo_client, setParentBlocks])\n\n  const loadSiblingBlocks = useCallback(blockId => {\n    apollo_client.query({\n      query: getSiblingBlocks_Query,\n      variables: {\n        _id: blockId,\n        types: ['page', 'person', 'action'],\n      },\n    })\n      .then(async ({ data }) => {\n        if (typeof data.error === 'string' || !data.blocks) {\n          console.error(data.error)\n          setSiblingBlocks([])\n        }else{\n          setSiblingBlocks(\n            (data.blocks || [])\n              .filter(block => block._id !== blockId)\n          )\n        }\n      })\n      .catch(async error => {\n        console.error('error', error)\n        setSiblingBlocks([])\n      })\n  }, [apollo_client, setSiblingBlocks])\n\n  useEffect(() => {\n    if (blockId) {\n      loadParentBlocks(blockId)\n      loadSiblingBlocks(blockId)\n    }\n  }, [blockId, loadParentBlocks, loadSiblingBlocks])\n\n  const leftActions = <>\n    {\n      !open\n      ? <button onClick={toggleSidebar} className=\"text hasIcon\" style={{ margin: '0' }}>\n          <MenuIcon className=\"icon\" />\n        </button>\n      : null\n    }\n\n    <div style={{ flexGrow: '1' }}>\n      <Link to=\"/\">\n        <button className=\"text\" style={{ margin: 'calc(-2 * var(--basis))' }}>\n          <HomeIcon style={{ verticalAlign: 'middle' }} />\n        </button>\n      </Link>\n      <span style={{ margin: 'var(--basis_x2)', opacity: 'var(--alpha)' }}>/</span>\n\n    {\n      blockId\n      && parentBlocks.length > 0\n        ? <>\n          <PopoverMenu\n            trigger={triggerProps => (\n              <button {...triggerProps} className=\"text\" style={{ margin: 'calc(-2 * var(--basis))' }}>\n                <MoreHorizIcon style={{ verticalAlign: 'middle' }} />\n              </button>\n            )}\n          >\n            <div style={{\n              padding: 'var(--basis_x2)',\n            }}>\n              {\n                parentBlocks\n                .map((block) => {\n                  return <ViewerAuto\n                    key={block._id}\n                    block={block}\n                    size=\"line\"\n                  />\n                })\n              }\n            </div>\n          </PopoverMenu>\n          <span style={{ margin: 'var(--basis_x2)', opacity: 'var(--alpha)' }}>/</span>\n        </>\n        : null\n    }\n\n    {\n      siblingBlocks.length > 0\n        ? <PopoverMenu\n            trigger={triggerProps => (\n              <button {...triggerProps} className=\"text\" style={{ margin: 'calc(-2 * var(--basis))' }}>\n                <span style={{ fontWeight: 'bold' }}>\n                  {title}\n                </span>\n              </button>\n            )}\n          >\n            <div style={{\n              padding: 'var(--basis_x2)',\n            }}>\n              {\n                siblingBlocks\n                .map((block) => {\n                  return <ViewerAuto\n                    key={block._id}\n                    block={block}\n                    size=\"line\"\n                  />\n                })\n              }\n            </div>\n          </PopoverMenu>\n        : <span style={{ fontWeight: 'bold' }}>\n            {title}\n          </span>\n    }\n    </div>\n  </>\n\n  return <header className={classes.header}>\n    <div className={classes.headerBar}>\n      {leftActions}\n      {rightActions}\n    </div>\n    {\n      !!notificationBanner\n        ? <div className={classes.notificationBanner}>{notificationBanner}</div>\n        : null\n    }\n  </header>\n}\n","import React, { useCallback, useRef, useState, useEffect } from 'react'\n\n// import hljs from 'highlight.js/lib/core'\n// import javascript from 'highlight.js/lib/languages/javascript'\n// // import 'highlight.js/styles/github.css'\n// import '../../highlightjs-volt-theme.css'\n\nimport {\n  offset as getCaretOffset,\n  getOffset,\n} from 'caret-pos'\n\nimport classes from './HtmlInput.module.css'\n\n// hljs.registerLanguage('javascript', javascript)\n\nfunction stripHtml(html){\n  // source: https://ourcodeworld.com/articles/read/376/how-to-strip-html-from-a-string-extract-only-text-content-in-javascript\n  // Create a new div element\n  var temporalDivElement = document.createElement(\"div\");\n  // Set the HTML content with the providen\n  temporalDivElement.innerHTML = html;\n  // Retrieve the text property of the element (cross-browser support)\n  return temporalDivElement.textContent || temporalDivElement.innerText || \"\";\n}\n\nfunction getRangeLengthWithLinebreaks(element){\n  element.normalize()\n\n  if (!window.getSelection) {\n    return 0;\n  }\n\n  const selection = window.getSelection()\n  const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n  if (!range) {\n    return 0;\n  }\n\n  const clonedRange = range.cloneRange()\n  clonedRange.selectNodeContents(element)\n  clonedRange.setEnd(range.endContainer, range.endOffset)\n  const content = clonedRange.cloneContents()\n\n  let rangeLength = 0\n  for (const node of content.childNodes) {\n    if (node.nodeType === 3) { // node type = 3 is a text node\n      rangeLength += node.textContent.length\n    } else if (node.nodeType === 1 && node.nodeName === 'BR') { // node type = 1 is an element node\n      rangeLength += 1\n    }\n  }\n\n  clonedRange.detach()\n\n  return rangeLength\n}\n\nfunction getInLineRangeLength(element, whichLine){\n  element.normalize()\n\n  if (!window.getSelection) {\n    return 0;\n  }\n\n  const selection = window.getSelection()\n  const range = selection.rangeCount > 0 ? selection.getRangeAt(0) : null;\n\n  if (!range) {\n    return 0;\n  }\n\n  const clonedRange = range.cloneRange()\n  clonedRange.selectNodeContents(element)\n  clonedRange.setEnd(range.endContainer, range.endOffset)\n  const content = clonedRange.cloneContents()\n\n  let rangeLength = 0\n  if (content.childNodes.length > 0) {\n    if (whichLine === 'first') {\n      if (content.childNodes[0].nodeType === 3) {\n        rangeLength = content.childNodes[0].length\n      } else {\n        rangeLength = 0\n      }\n    } else if (whichLine === 'last') {\n      if (content.childNodes[content.childNodes.length-1].nodeType === 3) {\n        rangeLength = content.childNodes[content.childNodes.length-1].length\n      } else {\n        if (content.childNodes.length > 1) {\n          if (content.childNodes[content.childNodes.length-2].nodeType === 3) {\n            rangeLength = content.childNodes[content.childNodes.length-2].length\n          } else {\n            rangeLength = 0\n          }\n        } else {\n          rangeLength = 0\n        }\n      }\n    }\n  }\n\n  clonedRange.detach()\n\n  return rangeLength\n}\n\nfunction getCaretPosition(element){\n  // get element height without padding and border\n  const cs = getComputedStyle(element)\n  const paddingY = parseFloat(cs.paddingTop) + parseFloat(cs.paddingBottom)\n  const borderY = parseFloat(cs.borderTopWidth) + parseFloat(cs.borderBottomWidth)\n  const elementHeight = element.offsetHeight - paddingY - borderY\n\n  // get caret position\n  const offset = getOffset(element)\n  const caretOffset = getCaretOffset(element)\n  caretOffset.top = caretOffset.top - offset.top\n  caretOffset.left = caretOffset.left - offset.left\n\n  // check if caret is in the first line\n  let inFirstLine = caretOffset.top < caretOffset.height\n\n  // check if caret is in the last line\n  let inLastLine = elementHeight - caretOffset.top < caretOffset.height\n\n  // define caret position from start of text\n  const caretPositionFromStart = getRangeLengthWithLinebreaks(element)\n\n  // calc caret position from end of text\n  let textLength = element.innerText.length || 0\n  if (textLength < 0) {\n    textLength = 0\n  }\n  const caretPositionFromEnd = textLength - caretPositionFromStart\n\n  return {\n    inFirstLine,\n    inLastLine,\n    left: caretOffset.left,\n    top: caretOffset.top,\n    height: caretOffset.height,\n    positionFromLineStart: getInLineRangeLength(element, (inFirstLine ? 'first' : 'last')),\n    positionFromStart: caretPositionFromStart,\n    positionFromEnd: caretPositionFromEnd,\n  }\n}\n\nfunction HtmlInput({\n  type = 'text',\n  defaultValue = '',\n  children,\n  className,\n  onChange,\n  onBlur,\n  onError,\n  linebreaks,\n  style,\n  placeholder = '',\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n\n  ...props\n}) {\n  const inputRef = useRef(null)\n  const [text, setText] = useState('')\n  const [fakeDefaultValue, setFakeDefaultValue] = useState({ __html: '' })\n\n  const updateText = useCallback(defaultValue => {\n\n    let newHtmlValue = stripHtml(defaultValue)\n\n    // if (type === 'code') {\n    //   // const html = hljs.highlightAuto(newHtmlValue, { ignoreIllegals: false })\n    //   const html = hljs.highlight(newHtmlValue, { language: 'javascript', ignoreIllegals: false })\n    //   newHtmlValue = html.value\n    // // } else {\n    // //   newHtmlValue = newHtmlValue\n    // //     // .replace(/\\t/g, '&emsp;')\n    // //     .replace(/</g, '&lt;')\n    // //     .replace(/>/g, '&gt;')\n    // //     // .replace(/\\n/g, '<br />')\n    // }\n\n    if (fakeDefaultValue.__html !== newHtmlValue) {\n      return setFakeDefaultValue({__html: newHtmlValue})\n    }\n\n    setText(defaultValue)\n  }, [\n    // type,\n    fakeDefaultValue,\n    setText,\n    setFakeDefaultValue,\n  ])\n\n  useEffect(() => {\n    if (text !== defaultValue) {\n      updateText(defaultValue)\n    }\n  }, [\n    text,\n    defaultValue,\n    updateText,\n  ])\n\n  const handleTextChange = useCallback((event) => {\n    let value = event.target.innerHTML || ''\n    // .replace(/&emsp;/g, '\\t')\n    // .replace(/&lt;/g, '<')\n    // .replace(/&gt;/g, '>')\n\n    if (linebreaks === false) {\n      value = value.replace(/<\\/? ?br ?\\/?>/g, ' ')\n    } else {\n      value = value.replace(/<\\/? ?br ?\\/?>/g, '\\n')\n    }\n\n    value = value.trim()\n    setText(value)\n\n    if (onChange) {\n      onChange(value)\n    }\n  }, [onChange, setText, linebreaks])\n\n  const handleTextBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(text)\n    }\n  }, [onBlur, text])\n\n  const keyDownHandler = useCallback(event => {\n    if (event.key === 'Enter' && event.shiftKey === true) {\n      // source: StackOverflow (https://stackoverflow.com/a/61237402)\n      if (linebreaks !== false) {\n        document.execCommand('insertLineBreak')\n      }\n      event.preventDefault()\n    } else if (event.key === 'Tab') {\n      document.execCommand('insertText', false, '\\t')\n      event.preventDefault()\n    } else if (event.key === 'ArrowUp') {\n      if (onGoToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inFirstLine) {\n          onGoToPrevInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowLeft') {\n      if (onGoToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inFirstLine && caret.positionFromStart <= 0) {\n          caret.positionFromLineStart = -1\n          onGoToPrevInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowDown') {\n      if (onGoToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inLastLine) {\n          onGoToNextInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'ArrowRight') {\n      if (onGoToNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.inLastLine && caret.positionFromEnd <= 1) {\n          caret.positionFromLineStart = 0\n          onGoToNextInput({ caret })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Enter') {\n      if (type === 'code') {\n        if (linebreaks !== false) {\n          document.execCommand('insertLineBreak')\n        }\n        event.preventDefault()\n      } else {\n        if (onSplitText) {\n          const caret = getCaretPosition(inputRef.current)\n\n          const innerText = inputRef.current.innerText\n          const start = innerText.slice(0, caret.positionFromStart)\n          const end = innerText.slice(caret.positionFromStart)\n\n          onSplitText({\n            texts: [start, end],\n          })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Backspace') {\n      if (onMergeToPrevInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.positionFromStart === 0 && caret.inFirstLine) {\n          onMergeToPrevInput({\n            caret,\n            text: inputRef.current.innerText,\n          })\n          event.preventDefault()\n        }\n      }\n    } else if (event.key === 'Delete') {\n      if (onMergeFromNextInput) {\n        const caret = getCaretPosition(inputRef.current)\n        if (caret.positionFromEnd === 0 && caret.inLastLine) {\n          onMergeFromNextInput({\n            caret,\n            text: inputRef.current.innerText,\n          })\n          event.preventDefault()\n        }\n      }\n    }\n  }, [\n    inputRef,\n    linebreaks,\n    onGoToPrevInput,\n    onGoToNextInput,\n    onSplitText,\n    onMergeToPrevInput,\n    onMergeFromNextInput,\n    type,\n  ])\n\n  useEffect(() => {\n    if (onInputRef) {\n      onInputRef(inputRef)\n    }\n  }, [onInputRef, inputRef])\n\n  const handlePaste = useCallback(event => {\n    // only accept plain text\n\n    // cancel paste\n    event.preventDefault()\n\n    // get text representation of clipboard\n    let text = (event.originalEvent || event).clipboardData.getData('text/plain')\n\n    if (linebreaks === false) {\n      text = text.replace(/\\n/g, ' ')\n    }\n\n    // insert text manually\n    document.execCommand('insertText', false, text)\n  }, [linebreaks])\n\n  // const highlighted = hljs.highlightAuto(text, { ignoreIllegals: true })\n  // language\n  //   ? hljs.highlight(language, content)\n  //   : hljs.highlightAuto(content)\n\n  return <>\n  <div\n    ref={inputRef}\n    onKeyDown={keyDownHandler}\n    onInput={handleTextChange}\n    onBlur={handleTextBlur}\n    onPaste={handlePaste}\n    className={`${classes.rebuild_textarea} ${text.length === 0 ? classes.show_placeholder : ''} ${className}`}\n    contentEditable={true}\n    dangerouslySetInnerHTML={fakeDefaultValue}\n    style={style}\n    placeholder={placeholder}\n  />\n    {/* <pre className=\"hljs\">\n      <code dangerouslySetInnerHTML={{ __html: highlighted.value }} />\n    </pre> */}\n  </>\n}\n\nexport default HtmlInput\n","import React, { useEffect, useState, useCallback } from 'react'\n\nimport {\n  Modal,\n} from '@mui/material'\nimport {\n  QrCodeSharp as QrCodeIcon,\n  AssessmentSharp as AssessmentIcon,\n  ContentCopySharp as CopyIcon,\n} from '@mui/icons-material'\n\nimport { Localized } from '../../fluent/Localized.js' // useLocalization\n\nimport classes from './SharingEditor.module.css'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction fallbackCopyTextToClipboard(text) {\n  // Source: https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\n  var textArea = document.createElement(\"textarea\");\n  textArea.value = text;\n\n  // Avoid scrolling to bottom\n  textArea.style.top = \"0\";\n  textArea.style.left = \"0\";\n  textArea.style.position = \"fixed\";\n\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n\n  try {\n    var successful = document.execCommand('copy');\n    var msg = successful ? 'successful' : 'unsuccessful';\n    console.info('Fallback: Copying text command was ' + msg);\n  } catch (err) {\n    console.error('Fallback: Oops, unable to copy', err);\n  }\n\n  document.body.removeChild(textArea);\n}\n\nfunction copyTextToClipboard(text) {\n  // Source: https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\n  if (!navigator.clipboard) {\n    fallbackCopyTextToClipboard(text);\n    return;\n  }\n  navigator.clipboard.writeText(text).then(function() {\n    console.info('Async: Copying to clipboard was successful!');\n  }, function(err) {\n    console.error('Async: Could not copy text: ', err);\n  });\n}\n\nfunction SharingEditor({\n  defaultBlock = {},\n  open = false,\n  onChange,\n  onClose,\n}) {\n  const [ path, setPath ] = useState('')\n\n  useEffect(() => {\n    const properties = defaultBlock.properties || {}\n    const initialPath = (properties.trigger || {}).path || ''\n\n    setPath(initialPath)\n  }, [ defaultBlock, setPath ])\n\n  const savePath = useCallback(newPath => {\n    const newProperties = {...(defaultBlock.properties || {})}\n\n    if (newPath === '') {\n      if (newProperties.hasOwnProperty('trigger')) {\n        delete newProperties.trigger\n      }\n      if (newProperties.hasOwnProperty('action')) {\n        delete newProperties.action\n      }\n    } else {\n      newProperties.trigger = {\n\t\t  \ttype: 'path',\n\t\t  \tpath: newPath,\n\t\t  }\n\t\t  newProperties.action = {\n\t\t  \ttype: 'render_block',\n\t\t  }\n    }\n\n    setPath(newPath)\n    onChange(newProperties)\n  }, [\n    defaultBlock,\n    onChange,\n    setPath,\n  ])\n\n  const viewStatistics = () => {\n    const a = document.createElement('a')\n    a.href = `https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F${path}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  const gotoQrcodePage = () => {\n    const a = document.createElement('a')\n    a.href = `https://qrcode.volt.link/?c=volt.link/${path}`\n    a.target = '_blank'\n    a.rel = 'noreferrer'\n    a.click()\n  }\n\n  const copyUrl = () => {\n    copyTextToClipboard(`https://volt.link/${path}`)\n  }\n\n  if (!open) {\n    return null\n  }\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      hideBackdrop={true}\n    >\n      <>\n        <div className={classes.backdrop} onClick={onClose}></div>\n\n        <div className={classes.dialog}>\n\n            <h1 style={{ margin: '0 0 var(--basis_x4) 0' }}>Share the link</h1>\n            {/* <p>Enter @volteuropa.org addresses to give editing rights.<br/>Groups addresses are not supported.</p> */}\n\n            {/* <hr style={{ opacity: 0.2 }} /> */}\n\n            <div className={classes.inputWrapper}>\n             <span style={{ paddingRight: 'var(--basis)' }}>volt.link/</span>\n             <HtmlInput\n                defaultValue={path}\n                onBlur={savePath}\n                linebreak={false}\n                className={classes.input}\n                style={{ margin: '0' }}\n              />\n            </div>\n\n            <hr style={{ opacity: 0.2 }} />\n\n            <div className={classes.actions}>\n              {\n                path !== ''\n                ? <div>\n                    <button className=\"text hasIcon\" onClick={gotoQrcodePage} style={{ marginInlineStart: '0' }}>\n                      <QrCodeIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_qrcode\" /></span>\n                    </button>\n                    <button className=\"text hasIcon\" onClick={viewStatistics}>\n                      <AssessmentIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_statistics\" /></span>\n                    </button>\n                    <button className=\"text hasIcon\" onClick={copyUrl}>\n                      <CopyIcon className=\"icon\" />\n                      <span className=\"hideOnSmallScreen\"><Localized id=\"sharing_copy_url\" /></span>\n                    </button>\n                  </div>\n                : <div></div>\n              }\n\n              <button onClick={onClose} className=\"green\" style={{ marginInlineEnd: '0' }}>Done</button>\n            </div>\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nexport default SharingEditor\n","import { useState } from 'react'\n\nimport { Localized } from '../../fluent/Localized.js'\nimport classes from './FancyInput.module.css'\n\nfunction FancyInput({ children, className, style, ...props }) {\n  const [error, setError] = useState('')\n\n  return <div\n    className={className}\n    style={style}\n  >\n    {children({ setError })}\n    {error ? <div className={classes.error}><Localized id={'error_'+error} /></div> : null}\n  </div>\n}\n\nexport default FancyInput\n","import { useCallback } from 'react'\n\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui // is surrounded by start and end tags\nconst emails_regex = /((?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?))/gui // is surrounded by a group\n\nfunction EmailInput({ multiple = false, onChange, onError, ...props }) {\n  const handleTextChange = useCallback((event) => {\n    if (onChange || onError) {\n      let value = event.target.value || ''\n      let isSubmittable = false\n      let error = ''\n\n      if (value !== '') {\n        if (multiple === true) {\n          const emails = value.match(emails_regex)\n          if (emails) {\n            value = emails\n            isSubmittable = true\n          } else {\n            error = 'Invalid email(s) format'\n          }\n        } else {\n          if (value.match(email_regex)) {\n            isSubmittable = true\n          } else {\n            error = 'invalid_email'\n          }\n        }\n      }\n\n      if (onChange) {\n        if (isSubmittable) {\n          onChange(value)\n        } else {\n          if (multiple === true) {\n            onChange([])\n          } else {\n            onChange('')\n          }\n        }\n      }\n\n      if (onError) {\n        onError(error)\n      }\n    }\n  }, [multiple, onChange, onError])\n\n  return <input\n    type=\"email\"\n    onChange={handleTextChange}\n    {...props}\n  />\n}\n\nexport default EmailInput\n","import React, { useState, useCallback, useEffect } from 'react'\n\nimport {\n  Modal,\n  Menu,\n  MenuItem,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n} from '@mui/material'\nimport {\n  KeyboardArrowDown as KeyboardArrowDownIcon,\n  Delete as DeleteIcon,\n  Close as CloseIcon,\n  Visibility as ViewerIcon,\n  Edit as EditorIcon,\n} from '@mui/icons-material'\nimport { v4 as uuidv4 } from 'uuid'\n\nimport { Localized, useLocalization } from '../../fluent/Localized.js'\n\nimport useUser from '../../hooks/useUser.js'\n\nimport FancyInput from './FancyInput.js'\nimport EmailInput from './EmailInput.js'\n\nimport classes from './PermissionsEditor.module.css'\n\nfunction addTmpIds(array) {\n  return [...array].map(obj => {\n    const obj_new = { ...obj }\n    obj_new.tmp_id = uuidv4()\n    return obj_new\n  })\n}\n\nfunction LocalizedRole({ role }) {\n  return <Localized id={'role-'+role} />\n}\n\nfunction RolesMenu({\n  role,\n  trigger,\n  changeRole,\n  removePermission,\n}){\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n  const handleOpen = event => {\n    setAnchorEl(event.currentTarget)\n  }\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return <>\n    {trigger({\n      onClick: handleOpen,\n    })}\n\n    <Menu\n      anchorEl={anchorEl}\n      open={open}\n      onClose={handleClose}\n      MenuListProps={{\n        style: {\n          maxWidth: '100%',\n        },\n      }}\n    >\n        {\n          role === 'editor'\n          ? <MenuItem onClick={() => changeRole('viewer')}>\n              <ListItemIcon>\n                <ViewerIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <LocalizedRole role=\"viewer\" />\n              </ListItemText>\n            </MenuItem>\n          : <MenuItem onClick={() => changeRole('editor')}>\n              <ListItemIcon>\n                <EditorIcon />\n              </ListItemIcon>\n              <ListItemText>\n                <LocalizedRole role=\"editor\" />\n              </ListItemText>\n            </MenuItem>\n        }\n\n        {\n          typeof removePermission === 'function'\n          ? <MenuItem onClick={removePermission}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              <ListItemText>\n                Remove\n              </ListItemText>\n            </MenuItem>\n          : null\n        }\n\n        <Divider style={{opacity: 0.2}} />\n\n        <MenuItem onClick={handleClose}>\n          <ListItemIcon>\n            <CloseIcon />\n          </ListItemIcon>\n          <ListItemText>\n            Close\n          </ListItemText>\n        </MenuItem>\n    </Menu>\n  </>\n}\n\nfunction sortPermissions(permissions) {\n  const owner = permissions\n    .filter(p => p.role === 'owner')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  const special = permissions\n    .filter(p => p.email === '@volteuropa.org' || p.email === '@public')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  const other = permissions\n    .filter(p => p.role !== 'owner' && p.email !== '@volteuropa.org' && p.email !== '@public')\n    .sort((a, b) => a.email.localeCompare(b.email))\n\n  return [\n    ...owner,\n    ...special,\n    ...other,\n  ]\n}\n\nfunction PermissionsEditor({\n  defaultPermissions,\n  open = false,\n  onChange,\n  onClose,\n}) {\n  const { getString } = useLocalization()\n\n  const user_data = useUser()\n  let user_email = ''\n  if (!!user_data) {\n    if (!!user_data.user) {\n      if (!!user_data.user.email) {\n        user_email = user_data.user.email\n      }\n    }\n  }\n\n  const [inputRepaintKey, setInputRepaintKey] = useState(0)\n  const [permissions, setPermissions] = useState([])\n  const [newEmails, setNewEmails] = useState([])\n  const [newRole, setNewRole] = useState('editor')\n\n  const setNewPermission = useCallback(newPermissions => {\n    newPermissions = addTmpIds(newPermissions || [])\n\n    if (user_email !== '') {\n      const doesNotHaveOwner = newPermissions.filter(permission => permission.role === 'owner').length === 0\n      if (doesNotHaveOwner) {\n        newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n      }\n    }\n    \n    setPermissions(newPermissions)\n  }, [ user_email, setPermissions ])\n\n  useEffect(() => {\n    if (Array.isArray(defaultPermissions)) {\n      setNewPermission(defaultPermissions)\n    } else {\n      setNewPermission([])\n    }\n  }, [ setNewPermission, defaultPermissions ])\n\n  const removePermission = useCallback(email => {\n    let newPermissions = permissions.filter(p => p.email !== email)\n    if (email === '@volteuropa.org') {\n      newPermissions = newPermissions.filter(p => p.email !== '@public')\n    }\n\n    const doesNotHaveOwner = newPermissions.filter(p => p.role === 'owner').length === 0\n    if (doesNotHaveOwner) {\n      newPermissions = newPermissions.filter(p => p.email !== user_email)\n      newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n    }\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, user_email, setPermissions, onChange])\n\n  const changeRole = useCallback((email, newRole) => {\n    const newPermissions = permissions.map(permission => {\n      if (permission.email === email) {\n        return {\n          ...permission,\n          role: newRole,\n        }\n      }\n      return permission\n    })\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, setPermissions, onChange])\n\n  const addPermissions = useCallback((newEmails, newRole) => {\n    if (newEmails.includes('@public')) {\n      newEmails.push('@volteuropa.org')\n    }\n    let newPermissions = permissions.filter(permission => !newEmails.includes(permission.email))\n    for (const newEmail of newEmails) {\n      newPermissions.unshift({ tmp_id: uuidv4(), email: newEmail, role: newRole })\n    }\n\n    const doesNotHaveOwner = newPermissions.filter(p => p.role === 'owner').length === 0\n    if (doesNotHaveOwner) {\n      newPermissions = newPermissions.filter(p => p.email !== user_email)\n      newPermissions.unshift({ tmp_id: uuidv4(), email: user_email, role: 'owner' })\n    }\n\n    setPermissions(newPermissions)\n    onChange(newPermissions)\n  }, [permissions, user_email, setPermissions, onChange])\n\n  const addNewPermissionFromInput = useCallback(() => {\n    addPermissions(newEmails, newRole)\n    setNewEmails([]) // reset the email-input | don't reset the role-input so it can be reused when entering multiple emails after each other // setNewRole('editor')\n    setInputRepaintKey(oldInputRepaintKey => oldInputRepaintKey + 1) // redraw the email-input\n  }, [ newEmails, newRole, addPermissions ])\n\n  if (!open) {\n    return null\n  }\n\n  const doesNotHaveVoltEuropa = permissions.filter(permission => permission.email === '@volteuropa.org').length === 0\n  const doesNotHavePublic = permissions.filter(permission => permission.email === '@public').length === 0\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      hideBackdrop={true}\n    >\n      <>\n        <div className={classes.backdrop} onClick={onClose}></div>\n\n        <div className={classes.dialogsWrapper}>\n\n        <div className={classes.dialog}>\n          <h1 style={{ margin: '0 0 var(--basis_x4) 0' }}>Give viewing and editing rights</h1>\n          <p>Enter @volteuropa.org addresses to give editing rights.<br/>Groups addresses are not supported.</p>\n          <div className={classes.inputWrapper} key={inputRepaintKey}>\n            <FancyInput className={classes.emailInput}>\n              {({ setError }) => (\n                <EmailInput\n                  multiple={true}\n                  onError={setError}\n                  defaultValue=\"\"\n                  onChange={setNewEmails}\n                  aria-label={getString('path_editor_permissions_edit_label')}\n                  placeholder={getString('path_editor_permissions_edit_placeholder')}\n                  style={{\n                    flexGrow: '1',\n                    // margin: '0',\n                    margin: 'var(--basis) 0',\n                    width: 'calc(100% - var(--basis_x2))',\n                  }}\n                />\n              )}\n            </FancyInput>\n            <RolesMenu\n              role={newRole}\n              changeRole={setNewRole}\n              trigger={triggerProps => <button className={classes.menuButton} {...triggerProps}><LocalizedRole role={newRole} /> <KeyboardArrowDownIcon/></button>}\n            />\n          </div>\n\n          {\n            newEmails.length > 0 && newEmails[0].length > 0\n            ? <>\n                <hr />\n\n                <div className={classes.actions}>\n                  <button onClick={addNewPermissionFromInput} className=\"green\" style={{margin: '0'}}>\n                    {\n                      newEmails.length > 1\n                      ? <>Add People</>\n                      : <>Add Person</>\n                    }\n                  </button>\n                </div>\n              </>\n            : <>\n                {\n                  doesNotHaveVoltEuropa || doesNotHavePublic\n                  ? <div style={{ marginTop: 'var(--basis_x2)' }}>\n                    Make visible for…\n                    {\n                      doesNotHaveVoltEuropa\n                      ? <button onClick={() => addPermissions(['@volteuropa.org'], 'viewer')}>Volt Europa</button>\n                      : null\n                    }\n                    {\n                      doesNotHavePublic\n                      ? <button onClick={() => addPermissions(['@public'], 'viewer')}>Public</button>\n                      : null\n                    }\n                  </div>\n                  : null\n                }\n\n                {\n                  permissions.length === 0\n                   ? null\n                   : <hr style={{ opacity: 0.2 }} />\n                }\n\n                {\n                  sortPermissions(permissions)\n                  .map(p => <div key={p.tmp_id} className={classes.permissionRow}>\n                    {\n                      p.email === '@public'\n                        ? <strong>Public</strong>\n                        : (\n                          p.email === '@volteuropa.org'\n                            ? <strong>Volt Europa</strong>\n                            : <span>{p.email}</span>\n                        )\n                    }\n\n                    {\n                      p.role === 'owner'\n                      ? <strong className={`type_button ${classes.ownerInfo}`}><LocalizedRole role={p.role} /></strong>\n                      : <RolesMenu\n                          role={p.role}\n                          removePermission={() => removePermission(p.email)}\n                          changeRole={(newRole) => changeRole(p.email, newRole)}\n                          trigger={triggerProps => <button className={classes.menuButton} {...triggerProps}><LocalizedRole role={p.role} /> <KeyboardArrowDownIcon/></button>}\n                        />\n                    }\n                  </div>)\n                }\n\n                <hr style={{ opacity: 0.2 }} />\n\n                <div className={classes.actions}>\n                  <button onClick={onClose} className=\"green\" style={{margin: '0'}}>Done</button>\n                </div>\n              </>\n          }\n        </div>\n\n        </div>\n      </>\n    </Modal>\n  )\n}\n\nexport default PermissionsEditor\n","import { useCallback, useState } from 'react'\n\nimport {\n  CheckBox as CheckBoxIcon,\n  CheckBoxOutlineBlank as CheckBoxOutlineBlankIcon,\n} from '@mui/icons-material'\n\nfunction CheckboxInput({\n  defaultValue = '',\n  onChange,\n  onBlur,\n  style,\n  className,\n  disabled = false,\n}) {\n  // TODO: make ARIA compatible\n\n  const [ checked, setChecked ] = useState(Boolean(defaultValue))\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      onChange(checked)\n    }\n    if (onBlur) {\n      onBlur(checked)\n    }\n  }, [ onChange, onBlur, checked ])\n\n  const checkBlock = useCallback(() => {\n    if (disabled === true) {\n      return\n    }\n    publishChanges()\n    setChecked(true)\n  }, [ disabled, publishChanges, setChecked ])\n\n  const uncheckBlock = useCallback(() => {\n    if (disabled === true) {\n      return\n    }\n    publishChanges()\n    setChecked(false)\n  }, [ disabled, publishChanges, setChecked ])\n\n  return <div\n    style={{\n      display: 'inline-block',\n      padding: 'var(--basis)',\n      cursor: disabled === true ? 'default' : 'pointer',\n      verticalAlign: 'middle',\n      ...style,\n    }}\n    className={className}\n  >\n    {\n      checked\n      ? <CheckBoxIcon onClick={uncheckBlock} />\n      : <CheckBoxOutlineBlankIcon onClick={checkBlock} />\n    }\n  </div>\n}\n\nexport default CheckboxInput\n","import { useState, useCallback, useEffect } from 'react'\n\nfunction MultiButton({ ariaLabel, items, defaultValue, onChange, style, className }) {\n  const [choosen, setChoosen] = useState()\n\n  useEffect(() => setChoosen(defaultValue), [defaultValue, setChoosen])\n\n  const handleClick = useCallback(event => {\n    const newValue = event.target.dataset.value\n    setChoosen(newValue)\n    if (onChange) {\n      onChange(newValue)\n    }\n  }, [setChoosen, onChange])\n\n  return <div\n    aria-label={ariaLabel}\n    className={'buttonRow ' + (className || '')}\n    style={{\n      display: 'inline-block',\n      ...style\n    }}\n  >\n    {\n      items.map(item => {\n        const value = item.value\n        const title = item.title\n        const icon = item.icon || null\n        return <button\n          key={value+'_'+title}\n          className={`default ${choosen === value ? 'choosen' : ''} ${!!icon ? 'hasIcon' : ''}`}\n          onClick={handleClick}\n          data-value={value}\n        >\n          <span style={{pointerEvents: 'none'}}>\n            {!!icon ? icon : null}\n            {!!title ? <span style={{verticalAlign: 'middle'}}>{title}</span> : null}\n          </span>\n        </button>\n      })\n    }\n  </div>\n}\n\nexport default MultiButton\n","import { useCallback, useState } from 'react'\n\nconst url_regex = /^([A-Z0-9+-.]+:(?:\\/\\/)?)[\\w\\u00C0-\\u00FF_.-]+(?:\\.[\\w\\u00C0-\\u00FF_.-]+)+[\\w\\u00C0-\\u00FF_~:/?#[\\]!%$&'()@*+,;=.-]+$/gui\nconst email_regex = /^(?:(?:[^<>()[\\]\\\\.,;:\\s@\"]+(?:\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(?:\".+\"))@(?:(?:\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3})|(?:(?:[a-zA-Z0-9-]+\\.)+[a-zA-Z]{2,})\\.?)$/gui\nconst is_email_not_url_regex = /^[^:/]+@.+$/gui\n\nfunction UrlInput({\n  defaultValue = '',\n  onChange,\n  onBlur,\n  onError,\n  placeholder = 'https://',\n  style,\n  className\n}) {\n  const [text, setText] = useState(defaultValue)\n\n  const handleTextChange = useCallback((event) => {\n    const value = event.target.value || ''\n    // let isSubmittable = false\n    let error = ''\n\n    if (value !== '') {\n      const schema_parts = value.split(':')\n      const schema = schema_parts.shift()\n      const after_schema = schema_parts.join(':')\n\n      if (schema === 'tel') {\n        // isSubmittable = true\n      } else if (schema === 'mailto' || value.match(is_email_not_url_regex)) {\n        if (after_schema.match(email_regex)) {\n          // isSubmittable = true\n        } else {\n          error = 'invalid_mailto_url'\n        }\n      } else {\n        if (value.match(url_regex)) {\n          // isSubmittable = true\n        } else {\n          error = 'invalid_url'\n        }\n      }\n    }\n\n    if (onChange) {\n      onChange(value)\n    }\n\n    if (onError) {\n      onError(error)\n    }\n\n    setText(value)\n  }, [onChange, onError])\n\n  const handleBlur = useCallback(() => {\n    if (onBlur) {\n      onBlur(text)\n    }\n  }, [onBlur, text])\n\n  return <input\n    type=\"url\"\n    onChange={handleTextChange}\n    onBlur={handleBlur}\n    defaultValue={defaultValue}\n    placeholder={placeholder}\n    style={style}\n    className={className}\n  />\n}\n\nexport default UrlInput\n","export default __webpack_public_path__ + \"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png\";","export default __webpack_public_path__ + \"static/media/Aktion.89c1bcdf.png\";","export default __webpack_public_path__ + \"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png\";","export default __webpack_public_path__ + \"static/media/Welcome-to-Volt.39e04eca.png\";","export default __webpack_public_path__ + \"static/media/portugal.682fc2e3.jpg\";","\nimport classes from './CoverphotoPicker.module.css'\n\n// import { getImageUrl } from '../../functions.js'\n\nimport Popover from '../Popover.js'\n\nimport { Paper } from '@mui/material'\nimport {\n  RectangleSharp as CoverphotoIcon,\n} from '@mui/icons-material'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\n\nimport MultiButton from '../MultiButton.js'\nimport FancyInput from './FancyInput.js'\nimport UrlInput from './UrlInput.js'\n\nimport plakatschlange_thumb from '../../images/coverphotos/thumbs/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.png'\nimport aktion_thumb from '../../images/coverphotos/thumbs/Aktion.png'\nimport volt_bonn_thumb from '../../images/coverphotos/thumbs/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.png'\nimport welcome_to_volt_thumb from '../../images/coverphotos/thumbs/Welcome-to-Volt.png'\nimport portugal_thumb from '../../images/coverphotos/thumbs/portugal.jpg'\n\n\nfunction CoverphotoPicker({ getString, coverphotoValue, iconValue, onChange, className = '', style = {} }) {\n  \n  const onUrlChange = newUrl => {\n    onChange({\n      type: 'url',\n      url: newUrl,\n    })\n  }\n\n  const isAbsoluteUrlRegexp = new RegExp('^(?:[a-z]+:)?//', 'i')\n\n  // if (\n  //   typeof coverphotoValue === 'object'\n  //   && coverphotoValue !== null\n  //   && !Array.isArray(coverphotoValue)\n  // ) {\n  //   if (coverphotoValue.type === 'url') {\n  //     return coverphotoValue.url || ''\n  //   }\n  // }\n\n  let coverphotoValueUrl = ''\n  let coverphotoIsSet = false\n  let iconIsSet = false\n\n  if (\n    typeof coverphotoValue === 'object'\n    && coverphotoValue !== null\n    && !Array.isArray(coverphotoValue)\n  ) {\n    if (\n      coverphotoValue.type === 'url'\n      && typeof coverphotoValue.url === 'string'\n      && isAbsoluteUrlRegexp.test(coverphotoValue.url)\n    ) {\n      coverphotoIsSet = true\n      coverphotoValueUrl = coverphotoValue.url || ''\n    }\n  }\n\n  if (\n    typeof iconValue === 'object'\n    && iconValue !== null\n    && !Array.isArray(iconValue)\n  ) {\n    if (\n      iconValue.type === 'url'\n      && typeof iconValue.url === 'string'\n      && isAbsoluteUrlRegexp.test(iconValue.url)\n    ) {\n      iconIsSet = true\n    }\n  }\n\n  return <div\n    className={`\n      ${classes.root}\n      ${coverphotoIsSet ? classes.coverphotoIsSet : classes.coverphotoIsNotSet}\n      ${iconIsSet ? classes.iconIsSet : classes.iconIsNotSet}\n      ${className}\n    `}\n    style={style}\n  >\n    <Popover\n      trigger={(triggerProps) => (\n        <div\n          className={classes.coverphoto}\n          style={{\n            backgroundImage: coverphotoIsSet ? `url(${window.domains.backend}download_url?f=jpg&w=1400&h=400&url=${encodeURIComponent(coverphotoValue.url)})` : '',\n          }}\n        >\n          <div className={classes.button_wrapper}>\n            <button {...triggerProps} className={`text hasIcon ${classes.changeCoverphotoButton}`}>\n              <CoverphotoIcon className=\"icon\" />\n              <span style={{ marginInlineStart: 'var(--basis_x2)', verticalAlign: 'middle'}}>Set Coverphoto</span>\n            </button>\n          </div>\n        </div>\n      )}\n    >\n      {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 'calc(calc(100vw - 32px) - var(--basis_x8))',\n            maxHeight: 'calc(calc(100vh - 32px) - var(--basis_x8))',\n            overflow: 'auto',\n            padding: 'var(--basis_x4)',\n            background: 'var(--background-contrast)',\n            color: 'var(--on-background)',\n          }}\n          elevation={8}\n        >\n          <h3 style={{ marginTop: '0' }}><Localized id=\"path_editor_coverphoto_label\" /></h3>\n\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n            <Localized id=\"path_editor_coverphoto_info\" />\n          </em>\n\n          <FancyInput>\n            {({ setError }) => (\n              <UrlInput\n                onError={setError}\n                onChange={onUrlChange}\n                defaultValue={coverphotoValueUrl}\n                style={{\n                  marginRight: '0',\n                  marginLeft: '0',\n                  width: '100%'\n                }}\n              />\n            )}\n          </FancyInput>\n\n          <MultiButton\n            onChange={onUrlChange}\n            ariaLabel={getString('path_editor_coverphoto_label')}\n            defaultValue={coverphotoValueUrl}\n            items={[\n              {\n                value: '',\n                title: getString('path_editor_no_coverphoto'),\n              },\n              ...[\n                {\n                  value: 'https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg',\n                  icon: volt_bonn_thumb,\n                },\n                {\n                  value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg',\n                  icon: welcome_to_volt_thumb,\n                },\n                {\n                  value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg',\n                  icon: plakatschlange_thumb,\n                },\n                {\n                  value: 'https://assets.volteuropa.org/2021-11/portugal.jpg',\n                  icon: portugal_thumb,\n                },\n                {\n                  value: 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg',\n                  icon: aktion_thumb,\n                },\n                // 'https://www.volteuropa.org/stripes/hero-desktop-green.jpg',\n                // 'https://www.volteuropa.org/stripes/hero-desktop-red.jpg',\n                // 'https://www.volteuropa.org/stripes/hero-desktop-blue.jpg',\n                // 'https://www.volteuropa.org/stripes/hero-desktop-yellow.jpg',\n                // 'https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Colours-Background-Big.jpeg',\n                // 'https://www.volteuropa.org/stripes/intermediate-green.jpg',\n                // 'https://www.volteuropa.org/stripes/intermediate-red.jpg',\n                // 'https://www.volteuropa.org/stripes/intermediate-blue.jpg',\n                // 'https://www.volteuropa.org/stripes/intermediate-yellow.jpg',\n                // 'https://www.volteuropa.org/og-default.png',\n                // 'https://www.volteuropa.org/hero-default.jpg',\n              ]\n              .map(({value = '', icon = ''}) => ({\n                value,\n                icon: <img alt=\"\" src={icon} className=\"icon image\" />\n              }))\n            ]}\n          />\n\n          <hr />\n\n          <button className=\"text\" onClick={closePopover} style={{ margin: 0 }}>\n            Close\n          </button>\n        </Paper>\n      )}\n    </Popover>\n  </div>\n}\n\nexport default withLocalization(CoverphotoPicker)\n","\nimport classes from './IconPicker.module.css'\n\nimport Popover from '../Popover.js'\n\nimport { Paper } from '@mui/material'\nimport {\n  CircleSharp as IconIcon,\n} from '@mui/icons-material'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\n\nimport FancyInput from './FancyInput.js'\nimport UrlInput from './UrlInput.js'\n\nfunction IconPicker({ coverphotoValue, iconValue, onChange, className, style }) {\n\n  const onUrlChange = newUrl => {\n    onChange({\n      type: 'url',\n      url: newUrl,\n    })\n  }\n\n  const isAbsoluteUrlRegexp = new RegExp('^(?:[a-z]+:)?//', 'i')\n\n  let iconValueUrl = ''\n  let coverphotoIsSet = false\n  let iconIsSet = false\n\n  if (\n    typeof coverphotoValue === 'object'\n    && coverphotoValue !== null\n    && !Array.isArray(coverphotoValue)\n  ) {\n    if (\n      coverphotoValue.type === 'url'\n      && typeof coverphotoValue.url === 'string'\n      && isAbsoluteUrlRegexp.test(coverphotoValue.url)\n    ) {\n      coverphotoIsSet = true\n    }\n  }\n\n  if (\n    typeof iconValue === 'object'\n    && iconValue !== null\n    && !Array.isArray(iconValue)\n  ) {\n    if (\n      iconValue.type === 'url'\n      && typeof iconValue.url === 'string'\n      && isAbsoluteUrlRegexp.test(iconValue.url)\n    ) {\n      iconIsSet = true\n      iconValueUrl = iconValue.url || ''\n    }\n  }\n\n  return <div\n    className={`\n      ${classes.root}\n      ${iconIsSet ? classes.iconIsSet : classes.iconIsNotSet}\n      ${coverphotoIsSet ? classes.coverphotoIsSet : classes.coverphotoIsNotSet}\n      ${className}\n    `}\n    style={style}\n  >\n    <Popover\n      trigger={(triggerProps) => (<div className={classes.iconWrapper}>\n        <div\n          className={`${classes.icon} ${!iconIsSet ? classes.no_image : ''}`}\n          style={{\n            backgroundImage: iconIsSet ? `url(${window.domains.backend}download_url?f=jpg&w=400&h=400&url=${encodeURIComponent(iconValueUrl)})` : '',\n          }}\n        ></div>\n        <button {...triggerProps} className={`text hasIcon ${classes.changeIconButton}`}>\n          <IconIcon className=\"icon\" />\n          <span style={{ marginInlineStart: 'var(--basis_x2)', verticalAlign: 'middle'}}>Set Icon</span>\n        </button>\n      </div>)}\n    >\n      {({closePopover, ...popoverProps}) => (\n        <Paper\n          {...popoverProps}\n          sx={{\n            maxWidth: 'calc(calc(100vw - 32px) - var(--basis_x8))',\n            maxHeight: 'calc(calc(100vh - 32px) - var(--basis_x8))',\n            overflow: 'auto',\n            padding: 'var(--basis_x4)',\n            background: 'var(--background-contrast)',\n            color: 'var(--on-background)',\n          }}\n          elevation={8}\n        >\n          <h3 style={{ marginTop: '0' }}><Localized id=\"path_editor_icon_label\" /></h3>\n\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}>\n            <Localized id=\"path_editor_icon_info\" />\n          </em>\n\n          <FancyInput>\n            {({ setError }) => (\n              <UrlInput\n                onError={setError}\n                onBlur={onUrlChange}\n                defaultValue={iconValueUrl}\n                style={{\n                  marginRight: '0',\n                  marginLeft: '0',\n                  width: '100%'\n                }}\n              />\n            )}\n          </FancyInput>\n\n          <hr />\n\n          <button className=\"text\" onClick={closePopover} style={{ margin: 0 }}>\n            Close\n          </button>\n        </Paper>\n      )}\n    </Popover>\n  </div>\n}\n\nexport default withLocalization(IconPicker)\n","import { useState, useCallback, useEffect } from 'react'\n\n// import FancyInput from './FancyInput.js'\n// import UrlInput from './UrlInput.js'\nimport HtmlInput from './HtmlInput.js'\n\nimport { useLocalization } from '../../fluent/Localized.js'\n\nfunction TriggerInput({\n  defaultValue,\n  className,\n  style,\n  onChange,\n}) {\n  const { getString } = useLocalization()\n\n  const [properties, setProperties] = useState({})\n\n  useEffect(() => {\n    setProperties(defaultValue)\n  }, [\n    defaultValue,\n    setProperties,\n  ])\n\n  const updateProperty = useCallback((propertyKey, newPropertyValue) => {\n    const propertyTypes = {\n      type: 'string',\n      path: 'string',\n      url: 'string',\n      cron: 'string',\n      blockId: 'string',\n    }\n\n    const newProperties = { ...properties }\n\n    if (propertyTypes.hasOwnProperty(propertyKey)) {\n      switch (propertyTypes[propertyKey]) {\n        case 'array':\n          if (newPropertyValue.length > 0) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'string':\n          if (newPropertyValue !== '') {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'boolean':\n          if (newPropertyValue === true) {\n            newProperties[propertyKey] = true\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'object':\n          if (\n            typeof newPropertyValue === 'object'\n            && newPropertyValue !== null\n            && Object.keys(newPropertyValue).length > 0\n          ) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        default:\n          newProperties[propertyKey] = newPropertyValue\n      }\n\n      if (JSON.stringify(newProperties) !== JSON.stringify(properties)) {\n        setProperties(newProperties)\n        if (onChange) {\n          onChange(newProperties)\n        }\n      }\n    }\n  }, [\n    properties,\n    setProperties,\n    onChange,\n  ])\n\n  const type = properties.type || ''\n\n  let morePropsInput = null\n  if (type === 'click') {\n    morePropsInput = null\n  } else if (type === 'path') {\n    morePropsInput = <>\n      <HtmlInput\n        placeholder={getString('trigger_input_path_placeholder')}\n        defaultValue={properties.path}\n        onBlur={newValue => updateProperty('path', newValue)}\n        linebreak={false}\n        style={{\n          flexGrow: '1',\n          margin: '0',\n          minWidth: '300px',\n        }}\n        // className=\"show_border_on_active\"\n      />\n    </>\n  // } else if (type === 'cron') {\n  //   morePropsInput = <>cron: String</>\n  // } else if (type === 'block_change') {\n  //   morePropsInput = <>blockId: ID</>\n  }\n\n  return <div\n    className={className}\n    style={{\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'flex-start',\n      maxWidth: '100%',\n      flexWrap: 'wrap',\n      gap: 'var(--basis)',\n      ...style\n    }}\n  >\n    <select\n      key={properties.type}\n      onChange={event => updateProperty('type', event.target.value)}\n      defaultValue={properties.type || ''}\n      style={{\n        margin: '0',\n      }}\n    >\n      <option value=\"\">No Trigger</option>\n      <option value=\"path\">Path</option>\n      <option value=\"click\">Click</option>\n      {/* <option value=\"cron\">Cron</option> */}\n      {/* <option value=\"block_change\">Block Change</option> */}\n    </select>\n\n    {morePropsInput}\n  </div>\n}\n\nexport default TriggerInput\n","import { useState, useCallback, useEffect } from 'react'\n\nimport FancyInput from './FancyInput.js'\nimport UrlInput from './UrlInput.js'\nimport HtmlInput from './HtmlInput.js'\n\nimport { useLocalization } from '../../fluent/Localized.js'\n\nfunction ActionInput({\n  defaultValue,\n  className,\n  style,\n  onChange,\n}) {\n  const { getString } = useLocalization()\n\n  const [properties, setProperties] = useState({})\n\n  useEffect(() => {\n    setProperties(defaultValue)\n  }, [\n    defaultValue,\n    setProperties,\n  ])\n\n  const updateProperty = useCallback((propertyKey, newPropertyValue) => {\n    const propertyTypes = {\n      type: 'string',\n      path: 'string',\n      url: 'string',\n      cron: 'string',\n      blockId: 'string',\n    }\n\n    const newProperties = { ...properties }\n\n    if (propertyTypes.hasOwnProperty(propertyKey)) {\n      switch (propertyTypes[propertyKey]) {\n        case 'array':\n          if (newPropertyValue.length > 0) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'string':\n          if (newPropertyValue !== '') {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'boolean':\n          if (newPropertyValue === true) {\n            newProperties[propertyKey] = true\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'object':\n          if (\n            typeof newPropertyValue === 'object'\n            && newPropertyValue !== null\n            && Object.keys(newPropertyValue).length > 0\n          ) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        default:\n          newProperties[propertyKey] = newPropertyValue\n      }\n\n      if (JSON.stringify(newProperties) !== JSON.stringify(properties)) {\n        setProperties(newProperties)\n        if (onChange) {\n          onChange(newProperties)\n        }\n      }\n    }\n  }, [\n    properties,\n    setProperties,\n    onChange,\n  ])\n\n  const type = properties.type || ''\n\n  let morePropsInput = null\n  if (\n    type === 'open_url'\n    || type === 'send_payload'\n  ) {\n    morePropsInput = <>\n      <FancyInput\n        style={{\n          flexGrow: '1',\n          margin: '0',\n          minWidth: '300px',\n        }}\n      >\n        {({ setError }) => (\n          <UrlInput\n            onError={setError}\n            onBlur={newValue => updateProperty('url', newValue)}\n            defaultValue={properties.url}\n            placeholder={getString('action_input_url_placeholder')}\n            type=\"text\"\n            style={{\n              flexGrow: 1,\n              margin: '0',\n              width: '100%'\n            }}\n            // className=\"show_border_on_active\"\n          />\n        )}\n      </FancyInput>\n    </>\n  } else if (\n    type === 'render_block'\n    || type === 'run_block'\n  ) {\n    morePropsInput = <HtmlInput\n        placeholder=\"blockId\"\n        defaultValue={properties.blockId}\n        onBlur={newValue => updateProperty('blockId', newValue)}\n        linebreak={false}\n        style={{\n          flexGrow: '1',\n          margin: '0',\n          minWidth: '300px',\n        }}\n        // className=\"show_border_on_active\"\n      />\n  }\n\n  return <div\n    className={className}\n    style={{\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'flex-start',\n      maxWidth: '100%',\n      flexWrap: 'wrap',\n      gap: 'var(--basis)',\n      ...style\n    }}\n  >\n    <select\n      key={properties.type}\n      onChange={event => updateProperty('type', event.target.value)}\n      defaultValue={properties.type || ''}\n      style={{\n        margin: '0',\n      }}\n    >\n      <option value=\"\">No Action</option>\n      <option value=\"open_url\">Open URL</option>\n      <option value=\"render_block\">Render Block</option>\n      {/* <option value=\"run_block\">Run Block</option> */}\n      {/* <option value=\"send_payload\">Send Payload</option> */}\n    </select>\n\n    {morePropsInput}\n  </div>\n}\n\nexport default ActionInput\n\n\n/*\n\n  let morePropsInput = null\n  if (\n    type === 'open_url'\n    || type === 'send_payload'\n  ) {\n    morePropsInput = <>\n      <UrlInput />\n    </>\n  } else if (\n    type === 'render_block'\n    || type === 'run_block'\n  ) {\n    morePropsInput = <>blockId: ID</>\n  }\n\n\n      <option key=\"editor\" value=\"\">…</option>\n      <option key=\"editor\" value=\"open_url\">Open URL</option>\n      <option key=\"viewer\" value=\"render_block\">Render Block</option>\n      <option key=\"viewer\" value=\"run_block\">Run Block</option>\n      <option key=\"viewer\" value=\"send_payload\">Send Payload</option>\n      */\n","import { useState, useCallback, useEffect } from 'react'\n\n// import { v4 as uuidv4 } from 'uuid'\n\nimport classes from './PropertiesEditor.module.css'\n\nimport { Localized, withLocalization } from '../../fluent/Localized.js'\n// import UrlInput from './UrlInput.js'\nimport CheckboxInput from './CheckboxInput.js'\nimport HtmlInput from './HtmlInput.js'\n// import FancyInput from './FancyInput.js'\nimport CoverphotoPicker from './CoverphotoPicker.js'\nimport IconPicker from './IconPicker.js'\nimport TriggerInput from './TriggerInput.js'\nimport ActionInput from './ActionInput.js'\n\n// function stripTmpIds(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\n// function addTmpIds(array) {\n//   return [...(array || [])].map(obj => {\n//     if (!obj.tmp_id) {\n//       const obj_new = { ...obj }\n//       obj_new.tmp_id = uuidv4()\n//       return obj_new\n//     }\n//\n//     return obj\n//   })\n// }\n\nfunction PropertiesEditor({ getString, type, defaultProperties = {}, onChange }) {\n  const [properties, setProperties] = useState({})\n\n  // const [coverphoto, setCoverphoto] = useState('')\n  // const [imprint, setImprint] = useState('')\n  // const [privacy_policy, setPrivacyPolicy] = useState('')\n  // const [link, setLink] = useState('')\n\n  // let [voltTeams, setVoltTeams] = useState([])\n  // voltTeams = voltTeams.map(({ id, name }) => ({ value: id, label: name }))\n\n  // const [voltTeamInfos, setVoltTeamInfos] = useState({\n  //   id: null,\n  //   name: ''\n  // })\n  // const setVoltTeamInfosFromSelect = useCallback((data) => {\n  //   setVoltTeamInfos({\n  //     id: data.value,\n  //     name: data.label,\n  //   })\n  // }, [setVoltTeamInfos])\n\n  const updateProperty = useCallback((propertyKey, newPropertyValue, silent = false) => {\n    const propertyTypes = {\n      text: 'string',\n      coverphoto: 'string',\n      icon: 'string',\n      imprint: 'string',\n      privacy_policy: 'string',\n      tags: 'string',\n      checked: 'boolean',\n      trigger: 'object',\n      action: 'object',\n      pronouns: 'string',\n    }\n\n    const newProperties = { ...properties }\n\n    if (propertyTypes.hasOwnProperty(propertyKey)) {\n      switch (propertyTypes[propertyKey]) {\n        case 'array':\n          if (newPropertyValue.length > 0) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'string':\n          if (newPropertyValue !== '') {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'boolean':\n          if (newPropertyValue === true) {\n            newProperties[propertyKey] = true\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        case 'object':\n          if (\n            typeof newPropertyValue === 'object'\n            && newPropertyValue !== null\n            && Object.keys(newPropertyValue).length > 0\n          ) {\n            newProperties[propertyKey] = newPropertyValue\n          } else if (newProperties.hasOwnProperty(propertyKey)) {\n            delete newProperties[propertyKey]\n          }\n        break\n        default:\n          newProperties[propertyKey] = newPropertyValue\n      }\n    }\n\n    if (JSON.stringify(newProperties) !== JSON.stringify(properties)) {\n      setProperties(newProperties)\n      if (silent === false && onChange) {\n        onChange(newProperties)\n      }\n    }\n  }, [\n    properties,\n    setProperties,\n    onChange,\n  ])\n\n  const publishProperties = useCallback(() => {\n    if (onChange) {\n      onChange(properties)\n    }\n  }, [properties, onChange])\n\n  useEffect(() => {\n    setProperties({\n      ...defaultProperties,\n      text: defaultProperties.text || '',\n    })\n  }, [\n    defaultProperties,\n    setProperties,\n  ])\n\n\n  // useEffect(() => {\n  //   fetch(`${window.domains.backend}teams_simple.json`, {\n  //     mode: 'cors',\n  //     credentials: 'include',\n  //   })\n  //     .then(response => response.json())\n  //     .then(data => {\n  //       if (typeof data.error === 'string') {\n  //         setVoltTeams([])\n  //       } else {\n  //         setVoltTeams(data)\n  //       }\n  //     })\n  //     .catch(error => {\n  //       console.error(error)\n  //       setVoltTeams([])\n  //     })\n  // }, [ setVoltTeams ])\n\n  let propertiesFrameContent = null\n  // if (type === 'page') {\n  //   propertiesFrameContent = <>\n  //     <div className={classes.properties_row}>\n  //     <h3><Localized id=\"properties_editor_imprint_label\" /></h3>\n  //     <div>\n  //     <FancyInput>\n  //       {({ setError }) => (\n  //         <UrlInput\n  //           onError={setError}\n  //           onBlur={newValue => updateProperty('imprint', newValue)}\n  //           defaultValue={properties.imprint}\n  //           type=\"text\"\n  //           style={{\n  //             margin: '0',\n  //             width: '100%'\n  //           }}\n  //           // className=\"show_border_on_active\"\n  //         />\n  //       )}\n  //     </FancyInput>\n  //     </div>\n  //     </div>\n  //\n  //     <div className={classes.properties_row}>\n  //     <h3><Localized id=\"properties_editor_privacy_policy_label\" /></h3>\n  //     <div>\n  //     <FancyInput>\n  //       {({ setError }) => (\n  //         <UrlInput\n  //           onError={setError}\n  //           onBlur={newValue => updateProperty('privacy_policy', newValue)}\n  //           defaultValue={properties.privacy_policy}\n  //           type=\"text\"\n  //           style={{\n  //             margin: '0',\n  //             width: '100%'\n  //           }}\n  //           // className=\"show_border_on_active\"\n  //         />\n  //       )}\n  //     </FancyInput>\n  //     </div>\n  //     </div>\n  //   </>\n  // // } else if (type === 'redirect') {\n  // //   propertiesFrameContent = <>\n  // //     <div className={classes.properties_row}>\n  // //     <h3><Localized id=\"path_editor_redirect_label\" /></h3>\n  // //     <FancyInput>\n  // //       {({ setError }) => (\n  // //         <UrlInput\n  // //           onError={setError}\n  // //           onBlur={newValue => updateProperty('link', newValue)}\n  // //           type=\"text\"\n  // //           placeholder={getString('path_editor_redirect_placeholder')}\n  // //           aria-label={getString('path_editor_redirect_label')}\n  // //           defaultValue={properties.link}\n  // //           style={{\n  // //             marginRight: '0',\n  // //             marginLeft: '0',\n  // //             width: '100%'\n  // //           }}\n  // //           className=\"show_border_on_active\"\n  // //         />\n  // //       )}\n  // //     </FancyInput>\n  // //     </div>\n  // //   </>\n  // } else if (type === 'person') {\n  //   propertiesFrameContent = <>\n  //     <div className={classes.properties_row}>\n  //       <h3><Localized id=\"properties_editor_pronouns_label\" /></h3>\n  //       <HtmlInput\n  //         defaultValue={properties.pronouns}\n  //         onChange={newValue => updateProperty('pronouns', newValue, true)}\n  //         onBlur={publishProperties}\n  //         placeholder={'…'}\n  //         style={{\n  //           margin: '0',\n  //           width: '100%',\n  //         }}\n  //         linebreaks={false}\n  //         className={`type_text`}\n  //       />\n  //     </div>\n  //   </>\n  // } else\n  if (type === 'checkbox') {\n    propertiesFrameContent = <>\n      <div className={classes.properties_row}>\n        <h3><Localized id=\"properties_editor_checked_label\" /></h3>\n        <CheckboxInput\n          onChange={newValue => updateProperty('checked', newValue)}\n          defaultValue={Boolean(properties.checked)}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: '100%'\n          }}\n        />\n      </div>\n    </>\n  } else if (type === 'button') {\n    propertiesFrameContent = <>\n      <div className={classes.properties_row}>\n        <h3><Localized id=\"properties_editor_action_label\" /></h3>\n        <ActionInput\n          onChange={newValue => updateProperty('action', newValue)}\n          defaultValue={properties.action || {}}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: '100%'\n          }}\n        />\n      </div>\n    </>\n  } else if (type === 'automation') {\n    propertiesFrameContent = <>\n      <div className={classes.properties_row}>\n        <h3><Localized id=\"properties_editor_trigger_label\" /></h3>\n        <TriggerInput\n          onChange={newValue => updateProperty('trigger', newValue)}\n          defaultValue={properties.trigger || {}}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: '100%'\n          }}\n        />\n      </div>\n      <div className={classes.properties_row}>\n        <h3><Localized id=\"properties_editor_action_label\" /></h3>\n        <ActionInput\n          onChange={newValue => updateProperty('action', newValue)}\n          defaultValue={properties.action || {}}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: '100%'\n          }}\n        />\n      </div>\n    </>\n  }\n\n  return <>\n    {\n      type === 'page' || type === 'person'\n      ? <>\n          <CoverphotoPicker\n            coverphotoValue={properties.coverphoto}\n            iconValue={properties.icon}\n            onChange={newValue => updateProperty('coverphoto', newValue)}\n          />\n          <IconPicker\n            iconValue={properties.icon}\n            coverphotoValue={properties.coverphoto}\n            onChange={newValue => updateProperty('icon', newValue)}\n          />\n        </>\n      : null\n    }\n\n    <div className={classes.main_headline}>\n      <HtmlInput\n        defaultValue={properties.text}\n        onChange={newValue => updateProperty('text', newValue, true)}\n        onBlur={publishProperties}\n\n        placeholder={getString('placeholder_main_headline')}\n        style={{\n          margin: '0 0 0 calc(8 * var(--basis))',\n          padding: 'var(--basis) var(--basis_x2)',\n        }}\n        linebreaks={true}\n        className={`type_h1`}\n      />\n    </div>\n\n    <div className={classes.propertiesFrame} style={\n      propertiesFrameContent === null\n        ? { display: 'none' }\n        : null\n    }>\n      {propertiesFrameContent}\n\n      {/* <div className={classes.properties_row}>\n        <h3><Localized id=\"path_editor_tags_label\" /></h3>\n        <HtmlInput\n          onBlur={newValue => updateProperty('tags', newValue)}\n          type=\"text\"\n          placeholder={getString('path_editor_tags_placeholder')}\n          aria-label={getString('path_editor_tags_label')}\n          defaultValue={properties.tags}\n          style={{\n            marginRight: '0',\n            marginLeft: '0',\n            width: 'calc(100% - var(--basis_x2))'\n          }}\n        />\n      </div> */}\n\n      {/*\n        voltTeams && voltTeams.length > 0\n        ? <>\n          <h3><Localized id=\"path_editor_belongs_to_team_label\" /></h3>\n          <em className=\"body2\" style={{ display: 'block', marginBottom: 'var(--basis)' }}><Localized id=\"path_editor_belongs_to_team_info\" /></em>\n          <Select\n            defaultValue={{\n              value: voltTeamInfos !== null ? voltTeamInfos.id || null : null,\n              label: voltTeamInfos !== null ? voltTeamInfos.name || '' : '',\n            }}\n            defaultInputValue={voltTeamInfos !== null ? voltTeamInfos.name || '' : ''}\n            onChange={setVoltTeamInfosFromSelect}\n            ariaLabel={getString('path_editor_belongs_to_team_search_placeholder')}\n            label={getString('path_editor_belongs_to_team_search_placeholder')}\n            placeholder={getString('path_editor_belongs_to_team_search_placeholder')}\n            options={voltTeams}\n            styles={custom_react_select_styles}\n            theme={custom_react_select_theme}\n          />\n        </>\n        : null\n      */}\n    </div>\n  </>\n}\n\nexport default withLocalization(PropertiesEditor)\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction InlineEditorBlockTextRaw({\n  getString,\n  block = {},\n  onChange,\n  onSaveBlock,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n\n  onAddRowAfter,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState('')\n\n  useEffect(() => {\n    setText(properties.text || '')\n  }, [properties.text, setText])\n\n  const publishTextChange = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  return <HtmlInput\n    defaultValue={text}\n    onChange={setText}\n    onBlur={publishTextChange}\n\n    placeholder={getString('placeholder_text')}\n    style={{\n      margin: '0',\n      backgroundColor: 'transparent',\n    }}\n    linebreaks={true}\n    className=\"hide_border type_text\"\n\n    onInputRef={onInputRef}\n    onGoToPrevInput={onGoToPrevInput}\n    onGoToNextInput={onGoToNextInput}\n    onMergeToPrevInput={() => onMergeToPrevInput(block)}\n    onMergeFromNextInput={() => onMergeFromNextInput(block)}\n    onSplitText={onSplitText}\n  />\n}\n\nconst InlineEditorBlockText = withLocalization(InlineEditorBlockTextRaw)\n\nexport default InlineEditorBlockText\n","import React, { useState, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport FancyInput from './FancyInput.js'\nimport HtmlInput from './HtmlInput.js'\nimport UrlInput from './UrlInput.js'\n\nfunction InlineEditorBlockButtonRaw({\n  getString,\n  block = {},\n  onChange,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState(properties.text || '')\n  const {\n    action = {}\n  } = properties\n  const [link, setLink] = useState(action.url || '')\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      const newBlock = {\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      }\n\n      if (link === '') {\n        if (newBlock.properties.hasOwnProperty('trigger')) {\n          delete newBlock.properties.trigger\n        }\n        if(newBlock.properties.hasOwnProperty('action')) {\n          delete newBlock.properties.action\n        }\n      } else {\n        newBlock.properties.trigger = {\n          type: 'click'\n        }\n        newBlock.properties.action = {\n\t\t\t\t  type: 'open_url',\n\t\t\t\t  url: link,\n\t\t\t  }\n      }\n\n      onChange(newBlock)\n    }\n  }, [onChange, block, text, link])\n\n  return <div style={{\n    padding: 'var(--basis) 0',\n  }}>\n    <HtmlInput\n      defaultValue={text}\n      onChange={setText}\n      onBlur={publishChanges}\n\n      placeholder={getString('placeholder_button')}\n      style={{ margin: '0' }}\n      linebreaks={true}\n      className=\"hide_border type_button default\"\n\n      onInputRef={onInputRef}\n      onGoToPrevInput={onGoToPrevInput}\n      onGoToNextInput={onGoToNextInput}\n      onMergeToPrevInput={() => onMergeToPrevInput(block)}\n      onMergeFromNextInput={() => onMergeFromNextInput(block)}\n      onSplitText={onSplitText}\n    />\n\n    <FancyInput>\n      {({ setError }) => (\n        <UrlInput\n          onError={setError}\n          onChange={setLink}\n          onBlur={publishChanges}\n          type=\"text\"\n          defaultValue={link}\n          placeholder={getString('path_editor_item_link_label')}\n          style={{\n            margin: 'var(--basis) 0',\n            width: '100%',\n          }}\n        />\n      )}\n    </FancyInput>\n  </div>\n}\n\nconst InlineEditorBlockButton = withLocalization(InlineEditorBlockButtonRaw)\n\nexport default InlineEditorBlockButton\n","import React, { useState, useEffect, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction InlineEditorBlockHeadlineRaw({\n  getString,\n  block = {},\n  onChange,\n  onSaveBlock,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n\n  onAddRowAfter,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState('')\n\n  useEffect(() => {\n    setText(properties.text || '')\n  }, [properties.text, setText])\n\n  const publishTextChange = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  return <HtmlInput\n    defaultValue={text}\n    onChange={setText}\n    onBlur={publishTextChange}\n\n    placeholder={getString('placeholder_headline')}\n    style={{\n      margin: '0',\n      backgroundColor: 'transparent',\n    }}\n    linebreaks={true}\n    className=\"hide_border type_h2\"\n\n    onInputRef={onInputRef}\n    onGoToPrevInput={onGoToPrevInput}\n    onGoToNextInput={onGoToNextInput}\n    onMergeToPrevInput={() => onMergeToPrevInput(block)}\n    onMergeFromNextInput={() => onMergeFromNextInput(block)}\n    onSplitText={onSplitText}\n  />\n}\n\nconst InlineEditorBlockHeadline = withLocalization(InlineEditorBlockHeadlineRaw)\n\nexport default InlineEditorBlockHeadline\n","export default function InlineEditorBlockDivider() {\n  return <hr style={{\n    margin: 'calc(3.4 * var(--basis)) 0',\n  }} />\n}\n","import React, { useState, useCallback, useRef } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport HtmlInput from './HtmlInput.js'\nimport CheckboxInput from './CheckboxInput.js'\n\nfunction InlineEditorBlockCheckboxRaw({\n  getString,\n  block = {},\n  onChange,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState(properties.text || '')\n  const checked = useRef(Boolean(properties.checked))\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n          checked: checked.current,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  const saveChecked = useCallback(newValue => {\n    checked.current = newValue\n    publishChanges()\n  }, [ publishChanges ])\n\n  return <div style={{ display: 'flex' }}>\n    <CheckboxInput\n      checked={checked.current}\n      onChange={saveChecked}\n    />\n\n    <HtmlInput\n      defaultValue={text}\n      onChange={setText}\n      onBlur={publishChanges}\n\n      placeholder={getString('placeholder_text')}\n      style={{\n        flexGrow: '1',\n        width: '100%',\n        margin: '0',\n        backgroundColor: 'transparent',\n      }}\n      linebreaks={true}\n      className=\"hide_border type_text\"\n\n      onInputRef={onInputRef}\n      onGoToPrevInput={onGoToPrevInput}\n      onGoToNextInput={onGoToNextInput}\n      onMergeToPrevInput={() => onMergeToPrevInput(block)}\n      onMergeFromNextInput={() => onMergeFromNextInput(block)}\n      onSplitText={onSplitText}\n    />\n  </div>\n}\n\nconst InlineEditorBlockCheckbox = withLocalization(InlineEditorBlockCheckboxRaw)\n\nexport default InlineEditorBlockCheckbox\n","import React, { useState, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport {\n  Face as PersonPlaceholderIcon,\n} from '@mui/icons-material'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction InlineEditorBlockPersonRaw({\n  getString,\n  block = {},\n  onChange,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState(properties.text || '')\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  return <div style={{ display: 'flex' }}>\n    <PersonPlaceholderIcon\n      style={{\n        margin: 'var(--basis)',\n      }}\n    />\n\n    <HtmlInput\n      defaultValue={text}\n      onChange={setText}\n      onBlur={publishChanges}\n\n      placeholder={getString('placeholder_text')}\n      style={{\n        flexGrow: '1',\n        width: '100%',\n        margin: '0',\n        fontWeight: 'bold',\n        backgroundColor: 'transparent',\n      }}\n      linebreaks={true}\n      className=\"hide_border type_text\"\n\n      onInputRef={onInputRef}\n      onGoToPrevInput={onGoToPrevInput}\n      onGoToNextInput={onGoToNextInput}\n      onMergeToPrevInput={() => onMergeToPrevInput(block)}\n      onMergeFromNextInput={() => onMergeFromNextInput(block)}\n      onSplitText={onSplitText}\n    />\n  </div>\n}\n\nconst InlineEditorBlockPerson = withLocalization(InlineEditorBlockPersonRaw)\n\nexport default InlineEditorBlockPerson\n","import React, { useState, useCallback } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport {\n  InsertDriveFile as PagePlaceholderIcon,\n} from '@mui/icons-material'\n\nimport HtmlInput from './HtmlInput.js'\n\nfunction InlineEditorBlockPageRaw({\n  getString,\n  block = {},\n  onChange,\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n}) {\n  const properties = block.properties || {}\n  const [text, setText] = useState(properties.text || '')\n\n  const publishChanges = useCallback(() => {\n    if (onChange) {\n      onChange({\n        ...block,\n        properties: {\n          ...block.properties,\n          text,\n        },\n      })\n    }\n  }, [onChange, block, text])\n\n  return <div style={{ display: 'flex' }}>\n    <PagePlaceholderIcon\n      style={{\n        margin: 'var(--basis)',\n      }}\n    />\n\n    <HtmlInput\n      defaultValue={text}\n      onChange={setText}\n      onBlur={publishChanges}\n\n      placeholder={getString('placeholder_headline_main')}\n      style={{\n        flexGrow: '1',\n        width: '100%',\n        margin: '0',\n        fontWeight: 'bold',\n        backgroundColor: 'transparent',\n      }}\n      linebreaks={true}\n      className=\"hide_border type_text\"\n\n      onInputRef={onInputRef}\n      onGoToPrevInput={onGoToPrevInput}\n      onGoToNextInput={onGoToNextInput}\n      onMergeToPrevInput={() => onMergeToPrevInput(block)}\n      onMergeFromNextInput={() => onMergeFromNextInput(block)}\n      onSplitText={onSplitText}\n    />\n  </div>\n}\n\nconst InlineEditorBlockPage = withLocalization(InlineEditorBlockPageRaw)\n\nexport default InlineEditorBlockPage\n","import React, { useState, useCallback, useEffect, useRef } from 'react'\n\nimport { withLocalization } from '../../fluent/Localized.js'\n\nimport BlockMenu from './BlockMenu.js'\nimport useSaveBlock from '../../hooks/useSaveBlock.js'\n\nimport InlineEditorBlockText from './InlineEditorBlockText.js'\nimport InlineEditorBlockButton from './InlineEditorBlockButton.js'\nimport InlineEditorBlockHeadline from './InlineEditorBlockHeadline.js'\nimport InlineEditorBlockDivider from './InlineEditorBlockDivider.js'\nimport InlineEditorBlockCheckbox from './InlineEditorBlockCheckbox.js'\nimport InlineEditorBlockPerson from './InlineEditorBlockPerson.js'\nimport InlineEditorBlockPage from './InlineEditorBlockPage.js'\n// import InlineEditorBlockCode from './InlineEditorBlockCode.js'\n\nimport classes from './InlineEditorBlock.module.css'\n\n// function addIds(array){\n//   if (Array.isArray(array)) {\n//     return array.map(item => {\n//       let new_item = { ...item }\n//       if (!new_item.hasOwnProperty('_id')) {\n//         new_item._id = uuidv4()\n//       }\n//       return new_item\n//     })\n//   }\n//   return array\n// }\n\n// function stripIDs(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction InlineEditorBlockInbetweenComponent({ type = 'text', ...props }){\n  let component = null\n\n  switch (type) {\n    case 'button':\n      component = <InlineEditorBlockButton {...props} />\n    break;\n    case 'headline':\n      component = <InlineEditorBlockHeadline {...props} />\n    break;\n    case 'divider':\n      component = <InlineEditorBlockDivider {...props} />\n    break;\n    case 'checkbox':\n      component = <InlineEditorBlockCheckbox {...props} />\n    break;\n    case 'person':\n      component = <InlineEditorBlockPerson {...props} />\n    break;\n    case 'page':\n      component = <InlineEditorBlockPage {...props} />\n    break;\n    // case 'code':\n    //   component = <InlineEditorBlockCode {...props} />\n    // break;\n    default:\n      component = <InlineEditorBlockText {...props} />\n  }\n\n  return component\n}\n\nfunction InlineEditorBlockRaw({\n  fluentByObject,\n  getString,\n  contentConfig = {},\n  className,\n  onChange,\n  reorderHandle,\n  onRemoveRow,\n  actionButton,\n  dataset = {},\n  addRowBefore,\n  addRowAfter,\n  permissions = [],\n\n  onInputRef,\n  onGoToPrevInput,\n  onGoToNextInput,\n  onSplitText,\n  onMergeToPrevInput,\n  onMergeFromNextInput,\n  onRemoveSelf,\n}) {\n  const saveBlock = useSaveBlock()\n\n  // const defaultLocale = getString('default_locale')\n\n  const [block, setBlock] = useState({\n    ...(contentConfig.block || { type: 'text' }),\n    _id: contentConfig.blockId || null,\n  })\n  const properties = block.properties || {}\n  const active = typeof properties.active === 'boolean' ? properties.active : true\n\n  useEffect(() => {\n    if (contentConfig.block) {\n      setBlock(contentConfig.block)\n    }\n  }, [contentConfig.block])\n\n  const handleChange_Type = useCallback(newValue => {\n    const newBlock = {\n      ...block,\n      type: newValue,\n    }\n\n    saveBlock(newBlock)\n      .then((newBlock) => {\n        setBlock(newBlock)\n        if (!block._id || block._id !== newBlock._id) {\n          onChange({\n            blockId: newBlock._id,\n            block: newBlock,\n          })\n        }\n      })\n  }, [setBlock, block, saveBlock, onChange])\n\n  // const handleChange = useCallback(newBlock => {\n  //   setBlock(newBlock)\n\n  //   if (onChange) {\n  //     const target = wrapperDiv.current\n  //     target.value = newBlock\n  //     onChange({ target })\n  //   }\n  // }, [setBlock, onChange])\n\n  const toggle_active = useCallback(() => {\n    const newBlock = {\n      ...block,\n      properties: {\n        ...block.properties,\n        active: !active,\n      },\n    }\n\n    saveBlock(newBlock)\n      .then((newBlock) => {\n        setBlock(newBlock)\n        if (!block._id || block._id !== newBlock._id) {\n          onChange({\n            blockId: newBlock._id,\n            block: newBlock,\n          })\n        }\n      })\n  }, [block, active, saveBlock, setBlock, onChange])\n\n  const handleBlockChange = useCallback(newBlock => {\n    if (JSON.stringify(newBlock) !== JSON.stringify(block)) {\n      saveBlock(newBlock)\n        .then((newBlock) => {\n          setBlock(newBlock)\n          if (!block._id || block._id !== newBlock._id) {\n            onChange({\n              blockId: newBlock._id,\n              block: newBlock,\n            })\n          }\n        })\n    }\n  }, [saveBlock, block, onChange])\n\n  const handleSaveBlock = useCallback((newBlock, callback) => {\n    saveBlock(newBlock)\n      .then(newBlock => {\n        if (callback) {\n          callback(newBlock)\n        }\n      })\n      .catch(console.error)\n  }, [ saveBlock ])\n\n  const setOpenBlockMenuRef = useRef(null)\n  const onArchiveToggle = useCallback(newArchivedValue => {\n    if (\n      typeof setOpenBlockMenuRef.current === 'function'\n      && typeof onRemoveSelf === 'function'\n    ) {\n      setOpenBlockMenuRef.current(false)\n      setTimeout(() => {\n        onRemoveSelf()\n      }, 200) // The fade-out animation is 200ms. Only rerender after it, for it not to loose the element.\n    }\n  }, [ setOpenBlockMenuRef, onRemoveSelf ])\n\n  return <div\n    className={`${classes.block} ${className}`}\n    {...dataset}\n  >\n\n    <BlockMenu\n      {...{\n        block,\n        setType: handleChange_Type,\n        toggle_active,\n        active,\n        onRemoveRow,\n        addRowBefore,\n        addRowAfter,\n      }}\n\n      onArchivedToggle={onArchiveToggle}\n      setOpenBlockMenuRef={setOpenBlockMenuRef}\n\n      trigger={props => (\n        <div\n          {...props}\n          className={classes.reorderHandle}\n        >\n          {reorderHandle}\n        </div>\n      )}\n    />\n\n    <div className={`${classes.block_input} ${(active ? classes.form_active : classes.form_deactivated)}`}>\n      <InlineEditorBlockInbetweenComponent\n        type={block.type}\n        block={block}\n        onChange={handleBlockChange}\n        onSaveBlock={handleSaveBlock}\n\n        onInputRef={onInputRef}\n        onGoToPrevInput={onGoToPrevInput}\n        onGoToNextInput={onGoToNextInput}\n        onSplitText={onSplitText}\n        onMergeToPrevInput={onMergeToPrevInput}\n        onMergeFromNextInput={onMergeFromNextInput}\n\n        onAddRowAfter={addRowAfter}\n      />\n    </div>\n\n  </div>\n}\n\nconst InlineEditorBlock = withLocalization(InlineEditorBlockRaw)\n\nexport default InlineEditorBlock\n","import { useState, useRef, useEffect, useCallback } from 'react'\n\nimport { v4 as uuidv4 } from 'uuid'\n\nimport {\n  Add as AddIcon,\n} from '@mui/icons-material'\nimport {\n  Tooltip,\n} from '@mui/material'\n\nimport { Localized } from '../../fluent/Localized.js'\nimport InlineEditorBlock from './InlineEditorBlock.js'\nimport useLoadBlocks from '../../hooks/useLoadBlocks.js'\nimport useSaveBlock from '../../hooks/useSaveBlock.js'\nimport useArchiveBlock from '../../hooks/useArchiveBlock.js'\n// import { useTranslatedInputContext } from './TranslatedInput.js'\n\nimport AddMenu from './AddMenu.js'\n\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport DragIndicatorIcon from '@mui/icons-material/DragIndicator'\n\nimport classes from './ContentEditor.module.css'\n\n// function stripTmpIds(array){\n//   return [...array].map(obj => {\n//     const obj_new = { ...obj }\n//     delete obj_new._id\n//     return obj_new\n//   })\n// }\n\nfunction addTmpIds(array) {\n  return [...array].map(obj => {\n    const obj_new = { ...obj }\n    obj_new.tmp_id = uuidv4()\n    return obj_new\n  })\n}\n\nfunction getFirstLineStartNode(element){\n  element.normalize()\n\n  const childNodes = element.childNodes\n  if (childNodes.length > 0) {\n    return childNodes[0]\n  }\n\n  return element\n}\n\nfunction getLastLineStartNode(element) {\n  element.normalize()\n\n  const childNodes = [...element.childNodes].reverse()\n  if (childNodes.length > 0) {\n    let lastLineNode = element\n    if (childNodes[0].nodeType === 3) {\n      for (const childNode of childNodes) {\n        if (childNode.nodeType === 3) {\n          lastLineNode = childNode\n        } else if (childNode.nodeType === 1) {\n          break\n        }\n      }\n    } else {\n      if (childNodes.length > 1) {\n        if (childNodes[1].nodeType === 3) {\n          const thisChildNodes = childNodes.slice(1)\n          for (const childNode of thisChildNodes) {\n            if (childNode.nodeType === 3) {\n              lastLineNode = childNode\n            } else if (childNode.nodeType === 1) {\n              break\n            }\n          }\n        }\n      }\n    }\n\n    return lastLineNode\n  }\n\n  return element\n}\n\nfunction moveCursorToOffsetInLine(contentEditableElement, lastLineStartNode, offset = 0) {\n  contentEditableElement.focus()\n\n  // If this function exists... (IE 9+)\n  if (window.getSelection) {\n    const lastLineStartNodeLength = (\n      lastLineStartNode.nodeType === 3\n        ? lastLineStartNode.length\n        : lastLineStartNode.innerText.length\n    )\n\n    if (offset === -1 || offset > lastLineStartNodeLength) {\n      offset = lastLineStartNodeLength\n    }\n\n    const range = document.createRange()\n    range.setStart(lastLineStartNode, 0)\n    range.setEnd(lastLineStartNode, offset)\n    range.collapse(false) // false = collapse to end\n    const sel = window.getSelection()\n    sel.removeAllRanges()\n    sel.addRange(range)\n  }\n}\n\nfunction reorder(list, startIndex, endIndex) {\n  const result = Array.from(list)\n  const [removed] = result.splice(startIndex, 1)\n  result.splice(endIndex, 0, removed)\n\n  return result\n}\n\nfunction ContentEditor({ defaultValue = [], onChange }) {\n  // const [contentConfigs, setContentConfigs] = useState([])\n  const contentConfigs_Ref = useRef([])\n  const contentConfigs = contentConfigs_Ref.current\n\n  // const [inputRefs, setInputRefs] = useState({})\n  const inputRefs_Ref = useRef({})\n  const inputRefs = inputRefs_Ref.current\n\n  const [updateCounter, setUpdateCounter] = useState(0)\n\n  const loadBlocks = useLoadBlocks()\n  const saveBlock = useSaveBlock()\n  const archiveBlock = useArchiveBlock()\n\n\n  const [autoFocus, setAutoFocus] = useState(null)\n  useEffect(()=>{\n    if (typeof autoFocus === 'object' && autoFocus !== null) {\n      if (\n        inputRefs.hasOwnProperty(autoFocus.tmp_id)\n      ) {\n        const inputRef = inputRefs[autoFocus.tmp_id]\n        if (\n          typeof inputRef === 'object'\n          && inputRef !== null\n        ) {\n          if (autoFocus.inFirstLine === true) {\n            const firstLineStartNode = getFirstLineStartNode(inputRef.current)\n            moveCursorToOffsetInLine(inputRef.current, firstLineStartNode, autoFocus.positionFromLineStart)\n          } else if (autoFocus.inLastLine === true) {\n            const lastLineStartNode = getLastLineStartNode(inputRef.current)\n            moveCursorToOffsetInLine(inputRef.current, lastLineStartNode, autoFocus.positionFromLineStart)\n          }\n          setAutoFocus(null)\n        }\n      }\n    }\n  }, [\n    autoFocus,\n    setAutoFocus,\n    inputRefs,\n  ])\n\n  useEffect(()=>{\n    async function loadMissingBlocks () {\n      let newContentConfigs = [...addTmpIds(defaultValue)]\n\n      const ids2load = newContentConfigs\n        .filter(contentConfig => !contentConfig.hasOwnProperty('block'))\n        .map(contentConfig => contentConfig.blockId)\n\n      let loadedBlocks = []\n      if (ids2load.length > 0) {\n        loadedBlocks = await loadBlocks({ ids: ids2load })\n      }\n      \n      newContentConfigs = newContentConfigs\n        .map(contentConfig => {\n          if (!contentConfig.hasOwnProperty('block')) {\n            contentConfig.block = loadedBlocks.find(block => block._id === contentConfig.blockId)\n          }\n          return contentConfig\n        })\n\n      contentConfigs_Ref.current = newContentConfigs\n      setUpdateCounter(old => old + 1)\n    }\n\n    if (contentConfigs.length === 0) {\n      if (defaultValue.length > 0) {\n        loadMissingBlocks()\n      }\n    }\n  }, [contentConfigs, defaultValue, loadBlocks, contentConfigs_Ref, setUpdateCounter])\n\n  const saveInputRef = useCallback((keys, inputRef) => {\n    const newInputRefs = {...inputRefs_Ref.current}\n\n    if (\n      !newInputRefs.hasOwnProperty(keys.tmp_id)\n      || newInputRefs[keys.tmp_id] !== inputRef\n    ) {\n      newInputRefs[keys.tmp_id] = inputRef\n      inputRefs_Ref.current = newInputRefs\n    }\n  }, [ inputRefs_Ref ])\n\n  const goToPrevInput = useCallback((keys, { caret }) => {\n    const index = keys.index\n\n    let prevInputRef = null\n    for (let thisIndex = contentConfigs.length-1; thisIndex >= 0; thisIndex--) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (thisIndex < index && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        prevInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (prevInputRef) {\n      const lastLineStartNode = getLastLineStartNode(prevInputRef.current)\n      moveCursorToOffsetInLine(prevInputRef.current, lastLineStartNode, caret.positionFromLineStart)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const goToNextInput = useCallback((keys, { caret }) => {\n    const index = keys.index\n\n    let nextInputRef = null\n    for (let thisIndex = 0; thisIndex < contentConfigs.length; thisIndex++) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (thisIndex > index && inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        nextInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (nextInputRef) {\n      const firstLineStartNode = getFirstLineStartNode(nextInputRef.current)\n      moveCursorToOffsetInLine(nextInputRef.current, firstLineStartNode, caret.positionFromLineStart)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const focusLastLine = useCallback(() => {\n    let lastInputRef = null\n    for (let thisIndex = contentConfigs.length-1; thisIndex >= 0; thisIndex--) {\n      const tmp_id = contentConfigs[thisIndex].tmp_id\n      if (inputRefs[tmp_id] && inputRefs[tmp_id].current) {\n        lastInputRef = inputRefs[tmp_id]\n        break\n      }\n    }\n\n    if (lastInputRef) {\n      const lastLineStartNode = getLastLineStartNode(lastInputRef.current)\n      moveCursorToOffsetInLine(lastInputRef.current, lastLineStartNode, -1)\n    }\n  }, [ contentConfigs, inputRefs ])\n\n  const handleRowChange = useCallback((keys, newContentConfig) => {\n    const newContentConfigs = [...contentConfigs]\n    for (const index in newContentConfigs) {\n      const oldContentConfig = newContentConfigs[index]\n      if (oldContentConfig.tmp_id === keys.tmp_id) {\n        newContentConfigs[index] = {\n          ...oldContentConfig,\n          ...newContentConfig,\n        }\n        break\n      }\n    }\n\n    contentConfigs_Ref.current = newContentConfigs\n    onChange(newContentConfigs)\n\n    return new Promise(resolve => {\n      resolve(newContentConfigs)\n    })\n  }, [contentConfigs, contentConfigs_Ref, onChange])\n\n  const addRowByIndex = useCallback((index, offset = 0, newContentConfig) => {\n    if (typeof newContentConfig === 'object') {\n      newContentConfig = {\n        tmp_id: uuidv4(),\n        ...newContentConfig,\n      }\n    } else {\n      newContentConfig = newContentConfig || { tmp_id: uuidv4() }\n    }\n\n    if (typeof index === 'number' && !isNaN(index)) {\n      // saveBlock(newBlock)\n      //   .then(newBlock => {\n      //     if (callback) {\n      //       callback(newBlock)\n      //     }\n      //   })\n      //   .catch(console.error)\n\n      let new_rows = [...contentConfigs]\n      new_rows.splice(index + offset, 0, newContentConfig)\n      contentConfigs_Ref.current = new_rows\n      onChange(new_rows)\n    }\n  }, [contentConfigs, contentConfigs_Ref, onChange])\n\n  const onMergeToPrevInput = useCallback(keys => {\n    const {\n      index,\n    } = keys\n\n    const clonedContentConfigs = [...contentConfigs]\n    if (index > 0) {\n      const prev_index = index - 1\n      const prev_contentConfig = clonedContentConfigs[prev_index]\n      const prev_tmp_id = prev_contentConfig.tmp_id\n\n      const this_block = clonedContentConfigs[index].block\n      const prev_block = clonedContentConfigs[prev_index].block\n\n      const new_prev_block = {\n        ...prev_block,\n        properties: {\n          ...prev_block.properties,\n          text: prev_block.properties.text + this_block.properties.text,\n        },\n      }\n\n      const thisRef = inputRefs_Ref.current[prev_tmp_id]\n      const textLength = thisRef.current.textContent.length\n\n      saveBlock(new_prev_block)\n        .then(savedPrevBlock => {\n          const new_tmp_id = uuidv4()\n          handleRowChange({\n            index: prev_index,\n            tmp_id: prev_tmp_id,\n          }, {\n            ...prev_contentConfig,\n            tmp_id: new_tmp_id,\n            blockId: savedPrevBlock._id,\n            block: savedPrevBlock,\n          })\n            .then(newContentConfigs => {\n              const this_block = newContentConfigs[index].block\n              newContentConfigs.splice(index, 1) // delete the block\n\n              archiveBlock({ _id: this_block._id, archive: true })\n                .then(() => {\n                  contentConfigs_Ref.current = newContentConfigs\n                  setAutoFocus({\n                    tmp_id: new_tmp_id,\n                    positionFromLineStart: textLength,\n                    inFirstLine: false,\n                    inLastLine: true,\n                  })\n                  onChange(newContentConfigs)\n                })\n            })\n        })\n        .catch(console.error)\n    } else {\n      // This is the first row. Nothing to merge into.\n    }\n  }, [ contentConfigs, inputRefs_Ref, saveBlock, handleRowChange, archiveBlock, contentConfigs_Ref, setAutoFocus, onChange ])\n\n  const onMergeFromNextInput = useCallback(keys => {\n    const {\n      index,\n      tmp_id,\n    } = keys\n\n    const clonedContentConfigs = [...contentConfigs]\n    if (index < clonedContentConfigs.length - 1) {\n\n      const next_index = index + 1\n\n      const this_old_contentConfig = clonedContentConfigs[index]\n      const this_block = clonedContentConfigs[index].block\n      const next_block = clonedContentConfigs[next_index].block\n\n      const new_block = {\n        ...this_block,\n        properties: {\n          ...this_block.properties,\n          text: this_block.properties.text + next_block.properties.text,\n        },\n      }\n\n      const thisRef = inputRefs_Ref.current[tmp_id]\n      const textLength = thisRef.current.textContent.length\n\n      saveBlock(new_block)\n        .then(savedBlock => {\n          const new_tmp_id = uuidv4()\n          handleRowChange(keys, {\n            ...this_old_contentConfig,\n            tmp_id: new_tmp_id,\n            blockId: savedBlock._id,\n            block: savedBlock,\n          })\n            .then(newContentConfigs => {\n              const next_block = newContentConfigs[next_index].block\n              newContentConfigs.splice(next_index, 1) // delete the block\n\n              archiveBlock({ _id: next_block._id, archive: true })\n                .then(() => {\n                  contentConfigs_Ref.current = newContentConfigs\n                  setAutoFocus({\n                    tmp_id: new_tmp_id,\n                    positionFromLineStart: textLength,\n                    inFirstLine: false,\n                    inLastLine: true,\n                  })\n                  onChange(newContentConfigs)\n                })\n            })\n        })\n        .catch(console.error)\n\n\n\n\n      // // const firstBlock = rows[index]\n      // // const secondBlock = rows[index + 1]\n\n      // // get current text length (we know the caret is at the end of the text)\n      // const thisRef = inputRefs[tmp_id]\n      // const textLength = thisRef.current.textContent.length\n\n      // // refocus the input at the last caret position\n      // const lastLineStartNode = getLastLineStartNode(thisRef.current)\n      // moveCursorToOffsetInLine(thisRef.current, lastLineStartNode, textLength) // we can't use a text length of -1, as the text length will be changed after the merge\n    } else {\n      // This is the last row. Nothing to merge into.\n    }\n  }, [ contentConfigs, inputRefs_Ref, saveBlock, handleRowChange, archiveBlock, contentConfigs_Ref, setAutoFocus, onChange ])\n\n  const splitText = useCallback((keys, { texts }) => {\n    const {\n      index,\n      tmp_id,\n    } = keys\n\n    const newContentConfigs = [...contentConfigs]\n\n    const block = (newContentConfigs.find(block => block.tmp_id === tmp_id)).block || {}\n\n    const firstBlock = {\n      ...block,\n      properties: {\n        ...block.properties,\n        text: texts[0],\n      },\n    }\n\n    const secondBlock = {\n      type: block.type,\n      properties: {\n        text: texts[1],\n      },\n    }\n\n    saveBlock(firstBlock)\n      .then(savedFirstBlock => {\n        saveBlock(secondBlock)\n          .then(savedSecondBlock => {\n            newContentConfigs[index] = {\n              ...newContentConfigs[index],\n              tmp_id: uuidv4(),\n              blockId: savedFirstBlock._id,\n              block: savedFirstBlock,\n            }\n\n            const nextContentConfig = {\n              tmp_id: uuidv4(),\n              blockId: savedSecondBlock._id,\n              block: savedSecondBlock,\n            }\n            newContentConfigs.splice(index + 1, 0, nextContentConfig)\n\n            contentConfigs_Ref.current = newContentConfigs\n            onChange(newContentConfigs)\n            setAutoFocus({\n              tmp_id: nextContentConfig.tmp_id,\n              positionFromLineStart: 0,\n              inFirstLine: true,\n              inLastLine: false,\n            })\n          })\n          .catch(console.error)\n        })\n      .catch(console.error)\n  }, [\n    contentConfigs,\n    saveBlock,\n    contentConfigs_Ref,\n    onChange,\n    setAutoFocus,\n  ])\n\n  const handleRemoveSelf = useCallback(keys => {\n    const {\n      index,\n    } = keys\n\n    const newContentConfigs = [...contentConfigs]\n    newContentConfigs.splice(index, 1) // delete the block\n\n    contentConfigs_Ref.current = newContentConfigs\n\n    onChange(newContentConfigs)\n  }, [ contentConfigs, onChange ])\n\n  function onDragEnd(result) {\n    if (!result.destination) {\n      return\n    }\n\n    if (result.destination.index === result.source.index) {\n      return\n    }\n\n    const newContentConfigs = reorder(\n      contentConfigs,\n      result.source.index,\n      result.destination.index\n    )\n\n    contentConfigs_Ref.current = newContentConfigs\n    onChange(newContentConfigs)\n  }\n\n  const filteredContentConfigs = contentConfigs\n    .filter(Boolean)\n    .filter(contentConfig => contentConfig.tmp_id)\n\n  return <>\n  <div\n    key={updateCounter}\n    style={{\n      position: 'relative',\n      width: '1000px',\n      maxWidth: '100%',\n      margin: 'var(--basis_x8) auto 0 auto',\n    }}\n  >\n    <div>\n      <AddMenu\n        types={[\n          'button',\n          'text',\n          'headline',\n          // 'headline3',\n          // 'code',\n          'divider',\n          // 'checkbox',\n          // 'page',\n        ]}\n        createBlock={({ type }) => addRowByIndex(0, 0, { block: { type: type } })}\n        trigger={triggerProps => \n          <button\n            {...triggerProps}\n            className=\"text hasIcon\"\n            style={{\n              margin: '0 0 var(--basis_x2) 0',\n            }}\n          >\n            <span style={{pointerEvents: 'none'}}>\n              <AddIcon className=\"icon\" />\n              <span style={{marginInlineStart: 'var(--basis_x2)', verticalAlign: 'middle'}}>\n                <Localized id=\"add_content_before\" />\n              </span>\n            </span>\n          </button>\n        }\n      />\n    </div>\n\n    <DragDropContext onDragEnd={onDragEnd}>\n      <Droppable\n        droppableId=\"list\"\n        isDropDisabled={false}\n      >\n        {provided => (\n          <div\n            ref={provided.innerRef}\n            {...provided.droppableProps}\n            className=\"inputBorder\"\n            style={{\n              '--input-box-shadow': 'inset var(--basis_x8) 0 0 0 var(--background), inset var(--basis_x8) 0 0 var(--basis_x0_2) var(--on-background-contrast), inset 0 0 0 var(--basis_x0_2) var(--on-background-contrast)',\n              boxShadow: 'var(--input-box-shadow)',\n              paddingRight: 'var(--basis)',\n            }}\n          >\n            {\n              filteredContentConfigs\n              .map(\n                (contentConfig, index) => {\n                  const tmp_id = contentConfig.tmp_id\n                  const keys = {\n                    index,\n                    tmp_id,\n                  }\n\n                  return <Draggable\n                    key={tmp_id}\n                    draggableId={tmp_id}\n                    index={index}\n                    isDragDisabled={false}\n                    disableInteractiveElementBlocking={true}\n                    shouldRespectForcePress={true}\n                  >\n                    {provided => (\n                      <div\n                        ref={provided.innerRef}\n                        {...provided.draggableProps}\n\n                        key={tmp_id}\n                        className={classes.row}\n                      >\n                      <div className={classes.form}>\n                        <InlineEditorBlock\n                          key={tmp_id}\n                          className={classes.item}\n                          dataset={{\n                            'data-index': index,\n                            'data-id': tmp_id,\n                          }}\n                          contentConfig={contentConfig}\n\n                          reorderHandle={\n                            <Tooltip title={<div style={{ textAlign: 'center' }}>\n                              <strong>Drag</strong> to move.<br />\n                              <strong>Click</strong> to open menu.\n                            </div>}>\n                              <button\n                                className={`text ${classes.inlineRowButton} ${classes.dragHandleButton}`}\n                                {...provided.dragHandleProps}\n                              >\n                                <DragIndicatorIcon />\n                              </button>\n                            </Tooltip>\n                          }\n\n                          onRemoveSelf={ () => handleRemoveSelf(keys) }\n                          addRowBefore={ (newValue) => addRowByIndex(index, 0, newValue) }\n                          addRowAfter={ (newValue) => addRowByIndex(index, 1, newValue) }\n\n                          onInputRef={(inputRef) => saveInputRef(keys, inputRef)}\n                          onGoToPrevInput={(attr) => goToPrevInput(keys, attr)}\n                          onGoToNextInput={(attr) => goToNextInput(keys, attr)}\n                          onSplitText={(attr) => splitText(keys, attr)}\n                          onChange={(attr) => handleRowChange(keys, attr)}\n                          onMergeToPrevInput={(attr) => onMergeToPrevInput(keys, attr)}\n                          onMergeFromNextInput={(attr) => onMergeFromNextInput(keys, attr)}\n                          // {...repeater_props}\n                        />\n                      </div>\n                    </div>\n                    )}\n                  </Draggable>\n                }\n              )\n            }\n            {provided.placeholder}\n          </div>\n        )}\n      </Droppable>\n    </DragDropContext>\n  </div>\n\n  <div\n    style={{\n      position: 'relative',\n      height: '50vh',\n      cursor: (filteredContentConfigs.length === 0 ? 'default' : 'text'),\n    }}\n    onClick={filteredContentConfigs.length === 0 ? null : focusLastLine}\n  ></div>\n  </>\n}\n\nexport default ContentEditor\n","\nimport {\n  Login as LoginIcon,\n} from '@mui/icons-material'\n\nimport Localized from '../fluent/Localized.js'\n\nexport default function LoginScreen () {\n  return <>\n    <h1>Login to view content</h1>\n    <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n      <button className=\"text hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n        <LoginIcon className=\"icon\" />\n        <span>\n          <Localized id=\"login\" />\n        </span>\n      </button>\n    </a>\n  </>\n}\n\nexport function ErrorPage ({ errorName }) {\n  let title = 'Unknown Error'\n  let description = ''\n  let buttons = ''\n\n  if (errorName === 'no_access') {\n    title = `You don't have access to this page!`\n    \n    description = <>\n      <h2>If you are not logged in:</h2>\n      You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.<br/>\n\n      <h2>If you are logged in:</h2>\n        You propably don't have access to this page.\n    </>\n\n    buttons = <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n      <button className=\"text hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n        <LoginIcon className=\"icon\" />\n        <span>\n          <Localized id=\"login\" />\n        </span>\n      </button>\n    </a>\n  } else if (errorName === 'not_found') {\n    title = 'We could not find the requested URL…'\n    description = \"The URL you requested does currently not exist. Did you type the URL correctly?\"\n\n    buttons = <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n      <button className=\"text hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n        <LoginIcon className=\"icon\" />\n        <span>\n          <Localized id=\"login\" />\n        </span>\n      </button>\n    </a>\n  }\n\n  \n  return <>\n    <h1>{title}</h1>\n    <p>{description}</p>\n    {buttons}\n\n    <br/> {/* Spacing */}\n    <br/>\n    <br/>\n    <br/>\n\n    <p>\n      Please contact <a href=\"mailto:thomas.rosen@volteuropa.org\">thomas.rosen@volteuropa.org</a> if you think this is a bug.<br/>\n      Go to <a href=\"https://volteuropa.org\">volteuropa.org</a> for information about the Pan-European Political Movement.\n    </p>\n  </>\n\n  // <hr/>\n  // <p>\n  //   <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_client_errors\">HTTP Error Code</a>: {errorCode}\n  // </p>\n}\n","import { useRef, useState, useCallback, useEffect } from 'react'\n\nimport {\n  useParams,\n} from 'react-router-dom'\n\nimport useSaveBlock from '../hooks/useSaveBlock.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\nimport useBlockMatchesRoles from '../hooks/useBlockMatchesRoles.js'\n\n// import Select from 'react-select'\n\nimport {\n  // TranslateSharp as TranslateIcon,\n  IosShareSharp as ShareIcon,\n  LockSharp as PermissionsIcon,\n  SaveSharp as SaveIcon,\n  MoreHorizSharp as BlockMenuIcon,\n} from '@mui/icons-material'\n\nimport classes from './Editor.module.css'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\n// import { useTranslatedInputContext, LocalesMenu } from '../components/edit/TranslatedInput.js'\n\nimport Header from '../components/Header.js'\nimport BlockMenu from '../components/edit/BlockMenu.js'\nimport SharingEditor from '../components/edit/SharingEditor.js'\nimport PermissionsEditor from '../components/edit/PermissionsEditor.js'\nimport PropertiesEditor from '../components/edit/PropertiesEditor.js'\nimport ContentEditor from '../components/edit/ContentEditor.js'\nimport { ErrorPage } from '../components/ErrorPages.js'\n\n// const custom_react_select_styles = {\n//   menu: (provided, state) => ({\n//     ...provided,\n//     background: 'var(--purple)',\n//   }),\n// }\n// const custom_react_select_theme = theme => ({\n//   ...theme,\n//   borderRadius: 0,\n//   colors: {\n//     ...theme.colors,\n//     primary: 'var(--green)',\n//     primary25: 'var(--purple-dark)',\n//   },\n// })\n\nfunction Editor() {\n  const { getString } = useLocalization()\n\n  const saveBlock = useSaveBlock()\n  const loadBlock = useLoadBlock()\n\n  // const { currentLocale, setLocales } = useTranslatedInputContext()\n\n  const [ isSharingEditorOpen, setIsSharingEditorOpen ] = useState(false)\n  const openSharingEditor = useCallback(() => setIsSharingEditorOpen(true), [ setIsSharingEditorOpen ])\n  const closeSharingEditor = useCallback(() => setIsSharingEditorOpen(false), [ setIsSharingEditorOpen ])\n\n  const [ isPermissionsEditorOpen, setIsPermissionsEditorOpen ] = useState(false)\n  const openPermissionsEditor = useCallback(() => setIsPermissionsEditorOpen(true), [ setIsPermissionsEditorOpen ])\n  const closePermissionsEditor = useCallback(() => setIsPermissionsEditorOpen(false), [ setIsPermissionsEditorOpen ])\n\n  const loadedTheBlock = useRef(false)\n  let { id = '' } = useParams()\n\n  const [block, setBlock] = useState({\n    type: 'page',\n    properties: {},\n    content: [],\n  })\n  const type = block.type\n  const properties = block.properties\n  const content = block.content\n  const permissions = block.permissions\n\n  const [ canEdit, setCanEdit ] = useState(null)\n  const blockMatchesRoles = useBlockMatchesRoles()\n  useEffect(() => {\n    blockMatchesRoles(id, ['editor', 'owner'])\n      .then(matchesRoles => {\n        setCanEdit(matchesRoles)\n      })\n      .catch(error => {\n        console.error(error)\n        setCanEdit(false)\n      })\n  }, [ id, blockMatchesRoles, setCanEdit ])\n\n  useEffect(() => {\n    if (\n      canEdit\n      && typeof id === 'string'\n      && id !== ''\n      && (\n        !loadedTheBlock.current\n        || id !== block._id\n      )\n    ) {\n      loadBlock(id)\n        .then(loadedBlock => {\n          loadedTheBlock.current = true\n\n          setBlock(loadedBlock)\n        })\n    }\n  }, [\n    canEdit,\n    id,\n    block,\n    loadBlock,\n    setBlock,\n    // setLocales,\n  ])\n\n  const saveType = useCallback(newType => {\n    if (newType !== block.type) {\n      const newBlock = {\n        ...block,\n        type: newType,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const saveProperties = useCallback(newProperties => {\n    if (newProperties !== block.properties) {\n      const newBlock = {\n        ...block,\n        properties: newProperties,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const saveContent = useCallback(newContent => {\n    if (newContent !== block.content) {\n      const newBlock = {\n        ...block,\n        content: newContent,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const savePermissions = useCallback(newPermissions => {\n    if (newPermissions !== block.permissions) {\n      const newBlock = {\n        ...block,\n        permissions: newPermissions,\n      }\n\n      saveBlock(newBlock)\n        .then(gottenBlock => {\n          setBlock(gottenBlock)\n        })\n    }\n  }, [block, saveBlock, setBlock])\n\n  const manuallySaveEverything = useCallback(() => {\n    saveBlock(block)\n      .then(gottenBlock => {\n        if (gottenBlock._id !== block._id) {\n          setBlock(gottenBlock)\n        }\n      })\n  }, [saveBlock, block, setBlock])\n\n  // const isFirstRun = useRef(true)\n  // useEffect(() => {\n  //   if (isFirstRun.current) {\n  //     isFirstRun.current = false\n  //     return;\n  //   }\n  //\n  //   if (\n  //     Object.keys(block).length > 0\n  //     && JSON.stringify(initialBlock) !== JSON.stringify(block)\n  //   ) {\n  //   }\n  // }, [isFirstRun, initialBlock, block])\n\n  if (canEdit === false) {\n    return <>\n      <Header\n        block={null}\n        title=\"Error\"\n        rightActions={null}\n      />\n      <div className={`basis_x1 ${classes.app} ${classes.spine_aligned}`} dir=\"auto\">\n        <main className={`${classes.contentWrapper}`}>\n          <ErrorPage errorName=\"no_access\" />\n        </main>\n      </div>\n    </>\n  } else if (canEdit === true) {\n\n  const rightHeaderActions = <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n    {/* <button className=\"text\"><Localized id=\"path_editor_share\"/></button> */}\n\n\n    {/*\n    <LocalesMenu\n      trigger={triggerProps => (\n        <button {...triggerProps} className=\"text hasIcon\">\n          <TranslateIcon className=\"icon\" />\n          <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}>\n            <Localized id=\"path_editor_translate\" />\n            {getString('locale_'+currentLocale)}\n          </span>\n        </button>\n      )}\n    />\n    */}\n\n    {\n      isSharingEditorOpen\n      ? <SharingEditor\n          defaultBlock={block}\n          open={isSharingEditorOpen}\n          onClose={closeSharingEditor}\n          onChange={saveProperties}\n        />\n      : null\n    }\n    <button className=\"text hasIcon\" onClick={openSharingEditor}>\n      <ShareIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_share\" /></span>\n    </button>\n\n    {\n      isPermissionsEditorOpen\n      ? <PermissionsEditor\n          defaultPermissions={permissions}\n          open={isPermissionsEditorOpen}\n          onClose={closePermissionsEditor}\n          onChange={savePermissions}\n        />\n      : null\n    }\n    <button className=\"text hasIcon\" onClick={openPermissionsEditor}>\n      <PermissionsIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_permissions\" /></span>\n    </button>\n\n    <button className=\"text hasIcon\" onClick={manuallySaveEverything}>\n      <SaveIcon className=\"icon\" />\n      <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"path_editor_publish\" /></span>\n    </button>\n\n    <BlockMenu\n      {...{\n        block,\n        setType: saveType,\n      }}\n\n      trigger={props => (\n        <button\n          {...props}\n          className=\"default hasIcon\"\n        >\n          <BlockMenuIcon className=\"icon\" />\n        </button>\n      )}\n    />\n  </div>\n\n  const title = block.properties.text || getString('placeholder_main_headline')\n\n  return <div key={block._id} className={`hasHeader ${classes.editor}`}>\n    <Header\n      block={block}\n      // title={<a href={`https://volt.link/${slug}`} target=\"_blank\" rel=\"noopener noreferrer\"><span className=\"hideOnSmallScreen\">volt.link</span>/{slug}</a>}\n      title={title}\n      rightActions={rightHeaderActions}\n    />\n\n    <PropertiesEditor\n      type={type}\n      defaultProperties={properties}\n      onChange={saveProperties}\n    />\n\n    <ContentEditor\n      onChange={saveContent}\n      defaultValue={content}\n    />\n  </div>\n  } else {\n    return null\n  }\n}\n\nexport default Editor\n","import React, { useRef, useState, useEffect } from 'react'\n\nimport {\n  useParams,\n  Link,\n} from 'react-router-dom'\n\nimport { getImageUrl } from '../functions.js'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\nimport useLoadBlocks from '../hooks/useLoadBlocks.js'\nimport useUser from '../hooks/useUser.js'\nimport useBlockMatchesRoles from '../hooks/useBlockMatchesRoles.js'\n\nimport { ErrorPage } from '../components/ErrorPages.js'\nimport Header from '../components/Header.js'\nimport ViewerAuto from '../components/view/ViewerAuto.js'\n\nimport classes from './Viewer.module.css'\n\nimport {\n  EditSharp as EditIcon,\n} from '@mui/icons-material'\n\nfunction Viewer () {\n  const loadingTheBlock = useRef(false)\n  const { getString } = useLocalization()\n\n  const { loggedIn } = useUser()\n\n  const loadBlock = useLoadBlock()\n  const loadBlocks = useLoadBlocks()\n\n  let { id = '' } = useParams()\n\n  const [block, setBlock] = useState({\n    type: 'page',\n    properties: {},\n    content: [],\n  })\n  const [contentBlocks, setContentBlocks] = useState([])\n\n  const [canView, setCanView] = useState(null)\n  const blockMatchesRoles = useBlockMatchesRoles()\n  useEffect(() => {\n    blockMatchesRoles(id, ['viewer', 'owner'])\n      .then(matchesRoles => {\n        setCanView(matchesRoles)\n      })\n      .catch(error => {\n        console.error(error)\n        setCanView(false)\n      })\n  }, [ id, blockMatchesRoles, setCanView ])\n\n  useEffect(() => {\n    if (\n      canView\n      && loadingTheBlock.current === false\n      && typeof id === 'string'\n      && id !== ''\n      && id !== block._id\n    ) {\n      loadingTheBlock.current = true\n      loadBlock(id)\n        .then(async loadedBlock => {\n\n          let newLoadedBlock = loadedBlock\n\n          if (\n            Array.isArray(loadedBlock.content)\n            && loadedBlock.content.length > 0\n          ) {\n            let newContentConfigs = [...loadedBlock.content]\n\n            const ids2load = loadedBlock.content\n              .filter(contentConfig => !contentConfig.hasOwnProperty('block'))\n              .map(contentConfig => contentConfig.blockId)\n\n            let loadedContentBlocks = []\n            if (ids2load.length > 0) {\n              loadedContentBlocks = await loadBlocks({ ids: ids2load })\n            }\n          \n            newContentConfigs = newContentConfigs\n              .map(contentConfig => {\n                if (!contentConfig.hasOwnProperty('block')) {\n                  contentConfig.block = loadedContentBlocks.find(block => block._id === contentConfig.blockId)\n                }\n                return contentConfig\n              })\n\n            newLoadedBlock = {\n              ...newLoadedBlock,\n              content: newContentConfigs,\n            }\n          }\n\n          const blocks = (newLoadedBlock.content || [])\n          .map(contentConfig => contentConfig.block)\n\n          setBlock(newLoadedBlock)\n          setContentBlocks(blocks)\n          loadingTheBlock.current = false\n        })\n    }\n  }, [\n    canView,\n    id,\n    block._id,\n    loadBlock,\n    setBlock,\n    loadBlocks,\n    setContentBlocks,\n  ])\n\n  if (canView === false) {\n    return <>\n      <Header\n        block={null}\n        title=\"Error\"\n        rightActions={null}\n      />\n      <div className={`basis_x1 ${classes.app} ${classes.spine_aligned}`} dir=\"auto\">\n        <main className={`${classes.contentWrapper}`}>\n          <ErrorPage errorName=\"no_access\" />\n        </main>\n      </div>\n    </>\n  } else {\n  const type = block.type || null\n\n  const title = block.properties.text || getString('placeholder_main_headline')\n  const coverphoto_url = getImageUrl(block.properties.coverphoto)\n  const icon_url = getImageUrl(block.properties.icon)\n\n  // const pronouns = block.properties.pronouns || ''\n  \n  const rightHeaderActions = <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n    <Link to={`/${block._id}/edit`}>\n      <button className=\"text hasIcon\">\n        <EditIcon className=\"icon\" />\n        <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"edit_block\" /></span>\n      </button>\n    </Link>\n  </div>\n\n  return <>\n    <Header\n      block={block}\n      title={title}\n      rightActions={loggedIn ? rightHeaderActions : null}\n    />\n\n    <div className={`basis_x1 ${classes.app} ${classes.spine_aligned}`} dir=\"auto\">\n      {\n      (type === 'page' || type === 'person')\n      && coverphoto_url !== ''\n          ? <div style={{ backgroundImage: `url(${window.domains.backend}download_url?f=jpg&w=1400&h=400&url=${encodeURIComponent(coverphoto_url)})` }} className={classes.coverphoto}></div>\n          : null\n      }\n      <main className={`${classes.contentWrapper}`}>\n        {\n          (type === 'page' || type === 'person')\n          && icon_url !== ''\n            ? <div\n                style={{\n                  backgroundImage: `url(${window.domains.backend}download_url?f=jpg&w=400&h=400&url=${encodeURIComponent(icon_url)})`\n                }}\n                className={`${classes.icon} ${coverphoto_url === '' ? classes.coverphotoIsNotSet : classes.coverphotoIsSet}`}\n              ></div>\n            : null\n        }\n        { title !== '' ? <h1 dir=\"auto\">{title.split('\\n').map(l => <React.Fragment key={l}>{l}<br/></React.Fragment>)}</h1> : null }\n        { /* type === 'person' && pronouns !== '' ? <p dir=\"auto\"><strong style={{\n          padding: 'var(--basis)',\n          margin: 'var(--basis_x0_5) calc(-1 * var(--basis))',\n          display: 'inline-block',\n          backgroundColor: 'rgba(var(--on-background-rgb), var(--alpha-less))',\n        }}>{pronouns}</strong></p> : null */ }\n        <div className={classes.items}>\n          {\n            contentBlocks\n            .filter(block => !!block)\n            .map(contentBlock => <ViewerAuto key={contentBlock._id} block={contentBlock} />)\n          }\n        </div>\n      </main>\n    </div>\n  </>\n  }\n}\n\nexport default Viewer\n","import React, { useState, useEffect } from 'react'\n\nimport classes from './App.module.css'\n\nimport {\n  Routes,\n  Route,\n  useLocation,\n  useMatch,\n} from 'react-router-dom'\n\nimport { SidebarProvider, Sidebar, SidebarContent, Main } from '../components/Sidebar.js'\n// import Shortcode from './Shortcode.js'\nimport Editor from './Editor.js'\nimport Viewer from './Viewer.js'\n\nfunction App() {\n  const matchesStartpage = useMatch('/')\n  const location = useLocation()\n\n  const [customLocation, setCustomLocation] = useState({})\n\n  useEffect(() => {\n    //    /slug=id/suffix\n    //    /slugOrId/suffix\n\n    const slugAndIdRegex = /^\\/([^=/]*)(?:=?)([^=/]*)(.*)/\n\n    const slugAndIdMatch = location.pathname.match(slugAndIdRegex)\n    const slugOrId = slugAndIdMatch[1]\n    let id = slugAndIdMatch[2]\n    let suffix = slugAndIdMatch[3]\n\n    if (!id && slugOrId) {\n      id = slugOrId\n    }\n\n    if (\n      id !== ''\n      && suffix !== '/edit'\n      && suffix !== '/view'\n    ) {\n      suffix = '/view'\n    }\n\n    const newPathname = `/${id}${suffix}`\n    if (customLocation.pathname !== newPathname) {\n      setCustomLocation({\n        pathname: newPathname,\n      })\n    }\n  }, [ location, customLocation, setCustomLocation ])\n\n  return (<>\n    <div className={`${classes.app} ${matchesStartpage ? classes.isStartpage : ''}`}>\n      <SidebarProvider>\n        {\n          matchesStartpage\n          ? null\n          : <Sidebar />\n        }\n        <Main>\n          <Routes location={customLocation}>\n            <Route path=\"/:id/view\" element={<Viewer />} />\n            <Route path=\"/:id/edit\" element={<Editor />} />\n            {/* <Route path=\"/shortcode\" element={<Shortcode />} /> */}\n            <Route path=\"/\" element={<SidebarContent />} />\n          </Routes>\n        </Main>\n      </SidebarProvider>\n    </div>\n  </>)\n}\n\nexport default App\n","import React, { useEffect, useState } from 'react'\n\n// https://projectfluent.org/play/\n\n// import { LocalizationProvider, Localized } from '@fluent/react' // '@fluent/react/compat'\nimport { ReactLocalization, LocalizationProvider } from '@fluent/react'\nimport { FluentBundle, FluentResource } from '@fluent/bundle'\nimport { negotiateLanguages } from '@fluent/langneg'\n\n\nexport const locales = {\n  de: 'Deutsch',\n  en: 'English',\n  // es: 'Español',\n  // pt: 'Português',\n  fr: 'Français',\n  // it: 'Italiano',\n  // nl: 'Dutch',\n  // pl: 'Polska',\n  // ru: 'Pусский',\n}\n\nconst _supportedLocales_ = Object.keys(locales)\nconst _defaultLocale_ = 'en'\n\n\nasync function fetchMessages(locale) {\n  const path = await import('../locales/' + locale + '.ftl')\n\n  const response = await fetch(path.default)\n  const messages = await response.text()\n\n  return { [locale]: new FluentResource(messages) }\n}\n\nfunction getDefaultBundles() {\n  const bundle = new FluentBundle('')\n  bundle.addResource(new FluentResource(''))\n  return new ReactLocalization([bundle])\n}\n\nasync function createMessagesGenerator(currentLocales) {\n  const fetched = await Promise.all(\n    currentLocales.map(fetchMessages)\n  )\n  const messages = fetched.reduce(\n    (obj, cur) => Object.assign(obj, cur)\n  )\n\n  return function* generateBundles() {\n    for (const locale of currentLocales) {\n      const bundle = new FluentBundle(locale)\n      bundle.addResource(messages[locale])\n      yield bundle\n    }\n  }\n}\n\nexport function AppLocalizationProvider({ userLocales, children, onLocaleChange }) {\n  const [bundles, setBundles] = useState(getDefaultBundles())\n\n  useEffect(() => {\n    async function loadBundles() {\n      const currentLocales = negotiateLanguages(\n        userLocales,\n        _supportedLocales_,\n        { defaultLocale: _defaultLocale_ }\n      )\n\n      if (!!onLocaleChange) {\n        onLocaleChange(currentLocales)\n      }\n\n      const generateBundles = await createMessagesGenerator(currentLocales)\n\n      const new_bundles = new ReactLocalization(generateBundles())\n      new_bundles.userLocales = userLocales\n      new_bundles.defaultLocale = _defaultLocale_\n      new_bundles.supportedLocales = _supportedLocales_\n      setBundles(new_bundles)\n    }\n    loadBundles()\n  }, [userLocales, onLocaleChange])\n\n  if (!bundles) {\n    // Show a loader.\n    return <div>Loading texts…</div>\n  }\n\n  return <LocalizationProvider l10n={bundles}>\n    {children}\n  </LocalizationProvider>\n}\n\n","import React, { useState, useEffect, useCallback } from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\n\nimport snackbarClasses from './Snackbar.module.css'\n\nimport App from './pages/App.js'\n// import reportWebVitals from './reportWebVitals'\nimport { BrowserRouter as Router } from 'react-router-dom'\n\nimport 'intl-pluralrules'\nimport { AppLocalizationProvider, locales } from './fluent/l10n.js'\n// import { TranslatedInputProvider } from './components/edit/TranslatedInput.js'\n\nimport useMediaQuery from '@mui/material/useMediaQuery'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\n\nimport { SnackbarProvider } from 'notistack'\n\nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n} from '@apollo/client'\n\nwindow.domains = {\n  // frontend: 'http://localhost:3000/',\n  backend: 'https://api.volt.link/',\n  // backend: 'http://localhost:4004/',\n  frontend: 'https://beta.volt.link/',\n}\n\nconst client = new ApolloClient({\n  uri: window.domains.backend+'graphql/v1/',\n  cache: new InMemoryCache(),\n  credentials: 'include',\n  defaultOptions: {\n    watchQuery: {\n      // fetchPolicy: 'cache-and-network',\n      fetchPolicy: 'no-cache',\n      errorPolicy: 'ignore',\n    },\n    query: {\n      fetchPolicy: 'no-cache',\n      errorPolicy: 'all',\n    },\n  },\n})\n\n// client\n//   .query({\n//     query: gql`\n//       query GetRates {\n//         rates(currency: \"USD\") {\n//           currency\n//         }\n//       }\n//     `\n//   })\n//   .then(result => console.info(result));\n\nfunction Start() {\n  // const [userLocales, setUserLocales] = useState(['de'])\n  const [userLocales, setUserLocales] = useState(navigator.languages)\n  const [currentLocale, setCurrentLocale] = useState(null)\n\n  useEffect(() => {\n    if (!!window.umami) {\n      let systemLocales = navigator.languages\n      if (!!systemLocales || Array.isArray(systemLocales)) {\n        for (let locale of systemLocales) {\n          locale = locale.toLowerCase() // Not really correct but the system locales sadly don't conform to the standard.\n\n          const language = locale.split('-')[0]\n          if (language !== locale) {\n            window.umami.trackEvent('L: ' + language) // Log just the language.\n          }\n          window.umami.trackEvent('L: ' + locale) // Log the full locale.\n        }\n      }\n    }\n  }, [])\n\n  const handleLanguageChange = useCallback(event => {\n    setUserLocales([event.target.dataset.locale])\n  }, [setUserLocales])\n\n  const handleCurrentLocalesChange = useCallback(currentLocales => {\n    setCurrentLocale(currentLocales.length > 0 ? currentLocales[0] : '')\n  }, [setCurrentLocale])\n\n\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)')\n\n  const theme = React.useMemo(\n    () =>\n      createTheme({\n        palette: {\n          mode: prefersDarkMode ? 'dark' : 'light',\n        },\n      }),\n    [prefersDarkMode],\n  )\n\n  return <>\n  <div\n    id=\"react-notification\"\n    key=\"react-notification\"\n    style={{zIndex: '10000'}}\n  ></div>\n\n  <AppLocalizationProvider\n    key=\"AppLocalizationProvider\"\n    userLocales={userLocales}\n    onLocaleChange={handleCurrentLocalesChange}\n  >\n    <ApolloProvider client={client}>\n      <ThemeProvider theme={theme}>\n        <SnackbarProvider\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          style={{ minWidth: 'unset' }}\n          classes={{\n            variantSuccess: `${snackbarClasses.snackbar} ${snackbarClasses.success}`,\n            variantError: `${snackbarClasses.snackbar} ${snackbarClasses.error}`,\n            variantWarning: `${snackbarClasses.snackbar} ${snackbarClasses.warning}`,\n            variantInfo: `${snackbarClasses.snackbar} ${snackbarClasses.info}`,\n          }}\n          domRoot={document.getElementById('react-notification')}\n        >\n          {/* <TranslatedInputProvider> */}\n            <Router>\n              <App locales={locales} currentLocale={currentLocale} onLanguageChange={handleLanguageChange} />\n            </Router>\n          {/* </TranslatedInputProvider> */}\n        </SnackbarProvider>\n      </ThemeProvider>\n    </ApolloProvider>\n  </AppLocalizationProvider>\n  </>\n}\n\nReactDOM.render(<Start />, document.getElementById('root'))\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.info))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals()\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coverphoto\":\"ViewerAutomationCard_coverphoto__2VxrG\",\"icon\":\"ViewerAutomationCard_icon__3eqYU\",\"title\":\"ViewerAutomationCard_title__3sN3b\",\"iconLine\":\"ViewerAutomationCard_iconLine__2YJ9D\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsWrapper\":\"PermissionsEditor_dialogsWrapper__1xVvi\",\"dialog\":\"PermissionsEditor_dialog__2rpyk\",\"backdrop\":\"PermissionsEditor_backdrop__1dRPN\",\"inputWrapper\":\"PermissionsEditor_inputWrapper__4DGsr\",\"emailInput\":\"PermissionsEditor_emailInput__1uH8s\",\"permissionRow\":\"PermissionsEditor_permissionRow__2HaWO\",\"menuButton\":\"PermissionsEditor_menuButton__2jIMI\",\"ownerInfo\":\"PermissionsEditor_ownerInfo__EEKXP\",\"actions\":\"PermissionsEditor_actions__k4oBn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"Viewer_app__1_jMF\",\"spine_aligned\":\"Viewer_spine_aligned__2mJuq\",\"items\":\"Viewer_items__2FgjF\",\"coverphoto\":\"Viewer_coverphoto__16R-U\",\"icon\":\"Viewer_icon__219E5\",\"coverphotoIsSet\":\"Viewer_coverphotoIsSet__26PSP\",\"contentWrapper\":\"Viewer_contentWrapper__1HLN8\",\"type_p\":\"Viewer_type_p__O5DZS\"};","function getImageUrl(imageObj) {\n  if (\n    typeof imageObj === 'object'\n    && imageObj !== null\n    && !Array.isArray(imageObj)\n  ) {\n    if (imageObj.type === 'url') {\n      return imageObj.url || ''\n    }\n  }\n\n  return ''\n}\n\nmodule.exports = {\n  getImageUrl\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"IconPicker_root__2okyv\",\"iconIsSet\":\"IconPicker_iconIsSet__SnQwA\",\"coverphotoIsSet\":\"IconPicker_coverphotoIsSet__3m9Dw\",\"icon\":\"IconPicker_icon__JWgfX\",\"iconWrapper\":\"IconPicker_iconWrapper__1zo6g\",\"sizing_pixel\":\"IconPicker_sizing_pixel__3TeE0\",\"iconIsNotSet\":\"IconPicker_iconIsNotSet__1T0Zd\",\"changeIconButton\":\"IconPicker_changeIconButton__TxsdG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"snackbar\":\"Snackbar_snackbar__119_w\",\"default\":\"Snackbar_default__31-eU\",\"success\":\"Snackbar_success__zvTW8\",\"error\":\"Snackbar_error__3XeD6\",\"warning\":\"Snackbar_warning__2CBXt\",\"info\":\"Snackbar_info__EuVSN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"coverphoto\":\"CoverphotoPicker_coverphoto__1mWB4\",\"root\":\"CoverphotoPicker_root__3T8t9\",\"coverphotoIsNotSet\":\"CoverphotoPicker_coverphotoIsNotSet__1O3-S\",\"button_wrapper\":\"CoverphotoPicker_button_wrapper__2oEjh\",\"coverphotoIsSet\":\"CoverphotoPicker_coverphotoIsSet__2o24A\",\"iconIsSet\":\"CoverphotoPicker_iconIsSet__D_4uA\",\"changeCoverphotoButton\":\"CoverphotoPicker_changeCoverphotoButton__2GnZD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main_headline\":\"PropertiesEditor_main_headline__3wy7R\",\"propertiesFrame\":\"PropertiesEditor_propertiesFrame__1uBEz\",\"properties_row\":\"PropertiesEditor_properties_row__2tX7M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialog\":\"SharingEditor_dialog__22jfY\",\"backdrop\":\"SharingEditor_backdrop__1Gra9\",\"inputWrapper\":\"SharingEditor_inputWrapper__1UyBD\",\"input\":\"SharingEditor_input__brkXK\",\"actions\":\"SharingEditor_actions__2zz6x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"InlineEditorBlock_block__14-zd\",\"block_input\":\"InlineEditorBlock_block_input__2I1iu\",\"form_deactivated\":\"InlineEditorBlock_form_deactivated__2oktp\",\"form_active\":\"InlineEditorBlock_form_active__hi5HC\",\"reorderHandle\":\"InlineEditorBlock_reorderHandle__2_s23\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"ContentEditor_row__JonRI\",\"form\":\"ContentEditor_form__wtoB9\",\"item\":\"ContentEditor_item__3U0XE\",\"inlineRowButton\":\"ContentEditor_inlineRowButton__2pw6r\",\"dragHandleButton\":\"ContentEditor_dragHandleButton__1Y_RP\"};"],"sourceRoot":""}