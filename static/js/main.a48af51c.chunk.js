(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[0],{100:function(e,t,n){e.exports={row:"ContentEditor_row__JonRI",form:"ContentEditor_form__wtoB9",item:"ContentEditor_item__3U0XE",inlineRowButton:"ContentEditor_inlineRowButton__2pw6r",dragHandleButton:"ContentEditor_dragHandleButton__1Y_RP"}},111:function(e,t,n){e.exports={icon:"ViewerPageLine_icon__GiwAD",title:"ViewerPageLine_title__3zDUr"}},119:function(e,t,n){var c=n(87).negotiateLanguages;function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var r=c(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===r.length?null:e[r[0]]}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",r=e.map((function(e){return e[n]})).filter(Boolean);if(0===r.length)return null;var a=c(t,r,{defaultLocale:r[0],strategy:"lookup"});return 0===a.length?null:e.filter((function(e){return e[n]===a[0]}))}e.exports={fluentByObject:r,fluentByArray:a,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var c=a(e,t);Array.isArray(c)&&c.length>0&&(e=c[0].value)}else"object"===typeof e&&(e=r(e,t));return"string"!==typeof e&&(e=n),e}}},128:function(e,t,n){e.exports={content:"SidebarContent_content__RAi8X",header:"SidebarContent_header__1pYRG",headerBar:"SidebarContent_headerBar__2xkje"}},131:function(e,t,n){e.exports={blockRow:"BlockTree_blockRow__80Vim",blockRowActions:"BlockTree_blockRowActions__GDOGf"}},132:function(e,t,n){e.exports={icon:"ViewerPersonCard_icon__3fe_H",name:"ViewerPersonCard_name__3Ddq3"}},133:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},144:function(e,t,n){e.exports={app:"App_app__3hbGO",isStartpage:"App_isStartpage__1Q6rs"}},151:function(e,t,n){e.exports={main:"Sidebar_main__1MCX5",open:"Sidebar_open__gnBQb"}},152:function(e,t,n){e.exports={input:"Shortcode_input__Av6rm",hideSubmitButton:"Shortcode_hideSubmitButton__mbXgB"}},153:function(e,t,n){e.exports={translatedInput:"TranslatedInput_translatedInput__2vy_n",content:"TranslatedInput_content__2-c_U",translationHelp:"TranslatedInput_translationHelp__2_0uC",changeLocaleButton:"TranslatedInput_changeLocaleButton__19h6P"}},155:function(e,t,n){e.exports={rebuild_textarea:"HtmlInput_rebuild_textarea__ZfRzZ",show_placeholder:"HtmlInput_show_placeholder__hM8g2"}},171:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},172:function(e,t,n){e.exports={error:"FancyInput_error__2DFWE"}},173:function(e,t,n){e.exports={editor:"Editor_editor__2hX0g",loadingContent:"Editor_loadingContent__2fqdK",editor_form_row:"Editor_editor_form_row__17Pul"}},198:function(e,t,n){},214:function(e,t,n){var c={"./de.ftl":[223,3],"./en.ftl":[224,4],"./fr.ftl":[225,5]};function r(e){if(!n.o(c,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=c[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(c)},r.id=214,e.exports=r},215:function(e,t,n){"use strict";n.r(t);var c=n(21),r=n(5),a=n(1),o=n.n(a),i=n(36),s=n.n(i),l=(n(198),n(76)),u=n.n(l),j=n(144),b=n.n(j),d=n(19),p=n(313),O=n(4),h=n(96),f=n(87),x=n(58),v=n(119),g=n.n(v),m=n(0),_=function(e){return Object(m.jsx)(h.b,Object(O.a)(Object(O.a)({},e),{},{elems:Object(O.a)({br:Object(m.jsx)("br",{})},e.elems),children:Object(m.jsx)(o.a.Fragment,{children:e.children})}),e.id)};function k(e){return function(t){var n=o.a.useContext(x.a);return o.a.createElement(e,Object(O.a)({fluentByObject:function(e,t){if(t||(t=null),e){var r,a=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return a.includes(e)})),i=Object(f.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),s=Object(c.a)(i);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(e[l])return e[l]}}catch(u){s.e(u)}finally{s.f()}return t}return t},getString:function(e,t,c){return n.getString(e,t,c||" ")}},t))}}function y(){var e=o.a.useContext(x.a);return Object(O.a)(Object(O.a)({},e),{},{getString:function(t,n,c){return e.getString(t,n,c||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return g.a.fluentByAny(t,e.userLocales,n)}})}var w,C,N,S,I,F,B=n(14),E=n.n(B),P=n(27),A=n(275),D=n(47),T=n(340),R=Object(T.a)(w||(w=Object(D.a)(["\n  query getBlock ($_id: ID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        created\n      }\n    }\n  }\n"]))),L=Object(T.a)(C||(C=Object(D.a)(["\n  query getBlocks ($ids: [ID], $types: [String]) {\n    blocks (ids: $ids, types: $types) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        created\n      }\n    }\n  }\n"]))),V=(Object(T.a)(N||(N=Object(D.a)(["\n  query getBlockBySlug ($slug: ID!) {\n    blockBySlug (slug: $slug) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        created\n      }\n      permissions {\n        email\n        role\n      }\n    }\n  }\n"]))),Object(T.a)(S||(S=Object(D.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n    }\n  }\n"])))),W=Object(T.a)(I||(I=Object(D.a)(["\n  query getSiblingBlocks ($_id: ID!) {\n    siblingBlocks (_id: $_id) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),G=Object(T.a)(F||(F=Object(D.a)(["\n  query getParentBlocks ($_id: ID!) {\n    parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed\n    }\n  }\n"])));function z(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)({}),n=Object(r.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!1),s=Object(r.a)(i,2),l=s[0],u=s[1],j=Object(A.a)();return Object(a.useEffect)((function(){j.query({query:V}).then(function(){var e=Object(P.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("self")?(o(n.self),u(n.self.logged_in)):(o({}),u(!1));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),o({}),u(!1)}))}),[e,o,u,j]),Object(O.a)(Object(O.a)({},c),{},{loggedIn:l})}var M,H=n(13),U=n(342),q=function(e){var t=Object(a.useState)(!1),n=Object(r.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)((function(){var t=window.matchMedia(e);t.matches!==c&&o(t.matches);var n=function(){return o(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[c,e]),c},$=n(128),J=n.n($),X=n(337),Z=n(280),K=n(344),Q=n(279),Y=n(348),ee=n(282),te=n(283),ne=n(284),ce=n(309),re=n(310),ae=n(311),oe=n(298),ie=n(312),se=n(314),le=n(315),ue=Object(T.a)(M||(M=Object(D.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),je=n(92);var be=function(){var e=y().getString,t=Object(A.a)(),n=Object(je.b)(),c=n.enqueueSnackbar,r=n.closeSnackbar;return Object(a.useCallback)((function(n){return new Promise((function(a){var o=null;"object"===typeof(n=Object(O.a)({},n))&&null!==n&&n.hasOwnProperty("__typename")&&delete n.__typename;var i=new Promise((function(i){t.mutate({mutation:ue,variables:{block:n}}).then(function(){var t=Object(P.a)(E.a.mark((function t(s){var l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=s.data,i("got-data"),null!==o&&r(o),"string"===typeof l.error?"no_edit_permission"===l.error?c(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):c(""+l.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(a(Object(O.a)(Object(O.a)({},n),{},{_id:l.saveBlock})),c(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(P.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(n),i("got-error"),null!==o&&r(o),c(e("path_editor_status_error_while_saving",{error:n.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=c(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}))}),[c,r,t,e])},de=n(34),pe=n(347),Oe=n(281),he=n(276),fe=n(335),xe=n(277);var ve=function(e){var t=e.trigger,n=e.children,c=void 0===n?function(){}:n,o=Object(a.useRef)(null),i=Object(a.useState)(!1),s=Object(r.a)(i,2),l=s[0],u=s[1],j=function(){u(!1)},b=l?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(m.jsxs)(m.Fragment,{children:[t({ref:o,"aria-describedby":b,onClick:function(){u((function(e){return!e}))},style:{pointerEvents:l?"none":"all"}}),Object(m.jsxs)(he.a,{children:[Object(m.jsx)("div",{onClick:j,style:{display:l?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(m.jsx)(fe.a,{id:b,open:l,anchorEl:o.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}},{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,tether:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(m.jsx)(xe.a,Object(O.a)(Object(O.a)({},t),{},{children:Object(m.jsx)("div",{children:c&&"function"===typeof c?c({open:l,style:{transformOrigin:"top left"},closePopover:j}):null})}))}})]})]})},ge=["closePopover"];function me(e){var t=e.trigger,n=e.children;return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ve,{trigger:t,children:function(e){var t=e.closePopover,c=Object(de.a)(e,ge);return Object(m.jsx)(pe.a,Object(O.a)(Object(O.a)({},c),{},{sx:{maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(m.jsxs)(Y.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:[n,Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsxs)(X.a,{style:{marginTop:"8px"},onClick:t,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Oe.a,{})}),Object(m.jsx)(K.a,{children:Object(m.jsx)(_,{id:"block_menu_close_menu"})})]})]})}))}})})}var _e={page:Object(m.jsx)(ee.a,{}),person:Object(m.jsx)(te.a,{}),action:Object(m.jsx)(ne.a,{})},ke=["page","action"];function ye(e){var t=e.createBlock;return Object(m.jsx)(m.Fragment,{children:ke.map((function(e){return Object(m.jsxs)(X.a,{onClick:function(){return t({type:e})},children:[Object(m.jsx)(Z.a,{children:_e[e]}),Object(m.jsx)(K.a,{children:Object(m.jsx)(_,{id:"create_new_"+e})})]},e)}))})}function we(e){var t=e.trigger,n=e.createBlock;return z().loggedIn?Object(m.jsxs)(me,{trigger:t,children:[Object(m.jsx)("div",{style:{marginTop:"8px"}}),Object(m.jsx)(ye,{createBlock:n})]}):null}var Ce=n(131),Ne=n.n(Ce),Se=n(351),Ie=n(306),Fe=n(307),Be=n(308),Ee=n(341),Pe=n(350),Ae=n(288),De=n(289),Te=n(290),Re=n(291),Le=n(292),Ve=n(293),We=n(294),Ge=n(295),ze=n(296),Me=n(297),He=n(299),Ue=n(300),qe=n(301),$e=n(302),Je=n(345),Xe=n(285);function Ze(e){var t=e.parentMenuIsOpen,n=void 0===t||t,c=e.label,o=void 0===c?"":c,i=e.triggerProps,s=void 0===i?{}:i,l=e.MenuListProps,u=void 0===l?{}:l,j=e.position,b=void 0===j?"right":j,d=e.onOpen,p=void 0===d?function(){}:d,h=e.children,f=Object(a.useRef)(null),x=Object(a.useState)(!1),v=Object(r.a)(x,2),g=v[0],k=v[1],y=g&&n,w=Object(a.useCallback)((function(){var e=!y;k(e),!0===e&&p()}),[k,y,p]),C=Object(a.useCallback)((function(){k(!1)}),[k]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)(X.a,Object(O.a)(Object(O.a)({},s),{},{ref:f,onClick:w,style:Object(O.a)({display:"flex",justifyContent:"space-between"},s.style),children:[Object(m.jsx)("div",{style:{display:"flex"},children:o}),Object(m.jsx)(Xe.a,{style:{marginRight:"-10px"}})]})),Object(m.jsx)(Je.a,{style:{pointerEvents:"none"},anchorEl:f.current,anchorOrigin:{vertical:"top",horizontal:"right"===b?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"===b?"left":"right"},open:y,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:C,sx:{marginTop:"-8px"},MenuListProps:Object(O.a)(Object(O.a)({},u),{},{sx:Object(O.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},u.sx)}),children:Object(m.jsxs)("div",{style:{pointerEvents:"auto"},children:[h,Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsxs)(X.a,{style:{marginTop:"8px"},onClick:C,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Oe.a,{})}),Object(m.jsx)(_,{id:"block_menu_close_menu"})]})]})})]})}var Ke=["closePopover","open"];var Qe=k((function(e){var t=e.block,n=e.getString,c=e.trigger,r=e.setType,o=e.createBlock,i=e.toggle_active,s=void 0===i?null:i,l=e.active,u=void 0===l?null:l,j=e.onRemoveRow,b=void 0===j?null:j,p=e.addRowBefore,h=void 0===p?null:p,f=e.addRowAfter,x=void 0===f?null:f,v=Object(d.g)(),g=t._id,k=void 0===g?"":g,y=t.type,w=void 0===y?"":y,C=Object(a.useCallback)((function(){h({blockId:""})}),[h]),N=Object(a.useCallback)((function(){v("/view/".concat(k))}),[k,v]),S=Object(a.useCallback)((function(){v("/edit/".concat(k))}),[k,v]),I=Object(a.useCallback)((function(e){o(Object(O.a)(Object(O.a)({},e),{},{parent:k}))}),[o,k]),F=be(),B=Object(a.useCallback)((function(e){F(Object(O.a)(Object(O.a)({},t),{},{parent:e}))}),[F,t]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ve,{trigger:c,children:function(e){var t=e.closePopover,c=e.open,a=Object(de.a)(e,Ke);return Object(m.jsx)(pe.a,Object(O.a)(Object(O.a)({},a),{},{sx:{maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(m.jsxs)(Y.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%"},children:["function"===typeof r?Object(m.jsxs)(Ze,{parentMenuIsOpen:c,label:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Ae.a,{})}),Object(m.jsx)(_,{id:"block_menu_choose_type_label"})]}),MenuListProps:{style:{marginTop:"-8px"}},children:[Object(m.jsx)(Pe.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-8px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:Object(m.jsx)(_,{id:"block_menu_choose_type_label"})}),Object(m.jsx)("div",{style:{height:"4px"}}),[{value:"page",icon:Object(m.jsx)(ee.a,{}),label:n("block_menu_type_label_page")},{value:"person",icon:Object(m.jsx)(te.a,{}),label:n("block_menu_type_label_person")},{value:"button",icon:Object(m.jsx)(De.a,{}),label:n("block_menu_type_label_button")},{value:"headline",icon:Object(m.jsx)(Te.a,{}),label:n("block_menu_type_label_headline")},{value:"text",icon:Object(m.jsx)(Re.a,{}),label:n("block_menu_type_label_text")},{value:"divider",icon:Object(m.jsx)(Le.a,{}),label:n("block_menu_type_label_divider")},{value:"checkbox",icon:Object(m.jsx)(Ve.a,{}),label:n("block_menu_type_label_checkbox")},{value:"action",icon:Object(m.jsx)(ne.a,{}),label:n("block_menu_type_label_action")}].map((function(e){return Object(m.jsxs)(X.a,{selected:e.value===w,onClick:function(){return r(e.value)},children:[Object(m.jsx)(Z.a,{children:e.icon}),e.label]},e.value)}))]}):null,"function"===typeof r&&(h||x||"boolean"===typeof u&&s||b||"function"===typeof o)?Object(m.jsx)(Q.a,{style:{opacity:.2,marginBottom:"8px"}}):null,h?Object(m.jsxs)(X.a,{onClick:C,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(We.a,{})}),Object(m.jsx)(_,{id:"block_menu_add_before"})]}):null,x?Object(m.jsxs)(X.a,{onClick:x,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Ge.a,{})}),Object(m.jsx)(_,{id:"block_menu_add_after"})]}):null,"boolean"===typeof u&&s?Object(m.jsxs)(X.a,{onClick:s,children:[Object(m.jsx)(Z.a,{children:u?Object(m.jsx)(ze.a,{}):Object(m.jsx)(Me.a,{})}),u?Object(m.jsx)(_,{id:"block_menu_hide"}):Object(m.jsx)(_,{id:"block_menu_show"})]}):null,"function"===typeof o?Object(m.jsx)(Ze,{parentMenuIsOpen:c,label:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(oe.a,{})}),Object(m.jsx)(_,{id:"block_menu_create_child_block"})]}),children:Object(m.jsx)(ye,{createBlock:I})}):null,Object(m.jsxs)(Ze,{parentMenuIsOpen:c,label:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(He.a,{})}),Object(m.jsx)(_,{id:"block_menu_change_parent"})]}),MenuListProps:{style:{marginTop:"-8px"}},children:[Object(m.jsx)(Pe.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-8px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:Object(m.jsx)(_,{id:"block_menu_change_parent"})}),Object(m.jsx)("div",{style:{height:"8px"}}),Object(m.jsxs)(X.a,{onClick:function(e){return B(null)},children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Ue.a,{})}),Object(m.jsx)(_,{id:"block_menu_change_parent_none"})]}),Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsx)("div",{style:{padding:"0 var(--basis_x2)",marginBottom:"8px"},children:Object(m.jsx)(It,{onClick:function(e){return B(e._id)},blockMenu:!1,types:["page","person"],filterBlockIds:[k]})})]}),"string"===typeof k&&""!==k?Object(m.jsxs)("div",{children:["function"===typeof r||h||x||"boolean"===typeof u&&s||b||"function"===typeof o?Object(m.jsx)(Q.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}):null,Object(m.jsxs)(X.a,{style:{marginTop:"8px"},onClick:N,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(qe.a,{})}),Object(m.jsx)(_,{id:"view_block"})]}),Object(m.jsxs)(X.a,{onClick:S,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)($e.a,{})}),Object(m.jsx)(_,{id:"edit_block"})]})]}):null,Object(m.jsx)(Q.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),Object(m.jsxs)(X.a,{onClick:t,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Oe.a,{})}),Object(m.jsx)(_,{id:"block_menu_close_menu"})]})]})}))}})})}));var Ye=function(e){var t=e.block,n=(0,y().fluentByAny)(t.properties.text,"");return Object(m.jsx)("h2",{dir:"auto",children:n})};var et=function(e){var t=e.block,n=(0,y().fluentByAny)(t.properties.text,"");return Object(m.jsx)("p",{dir:"auto",children:n})};var tt=function(e){var t=e.block,n=e.actions,c=void 0===n?{}:n,r=y().fluentByAny,a="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(a=t.properties.action.url);var o=r(t.properties.text,""),i=c.hasOwnProperty("click");return!1===i&&""!==a?Object(m.jsx)("a",{href:a,children:Object(m.jsx)("button",{dir:"auto",style:{margin:"0"},children:o})}):!0===i?Object(m.jsx)("button",{dir:"auto",disabled:"disabled",style:{margin:"0"},onClick:c.onclick,children:o}):Object(m.jsx)("button",{dir:"auto",disabled:"disabled",style:{margin:"0"},children:o})};function nt(){return Object(m.jsx)("hr",{})}var ct=n(303);var rt=function(e){var t=e.block,n=(0,y().fluentByAny)(t.properties.text,""),c=Boolean(t.properties.checked),r={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(m.jsxs)("p",{dir:"auto",children:[c?Object(m.jsx)(Ve.a,{style:r}):Object(m.jsx)(ct.a,{style:r}),n]})},at=n(304),ot=n(111),it=n.n(ot);var st=function(e){var t=e.block,n=e.actions,c=void 0===n?{}:n,r=y(),o=r.fluentByAny,i=r.getString,s=Object(d.g)(),l=t._id,u=Object(a.useCallback)((function(){s("/view/".concat(l))}),[s,l]),j=t.properties.icon||"",b=o(t.properties.text,i("placeholder_main_headline"));return Object(m.jsx)("div",{onClick:c.hasOwnProperty("click")?c.click:u,className:"clickable_card ".concat(it.a.root),children:Object(m.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[""===j?Object(m.jsx)(at.a,{className:it.a.icon}):Object(m.jsx)("div",{className:it.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(j),")")},alt:b}),Object(m.jsx)("span",{dir:"auto",className:it.a.title,children:b})]})})},lt=n(97),ut=n.n(lt);var jt=function(e){var t=e.block,n=e.actions,c=void 0===n?{}:n,r=y(),o=r.fluentByAny,i=r.getString,s=Object(d.g)(),l=t._id,u=Object(a.useCallback)((function(){s("/view/".concat(l))}),[s,l]),j=t.properties.coverphoto||"",b=t.properties.icon||"",p=o(t.properties.text,i("placeholder_main_headline")),O=o(t.properties.description,"");return Object(m.jsxs)("div",{onClick:c.hasOwnProperty("click")?c.click:u,className:"clickable_card ".concat(ut.a.root),children:[""===j?null:Object(m.jsx)("div",{className:ut.a.coverphoto,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(j),")")},alt:p}),Object(m.jsxs)("div",{children:[""===b?Object(m.jsx)(at.a,{className:ut.a.icon}):Object(m.jsx)("div",{className:ut.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(b),")")},alt:p}),Object(m.jsx)("span",{dir:"auto",className:ut.a.title,children:p}),""!==O?Object(m.jsx)("p",{dir:"auto",children:O}):null]})]})},bt=n(305),dt=n(132),pt=n.n(dt);var Ot=function(e){var t=e.block,n=e.actions,c=void 0===n?{}:n,r=y().fluentByAny,o=Object(d.g)(),i=t._id,s=Object(a.useCallback)((function(){o("/view/".concat(i))}),[o,i]),l=t.properties.icon||"",u=r(t.properties.text,"");return Object(m.jsxs)("div",{onClick:c.hasOwnProperty("click")?c.click:s,className:"clickable_card",style:{display:"flex",alignItems:"center"},children:[""===l?Object(m.jsx)(bt.a,{className:pt.a.icon}):Object(m.jsx)("div",{className:pt.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(l),")")},alt:u}),Object(m.jsx)("span",{className:pt.a.name,dir:"auto",children:u})]})},ht=n(69),ft=n.n(ht),xt=n(70),vt=n(46),gt=n.n(vt);var mt=function(e){var t=e.block,n=void 0===t?{}:t,c=e.actions,r=void 0===c?{}:c,o=y().fluentByAny,i=Object(d.g)(),s=n._id,l=Object(a.useCallback)((function(){i("/view/".concat(s))}),[i,s]),u=o(n.properties.text,""),j=o(n.properties.description,""),b=null,p=(n.properties||{}).trigger||{},O=p.type;b="path"===O?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.e,size:1,className:gt.a.icon}),Object(m.jsxs)("p",{children:["volt.link/",p.path]})]}):"click"===O?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.d,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:p.blockId})]}):"cron"===O?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.h,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:p.cron})]}):"block_change"===O?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.g,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:p.blockId})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ne.a,{className:gt.a.icon}),Object(m.jsx)("p",{children:Object.keys(p).length>0?JSON.stringify(p):null})]});var h=null,f=(n.properties||{}).action||{},x=f.type;return h="open_url"===x?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.i,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:f.url})]}):"render_block"===x?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.a,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:f.blockId})]}):"run_block"===x?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.c,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:f.blockId})]}):"send_payload"===x?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.b,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:f.blockId})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(ft.a,{path:xt.f,size:1,className:gt.a.icon}),Object(m.jsx)("p",{children:Object.keys(f).length>0?JSON.stringify(f):null})]}),Object(m.jsx)("div",{onClick:r.hasOwnProperty("click")?r.click:l,className:"clickable_card ".concat(gt.a.root),children:Object(m.jsxs)("div",{children:[""!==u?Object(m.jsx)("div",{dir:"auto",className:gt.a.title,children:u}):null,""!==j?Object(m.jsx)("p",{dir:"auto",children:j}):null,null!==b?Object(m.jsx)("div",{className:gt.a.iconLine,children:b}):null,null!==h?Object(m.jsx)("div",{className:gt.a.iconLine,children:h}):null]})})},_t=n(171),kt=n.n(_t),yt=["block","actions","size","style"];var wt=function(e){var t=e.block,n=void 0===t?{}:t,c=e.actions,r=void 0===c?{}:c,a=e.size,o=void 0===a?"card":a,i=e.style,s=Object(de.a)(e,yt),l=null;switch(n.type||null){case"headline":l=Object(m.jsx)(Ye,Object(O.a)({block:n,actions:r},s),n._id);break;case"text":l=Object(m.jsx)(et,Object(O.a)({block:n,actions:r},s),n._id);break;case"button":l=Object(m.jsx)(tt,Object(O.a)({block:n,actions:r},s),n._id);break;case"divider":l=Object(m.jsx)(nt,Object(O.a)({block:n,actions:r},s),n._id);break;case"checkbox":l=Object(m.jsx)(rt,Object(O.a)({block:n,actions:r},s),n._id);break;case"page":switch(o){case"line":l=Object(m.jsx)(st,Object(O.a)({block:n,actions:r},s),n._id);break;default:l=Object(m.jsx)(jt,Object(O.a)({block:n,actions:r},s),n._id)}break;case"person":l=Object(m.jsx)(Ot,Object(O.a)({block:n,actions:r},s),n._id);break;case"action":l=Object(m.jsx)(mt,Object(O.a)({block:n,actions:r},s),n._id);break;default:l=JSON.stringify(n)}return Object(m.jsx)("div",{className:kt.a.root,style:i,children:l},n._id)},Ct=function(e){return!!e&&Array.isArray(e)&&e.length>0};function Nt(e){var t=e.levels,n=e.level,c=e.createBlock,r=e.onClick,a=e.blockMenu,o=e.filterBlockIds;return Ct(n)?n.filter((function(e){return!o||0===o.length||!o.includes(e._id)})).map((function(e){return Object(m.jsx)(St,{block:e,levels:t,createBlock:c,onClick:r,blockMenu:a,filterBlockIds:o},e._id)})):null}function St(e){var t=e.block,n=e.levels,c=e.createBlock,o=e.onClick,i=e.blockMenu,s=e.filterBlockIds,l=Object(a.useState)(!1),u=Object(r.a)(l,2),j=u[0],b=u[1],d=Object(a.useCallback)((function(){b((function(e){return!e}))}),[b]),p={click:function(){o(t)}},h=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(wt,{size:"line",block:t,actions:p,style:{flexGrow:"1",width:"100%"}}),!0===i?Object(m.jsx)("div",{className:Ne.a.blockRowActions,children:Object(m.jsx)(Qe,{block:t,createBlock:c,trigger:function(e){return Object(m.jsx)("button",Object(O.a)(Object(O.a)({},e),{},{className:"text hasIcon",style:{margin:"0 0 0 var(--basis_x2)",padding:"var(--basis) 0",flexShrink:"0"},children:Object(m.jsx)(Ie.a,{className:"icon"})}))}})}):null]}),f=n[t._id];return Ct(f)?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{display:"flex",minHeight:"calc(6 * var(--basis))"},children:[Object(m.jsx)("button",{className:"text hasIcon",style:{background:"transparent",margin:"0 calc(-0.8 * var(--basis)) 0 calc(-7 * var(--basis))",padding:"0",flexShrink:"0"},onClick:d,children:j?Object(m.jsx)(Fe.a,{className:"icon"}):Object(m.jsx)(Be.a,{className:"icon"})}),Object(m.jsx)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",width:"100%"},className:Ne.a.blockRow,children:h},t._id)]}),Object(m.jsx)("div",{style:{marginLeft:"calc(6 * var(--basis))"},children:Object(m.jsx)(Se.a,{in:j,timeout:"auto",children:Object(m.jsx)(Nt,{levels:n,level:f,createBlock:c,onClick:o,blockMenu:i,filterBlockIds:s})})})]}):Object(m.jsx)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",marginLeft:"calc(-2.5 * var(--basis))",minHeight:"calc(6 * var(--basis))"},className:Ne.a.blockRow,children:h},t._id)}function It(e){var t=e.createBlock,n=void 0===t?function(){}:t,c=e.onClick,r=void 0===c?function(){}:c,o=e.blockMenu,i=void 0!==o&&o,s=e.onGetRefetch,l=void 0===s?function(){}:s,u=e.types,j=void 0===u?["page","person","action"]:u,b=e.filterBlockIds,d=void 0===b?[]:b,p=Object(Ee.a)(L,{variables:{types:j}}),O=p.data,h=p.refetch;Object(a.useEffect)((function(){h()}),[j,h]),Object(a.useEffect)((function(){l(h)}),[l,h]);var f=(null===O||void 0===O?void 0:O.blocks)||[],x=f.reduce((function(e,t){var n=t.parent||"_root";return e[n]||(e[n]=[]),e[n].push(t),e}),{}),v=Object.keys(x).sort((function(e,t){return e.localeCompare(t)}));return Object(m.jsx)("div",{style:{marginLeft:"calc(5 * var(--basis))"},children:f.length>0?Object(m.jsx)(Nt,{levels:x,level:x[v[0]],createBlock:n,onClick:r,blockMenu:i,filterBlockIds:d}):null})}var Ft={page:Object(m.jsx)(ee.a,{}),person:Object(m.jsx)(te.a,{}),action:Object(m.jsx)(ne.a,{})};function Bt(){var e=z().loggedIn,t=Dt().toggleSidebar,n=Object(d.f)("/"),c=Object(a.useRef)(null),o=c.current,i=Object(a.useState)({page:!0,person:!0,action:!0}),s=Object(r.a)(i,2),l=s[0],u=s[1],j=Object.entries(l).filter((function(e){return!0===Object(r.a)(e,2)[1]})).map((function(e){return Object(r.a)(e,1)[0]})),b=be(),h=Object(d.g)(),f=Object(a.useCallback)((function(e){b(e).then((function(e){h("/edit/".concat(e._id))})).catch((function(e){console.error(e)}))}),[b,h]),x=Object(a.useCallback)((function(e){var t=Object(O.a)({},l);t[e]=!t[e],u(t),o()}),[l,u,o]),v=Object(a.useCallback)((function(e){h("/view/".concat(e._id))}),[h]);return Object(m.jsxs)("div",{className:J.a.content,children:[Object(m.jsx)("header",{className:J.a.header,children:Object(m.jsxs)("div",{className:J.a.headerBar,children:[n?Object(m.jsx)("div",{}):Object(m.jsx)("button",{onClick:t,className:"text hasIcon",style:{margin:"0"},children:Object(m.jsx)(ce.a,{className:"icon"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"text hasIcon",onClick:function(){return o()},children:Object(m.jsx)(re.a,{className:"icon"})}),Object(m.jsxs)(me,{trigger:function(e){return Object(m.jsx)("button",Object(O.a)(Object(O.a)({className:"text hasIcon"},e),{},{children:Object(m.jsx)(ae.a,{className:"icon"})}))},children:[Object(m.jsx)("div",{style:{marginTop:"8px"}}),Object.keys(l).map((function(e){return Object(m.jsxs)(X.a,{onClick:function(){return x(e)},selected:j.includes(e),children:[Object(m.jsx)(Z.a,{children:Ft[e]}),Object(m.jsx)(K.a,{children:Object(m.jsx)(_,{id:"block_menu_type_label_plural_"+e})})]},e)}))]}),Object(m.jsx)(we,{trigger:function(e){return Object(m.jsx)("button",Object(O.a)(Object(O.a)({className:"white hasIcon"},e),{},{children:Object(m.jsx)(oe.a,{className:"icon"})}))},createBlock:f})]})]})}),Object(m.jsx)(It,{onClick:v,createBlock:f,blockMenu:!0,onGetRefetch:function(e){c.current=e},types:j}),Object(m.jsx)("br",{}),Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsx)("br",{}),Object(m.jsxs)(Y.a,{style:{maxWidth:"100%"},children:[e?Object(m.jsx)("a",{href:"".concat(window.domains.backend,"logout?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(m.jsxs)(X.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(ie.a,{})}),Object(m.jsx)(K.a,{primary:Object(m.jsx)(_,{id:"logout"})})]})}):Object(m.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(m.jsxs)(X.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(p.a,{})}),Object(m.jsx)(K.a,{primary:Object(m.jsx)(_,{id:"login"})})]})}),Object(m.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:Object(m.jsxs)(X.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(se.a,{})}),Object(m.jsx)(K.a,{primary:Object(m.jsx)(_,{id:"contact"})})]})}),Object(m.jsx)("a",{href:"https://github.com/voltbonn/edit.volt.link",target:"_blank",rel:"noopener noreferrer",children:Object(m.jsxs)(X.a,{children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(le.a,{})}),Object(m.jsx)(K.a,{primary:Object(m.jsx)(_,{id:"source_code"})})]})})]})]})}var Et=n(151),Pt=n.n(Et),At=Object(a.createContext)({});function Dt(){return Object(a.useContext)(At)}function Tt(e){var t=e.children,n=Object(a.useState)(!0),c=Object(r.a)(n,2),o=c[0],i=c[1],s=!Object(d.f)("/")&&o,l=Object(a.useCallback)((function(){i((function(e){return!e}))}),[i]);return Object(m.jsx)(At.Provider,{value:{open:s,setOpen:i,toggleSidebar:l},children:t})}function Rt(){var e=Dt(),t=e.open,n=e.toggleSidebar,c="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),r=q("(min-width: 960px)");return t?Object(m.jsx)(U.a,{variant:r?"permanent":"temporary",anchor:"left",open:t,onOpen:n,onClose:n,disableBackdropTransition:!c,disableDiscovery:c,sx:Object(H.a)({width:320,flexShrink:0},"& .MuiDrawer-paper",{width:320,boxSizing:"border-box",backgroundColor:"var(--background-contrast)",color:"var(--on-background)",border:"none"}),PaperProps:{sx:{background:"var(--background-contrast)",color:"var(--on-background)"}},children:Object(m.jsx)(Bt,{})}):null}function Lt(e){var t=e.children,n=Dt().open;return Object(m.jsx)("main",{className:"".concat(Pt.a.main," ").concat(n?Pt.a.open:""),style:{"--sidebarWidth":"320px"},children:t})}var Vt=n(152),Wt=n.n(Vt);var Gt=n(133),zt=n.n(Gt),Mt=n(316),Ht=n(317),Ut=n(318),qt=n(41);function $t(e){var t=e.title,n=e.block,c=void 0===n?{}:n,o=e.rightActions,i=e.notificationBanner,s=Dt(),l=s.open,u=s.toggleSidebar,j=Object(A.a)(),b=c?c._id:null,d=Object(a.useState)([]),p=Object(r.a)(d,2),h=p[0],f=p[1],x=Object(a.useState)([]),v=Object(r.a)(x,2),g=v[0],_=v[1],k=Object(a.useCallback)((function(e){j.query({query:G,variables:{_id:e}}).then(function(){var e=Object(P.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.parentBlocks?f(n.parentBlocks||[]):(console.error(n.error),f([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),f([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[j,f]),y=Object(a.useCallback)((function(e){j.query({query:W,variables:{_id:e}}).then(function(){var t=Object(P.a)(E.a.mark((function t(n){var c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"string"!==typeof(c=n.data).error&&c.siblingBlocks?_((c.siblingBlocks||[]).filter((function(t){return t._id!==e}))):(console.error(c.error),_([]));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),_([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[j,_]);Object(a.useEffect)((function(){b&&(k(b),y(b))}),[b,k,y]);var w=Object(m.jsxs)(m.Fragment,{children:[l?null:Object(m.jsx)("button",{onClick:u,className:"text hasIcon",style:{margin:"0"},children:Object(m.jsx)(Mt.a,{className:"icon"})}),Object(m.jsxs)("div",{style:{flexGrow:"1"},children:[Object(m.jsx)(qt.b,{to:"/",children:Object(m.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)(Ht.a,{style:{verticalAlign:"middle"}})})}),Object(m.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),b&&h.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(me,{trigger:function(e){return Object(m.jsx)("button",Object(O.a)(Object(O.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)(Ut.a,{style:{verticalAlign:"middle"}})}))},children:h.map((function(e){return Object(m.jsx)(wt,{block:e,size:"line",style:{margin:"var(--basis_x4) var(--basis_x2)"}},e._id)}))}),Object(m.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,g.length>0?Object(m.jsx)(me,{trigger:function(e){return Object(m.jsx)("button",Object(O.a)(Object(O.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:g.map((function(e){return Object(m.jsx)(wt,{block:e,size:"line",style:{margin:"var(--basis_x4) var(--basis_x2)"}},e._id)}))}):Object(m.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(m.jsxs)("header",{className:zt.a.header,children:[Object(m.jsxs)("div",{className:zt.a.headerBar,children:[w,o]}),i?Object(m.jsx)("div",{className:zt.a.notificationBanner,children:i}):null]})}var Jt=/^([\+-\.0-9A-Z\u017F\u212A]+:(?:\/\/)?)[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+(?:\.[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+)+[!#-;=\?-\[\]_a-z~\xC0-\xFF\u017F\u1E9E\u212A\u212B]+$/gi,Xt=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Zt=/^(?:(?![\/:])[\s\S])+@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/gi;var Kt=function(e){var t=e.defaultValue,n=void 0===t?"":t,c=e.onChange,o=e.onBlur,i=e.onError,s=e.placeholder,l=void 0===s?"https://":s,u=e.style,j=e.className,b=Object(a.useState)(n),d=Object(r.a)(b,2),p=d[0],O=d[1],h=Object(a.useCallback)((function(e){var t=e.target.value||"",n="";if(""!==t){var r=t.split(":"),a=r.shift(),o=r.join(":");"tel"===a||("mailto"===a||t.match(Zt)?o.match(Xt)||(n="invalid_mailto_url"):t.match(Jt)||(n="invalid_url"))}c&&c(t),i&&i(n),O(t)}),[c,i]),f=Object(a.useCallback)((function(){o&&o(p)}),[o,p]);return Object(m.jsx)("input",{type:"url",onChange:h,onBlur:f,defaultValue:n,placeholder:l,style:u,className:j})},Qt=n(172),Yt=n.n(Qt),en=["children","className","style"];var tn=function(e){var t=e.children,n=e.className,c=e.style,o=(Object(de.a)(e,en),Object(a.useState)("")),i=Object(r.a)(o,2),s=i[0],l=i[1];return Object(m.jsxs)("div",{className:n,style:c,children:[t({setError:l}),s?Object(m.jsx)("div",{className:Yt.a.error,children:Object(m.jsx)(_,{id:"error_"+s})}):null]})};var nn=k((function(e){var t,n,c=e.getString,o=e.rightHeaderActions,i=Object(d.g)(),s=Object(a.useState)(""),l=Object(r.a)(s,2),u=l[0],j=l[1],b=Object(a.useState)(!1),p=Object(r.a)(b,2),O=p[0],h=p[1],f=Object(a.useState)(""),x=Object(r.a)(f,2),v=x[0],g=x[1];t=["Enter"],n=function(){O&&y()},Object(a.useEffect)((function(){function e(e){t.includes(e.key)&&n(e)}return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[t,n]);var k=Object(a.useCallback)((function(e){j(e),h(""!==e)}),[j,h]),y=Object(a.useCallback)((function(){if(O){var e={use_as:"redirect",redirect:u};fetch("".concat(window.domains.backend,"set_redirect"),{mode:"cors",credentials:"include",method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"===typeof t.error?(console.error(t.error),g(t.error)):"string"===typeof t.code?i("/edit/".concat(t.code)):g("Undefined Error. Please contact thomas.rosen@volteuropa.org");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error(t),g(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[O,u,i]);return Object(m.jsxs)("div",{children:[Object(m.jsx)($t,{title:Object(m.jsx)(_,{id:"create_shortcode_headline"}),rightActions:o||null}),Object(m.jsx)("p",{children:Object(m.jsx)(_,{id:"create_shortcode_info"})}),Object(m.jsxs)("div",{className:"".concat(Wt.a.input," ").concat(!0===O?"":Wt.a.hideSubmitButton),children:[Object(m.jsx)(tn,{style:{flexGrow:"1",display:"flex",flexDirection:"column"},children:function(e){var t=e.setError;return Object(m.jsx)(Kt,{onError:t,placeholder:c("create_shortcode_url_placeholder"),onChange:k})}}),!0===O?Object(m.jsx)("button",{className:"green",onClick:y,children:Object(m.jsx)(_,{id:"create_shortcode_url_submit"})}):null]}),""!==v?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h3",{className:"red",children:Object(m.jsx)(_,{id:"headline_errors"})}),Object(m.jsx)("p",{children:v})]}):null]})})),cn=n(18);var rn=function(){var e=y().getString,t=Object(A.a)(),n=Object(je.b)(),c=n.enqueueSnackbar,r=n.closeSnackbar;return Object(a.useCallback)((function(n){return new Promise((function(a){var o=null;if(n&&""!==n){var i=new Promise((function(i){t.query({query:R,variables:{_id:n}}).then(function(){var t=Object(P.a)(E.a.mark((function t(n){var s,l;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=n.data,i("got-data"),null!==o&&r(o),"string"!==typeof s.error&&s.block?(l=s.block,a(l)):"no_edit_permission"===s.error?c(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):c(""+s.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),i("got-error"),null!==o&&r(o),c("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=c(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else a({type:"text"})}))}),[c,r,t,e])},an=n(326),on=n(327),sn=n(328),ln=n(329),un=n(173),jn=n.n(un),bn=n(349),dn=n(319),pn=n(153),On=n.n(pn),hn=["closePopover"],fn=Object(a.createContext)({locale:"en",showTranslations:!1});function xn(e){var t=e.children,n=y(),c=n.userLocales,o=void 0===c?[]:c,i=n.defaultLocale,s=void 0===i?"en":i,l=o[0]?o[0]:s,u=Object(a.useState)([l]),j=Object(r.a)(u,2),b=j[0],d=j[1],p=Object(a.useState)(l),O=Object(r.a)(p,2),h=O[0],f=O[1],x=Object(a.useCallback)((function(e){Array.isArray(e)&&(d(e),null===h&&e.length>0&&f(e[0]))}),[h,d,f]),g=Object(a.useCallback)((function(e){var t=Object(v.fluentByArray)(e,b,"locale");return Array.isArray(t)?t:[]}),[b]),_=Object(a.useState)(!1),k=Object(r.a)(_,2),w=k[0],C=k[1],N=Object(a.useCallback)((function(){C((function(e){return!e}))}),[C]),S=Object(a.useCallback)((function(e){f(e),C(!0)}),[f,C]);return Object(m.jsx)(fn.Provider,{value:{currentLocale:h,setCurrentLocale:S,locales:b,setLocales:x,filterByLocale:g,showTranslations:w,toggleShowTranslations:N},children:t})}function vn(){return Object(a.useContext)(fn)}function gn(e){var t=e.trigger,n=y().getString,c=vn(),r=c.locales,o=c.setLocales,i=c.currentLocale,s=c.setCurrentLocale,l=c.showTranslations,u=c.toggleShowTranslations,j=y().supportedLocales,b=void 0===j?[]:j,d=Object(a.useCallback)((function(e){"function"===typeof s&&s(e)}),[s]),p=Object(a.useCallback)((function(e){o([].concat(Object(cn.a)(r),[e])),d(e)}),[r,o,d]);return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(ve,{trigger:t,children:function(e){var t=e.closePopover,c=Object(de.a)(e,hn);return Object(m.jsx)(pe.a,Object(O.a)(Object(O.a)({},c),{},{sx:{maxWidth:380,height:"auto",maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(m.jsxs)(Y.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:[Object(m.jsxs)(bn.a,{style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:[Object(m.jsx)(Pe.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-4px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:"View in Locale\u2026"}),Object(m.jsx)("div",{style:{height:"4px"}}),r.map((function(e,t){return Object(m.jsx)(X.a,{selected:e===i,onClick:function(){return d(e)},children:n("locale_"+e)},e)}))]}),Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsxs)(bn.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(m.jsx)(Pe.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-4px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:"Add Locales"}),b.filter((function(e){return!r.includes(e)})).map((function(e,t){return Object(m.jsx)(X.a,{selected:e===i,onClick:function(){return p(e)},children:n("locale_"+e)},e)}))]}),Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsxs)(X.a,{style:{marginTop:"8px"},onClick:u,children:[Object(m.jsx)(Z.a,{children:l?Object(m.jsx)(ze.a,{}):Object(m.jsx)(Me.a,{})}),Object(m.jsx)(K.a,{children:l?Object(m.jsx)(_,{id:"locale_menu_hide_translation_help_label"}):Object(m.jsx)(_,{id:"locale_menu_show_translation_help_label"})})]}),Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsxs)(X.a,{style:{marginTop:"8px"},onClick:t,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(dn.a,{})}),Object(m.jsx)(K.a,{children:Object(m.jsx)(_,{id:"block_menu_close_menu"})})]})]})}))}})})}function mn(e){var t=e.defaultValue,n=e.onChange,c=e.onBlur,o=e.children,i=void 0===o?null:o,s=e.style,l=void 0===s?{}:s,u=Object(a.useState)([]),j=Object(r.a)(u,2),b=j[0],d=j[1];Object(a.useEffect)((function(){Array.isArray(t)?d(t):d([])}),[t,d]);var p=vn(),h=p.currentLocale,f=p.filterByLocale,x=p.showTranslations,v=Object(cn.a)(b).filter((function(e){return""!==e.value})).filter((function(e){return e.locale===h}));v=v.length>0?v[0].value:"";var g=Object(a.useCallback)((function(e){var t=Object(cn.a)(b);t=b.length>0?t.findIndex((function(e){return e.locale===h}))>-1?t.map((function(t){return t.locale===h?Object(O.a)(Object(O.a)({},t),{},{value:e}):t})).filter((function(e){return""!==e.value})):[].concat(Object(cn.a)(t),[{locale:h,value:e}]).filter((function(e){return""!==e.value})):[{locale:h,value:e}],d(t),n&&n(t)}),[d,b,h,n]),_=Object(a.useCallback)((function(){c&&c(b)}),[c,b]),k=f(b.filter((function(e){return e.locale!==h})));return"function"===typeof i?Object(m.jsxs)("div",{className:On.a.translatedInput,style:l,children:[Object(m.jsx)("div",{style:{flexGrow:"1",width:"100%"},children:i({key:h,defaultValue:v,onChange:g,onBlur:_})}),!0===x&&k.length>0?Object(m.jsx)("div",{className:On.a.translationHelp,children:k.map((function(e){return Object(m.jsxs)("p",{children:[Object(m.jsxs)("strong",{children:[e.locale.toUpperCase(),":"]})," ",e.value]},e.locale)}))}):null]}):null}var _n=n(339),kn=n(320),yn=n(321),wn=n(322),Cn=n(98),Nn=n.n(Cn),Sn=n(154),In=n(155),Fn=n.n(In),Bn=["defaultValue","children","className","onChange","onBlur","onError","linebreaks","style","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeToNextInput"];function En(e,t){if(e.normalize(),!window.getSelection)return 0;var n=window.getSelection(),c=n.rangeCount>0?n.getRangeAt(0):null;if(!c)return 0;var r=c.cloneRange();r.selectNodeContents(e),r.setEnd(c.endContainer,c.endOffset);var a=r.cloneContents(),o=0;return a.childNodes.length>0&&("first"===t?o=3===a.childNodes[0].nodeType?a.childNodes[0].length:0:"last"===t&&(o=3===a.childNodes[a.childNodes.length-1].nodeType?a.childNodes[a.childNodes.length-1].length:a.childNodes.length>1&&3===a.childNodes[a.childNodes.length-2].nodeType?a.childNodes[a.childNodes.length-2].length:0)),r.detach(),o}function Pn(e){var t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),a=e.offsetHeight-n-r,o=Object(Sn.a)(e),i=Object(Sn.b)(e);i.top=i.top-o.top,i.left=i.left-o.left;var s=i.top<i.height,l=a-i.top<i.height,u=function(e){if(e.normalize(),!window.getSelection)return 0;var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(!n)return 0;var r=n.cloneRange();r.selectNodeContents(e),r.setEnd(n.endContainer,n.endOffset);var a,o=r.cloneContents(),i=0,s=Object(c.a)(o.childNodes);try{for(s.s();!(a=s.n()).done;){var l=a.value;3===l.nodeType?i+=l.textContent.length:1===l.nodeType&&"BR"===l.nodeName&&(i+=1)}}catch(u){s.e(u)}finally{s.f()}return r.detach(),i}(e),j=e.innerText.length||0;j<0&&(j=0);var b=j-u;return{inFirstLine:s,inLastLine:l,left:i.left,top:i.top,height:i.height,positionFromLineStart:En(e,s?"first":"last"),positionFromStart:u,positionFromEnd:b}}var An=function(e){var t=e.defaultValue,n=void 0===t?"":t,c=(e.children,e.className),o=e.onChange,i=e.onBlur,s=(e.onError,e.linebreaks),l=e.style,u=e.placeholder,j=void 0===u?"":u,b=e.onInputRef,d=e.onGoToPrevInput,p=e.onGoToNextInput,O=e.onSplitText,h=e.onMergeToPrevInput,f=e.onMergeToNextInput,x=(Object(de.a)(e,Bn),Object(a.useRef)(null)),v=Object(a.useState)(""),g=Object(r.a)(v,2),_=g[0],k=g[1],y=Object(a.useState)({__html:""}),w=Object(r.a)(y,2),C=w[0],N=w[1];Object(a.useEffect)((function(){k((function(e){return e!==n?(N((function(e){var t=n.replace(/</g,"&lt;").replace(/>/g,"&gt;");return e.__html!==t?{__html:t}:e})),n):e}))}),[n,k,N]);var S=Object(a.useCallback)((function(e){var t=e.target.innerHTML||"".replace(/&lt;/g,"<").replace(/&gt;/g,">");t=(t=!1===s?t.replace(/<\/? ?br ?\/?>/g," "):t.replace(/<\/? ?br ?\/?>/g,"\n")).trim(),k(t),o&&o(t)}),[o,k,s]),I=Object(a.useCallback)((function(){i&&i(_)}),[i,_]),F=Object(a.useCallback)((function(e){if("Enter"===e.key&&!0===e.shiftKey)!1!==s&&document.execCommand("insertLineBreak"),e.preventDefault();else if("Tab"===e.key)document.execCommand("insertText",!1,"\t"),e.preventDefault();else if("ArrowUp"===e.key){if(d){var t=Pn(x.current);t.inFirstLine&&(d({caret:t}),e.preventDefault())}}else if("ArrowLeft"===e.key){if(d){var n=Pn(x.current);n.inFirstLine&&n.positionFromStart<=0&&(n.positionFromLineStart=-1,d({caret:n}),e.preventDefault())}}else if("ArrowDown"===e.key){if(p){var c=Pn(x.current);c.inLastLine&&(p({caret:c}),e.preventDefault())}}else if("ArrowRight"===e.key){if(p){var r=Pn(x.current);r.inLastLine&&r.positionFromEnd<=1&&(r.positionFromLineStart=0,p({caret:r}),e.preventDefault())}}else if("Enter"===e.key){if(O){var a=Pn(x.current),o=x.current.innerText,i=o.slice(0,a.positionFromStart),l=o.slice(a.positionFromStart);O({texts:[i,l]}),e.preventDefault()}}else if("Backspace"===e.key){if(h){var u=Pn(x.current);0===u.positionFromStart&&u.inFirstLine&&(h({caret:u,text:x.current.innerText}),e.preventDefault())}}else if("Delete"===e.key&&f){var j=Pn(x.current);0===j.positionFromEnd&&j.inLastLine&&(f({caret:j,text:x.current.innerText}),e.preventDefault())}}),[x,s,d,p,O,h,f]);Object(a.useEffect)((function(){b&&b(x)}),[b,x]);var B=Object(a.useCallback)((function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");!1===s&&(t=t.replace(/\n/g," ")),document.execCommand("insertText",!1,t)}),[s]);return Object(m.jsx)("div",{ref:x,onKeyDown:F,onInput:S,onBlur:I,onPaste:B,className:"".concat(Fn.a.rebuild_textarea," ").concat(0===_.length?Fn.a.show_placeholder:""," ").concat(c),contentEditable:!0,dangerouslySetInnerHTML:C,style:l,placeholder:j})};function Dn(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.log("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+n)}catch(c){console.error("Fallback: Oops, unable to copy",c)}document.body.removeChild(t)}(e)}var Tn=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,c=e.open,o=void 0!==c&&c,i=e.onChange,s=e.onClose,l=Object(a.useState)(""),u=Object(r.a)(l,2),j=u[0],b=u[1];Object(a.useEffect)((function(){var e=((n.properties||{}).trigger||{}).path||"";b(e)}),[n,b]);var d=Object(a.useCallback)((function(e){var t=Object(O.a)({},n.properties||{});""===e?(t.hasOwnProperty("trigger")&&delete t.trigger,t.hasOwnProperty("action")&&delete t.action):(t.trigger={type:"path",path:e},t.action={type:"render_block"}),b(e),i(t)}),[n,i,b]);return o?Object(m.jsx)(_n.a,{open:o,onClose:s,hideBackdrop:!0,children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:Nn.a.backdrop,onClick:s}),Object(m.jsxs)("div",{className:Nn.a.dialog,children:[Object(m.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Share the link"}),Object(m.jsxs)("div",{className:Nn.a.inputWrapper,children:[Object(m.jsx)("span",{style:{paddingRight:"var(--basis)"},children:"volt.link/"}),Object(m.jsx)(An,{defaultValue:j,onBlur:d,linebreak:!1,className:Nn.a.input,style:{margin:"0"}})]}),Object(m.jsx)("hr",{style:{opacity:.2}}),Object(m.jsxs)("div",{className:Nn.a.actions,children:[""!==j?Object(m.jsxs)("div",{children:[Object(m.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://qrcode.volt.link/?c=volt.link/".concat(j),e.target="_blank",e.rel="noreferrer",e.click()},style:{marginInlineStart:"0"},children:[Object(m.jsx)(kn.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",children:Object(m.jsx)(_,{id:"sharing_qrcode"})})]}),Object(m.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(j),e.target="_blank",e.rel="noreferrer",e.click()},children:[Object(m.jsx)(yn.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",children:Object(m.jsx)(_,{id:"sharing_statistics"})})]}),Object(m.jsxs)("button",{className:"text hasIcon",onClick:function(){Dn("https://volt.link/".concat(j))},children:[Object(m.jsx)(wn.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",children:Object(m.jsx)(_,{id:"sharing_copy_url"})})]})]}):Object(m.jsx)("div",{}),Object(m.jsx)("button",{onClick:s,className:"green",style:{marginInlineEnd:"0"},children:"Done"})]})]})]})}):null},Rn=n(323),Ln=n(324),Vn=n(325),Wn=n(343),Gn=["multiple","onChange","onError"],zn=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Mn=/((?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?))/gi;var Hn=function(e){var t=e.multiple,n=void 0!==t&&t,c=e.onChange,r=e.onError,o=Object(de.a)(e,Gn),i=Object(a.useCallback)((function(e){if(c||r){var t=e.target.value||"",a=!1,o="";if(""!==t)if(!0===n){var i=t.match(Mn);i?(t=i,a=!0):o="Invalid email(s) format"}else t.match(zn)?a=!0:o="invalid_email";c&&c(a?t:!0===n?[]:""),r&&r(o)}}),[n,c,r]);return Object(m.jsx)("input",Object(O.a)({type:"email",onChange:i},o))},Un=n(56),qn=n.n(Un);function $n(e){var t=e.role;return Object(m.jsx)(_,{id:"role-"+t})}function Jn(e){var t=e.role,n=e.trigger,c=e.changeRole,a=e.removePermission,i=o.a.useState(null),s=Object(r.a)(i,2),l=s[0],u=s[1],j=Boolean(l),b=function(){u(null)};return Object(m.jsxs)(m.Fragment,{children:[n({onClick:function(e){u(e.currentTarget)}}),Object(m.jsxs)(Je.a,{anchorEl:l,open:j,onClose:b,MenuListProps:{style:{maxWidth:"100%"}},children:["editor"===t?Object(m.jsxs)(X.a,{onClick:function(){return c("viewer")},children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Me.a,{})}),Object(m.jsx)(K.a,{children:Object(m.jsx)($n,{role:"viewer"})})]}):Object(m.jsxs)(X.a,{onClick:function(){return c("editor")},children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Rn.a,{})}),Object(m.jsx)(K.a,{children:Object(m.jsx)($n,{role:"editor"})})]}),"function"===typeof a?Object(m.jsxs)(X.a,{onClick:a,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Ln.a,{})}),Object(m.jsx)(K.a,{children:"Remove"})]}):null,Object(m.jsx)(Q.a,{style:{opacity:.2}}),Object(m.jsxs)(X.a,{onClick:b,children:[Object(m.jsx)(Z.a,{children:Object(m.jsx)(Oe.a,{})}),Object(m.jsx)(K.a,{children:"Close"})]})]})]})}function Xn(e){var t=e.filter((function(e){return"owner"===e.role})).sort((function(e,t){return e.email.localeCompare(t.email)})),n=e.filter((function(e){return"@volteuropa.org"===e.email||"@public"===e.email})).sort((function(e,t){return e.email.localeCompare(t.email)})),c=e.filter((function(e){return"owner"!==e.role&&"@volteuropa.org"!==e.email&&"@public"!==e.email})).sort((function(e,t){return e.email.localeCompare(t.email)}));return[].concat(Object(cn.a)(t),Object(cn.a)(n),Object(cn.a)(c))}var Zn=function(e){var t=e.defaultPermissions,n=e.open,o=void 0!==n&&n,i=e.onChange,s=e.onClose,l=y().getString,u=z().email,j=void 0===u?"":u,b=Object(a.useState)(0),d=Object(r.a)(b,2),p=d[0],h=d[1],f=Object(a.useState)([]),x=Object(r.a)(f,2),v=x[0],g=x[1],_=Object(a.useState)([]),k=Object(r.a)(_,2),w=k[0],C=k[1],N=Object(a.useState)("editor"),S=Object(r.a)(N,2),I=S[0],F=S[1],B=Object(a.useCallback)((function(e){var t;""!==j&&(t=e||[],0===(e=Object(cn.a)(t).map((function(e){var t=Object(O.a)({},e);return t.tmp_id=Object(Wn.a)(),t}))).filter((function(e){return"owner"===e.role})).length&&e.unshift({tmp_id:Object(Wn.a)(),email:j,role:"owner"}),g(e))}),[j,g]);Object(a.useEffect)((function(){Array.isArray(t)?B(t):B([])}),[B,t]);var E=Object(a.useCallback)((function(e){var t=v.filter((function(t){return t.email!==e}));"@volteuropa.org"===e&&(t=t.filter((function(e){return"@public"!==e.email}))),0===v.filter((function(e){return"owner"===e.role})).length&&t.unshift({tmp_id:Object(Wn.a)(),email:j,role:"owner"}),g(t),i(t)}),[v,j,g,i]),P=Object(a.useCallback)((function(e,t){var n=v.map((function(n){return n.email===e?Object(O.a)(Object(O.a)({},n),{},{role:t}):n}));g(n),i(n)}),[v,g,i]),A=Object(a.useCallback)((function(e,t){e.includes("@public")&&e.push("@volteuropa.org");var n,r=v.filter((function(t){return!e.includes(t.email)})),a=Object(c.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.unshift({tmp_id:Object(Wn.a)(),email:o,role:t})}}catch(s){a.e(s)}finally{a.f()}g(r),i(r)}),[v,g,i]),D=Object(a.useCallback)((function(){A(w,I),C([]),h((function(e){return e+1}))}),[w,I,A]);if(!o)return null;var T=0===v.filter((function(e){return"@volteuropa.org"===e.email})).length,R=0===v.filter((function(e){return"@public"===e.email})).length;return Object(m.jsx)(_n.a,{open:o,onClose:s,hideBackdrop:!0,children:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:qn.a.backdrop,onClick:s}),Object(m.jsx)("div",{className:qn.a.dialogsWrapper,children:Object(m.jsxs)("div",{className:qn.a.dialog,children:[Object(m.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Give viewing and editing rights"}),Object(m.jsxs)("p",{children:["Enter @volteuropa.org addresses to give editing rights.",Object(m.jsx)("br",{}),"Groups addresses are not supported."]}),Object(m.jsxs)("div",{className:qn.a.inputWrapper,children:[Object(m.jsx)(tn,{className:qn.a.emailInput,children:function(e){var t=e.setError;return Object(m.jsx)(Hn,{multiple:!0,onError:t,defaultValue:"",onChange:C,"aria-label":l("path_editor_permissions_edit_label"),placeholder:l("path_editor_permissions_edit_placeholder"),style:{flexGrow:"1",margin:"var(--basis) 0",width:"calc(100% - var(--basis_x2))"}})}}),Object(m.jsx)(Jn,{role:I,changeRole:F,trigger:function(e){return Object(m.jsxs)("button",Object(O.a)(Object(O.a)({className:qn.a.menuButton},e),{},{children:[Object(m.jsx)($n,{role:I})," ",Object(m.jsx)(Vn.a,{})]}))}})]},p),w.length>0&&w[0].length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("hr",{}),Object(m.jsx)("div",{className:qn.a.actions,children:Object(m.jsx)("button",{onClick:D,className:"green",style:{margin:"0"},children:w.length>1?Object(m.jsx)(m.Fragment,{children:"Add People"}):Object(m.jsx)(m.Fragment,{children:"Add Person"})})})]}):Object(m.jsxs)(m.Fragment,{children:[T||R?Object(m.jsxs)("div",{style:{marginTop:"var(--basis_x2)"},children:["Make visible for\u2026",T?Object(m.jsx)("button",{onClick:function(){return A(["@volteuropa.org"],"viewer")},children:"Volt Europa"}):null,R?Object(m.jsx)("button",{onClick:function(){return A(["@public"],"viewer")},children:"Public"}):null]}):null,0===v.length?null:Object(m.jsx)("hr",{style:{opacity:.2}}),Xn(v).map((function(e){return Object(m.jsxs)("div",{className:qn.a.permissionRow,children:["@public"===e.email?Object(m.jsx)("strong",{children:"Public"}):"@volteuropa.org"===e.email?Object(m.jsx)("strong",{children:"Volt Europa"}):Object(m.jsx)("span",{children:e.email}),"owner"===e.role?Object(m.jsx)("strong",{className:"type_button ".concat(qn.a.ownerInfo),children:Object(m.jsx)($n,{role:e.role})}):Object(m.jsx)(Jn,{role:e.role,removePermission:function(){return E(e.email)},changeRole:function(t){return P(e.email,t)},trigger:function(t){return Object(m.jsxs)("button",Object(O.a)(Object(O.a)({className:qn.a.menuButton},t),{},{children:[Object(m.jsx)($n,{role:e.role})," ",Object(m.jsx)(Vn.a,{})]}))}})]},e.tmp_id)})),Object(m.jsx)("hr",{style:{opacity:.2}}),Object(m.jsx)("div",{className:qn.a.actions,children:Object(m.jsx)("button",{onClick:s,className:"green",style:{margin:"0"},children:"Done"})})]})]})})]})})},Kn=n(77),Qn=n.n(Kn);var Yn=function(e){var t=e.defaultValue,n=void 0===t?"":t,c=e.onChange,o=e.onBlur,i=e.style,s=e.className,l=e.disabled,u=void 0!==l&&l,j=Object(a.useState)(Boolean(n)),b=Object(r.a)(j,2),d=b[0],p=b[1],h=Object(a.useCallback)((function(){c&&c(d),o&&o(d)}),[c,o,d]),f=Object(a.useCallback)((function(){!0!==u&&(h(),p(!0))}),[u,h,p]),x=Object(a.useCallback)((function(){!0!==u&&(h(),p(!1))}),[u,h,p]);return Object(m.jsx)("div",{style:Object(O.a)({display:"inline-block",padding:"var(--basis)",cursor:!0===u?"default":"pointer",verticalAlign:"middle"},i),className:s,children:d?Object(m.jsx)(Ve.a,{onClick:x}):Object(m.jsx)(ct.a,{onClick:f})})},ec=n(78),tc=n.n(ec);var nc=function(e){var t=e.ariaLabel,n=e.items,c=e.defaultValue,o=e.onChange,i=e.style,s=e.className,l=Object(a.useState)(),u=Object(r.a)(l,2),j=u[0],b=u[1];Object(a.useEffect)((function(){return b(c)}),[c,b]);var d=Object(a.useCallback)((function(e){var t=e.target.dataset.value;b(t),o&&o(t)}),[b,o]);return Object(m.jsx)("div",{"aria-label":t,className:"buttonRow "+(s||""),style:Object(O.a)({display:"inline-block"},i),children:n.map((function(e){var t=e.value,n=e.title,c=e.icon||null;return Object(m.jsx)("button",{className:"".concat(j===t?"choosen":""," ").concat(c?"hasIcon":""),onClick:d,"data-value":t,children:Object(m.jsxs)("span",{style:{pointerEvents:"none"},children:[c||null,n?Object(m.jsx)("span",{style:{verticalAlign:"middle"},children:n}):null]})},t+"_"+n)}))})},cc=n.p+"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png",rc=n.p+"static/media/Aktion.89c1bcdf.png",ac=n.p+"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png",oc=n.p+"static/media/Welcome-to-Volt.39e04eca.png",ic=n.p+"static/media/portugal.682fc2e3.jpg",sc=["closePopover"];var lc=k((function(e){var t=e.getString,n=e.defaultValue,c=e.iconValue,r=e.onChange,a=e.className,o=void 0===a?"":a,i=e.style,s=void 0===i?{}:i,l=new RegExp("^(?:[a-z]+:)?//","i"),u=!1;"string"===typeof n&&n.length>0&&l.test(n)&&(u=!0);var j=!1;return"string"===typeof c&&c.length>0&&l.test(c)&&(j=!0),Object(m.jsx)("div",{className:"\n      ".concat(tc.a.root,"\n      ").concat(u?tc.a.coverphotoIsSet:tc.a.coverphotoIsNotSet,"\n      ").concat(j?tc.a.iconIsSet:tc.a.iconIsNotSet,"\n      ").concat(o,"\n    "),style:s,children:Object(m.jsx)(ve,{trigger:function(e){return Object(m.jsx)("div",{className:tc.a.coverphoto,style:{backgroundImage:u?"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(n),")"):""},children:Object(m.jsx)("div",{className:tc.a.button_wrapper,children:Object(m.jsx)("button",Object(O.a)(Object(O.a)({},e),{},{className:tc.a.changeCoverphotoButton,children:"Set Coverphoto"}))})})},children:function(e){var c=e.closePopover,a=Object(de.a)(e,sc);return Object(m.jsxs)(pe.a,Object(O.a)(Object(O.a)({},a),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(m.jsx)("h3",{style:{marginTop:"0"},children:Object(m.jsx)(_,{id:"path_editor_coverphoto_label"})}),Object(m.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(m.jsx)(_,{id:"path_editor_coverphoto_info"})}),Object(m.jsx)(tn,{children:function(e){var t=e.setError;return Object(m.jsx)(Kt,{onError:t,onChange:r,defaultValue:n,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(m.jsx)(nc,{onChange:r,ariaLabel:t("path_editor_coverphoto_label"),defaultValue:n||"",items:[{value:"",title:t("path_editor_no_coverphoto")}].concat(Object(cn.a)([{value:"https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg",icon:ac},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg",icon:oc},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg",icon:cc},{value:"https://assets.volteuropa.org/2021-11/portugal.jpg",icon:ic},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg",icon:rc}].map((function(e){var t=e.value,n=void 0===t?"":t,c=e.icon,r=void 0===c?"":c;return{value:n,icon:Object(m.jsx)("img",{alt:"",src:r,className:"icon image"})}}))))}),Object(m.jsx)("hr",{}),Object(m.jsx)("button",{onClick:c,style:{margin:0},children:"Close"})]}))}})})})),uc=n(71),jc=n.n(uc),bc=["closePopover"];var dc=k((function(e){var t=e.defaultValue,n=e.coverphotoValue,c=e.onChange,r=e.className,a=e.style,o=new RegExp("^(?:[a-z]+:)?//","i"),i=!1;"string"===typeof t&&t.length>0&&o.test(t)&&(i=!0);var s=!1;return"string"===typeof n&&n.length>0&&o.test(n)&&(s=!0),Object(m.jsx)("div",{className:"\n      ".concat(jc.a.root,"\n      ").concat(i?jc.a.iconIsSet:jc.a.iconIsNotSet,"\n      ").concat(s?jc.a.coverphotoIsSet:jc.a.coverphotoIsNotSet,"\n      ").concat(r,"\n    "),style:a,children:Object(m.jsx)(ve,{trigger:function(e){return Object(m.jsxs)("div",{className:jc.a.iconWrapper,children:[Object(m.jsx)("div",{className:"".concat(jc.a.icon," ").concat(i?"":jc.a.no_image),style:{backgroundImage:i?"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(t),")"):""}}),Object(m.jsx)("button",Object(O.a)(Object(O.a)({},e),{},{className:jc.a.changeIconButton,children:"Set Icon"}))]})},children:function(e){var n=e.closePopover,r=Object(de.a)(e,bc);return Object(m.jsxs)(pe.a,Object(O.a)(Object(O.a)({},r),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(m.jsx)("h3",{style:{marginTop:"0"},children:Object(m.jsx)(_,{id:"path_editor_icon_label"})}),Object(m.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(m.jsx)(_,{id:"path_editor_icon_info"})}),Object(m.jsx)(tn,{children:function(e){var n=e.setError;return Object(m.jsx)(Kt,{onError:n,onBlur:c,defaultValue:t,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(m.jsx)("hr",{}),Object(m.jsx)("button",{onClick:n,style:{margin:0},children:"Close"})]}))}})})}));var pc=function(e){var t=e.defaultValue,n=e.className,c=e.style,o=e.onChange,i=y().getString,s=Object(a.useState)({}),l=Object(r.a)(s,2),u=l[0],j=l[1];Object(a.useEffect)((function(){j(t)}),[t,j]);var b=Object(a.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},c=Object(O.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"string":""!==t?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"boolean":!0===t?c[e]=!0:c.hasOwnProperty(e)&&delete c[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;default:c[e]=t}JSON.stringify(c)!==JSON.stringify(u)&&(j(c),o&&o(c))}}),[u,j,o]),d=u.type||"",p=null;return"click"===d?p=null:"path"===d&&(p=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(An,{placeholder:i("trigger_input_path_placeholder"),defaultValue:u.path,onBlur:function(e){return b("path",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"},className:"show_border_on_active"})})),Object(m.jsxs)("div",{className:n,style:Object(O.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},c),children:[Object(m.jsxs)("select",{onChange:function(e){return b("type",e.target.value)},defaultValue:u.type||"",style:{margin:"0"},children:[Object(m.jsx)("option",{value:"",children:"No Trigger"}),Object(m.jsx)("option",{value:"path",children:"Path"}),Object(m.jsx)("option",{value:"click",children:"Click"})]},u.type),p]})};var Oc=function(e){var t=e.defaultValue,n=e.className,c=e.style,o=e.onChange,i=y().getString,s=Object(a.useState)({}),l=Object(r.a)(s,2),u=l[0],j=l[1];Object(a.useEffect)((function(){j(t)}),[t,j]);var b=Object(a.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},c=Object(O.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"string":""!==t?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"boolean":!0===t?c[e]=!0:c.hasOwnProperty(e)&&delete c[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;default:c[e]=t}JSON.stringify(c)!==JSON.stringify(u)&&(j(c),o&&o(c))}}),[u,j,o]),d=u.type||"",p=null;return"open_url"===d||"send_payload"===d?p=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(tn,{style:{flexGrow:"1",margin:"0",minWidth:"300px"},children:function(e){var t=e.setError;return Object(m.jsx)(Kt,{onError:t,onBlur:function(e){return b("url",e)},defaultValue:u.url,placeholder:i("action_input_url_placeholder"),type:"text",style:{flexGrow:1,margin:"0",width:"100%"},className:"show_border_on_active"})}})}):"render_block"!==d&&"run_block"!==d||(p=Object(m.jsx)(An,{placeholder:"blockId",defaultValue:u.blockId,onBlur:function(e){return b("blockId",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"},className:"show_border_on_active"})),Object(m.jsxs)("div",{className:n,style:Object(O.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},c),children:[Object(m.jsxs)("select",{onChange:function(e){return b("type",e.target.value)},defaultValue:u.type||"",style:{margin:"0"},children:[Object(m.jsx)("option",{value:"",children:"No Action"}),Object(m.jsx)("option",{value:"open_url",children:"Open URL"}),Object(m.jsx)("option",{value:"render_block",children:"Render Block"})]},u.type),p]})};function hc(e){return Object(cn.a)(e||[]).map((function(e){if(!e.tmp_id){var t=Object(O.a)({},e);return t.tmp_id=Object(Wn.a)(),t}return e}))}var fc=k((function(e){var t=e.getString,n=e.type,c=e.defaultProperties,o=void 0===c?{}:c,i=e.onChange,s=Object(a.useState)({}),l=Object(r.a)(s,2),u=l[0],j=l[1],b=Object(a.useCallback)((function(e,t){var n={text:"array",description:"array",coverphoto:"string",icon:"string",imprint:"string",privacy_policy:"string",tags:"string",checked:"boolean",trigger:"object",action:"object"},c=Object(O.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"string":""!==t?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"boolean":!0===t?c[e]=!0:c.hasOwnProperty(e)&&delete c[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;default:c[e]=t}JSON.stringify(c)!==JSON.stringify(u)&&(j(c),i&&i(c))}}),[u,j,i]);Object(a.useEffect)((function(){j(Object(O.a)(Object(O.a)({},o),{},{text:hc(o.text||[]),description:hc(o.description||[])}))}),[o,j]);var d=null;return"page"===n?d=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:Qn.a.properties_row,children:[Object(m.jsx)("h3",{children:Object(m.jsx)(_,{id:"properties_editor_imprint_label"})}),Object(m.jsx)("div",{children:Object(m.jsx)(tn,{children:function(e){var t=e.setError;return Object(m.jsx)(Kt,{onError:t,onBlur:function(e){return b("imprint",e)},defaultValue:u.imprint,type:"text",style:{margin:"0",width:"100%"},className:"show_border_on_active"})}})})]}),Object(m.jsxs)("div",{className:Qn.a.properties_row,children:[Object(m.jsx)("h3",{children:Object(m.jsx)(_,{id:"properties_editor_privacy_policy_label"})}),Object(m.jsx)("div",{children:Object(m.jsx)(tn,{children:function(e){var t=e.setError;return Object(m.jsx)(Kt,{onError:t,onBlur:function(e){return b("privacy_policy",e)},defaultValue:u.privacy_policy,type:"text",style:{margin:"0",width:"100%"},className:"show_border_on_active"})}})})]})]}):"checkbox"===n?d=Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:Qn.a.properties_row,children:[Object(m.jsx)("h3",{children:Object(m.jsx)(_,{id:"properties_editor_checked_label"})}),Object(m.jsx)(Yn,{onChange:function(e){return b("checked",e)},defaultValue:Boolean(u.checked),style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"button"===n?d=Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:Qn.a.properties_row,children:[Object(m.jsx)("h3",{children:Object(m.jsx)(_,{id:"properties_editor_action_label"})}),Object(m.jsx)(Oc,{onChange:function(e){return b("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"action"===n&&(d=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:Qn.a.properties_row,children:[Object(m.jsx)("h3",{children:Object(m.jsx)(_,{id:"properties_editor_trigger_label"})}),Object(m.jsx)(pc,{onChange:function(e){return b("trigger",e)},defaultValue:u.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]}),Object(m.jsxs)("div",{className:Qn.a.properties_row,children:[Object(m.jsx)("h3",{children:Object(m.jsx)(_,{id:"properties_editor_action_label"})}),Object(m.jsx)(Oc,{onChange:function(e){return b("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})]})),Object(m.jsxs)(m.Fragment,{children:["page"===n||"person"===n?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(lc,{defaultValue:u.coverphoto,iconValue:u.icon,onChange:function(e){return b("coverphoto",e)}}),Object(m.jsx)(dc,{defaultValue:u.icon,coverphotoValue:u.coverphoto,onChange:function(e){return b("icon",e)}})]}):null,Object(m.jsxs)("div",{className:Qn.a.main_headline,children:[Object(m.jsx)(mn,{defaultValue:u.text,onBlur:function(e){return b("text",e)},children:function(e){return Object(m.jsx)(An,Object(O.a)({placeholder:t("placeholder_main_headline"),style:{margin:"0"},linebreaks:!0,className:"show_border_on_active type_h1"},e))}}),Object(m.jsx)(mn,{defaultValue:u.description,onBlur:function(e){return b("description",e)},children:function(e){return Object(m.jsx)(An,Object(O.a)({"aria-label":t("path_editor_description_label"),placeholder:t("path_editor_description_placeholder"),style:{margin:"0"},linebreaks:!0,className:"show_border_on_active type_text"},e))}})]}),Object(m.jsx)("div",{className:Qn.a.propertiesFrame,style:null===d?{display:"none"}:null,children:d})]})})),xc=n(352);var vc=k((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.onInputRef),s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onMergeToPrevInput,j=e.onMergeToNextInput,b=(e.onAddRowAfter,c.properties||{}),d=Object(a.useState)([]),p=Object(r.a)(d,2),h=p[0],f=p[1];Object(a.useEffect)((function(){f(b.text||[])}),[b.text,f]);var x=Object(a.useCallback)((function(){o&&o(Object(O.a)(Object(O.a)({},c),{},{properties:Object(O.a)(Object(O.a)({},c.properties),{},{text:h})}))}),[o,c,h]),v=Object(a.useCallback)((function(){u&&u(c)}),[u,c]),g=Object(a.useCallback)((function(){j&&j(c)}),[j,c]);return Object(m.jsx)(mn,{defaultValue:h,onChange:f,onBlur:x,children:function(e){return Object(m.jsx)(An,Object(O.a)({placeholder:t("placeholder_text"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:v,onMergeToNextInput:g},e))}})}));var gc=k((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=c.properties||{},j=Object(a.useState)(u.text||[]),b=Object(r.a)(j,2),d=b[0],p=b[1],h=u.action,f=void 0===h?{}:h,x=Object(a.useState)(f.url||""),v=Object(r.a)(x,2),g=v[0],_=v[1],k=Object(a.useCallback)((function(){if(o){var e=Object(O.a)(Object(O.a)({},c),{},{properties:Object(O.a)(Object(O.a)({},c.properties),{},{text:d})});""===g?(e.properties.hasOwnProperty("trigger")&&delete e.properties.trigger,e.properties.hasOwnProperty("action")&&delete e.properties.action):(e.properties.trigger={type:"click"},e.properties.action={type:"open_url",url:g}),o(e)}}),[o,c,d,g]);return Object(m.jsxs)("div",{style:{padding:"var(--basis) 0"},children:[Object(m.jsx)(mn,{defaultValue:d,onChange:p,onBlur:k,children:function(e){return Object(m.jsx)(An,Object(O.a)({placeholder:t("placeholder_button"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_button",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l},e))}}),Object(m.jsx)(tn,{children:function(e){var n=e.setError;return Object(m.jsx)(Kt,{onError:n,onChange:_,onBlur:k,type:"text",defaultValue:g,placeholder:t("path_editor_item_link_label"),style:{margin:"var(--basis) 0",width:"100%"}})}})]})}));var mc=k((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.onInputRef),s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onMergeToPrevInput,j=e.onMergeToNextInput,b=(e.onAddRowAfter,c.properties||{}),d=Object(a.useState)([]),p=Object(r.a)(d,2),h=p[0],f=p[1];Object(a.useEffect)((function(){f(b.text||[])}),[b.text,f]);var x=Object(a.useCallback)((function(){o&&o(Object(O.a)(Object(O.a)({},c),{},{properties:Object(O.a)(Object(O.a)({},c.properties),{},{text:h})}))}),[o,c,h]),v=Object(a.useCallback)((function(){u&&u(c)}),[u,c]),g=Object(a.useCallback)((function(){j&&j(c)}),[j,c]);return Object(m.jsx)(mn,{defaultValue:h,onChange:f,onBlur:x,children:function(e){return Object(m.jsx)(An,Object(O.a)({placeholder:t("placeholder_headline"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_h2",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:v,onMergeToNextInput:g},e))}})}));function _c(){return Object(m.jsx)("hr",{style:{margin:"calc(3.4 * var(--basis)) 0"}})}var kc=k((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=c.properties||{},j=Object(a.useState)(u.text||[]),b=Object(r.a)(j,2),d=b[0],p=b[1],h=Object(a.useRef)(Boolean(u.checked)),f=Object(a.useCallback)((function(){o&&o(Object(O.a)(Object(O.a)({},c),{},{properties:Object(O.a)(Object(O.a)({},c.properties),{},{text:d,checked:h.current})}))}),[o,c,d]),x=Object(a.useCallback)((function(e){h.current=e,f()}),[f]);return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(Yn,{checked:h.current,onChange:x}),Object(m.jsx)(mn,{defaultValue:d,onChange:p,onBlur:f,style:{flexGrow:"1",width:"100%"},children:function(e){return Object(m.jsx)(An,Object(O.a)({placeholder:t("placeholder_text"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l},e))}})]})}));var yc=k((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=c.properties||{},j=Object(a.useState)(u.text||[]),b=Object(r.a)(j,2),d=b[0],p=b[1],h=Object(a.useCallback)((function(){o&&o(Object(O.a)(Object(O.a)({},c),{},{properties:Object(O.a)(Object(O.a)({},c.properties),{},{text:d})}))}),[o,c,d]);return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(bt.a,{style:{margin:"var(--basis)"}}),Object(m.jsx)(mn,{defaultValue:d,onChange:p,onBlur:h,style:{flexGrow:"1",width:"100%"},children:function(e){return Object(m.jsx)(An,Object(O.a)({placeholder:t("placeholder_text"),style:{margin:"0",fontWeight:"bold"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l},e))}})]})})),wc=n(99),Cc=n.n(wc),Nc=["type"];function Sc(e){var t=e.type,n=void 0===t?"text":t,c=Object(de.a)(e,Nc),r=null;switch(n){case"button":r=Object(m.jsx)(gc,Object(O.a)({},c));break;case"headline":r=Object(m.jsx)(mc,Object(O.a)({},c));break;case"divider":r=Object(m.jsx)(_c,Object(O.a)({},c));break;case"checkbox":r=Object(m.jsx)(kc,Object(O.a)({},c));break;case"person":r=Object(m.jsx)(yc,Object(O.a)({},c));break;default:r=Object(m.jsx)(vc,Object(O.a)({},c))}return r}var Ic=k((function(e){e.fluentByObject,e.getString;var t=e.defaultContentConfig,n=void 0===t?{}:t,c=e.className,o=e.onChange,i=e.reorderHandle,s=e.onRemoveRow,l=(e.actionButton,e.dataset),u=void 0===l?{}:l,j=e.addRowBefore,b=e.addRowAfter,d=(e.permissions,e.onInputRef),p=e.onGoToPrevInput,h=e.onGoToNextInput,f=e.onSplitText,x=e.onMergeToPrevInput,v=e.onMergeToNextInput,g=be(),_=rn(),k=Object(a.useState)({_id:n.blockId||null}),y=Object(r.a)(k,2),w=y[0],C=y[1],N=w.properties||{},S="boolean"!==typeof N.active||N.active;Object(a.useEffect)((function(){1===Object.keys(w).length&&w.hasOwnProperty("_id")&&_(w._id).then((function(e){C(e)}))}),[_,C,w]);var I=Object(a.useCallback)((function(e){var t=Object(O.a)(Object(O.a)({},w),{},{type:e});g(t).then((function(e){C(e),w._id&&w._id===e._id||o({blockId:e._id})}))}),[C,w,g,o]),F=Object(a.useCallback)((function(){var e=Object(O.a)(Object(O.a)({},w),{},{properties:Object(O.a)(Object(O.a)({},w.properties),{},{active:!S})});g(e).then((function(e){C(e),w._id&&w._id===e._id||o({blockId:e._id})}))}),[w,S,g,C,o]),B=Object(a.useCallback)((function(e){JSON.stringify(e)!==JSON.stringify(w)&&g(e).then((function(e){C(e),w._id&&w._id===e._id||o({blockId:e._id})}))}),[g,w,o]);return Object(m.jsxs)("div",Object(O.a)(Object(O.a)({className:"".concat(Cc.a.block," ").concat(c)},u),{},{children:[Object(m.jsx)(Qe,{block:w,setType:I,toggle_active:F,active:S,onRemoveRow:s,addRowBefore:j,addRowAfter:b,trigger:function(e){return Object(m.jsx)("div",Object(O.a)(Object(O.a)({},e),{},{className:Cc.a.reorderHandle,children:i}))}}),Object(m.jsx)("div",{className:"".concat(Cc.a.block_input," ").concat(S?Cc.a.form_active:Cc.a.form_deactivated),children:Object(m.jsx)(Sc,{type:w.type,block:w,onChange:B,onSaveBlock:B,onInputRef:d,onGoToPrevInput:p,onGoToNextInput:h,onSplitText:f,onMergeToPrevInput:x,onMergeToNextInput:v,onAddRowAfter:b})})]}))})),Fc=n(134),Bc=n(175),Ec=n.n(Bc),Pc=n(100),Ac=n.n(Pc);function Dc(e){e.normalize();var t=Object(cn.a)(e.childNodes).reverse();if(t.length>0){var n=e;if(3===t[0].nodeType){var r,a=Object(c.a)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(3===o.nodeType)n=o;else if(1===o.nodeType)break}}catch(j){a.e(j)}finally{a.f()}}else if(t.length>1&&3===t[1].nodeType){var i,s=t.slice(1),l=Object(c.a)(s);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(3===u.nodeType)n=u;else if(1===u.nodeType)break}}catch(j){l.e(j)}finally{l.f()}}return n}return e}function Tc(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.focus(),window.getSelection){var c=3===t.nodeType?t.length:t.innerText.length;(-1===n||n>c)&&(n=c);var r=document.createRange();r.setStart(t,0),r.setEnd(t,n),r.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(r)}}var Rc=function(e){var t=e.defaultValue,n=void 0===t?[]:t,c=e.onChange,o=Object(a.useState)([]),i=Object(r.a)(o,2),s=i[0],l=i[1],u=Object(a.useState)({}),j=Object(r.a)(u,2),b=j[0],d=j[1];Object(a.useEffect)((function(){if(0===s.length&&n.length>0){var e=(t=n,Object(cn.a)(t).map((function(e){var t=Object(O.a)({},e);return t.tmp_id=Object(Wn.a)(),t})));l(e)}var t}),[s,n,l]);var p=Object(a.useCallback)((function(e,t){var n=Object(O.a)({},b);n.hasOwnProperty(e.tmp_id)&&n[e.tmp_id]===t||(n[e.tmp_id]=t,d(n))}),[b,d]),h=Object(a.useCallback)((function(e,t){for(var n=t.caret,c=e.index,r=null,a=s.length-1;a>=0;a--){var o=s[a].tmp_id;if(a<c&&b[o]&&b[o].current){r=b[o];break}}if(r){var i=Dc(r.current);Tc(r.current,i,n.positionFromLineStart)}}),[s,b]),f=Object(a.useCallback)((function(e,t){for(var n=t.caret,c=e.index,r=null,a=0;a<s.length;a++){var o=s[a].tmp_id;if(a>c&&b[o]&&b[o].current){r=b[o];break}}if(r){var i=function(e){e.normalize();var t=e.childNodes;return t.length>0?t[0]:e}(r.current);Tc(r.current,i,n.positionFromLineStart)}}),[s,b]),x=Object(a.useCallback)((function(){for(var e=null,t=s.length-1;t>=0;t--){var n=s[t].tmp_id;if(b[n]&&b[n].current){e=b[n];break}}if(e){var c=Dc(e.current);Tc(e.current,c,-1)}}),[s,b]),v=Object(a.useCallback)((function(e,t){var n=Object(cn.a)(s).map((function(n){return n.tmp_id===e.tmp_id?Object(O.a)(Object(O.a)({},n),t):n}));l(n),c(n)}),[s,l,c]),g=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n="object"===typeof n?Object(O.a)({tmp_id:Object(Wn.a)()},n):n||{tmp_id:Object(Wn.a)()},"number"===typeof e&&!isNaN(e)){var r=Object(cn.a)(s);r.splice(e+t,0,n),l(r),c(r)}}),[s,l,c]),k=s.filter((function(e){return e.tmp_id}));return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{style:{position:"relative",width:"1000px",maxWidth:"100%",margin:"var(--basis_x8) auto 0 auto"},children:[Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){return g(0,0,{})},className:"text hasIcon",style:{margin:"0 0 var(--basis_x2) 0"},children:Object(m.jsxs)("span",{style:{pointerEvents:"none"},children:[Object(m.jsx)(oe.a,{className:"icon"}),Object(m.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:Object(m.jsx)(_,{id:"add_content_before"})})]})})}),Object(m.jsx)(Fc.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var c=Array.from(e),a=c.splice(t,1),o=Object(r.a)(a,1)[0];return c.splice(n,0,o),c}(s,e.source.index,e.destination.index);l(t),c(t)}},children:Object(m.jsx)(Fc.c,{droppableId:"list",isDropDisabled:!1,children:function(e){return Object(m.jsxs)("div",Object(O.a)(Object(O.a)({ref:e.innerRef},e.droppableProps),{},{children:[k.filter((function(e){return!!e})).map((function(e,t){var n=e.tmp_id,c={index:t,tmp_id:n};return Object(m.jsx)(Fc.b,{draggableId:n,index:t,isDragDisabled:!1,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(r){return Object(a.createElement)("div",Object(O.a)(Object(O.a)({ref:r.innerRef},r.draggableProps),{},{key:n,className:Ac.a.row}),Object(m.jsx)("div",{className:Ac.a.form,children:Object(m.jsx)(Ic,{className:Ac.a.item,dataset:{"data-index":t,"data-id":n},defaultContentConfig:e,reorderHandle:Object(m.jsx)(xc.a,{title:Object(m.jsxs)("div",{style:{textAlign:"center"},children:[Object(m.jsx)("strong",{children:"Drag"})," to move.",Object(m.jsx)("br",{}),Object(m.jsx)("strong",{children:"Click"})," to open menu."]}),children:Object(m.jsx)("button",Object(O.a)(Object(O.a)({className:"text ".concat(Ac.a.inlineRowButton," ").concat(Ac.a.dragHandleButton)},r.dragHandleProps),{},{children:Object(m.jsx)(Ec.a,{})}))}),onRemoveRow:function(){},addRowBefore:function(e){return g(t,0,e)},addRowAfter:function(e){return g(t,1,e)},onInputRef:function(e){return p(c,e)},onGoToPrevInput:function(e){return h(c,e)},onGoToNextInput:function(e){return f(c,e)},onChange:function(e){return v(c,e)}},n)}))}},n)})),e.placeholder]}))}})})]}),Object(m.jsx)("div",{style:{position:"relative",height:"50vh",cursor:0===k.length?"default":"text"},onClick:0===k.length?null:x})]})};var Lc=function(){var e=y(),t=e.getString,n=e.fluentByAny,c=be(),o=rn(),i=vn(),s=i.currentLocale,l=i.setLocales,u=Object(a.useState)(!1),j=Object(r.a)(u,2),b=j[0],p=j[1],h=Object(a.useCallback)((function(){return p(!0)}),[p]),f=Object(a.useCallback)((function(){return p(!1)}),[p]),x=Object(a.useState)(!1),v=Object(r.a)(x,2),g=v[0],k=v[1],w=Object(a.useCallback)((function(){return k(!0)}),[k]),C=Object(a.useCallback)((function(){return k(!1)}),[k]),N=Object(a.useRef)(!1),S=Object(d.h)().id,I=void 0===S?"":S,F=Object(a.useState)({type:"page",properties:{},content:[]}),B=Object(r.a)(F,2),E=B[0],P=B[1],A=E.type,D=E.properties,T=E.content,R=E.permissions;Object(a.useEffect)((function(){"string"!==typeof I||""===I||N.current&&I===E._id||o(I).then((function(e){N.current=!0,e.properties&&(e.properties.text||e.properties.description)&&l(Object(cn.a)(new Set([].concat(Object(cn.a)(e.properties.text?e.properties.text.map((function(e){return e.locale})):[]),Object(cn.a)(e.properties.description?e.properties.description.map((function(e){return e.locale})):[]))))),P(e)}))}),[I,E,o,P,l]);var L=Object(a.useCallback)((function(e){if(e!==E.type){var t=Object(O.a)(Object(O.a)({},E),{},{type:e});c(t).then((function(e){P(e)}))}}),[E,c,P]),V=Object(a.useCallback)((function(e){if(e!==E.properties){var t=Object(O.a)(Object(O.a)({},E),{},{properties:e});c(t).then((function(e){P(e)}))}}),[E,c,P]),W=Object(a.useCallback)((function(e){if(e!==E.content){var t=Object(O.a)(Object(O.a)({},E),{},{content:e});c(t).then((function(e){P(e)}))}}),[E,c,P]),G=Object(a.useCallback)((function(e){if(e!==E.permissions){var t=Object(O.a)(Object(O.a)({},E),{},{permissions:e});c(t).then((function(e){P(e)}))}}),[E,c,P]),z=Object(a.useCallback)((function(){c(E).then((function(e){e._id!==E._id&&P(e)}))}),[c,E,P]),M=Object(m.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[Object(m.jsx)(gn,{trigger:function(e){return Object(m.jsxs)("button",Object(O.a)(Object(O.a)({},e),{},{className:"text hasIcon",children:[Object(m.jsx)(an.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:t("locale_"+s)})]}))}}),b?Object(m.jsx)(Tn,{defaultBlock:E,open:b,onClose:f,onChange:V}):null,Object(m.jsxs)("button",{className:"text hasIcon",onClick:h,children:[Object(m.jsx)(on.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(m.jsx)(_,{id:"path_editor_share"})})]}),g?Object(m.jsx)(Zn,{defaultPermissions:R,open:g,onClose:C,onChange:G}):null,Object(m.jsxs)("button",{className:"text hasIcon",onClick:w,children:[Object(m.jsx)(sn.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(m.jsx)(_,{id:"path_editor_permissions"})})]}),Object(m.jsxs)("button",{className:"text hasIcon",onClick:z,children:[Object(m.jsx)(ln.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(m.jsx)(_,{id:"path_editor_publish"})})]}),Object(m.jsx)(Qe,{block:E,setType:L,trigger:function(e){return Object(m.jsx)("button",Object(O.a)(Object(O.a)({},e),{},{className:"white hasIcon",children:Object(m.jsx)(Ie.a,{className:"icon"})}))}})]}),H=n(E.properties.text,"Editor");return Object(m.jsxs)("div",{className:"hasHeader ".concat(jn.a.editor),children:[Object(m.jsx)($t,{block:E,title:H,rightActions:M}),Object(m.jsx)(fc,{type:A,defaultProperties:D,onChange:V}),Object(m.jsx)(Rc,{onChange:W,defaultValue:T})]},E._id)};var Vc=function(){var e=Object(A.a)();return Object(a.useCallback)((function(t){return new Promise((function(n){e.query({query:L,variables:t}).then(function(){var e=Object(P.a)(E.a.mark((function e(t){var c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(c=t.data).error&&c.blocks?n(c.blocks||[]):(console.error(c.error),n([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(P.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e])},Wc=n(79),Gc=n.n(Wc);var zc=function(){var e=Object(a.useRef)(!1),t=z().loggedIn,n=rn(),c=Vc(),o=y().fluentByAny,i=Object(d.h)().id,s=void 0===i?"":i,l=Object(a.useState)({type:"page",properties:{},content:[]}),u=Object(r.a)(l,2),j=u[0],b=u[1],p=Object(a.useState)([]),O=Object(r.a)(p,2),h=O[0],f=O[1];Object(a.useEffect)((function(){!1===e.current&&"string"===typeof s&&""!==s&&s!==j._id&&(e.current=!0,n(s).then((function(t){b(t);var n=t.content.map((function(e){return e.blockId}));c({ids:n}).then((function(t){var c=Object(cn.a)(n).map((function(e){return t.find((function(t){return t._id===e}))}));f(Object(cn.a)(c)),e.current=!1}))})))}),[s,j._id,n,b,c,f]);var x=j.type||null,v=o(j.properties.text,""),g=o(j.properties.description,""),k=j.properties.coverphoto||"",w=j.properties.icon||"",C=Object(m.jsx)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:Object(m.jsx)(qt.b,{to:"/edit/".concat(j._id),children:Object(m.jsxs)("button",{className:"text hasIcon",children:[Object(m.jsx)($e.a,{className:"icon"}),Object(m.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(m.jsx)(_,{id:"edit_block"})})]})})});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)($t,{block:j,title:v,rightActions:t?C:null}),Object(m.jsxs)("div",{className:"basis_x1 ".concat(Gc.a.app," ").concat(Gc.a.spine_aligned),dir:"auto",children:["page"!==x&&"person"!==x||""===k?null:Object(m.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(k),")")},className:Gc.a.coverphoto}),Object(m.jsxs)("main",{className:"".concat(Gc.a.contentWrapper),children:["page"!==x&&"person"!==x||""===w?null:Object(m.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(w),")")},className:"".concat(Gc.a.icon," ").concat(""===k?Gc.a.coverphotoIsNotSet:Gc.a.coverphotoIsSet)}),""!==v?Object(m.jsx)("h1",{dir:"auto",children:v}):null,""!==g?Object(m.jsxs)("p",{dir:"auto",children:[g.split(/\n/g).flatMap((function(e){return[e,Object(m.jsx)("br",{},e)]})),Object(m.jsx)("br",{})]}):null,Object(m.jsx)("div",{className:Gc.a.items,children:h.filter((function(e){return!!e})).map((function(e){return Object(m.jsx)(wt,{block:e},e._id)}))})]})]})]})};var Mc=function(){var e=z().loggedIn,t=Object(d.f)("/"),n=Object(d.e)(),c=Object(a.useState)({}),o=Object(r.a)(c,2),i=o[0],s=o[1];return Object(a.useEffect)((function(){var e=new URLSearchParams(n.search).get("real_path");i.pathname!==e&&("string"===typeof e&&e.length>0?(window.history.replaceState(null,"",n.pathname),s({pathname:e})):s(n))}),[n,i,s]),Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:"".concat(b.a.app," ").concat(t?b.a.isStartpage:""),children:Object(m.jsxs)(Tt,{children:[t?null:Object(m.jsx)(Rt,{}),Object(m.jsx)(Lt,{children:e?Object(m.jsxs)(d.c,{location:i,children:[Object(m.jsx)(d.a,{path:"/view/:id",element:Object(m.jsx)(zc,{})}),Object(m.jsx)(d.a,{path:"/edit/:id",element:Object(m.jsx)(Lc,{})}),Object(m.jsx)(d.a,{path:"/shortcode",element:Object(m.jsx)(nn,{})}),Object(m.jsx)(d.a,{path:"/",element:Object(m.jsx)(Bt,{})})]}):Object(m.jsxs)(d.c,{location:i,children:[Object(m.jsx)(d.a,{path:"/view/:id",element:Object(m.jsx)(zc,{})}),Object(m.jsx)(d.a,{path:"/",element:Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h1",{children:"Login to view content"}),Object(m.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(m.jsxs)("button",{className:"hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(m.jsx)(p.a,{className:"icon"}),Object(m.jsx)("span",{children:Object(m.jsx)(_,{id:"login"})})]})})]})})]})})]})})})},Hc=(n(210),n(112)),Uc={de:"Deutsch",en:"English",fr:"Fran\xe7ais"},qc=Object.keys(Uc),$c="en";function Jc(e){return Xc.apply(this,arguments)}function Xc(){return(Xc=Object(P.a)(E.a.mark((function e(t){var c,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(214)("./"+t+".ftl");case 2:return c=e.sent,e.next=5,fetch(c.default);case 5:return r=e.sent,e.next=8,r.text();case 8:return a=e.sent,e.abrupt("return",Object(H.a)({},t,new Hc.b(a)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e){return Kc.apply(this,arguments)}function Kc(){return(Kc=Object(P.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(Jc));case 2:return n=e.sent,r=n.reduce((function(e,t){return Object.assign(e,t)})),e.abrupt("return",E.a.mark((function e(){var n,a,o,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(c.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return o=a.value,(i=new Hc.a(o)).addResource(r[o]),e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qc(e){var t=e.userLocales,n=e.children,c=e.onLocaleChange,o=Object(a.useState)(function(){var e=new Hc.a("");return e.addResource(new Hc.b("")),new h.c([e])}()),i=Object(r.a)(o,2),s=i[0],l=i[1];return Object(a.useEffect)((function(){function e(){return(e=Object(P.a)(E.a.mark((function e(){var n,r,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.negotiateLanguages)(t,qc,{defaultLocale:$c}),c&&c(n),e.next=4,Zc(n);case 4:r=e.sent,(a=new h.c(r())).userLocales=t,a.defaultLocale=$c,a.supportedLocales=qc,l(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c]),s?Object(m.jsx)(h.a,{l10n:s,children:n}):Object(m.jsx)("div",{children:"Loading texts\u2026"})}var Yc=n(333),er=n(177),tr=n(346),nr=n(336),cr=n(338),rr=n(334);window.domains={backend:"https://api.volt.link/",frontend:"https://beta.volt.link/"};var ar=new nr.a({uri:window.domains.backend+"graphql/v1/",cache:new cr.a,credentials:"include",defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}});function or(){var e=Object(a.useState)(navigator.languages),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(null),l=Object(r.a)(s,2),j=l[0],b=l[1];Object(a.useEffect)((function(){if(window.umami){var e=navigator.languages;if(e||Array.isArray(e)){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=(r=r.toLowerCase()).split("-")[0];a!==r&&window.umami.trackEvent("L: "+a),window.umami.trackEvent("L: "+r)}}catch(o){n.e(o)}finally{n.f()}}}}),[]);var d=Object(a.useCallback)((function(e){i([e.target.dataset.locale])}),[i]),p=Object(a.useCallback)((function(e){b(e.length>0?e[0]:"")}),[b]),O=Object(Yc.a)("(prefers-color-scheme: dark)"),h=o.a.useMemo((function(){return Object(er.a)({palette:{mode:O?"dark":"light"}})}),[O]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{id:"react-notification",style:{zIndex:"10000"}},"react-notification"),Object(m.jsx)(Qc,{userLocales:n,onLocaleChange:p,children:Object(m.jsx)(rr.a,{client:ar,children:Object(m.jsx)(tr.a,{theme:h,children:Object(m.jsx)(je.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{minWidth:"unset"},classes:{variantSuccess:"".concat(u.a.snackbar," ").concat(u.a.success),variantError:"".concat(u.a.snackbar," ").concat(u.a.error),variantWarning:"".concat(u.a.snackbar," ").concat(u.a.warning),variantInfo:"".concat(u.a.snackbar," ").concat(u.a.info)},domRoot:document.getElementById("react-notification"),children:Object(m.jsx)(xn,{children:Object(m.jsx)(qt.a,{children:Object(m.jsx)(Mc,{locales:Uc,currentLocale:j,onLanguageChange:d})})})})})})},"AppLocalizationProvider")]})}s.a.render(Object(m.jsx)(or,{}),document.getElementById("root"))},46:function(e,t,n){e.exports={coverphoto:"ViewerActionCard_coverphoto__3octg",icon:"ViewerActionCard_icon__3zy8N",title:"ViewerActionCard_title__1HxR6",iconLine:"ViewerActionCard_iconLine__1TXjK"}},56:function(e,t,n){e.exports={dialogsWrapper:"PermissionsEditor_dialogsWrapper__1xVvi",dialog:"PermissionsEditor_dialog__2rpyk",backdrop:"PermissionsEditor_backdrop__1dRPN",inputWrapper:"PermissionsEditor_inputWrapper__4DGsr",emailInput:"PermissionsEditor_emailInput__1uH8s",permissionRow:"PermissionsEditor_permissionRow__2HaWO",menuButton:"PermissionsEditor_menuButton__2jIMI",ownerInfo:"PermissionsEditor_ownerInfo__EEKXP",actions:"PermissionsEditor_actions__k4oBn"}},71:function(e,t,n){e.exports={root:"IconPicker_root__2okyv",iconIsSet:"IconPicker_iconIsSet__SnQwA",coverphotoIsSet:"IconPicker_coverphotoIsSet__3m9Dw",icon:"IconPicker_icon__JWgfX",iconWrapper:"IconPicker_iconWrapper__1zo6g",sizing_pixel:"IconPicker_sizing_pixel__3TeE0",iconIsNotSet:"IconPicker_iconIsNotSet__1T0Zd"}},76:function(e,t,n){e.exports={snackbar:"Snackbar_snackbar__119_w",default:"Snackbar_default__31-eU",success:"Snackbar_success__zvTW8",error:"Snackbar_error__3XeD6",warning:"Snackbar_warning__2CBXt",info:"Snackbar_info__EuVSN"}},77:function(e,t,n){e.exports={main_headline:"PropertiesEditor_main_headline__3wy7R",propertiesFrame:"PropertiesEditor_propertiesFrame__1uBEz",properties_row:"PropertiesEditor_properties_row__2tX7M"}},78:function(e,t,n){e.exports={coverphoto:"CoverphotoPicker_coverphoto__1mWB4",root:"CoverphotoPicker_root__3T8t9",coverphotoIsNotSet:"CoverphotoPicker_coverphotoIsNotSet__1O3-S",button_wrapper:"CoverphotoPicker_button_wrapper__2oEjh",coverphotoIsSet:"CoverphotoPicker_coverphotoIsSet__2o24A",iconIsSet:"CoverphotoPicker_iconIsSet__D_4uA"}},79:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",items:"Viewer_items__2FgjF"}},97:function(e,t,n){e.exports={coverphoto:"ViewerPageCard_coverphoto__tOV8d",icon:"ViewerPageCard_icon__Vn_YM",title:"ViewerPageCard_title__Lgi9t"}},98:function(e,t,n){e.exports={dialog:"SharingEditor_dialog__22jfY",backdrop:"SharingEditor_backdrop__1Gra9",inputWrapper:"SharingEditor_inputWrapper__1UyBD",input:"SharingEditor_input__brkXK",actions:"SharingEditor_actions__2zz6x"}},99:function(e,t,n){e.exports={block:"InlineEditorBlock_block__14-zd",block_input:"InlineEditorBlock_block_input__2I1iu",form_deactivated:"InlineEditorBlock_form_deactivated__2oktp",form_active:"InlineEditorBlock_form_active__hi5HC",reorderHandle:"InlineEditorBlock_reorderHandle__2_s23"}}},[[215,1,2]]]);
//# sourceMappingURL=main.a48af51c.chunk.js.map