(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[5,17],{481:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(5),o=n(1),c=n(243),i=n(70),l=n(482),s=n.n(l),u=n(483),d=n(0),b={_:"??",en:"English",de:"Deutsch (German)",es:"Espa\xf1ol (Spanish)",pt:"Portugu\xeas (Portuguese)",fr:"Fran\xe7ais (French)",it:"Italiano (Italian)",nl:"Dutch (Nederlands)",da:"Dansk (Danish)",sv:"Svenska (Swedish)",nb:"Norsk bokm\xe5l (Norwegian)",fi:"Suomi (Finish)",se:"Davvis\xe1megiella (Northern S\xe1mi)",lt:"Lietuvi\u0161kai (Lithuanian)",mt:"Malti (Maltese)",pl:"J\u0119zyk polski (Polish)",uk:"\u0443\u043a\u0440\u0430\u0457\u0301\u043d\u0441\u044c\u043a\u0430 \u043c\u043e\u0301\u0432\u0430 (Ukrainian)",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a (Russian)",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a (Bulgarian)",tr:"T\xfcrk\xe7e (Turkish)",ar:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629 (Arabic)",el:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac (Greek)",ro:"limba rom\xe2n\u0103 (Romanian)",sl:"sloven\u0161\u010dina (Slovenian)",cy:"Cymraeg (Welsh)"},p=Object.entries(b).map((function(e){var t=Object(a.a)(e,2);return{code:t[0],nativeName:t[1]}})),j=Object.keys(b);t.default=function(e){var t=e.defaultValue,n=e.onChange,l=e.options,f=void 0===l?j:l,h=e.style;null!==t&&void 0!==t&&""!==t&&!1!==b.hasOwnProperty(t)||(t=f.length>0?f[0]:"_");var O=Object(o.useState)(t),g=Object(a.a)(O,2),v=g[0],x=g[1],m=Object(o.useCallback)((function(e){x(e),"_"===e&&(e=null),n&&n(e)}),[x,n]);return Object(d.jsx)(i.a,{trigger:function(e,t){var n=t.isOpen;return Object(d.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"default hasIcon",style:Object(r.a)({margin:"0",flexShrink:"0"},h),children:[Object(d.jsx)("span",{style:{width:"100%",textAlign:"start"},children:"_"===v?Object(d.jsx)(s.a,{path:u.d,className:"icon"}):v.toUpperCase()}),Object(d.jsx)("span",{style:{marginLeft:"var(--basis)",lineHeight:"1",verticalAlign:"text-top"},children:n?"\u25b4":"\u25be"})]}))},paperProps:{sx:{maxHeight:"300px"}},children:function(e){var t=e.close;return Object(d.jsx)("div",{style:{padding:"var(--basis_x2) 0"},children:p.filter((function(e){var t=e.code;return f.includes(t)})).map((function(e){var n=e.code,r=e.nativeName;return Object(d.jsx)(c.a,{onClick:function(){m(n),t()},className:"roundMenuItem",selected:n===v,children:"_"===n?r:"".concat(n.toUpperCase()," \u2014 ").concat(r)},n)}))})}})}},491:function(e,t,n){e.exports={app:"PageEditor_app__26Zo3",spine_aligned:"PageEditor_spine_aligned__2i6Wu",contentWrapper:"PageEditor_contentWrapper__WlUIr",editor:"PageEditor_editor__U1pPN",type_redirect:"PageEditor_type_redirect__2KPht",loadingContent:"PageEditor_loadingContent__1YK7g",editor_form_row:"PageEditor_editor_form_row__j4vjp"}},492:function(e,t,n){e.exports={dialog:"SharingEditor_dialog__22jfY",backdrop:"SharingEditor_backdrop__1Gra9",inputWrapper:"SharingEditor_inputWrapper__1UyBD",input:"SharingEditor_input__brkXK",actions:"SharingEditor_actions__2zz6x"}},494:function(e,t,n){e.exports={rebuild_textarea:"HtmlInput_rebuild_textarea__ZfRzZ",show_placeholder:"HtmlInput_show_placeholder__hM8g2"}},495:function(e,t,n){e.exports={dialog:"TranslationEditor_dialog__YL0sv",backdrop:"TranslationEditor_backdrop__hfIzh",inputWrapper:"TranslationEditor_inputWrapper__3aVMH",input:"TranslationEditor_input__3U2bK",actions:"TranslationEditor_actions__3dTaz"}},496:function(e,t,n){e.exports={input_with_local:"InputWithLocal_input_with_local__3qqYa"}},497:function(e,t,n){e.exports={row:"Repeater_row__1ODoF",middleActions:"Repeater_middleActions__3nRoT",trigger:"Repeater_trigger__1VtG5",content:"Repeater_content__110R9",form:"Repeater_form__2N6kw",item:"Repeater_item__2OI78",inlineRowButton:"Repeater_inlineRowButton__uqk8Y",dragHandleButton:"Repeater_dragHandleButton__2eLww",addRowButton:"Repeater_addRowButton__3huSP"}},500:function(e,t,n){e.exports={error:"FancyInput_error__2DFWE"}},501:function(e,t,n){e.exports={dialog:"PermissionsEditor_dialog__2rpyk",backdrop:"PermissionsEditor_backdrop__1dRPN",inputWrapper:"PermissionsEditor_inputWrapper__4DGsr",input:"PermissionsEditor_input__1HyOC",actions:"PermissionsEditor_actions__k4oBn",permissionRow:"PermissionsEditor_permissionRow__2HaWO",menuButton:"PermissionsEditor_menuButton__2jIMI",ownerInfo:"PermissionsEditor_ownerInfo__EEKXP"}},502:function(e,t,n){e.exports={main_headline:"PropertiesEditor_main_headline__3wy7R",propertiesFrame:"PropertiesEditor_propertiesFrame__1uBEz",properties_row:"PropertiesEditor_properties_row__2tX7M"}},503:function(e,t,n){e.exports={root:"CoverphotoPicker_root__3T8t9",coverphoto:"CoverphotoPicker_coverphoto__1mWB4",coverphotoIsNotSet:"CoverphotoPicker_coverphotoIsNotSet__1O3-S",button_wrapper:"CoverphotoPicker_button_wrapper__2oEjh",coverphotoIsSet:"CoverphotoPicker_coverphotoIsSet__2o24A",iconIsSet:"CoverphotoPicker_iconIsSet__D_4uA",changeCoverphotoButton:"CoverphotoPicker_changeCoverphotoButton__2GnZD"}},505:function(e,t,n){e.exports={root:"StorageFileInput_root__1MhoY",inputWrapper:"StorageFileInput_inputWrapper__fUwIT",loadingText:"StorageFileInput_loadingText__2q-OV"}},506:function(e,t,n){e.exports={root:"IconPicker_root__2okyv",iconIsSet:"IconPicker_iconIsSet__SnQwA",coverphotoIsSet:"IconPicker_coverphotoIsSet__3m9Dw",icon:"IconPicker_icon__JWgfX",image_type_url:"IconPicker_image_type_url__3IKNM",image_type_file:"IconPicker_image_type_file__nrsbm",iconWrapper:"IconPicker_iconWrapper__1zo6g",sizing_pixel:"IconPicker_sizing_pixel__3TeE0",iconIsNotSet:"IconPicker_iconIsNotSet__1T0Zd",emojiWrapper:"IconPicker_emojiWrapper__2b_Qv",changeIconButton:"IconPicker_changeIconButton__TxsdG"}},507:function(e,t,n){e.exports={block:"InlineEditorBlock_block__14-zd",block_input:"InlineEditorBlock_block_input__2I1iu",form_deactivated:"InlineEditorBlock_form_deactivated__2oktp",form_active:"InlineEditorBlock_form_active__hi5HC",reorderHandle:"InlineEditorBlock_reorderHandle__2_s23"}},508:function(e,t,n){e.exports={row:"ContentEditor_row__JonRI",form:"ContentEditor_form__wtoB9",item:"ContentEditor_item__3U0XE",inlineRowButton:"ContentEditor_inlineRowButton__2pw6r",dragHandleButton:"ContentEditor_dragHandleButton__1Y_RP"}},534:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(15),o=n(20),c=n(5),i=n(8),l=n.n(i),s=n(1),u=n.n(s),d=n(23),b=n(16),p=n(207),j=n(102),f=n(116),h=n(67),O=n(13),g=n(130),v=n(93),x=n(526),m=n(527),_=n(453),y=n(482),k=n.n(y),w=n(483),C=n(491),I=n.n(C),N=n(131),F=n(472),S=n(518),P=n(464),E=n(519),B=n(492),R=n.n(B),A=n(24),T=n(17),D=n(493),V=n(494),L=n.n(V),M=n(0),G=["type","defaultValue","children","className","onChange","onBlur","onError","linebreaks","style","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeFromNextInput"];function W(e,t){if(e.normalize(),!window.getSelection)return 0;var n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0):null;if(!r)return 0;var a=r.cloneRange();a.selectNodeContents(e),a.setEnd(r.endContainer,r.endOffset);var o=a.cloneContents(),c=0;return o.childNodes.length>0&&("first"===t?c=3===o.childNodes[0].nodeType?o.childNodes[0].length:0:"last"===t&&(c=3===o.childNodes[o.childNodes.length-1].nodeType?o.childNodes[o.childNodes.length-1].length:o.childNodes.length>1&&3===o.childNodes[o.childNodes.length-2].nodeType?o.childNodes[o.childNodes.length-2].length:0)),a.detach(),c}function z(e){var t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),a=e.offsetHeight-n-r,o=Object(D.a)(e),c=Object(D.b)(e);c.top=c.top-o.top,c.left=c.left-o.left;var i=c.top<c.height,l=a-c.top<c.height,s=function(e){if(e.normalize(),!window.getSelection)return 0;var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(!n)return 0;var r=n.cloneRange();r.selectNodeContents(e),r.setEnd(n.endContainer,n.endOffset);var a,o=r.cloneContents(),c=0,i=Object(T.a)(o.childNodes);try{for(i.s();!(a=i.n()).done;){var l=a.value;3===l.nodeType?c+=l.textContent.length:1===l.nodeType&&"BR"===l.nodeName&&(c+=1)}}catch(s){i.e(s)}finally{i.f()}return r.detach(),c}(e),u=e.innerText.length||0;u<0&&(u=0);var d=u-s;return{inFirstLine:i,inLastLine:l,left:c.left,top:c.top,height:c.height,positionFromLineStart:W(e,i?"first":"last"),positionFromStart:s,positionFromEnd:d}}var H=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,a=void 0===r?"":r,o=(e.children,e.className),i=e.onChange,l=e.onBlur,u=(e.onError,e.linebreaks),d=e.style,b=e.placeholder,p=void 0===b?"":b,j=e.onInputRef,f=e.onGoToPrevInput,h=e.onGoToNextInput,O=e.onSplitText,g=e.onMergeToPrevInput,v=e.onMergeFromNextInput,x=(Object(A.a)(e,G),Object(s.useRef)(null)),m=Object(s.useRef)(""),_=m.current,y=Object(s.useState)({__html:""}),k=Object(c.a)(y,2),w=k[0],C=k[1],I=Object(s.useCallback)((function(e){var t=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(m.current=e,w.__html!==t)return C({__html:t})}),[w,C]);Object(s.useEffect)((function(){_!==a&&I(a)}),[_,a,I]);var N=Object(s.useCallback)((function(e){var t=e.target.innerHTML||"";t=t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"),console.log("value",t),t=(t=!1===u?t.replace(/<\/? ?br ?\/?>/g," "):t.replace(/<\/? ?br ?\/?>/g,"\n")).trim(),m.current=t,i&&i(t)}),[i,u]),F=Object(s.useCallback)((function(){l&&l(_)}),[l,_]),S=Object(s.useCallback)((function(e){if("Enter"===e.key&&!0===e.shiftKey)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if("Tab"===e.key)document.execCommand("insertText",!1,"\t"),e.preventDefault();else if("ArrowUp"===e.key){if(f){var t=z(x.current);t.inFirstLine&&(f({caret:t}),e.preventDefault())}}else if("ArrowLeft"===e.key){if(f){var r=z(x.current);r.inFirstLine&&r.positionFromStart<=0&&(r.positionFromLineStart=-1,f({caret:r}),e.preventDefault())}}else if("ArrowDown"===e.key){if(h){var a=z(x.current);a.inLastLine&&(h({caret:a}),e.preventDefault())}}else if("ArrowRight"===e.key){if(h){var o=z(x.current);o.inLastLine&&0===o.positionFromEnd&&(o.positionFromLineStart=0,h({caret:o}),e.preventDefault())}}else if("Enter"===e.key){if("code"===n)!1!==u&&document.execCommand("insertLineBreak");else if(O){var c=z(x.current),i=x.current.innerText,l=i.slice(0,c.positionFromStart),s=i.slice(c.positionFromStart);O({texts:[l,s]})}e.preventDefault()}else if("Backspace"===e.key){if(g){var d=z(x.current);0===d.positionFromStart&&d.inFirstLine&&(g({caret:d,text:x.current.innerText}),e.preventDefault())}}else if("Delete"===e.key&&v){var b=z(x.current);0===b.positionFromEnd&&b.inLastLine&&(v({caret:b,text:x.current.innerText}),e.preventDefault())}}),[x,u,f,h,O,g,v,n]);Object(s.useEffect)((function(){j&&j(x)}),[j,x]);var P=Object(s.useCallback)((function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");!1===u&&(t=t.replace(/\n/g," ")),document.execCommand("insertText",!1,t)}),[u]);return Object(M.jsx)("div",{style:{flexGrow:"1"},children:Object(M.jsx)("div",{ref:x,onKeyDown:S,onInput:N,onBlur:F,onPaste:P,className:"".concat(L.a.rebuild_textarea," ").concat(0===_.length?L.a.show_placeholder:""," ").concat(o),contentEditable:!0,dangerouslySetInnerHTML:w,style:d,placeholder:p})})};function U(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.info("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.info("Fallback: Copying text command was "+n)}catch(r){console.error("Fallback: Oops, unable to copy",r)}document.body.removeChild(t)}(e)}var Z=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,a=e.open,o=void 0!==a&&a,i=e.onChange,l=e.onClose,u=Object(s.useState)(""),d=Object(c.a)(u,2),p=d[0],j=d[1];Object(s.useEffect)((function(){var e=(n.properties||{}).slug||"";j(e)}),[n,j]);var f=Object(s.useCallback)((function(e){var t=Object(r.a)({},n.properties||{});""===e?t.hasOwnProperty("slug")&&delete t.slug:t.slug=e,j(e),i(t)}),[n,i,j]);return o?Object(M.jsx)(F.a,{open:o,onClose:l,hideBackdrop:!0,children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:R.a.backdrop,onClick:l}),Object(M.jsxs)("div",{className:R.a.dialog,children:[Object(M.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Share the link"}),Object(M.jsxs)("div",{className:R.a.inputWrapper,children:[Object(M.jsx)("span",{style:{paddingRight:"var(--basis)"},children:"volt.link/"}),Object(M.jsx)(H,{defaultValue:p,onBlur:f,linebreak:!1,className:R.a.input,style:{margin:"0"}})]}),Object(M.jsx)("hr",{style:{opacity:.2}}),Object(M.jsxs)("div",{className:R.a.actions,children:[""!==p?Object(M.jsxs)("div",{children:[Object(M.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://qrcode.volt.link/?c=volt.link/".concat(p),e.target="_blank",e.rel="noreferrer",e.click()},style:{marginInlineStart:"0"},children:[Object(M.jsx)(S.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",children:Object(M.jsx)(b.a,{id:"sharing_qrcode"})})]}),Object(M.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(p),e.target="_blank",e.rel="noreferrer",e.click()},children:[Object(M.jsx)(P.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",children:Object(M.jsx)(b.a,{id:"sharing_statistics"})})]}),Object(M.jsxs)("button",{className:"text hasIcon",onClick:function(){U("https://volt.link/".concat(p)),alert("Copied to clipboard \ud83d\udc4d")},children:[Object(M.jsx)(E.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",children:Object(M.jsx)(b.a,{id:"sharing_copy_url"})})]})]}):Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:l,className:"green",style:{marginInlineEnd:"0"},children:Object(M.jsx)(b.a,{id:"dialog_done"})})]})]})]})}):null},q=n(495),J=n.n(q),K=n(496),Y=n.n(K),X=n(481),Q=["reorderHandle","actionButton","locale","defaultValue","children","style","onChange","onBlur","className","dataset"];var $=function(e){e.reorderHandle,e.actionButton;var t=e.locale,n=e.defaultValue,r=e.children,a=e.style,o=e.onChange,i=e.onBlur,l=e.className,u=e.dataset,d=void 0===u?{}:u,b=(Object(A.a)(e,Q),Object(s.useState)(t)),p=Object(c.a)(b,2),j=p[0],f=p[1],h=Object(s.useState)(n),O=Object(c.a)(h,2),g=O[0],v=O[1],x=Object(s.useCallback)((function(){i&&i({value:{locale:j,text:g},dataset:d})}),[i,j,g,d]),m=Object(s.useCallback)((function(e){f(e);var t={value:{locale:e,text:g},dataset:d};o&&o(t),i&&i(t)}),[f,o,g,d,i]),_=Object(s.useCallback)((function(e){var t=e;e&&e.target&&e.target.value&&(t=e.target.value),v(t),o&&o({value:{locale:j,text:t},dataset:d})}),[v,o,j,d]);return Object(M.jsxs)("div",{className:Y.a.input_with_local+" "+l,style:a,children:[Object(M.jsx)(X.default,{onChange:m,defaultValue:t}),r?r({onChange:_,onBlur:x,defaultValue:n,style:{flexGrow:"1"}}):null]})},ee=n(489),te=n(535),ne=n(497),re=n.n(ne),ae=n(488),oe=n.n(ae);function ce(e){var t=e.subDefaultValue,n=e.index,a=e.render,o=e.handleRowChange,c=e.isReorderable,i=e.handleAddRow,l=e.handleRemoveRow,u=e.showReorderControls,d=e.reorderLabel,b=e.showActionButton,p=e.hasOnlyOneRow,j=e.addRowByIndex;return Object(M.jsx)(ee.b,{draggableId:t.tmp_id,index:n,isDragDisabled:!0!==c,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(e){return Object(s.createElement)("div",Object(r.a)(Object(r.a)({ref:e.innerRef},e.draggableProps),{},{key:t.tmp_id,className:re.a.row}),Object(M.jsxs)("div",{className:re.a.form,children:[!0===c&&!0===u?Object(M.jsx)("button",Object(r.a)(Object(r.a)({"aria-label":d,className:"text ".concat(re.a.inlineRowButton," ").concat(re.a.dragHandleButton)},e.dragHandleProps),{},{children:Object(M.jsx)(oe.a,{})})):null,a({key:t.tmp_id,defaultValue:t,className:re.a.item,dataset:{"data-index":n,"data-id":t.tmp_id},onChange:o,onRemoveRow:function(){return l(n)},addRowBefore:function(e){return j(n,0,e)},addRowAfter:function(e){return j(n,1,e)},reorderHandle:Object(M.jsx)("button",Object(r.a)(Object(r.a)({"aria-label":d,className:"text ".concat(re.a.inlineRowButton," ").concat(re.a.dragHandleButton)},e.dragHandleProps),{},{children:Object(M.jsx)(oe.a,{})})),actionButton:p?Object(M.jsx)("button",{className:"green ".concat(re.a.inlineRowButton),onClick:i,children:"+"}):Object(M.jsx)("button",{className:"red ".concat(re.a.inlineRowButton),"data-index":n,onClick:l,children:"\u2013"})}),!0===b?p?Object(M.jsx)("button",{className:"green ".concat(re.a.inlineRowButton),onClick:i,children:"+"}):Object(M.jsx)("button",{className:"red ".concat(re.a.inlineRowButton),"data-index":n,onClick:l,children:"\u2013"}):null]}))}},t.tmp_id)}function ie(e){var t=e;return"object"===typeof e&&(e.target&&(e=e.target),e.dataset&&e.dataset.index&&(t=parseInt(e.dataset.index),isNaN(t)&&(t=null))),t}var le=function(e){var t=e.defaultValue,n=e.addDefaultValue,o=e.addButtonText,i=e.hideAddButton,l=void 0!==i&&i,u=e.reorderLabel,d=void 0===u?"Reorder":u,b=e.render,p=e.style,j=e.onChange,f=e.prependNewItems,h=e.showReorderControls,O=void 0!==h&&h,g=e.showActionButton,v=void 0===g||g,x=e.isReorderable,m=void 0!==x&&x;o||(o="Add Row");var _=Object(s.useState)([]),y=Object(c.a)(_,2),k=y[0],w=y[1],C=Object(s.useCallback)((function(){var e={};if("function"===typeof n){var t=n();"object"===typeof t&&null!==t&&("string"===typeof(e=t).tmp_id&&""!==e.tmp_id||(e.tmp_id=Object(te.a)()))}return e}),[n]);Object(s.useEffect)((function(){var e=t;Array.isArray(t)&&0!==t.length||(e=[C()]),e=e.map((function(e){return e.tmp_id?e:Object(r.a)(Object(r.a)({},e),{},{tmp_id:Object(te.a)()})})),w(e)}),[t,C,w]);var I=Object(s.useCallback)((function(e){var t=ie(e),n=Object(a.a)(k);n.splice(t,1);var r=j(n);Array.isArray(r)&&(n=r),w(n)}),[k,w,j]),N=Object(s.useCallback)((function(e){var t=e.dataset.index||e.dataset["data-index"],n=e.dataset.id||e.dataset["data-id"],o=e.value,c=Object(a.a)(k);"object"!==typeof o||null===o||Array.isArray(o)?c[t]={tmp_id:n,value:o}:"object"===typeof o&&(c[t]=Object(r.a)({tmp_id:n},o)),w(c),j(c)}),[k,w,j]),F=Object(s.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n="object"===typeof n?Object(r.a)(Object(r.a)({},C()),n):n||C();var o=null;null!==e&&e>=0&&(o=Object(a.a)(k)).splice(e+t,0,n),w(o),j(o)}),[k,C,w,j]),S=Object(s.useCallback)((function(e){var t=C(),n=ie(e),r=null;null!==n&&n>=0?(r=Object(a.a)(k)).splice(n,0,t):r=!0===f?[t].concat(Object(a.a)(k)):[].concat(Object(a.a)(k),[t]),w(r),j(r)}),[k,C,w,j,f]),P=1===k.length,E=Object(M.jsx)("div",{style:{textAlign:"right"},children:Object(M.jsx)("button",{className:"green ".concat(re.a.addRowButton),onClick:S,children:o})});return Object(M.jsxs)("div",{style:p,children:[!1===l&&!P&&f?Object(M.jsx)("div",{style:{marginBottom:"var(--basis)"},children:E}):null,Object(M.jsx)(ee.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var r=Array.from(e),a=r.splice(t,1),o=Object(c.a)(a,1)[0];return r.splice(n,0,o),r}(k,e.source.index,e.destination.index);w(t),j(t)}},children:Object(M.jsx)(ee.c,{droppableId:"list",isDropDisabled:!0!==m,children:function(e){return Object(M.jsxs)("div",Object(r.a)(Object(r.a)({ref:e.innerRef},e.droppableProps),{},{children:[k.filter((function(e){return e.tmp_id})).map((function(e,t){return Object(M.jsx)(ce,{subDefaultValue:e,index:t,render:b,handleRowChange:N,isReorderable:m,handleAddRow:S,handleRemoveRow:I,showReorderControls:O,reorderLabel:d,showActionButton:v,hasOnlyOneRow:P,addRowByIndex:F},e.tmp_id)})),e.placeholder]}))}})}),!1!==l||P||f?null:E]})},se=["defaultValue"],ue=["onChange"];function de(e){var t=e.onSaveProperty,n=e.block,a=e.isFirst,o=function(){return{locale:null,text:""}},c=n.properties.translations||[];0===c.length&&(c=[o]);var i=Object(s.useCallback)((function(e){e=e.map((function(e){return{locale:e.locale||null,text:e.text||""}})),t("translations",e)}),[t]),l=Object(s.useCallback)((function(e){t("locale",e)}),[t]),u=Object(r.a)({},n);return!0===a&&"page"===u.type&&(u.type="text",u.properties.text_style="h1"),Object(M.jsxs)("div",{style:{width:"100%"},children:[Object(M.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",marginBottom:"var(--basis)",gap:"var(--basis)"},children:[Object(M.jsx)(X.default,{onChange:l,defaultValue:n.properties.locale||null}),Object(M.jsx)(h.a,{block:u,style:{margin:"0",minHeight:"30px"},clickable:!1})]}),Object(M.jsx)(le,{onChange:i,defaultValue:c,addDefaultValue:o,addButtonText:"+",render:function(e){var t=e.defaultValue,n=Object(A.a)(e,se),a=n.onChange,o=Object(A.a)(n,ue),c=t.locale,i=t.text;return Object(M.jsx)($,Object(r.a)(Object(r.a)({onBlur:a,locale:c,defaultValue:i,style:{marginBottom:"var(--basis)"}},o),{},{children:function(e){return Object(M.jsx)(H,Object(r.a)(Object(r.a)({},e),{},{style:Object(r.a)(Object(r.a)({},e.style),{},{margin:"0"})}))}}))}})]})}var be=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,i=e.open,u=void 0!==i&&i,d=e.onSaveProperty,p=e.onClose,f=Object(s.useState)([]),h=Object(c.a)(f,2),v=h[0],x=h[1],m=Object(j.a)();Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(a.a)(n.content.filter((function(e){return e.hasOwnProperty("blockId")&&e.hasOwnProperty("block")})).map((function(e){return e.blockId||e.block._id}))),r=[],!(t.length>0)){e.next=6;break}return e.next=5,m({ids:t});case 5:r=e.sent;case 6:return o=t.map((function(e){var t=r.find((function(t){return t._id===e}));return t&&"divider"!==t.type&&t.properties.text?t:null})).filter(Boolean),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===v.length?function(){return e.apply(this,arguments)}().then((function(e){var t=[n].concat(Object(a.a)(e));x(t)})):JSON.stringify(n)!==JSON.stringify(v[0])&&x([n].concat(Object(a.a)(v.slice(1))))}),[n,m,x,v]);var _=Object(g.a)(),y=Object(s.useCallback)((function(e,t,n){var o=Object(r.a)(Object(r.a)({},e),{},{properties:Object(r.a)(Object(r.a)({},e.properties),{},Object(O.a)({},t,n))});_(o).then((function(e){var t=o._id,n=v.findIndex((function(e){return e._id===t})),r=[].concat(Object(a.a)(v.slice(0,n)),[o],Object(a.a)(v.slice(n+1)));x(r)}))}),[_,v,x]);return u?Object(M.jsx)(F.a,{open:u,onClose:p,hideBackdrop:!0,style:{zIndex:"1000"},children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:J.a.backdrop,onClick:p}),Object(M.jsxs)("div",{className:J.a.dialog,children:[Object(M.jsxs)("div",{className:J.a.actions,children:[Object(M.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:Object(M.jsx)(b.a,{id:"translate_dialog_title"})}),Object(M.jsx)("button",{onClick:p,className:"green",style:{marginInlineEnd:"0"},children:Object(M.jsx)(b.a,{id:"dialog_done"})})]}),Object(M.jsx)("p",{children:Object(M.jsx)(b.a,{id:"translate_dialog_description"})}),Object(M.jsx)("hr",{style:{opacity:.2}}),v.filter((function(e){return"divider"!==e.type&&"code"!==e.type})).flatMap((function(e,t){return[Object(M.jsx)("hr",{style:{opacity:0}},"hr-"+t),Object(M.jsx)("div",{style:{margin:"var(--basis_x4) 0"},children:Object(M.jsx)(de,{onSaveProperty:e._id===n._id?d:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return y.apply(void 0,[e].concat(n))},block:e,isFirst:0===t})},"div-"+t)]})),Object(M.jsx)("hr",{style:{opacity:.2}}),Object(M.jsxs)("div",{className:J.a.actions,children:[Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:p,className:"green",style:{marginInlineEnd:"0"},children:Object(M.jsx)(b.a,{id:"dialog_done"})})]})]})]})}):null},pe=n(537),je=n(243),fe=n(230),he=n(242),Oe=n(360),ge=n(443),ve=n(455),xe=n(521),me=n(522),_e=n(361),ye=n(523),ke=n(69),we=n(500),Ce=n.n(we),Ie=["children","className","style"];var Ne=function(e){var t=e.children,n=e.className,r=e.style,a=(Object(A.a)(e,Ie),Object(s.useState)("")),o=Object(c.a)(a,2),i=o[0],l=o[1];return Object(s.useEffect)((function(){i&&console.error(i)}),[i]),Object(M.jsxs)("div",{className:n,style:r,children:[t({setError:l}),i?Object(M.jsx)("div",{className:Ce.a.error,children:"string"===typeof i?i.split("\n").map((function(e){return Object(M.jsx)("p",{children:e},e)})):Array.isArray(i)?i.map((function(e){return"string"===typeof e?e:"number"===typeof e?String(e):"object"===typeof e&&null!==e&&e.hasOwnProperty("message")?e.message:JSON.stringify(e,2,null)})).filter((function(e){return"string"===typeof e})).map((function(e){return Object(M.jsx)("p",{children:e},e)})):JSON.stringify(i,2,null)}):null]})},Fe=["multiple","onChange","onError"],Se=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Pe=/((?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?))/gi;var Ee=function(e){var t=e.multiple,n=void 0!==t&&t,a=e.onChange,o=e.onError,c=Object(A.a)(e,Fe),i=Object(s.useCallback)((function(e){if(a||o){var t=e.target.value||"",r=!1,c="";if(""!==t)if(!0===n){var i=t.match(Pe);i?(t=i,r=!0):c="Invalid email(s) format"}else t.match(Se)?r=!0:c="invalid_email";a&&a(r?t:!0===n?[]:""),o&&o(c)}}),[n,a,o]);return Object(M.jsx)("input",Object(r.a)({type:"email",onChange:i},c))},Be=n(501),Re=n.n(Be);function Ae(e){var t=e.role;return Object(M.jsx)(b.a,{id:"role_"+t})}function Te(e){var t=e.role,n=e.trigger,r=e.changeRole,a=e.removePermission,o=u.a.useState(null),i=Object(c.a)(o,2),l=i[0],s=i[1],d=Boolean(l),b=function(){s(null)};return Object(M.jsxs)(M.Fragment,{children:[n({onClick:function(e){s(e.currentTarget)}}),Object(M.jsxs)(pe.a,{anchorEl:l,open:d,onClose:b,MenuListProps:{style:{maxWidth:"100%",background:"var(--background-contrast)",color:"var(--on-background)"}},children:[Object(M.jsxs)(je.a,{disabled:"viewer"===t,onClick:function(){return r("viewer")},className:"roundMenuItem",children:[Object(M.jsx)(fe.a,{children:Object(M.jsx)(ge.a,{})}),Object(M.jsx)(he.a,{children:Object(M.jsx)(Ae,{role:"viewer"})})]}),Object(M.jsxs)(je.a,{disabled:"editor"===t,onClick:function(){return r("editor")},className:"roundMenuItem",children:[Object(M.jsx)(fe.a,{children:Object(M.jsx)(ve.a,{})}),Object(M.jsx)(he.a,{children:Object(M.jsx)(Ae,{role:"editor"})})]}),Object(M.jsxs)(je.a,{disabled:"no_access"===t,onClick:function(){return r("no_access")},className:"roundMenuItem",children:[Object(M.jsx)(fe.a,{children:Object(M.jsx)(xe.a,{})}),Object(M.jsx)(he.a,{children:Object(M.jsx)(Ae,{role:"no_access"})})]}),"function"===typeof a?Object(M.jsxs)("div",{children:[Object(M.jsx)(Oe.a,{style:{opacity:.2,margin:"8px 0"}}),Object(M.jsxs)(je.a,{onClick:a,className:"roundMenuItem",children:[Object(M.jsx)(fe.a,{children:Object(M.jsx)(me.a,{})}),Object(M.jsx)(he.a,{children:"Remove"})]})]}):null,Object(M.jsx)(Oe.a,{style:{opacity:.2,margin:"8px 0"}}),Object(M.jsxs)(je.a,{onClick:b,className:"roundMenuItem",children:[Object(M.jsx)(fe.a,{children:Object(M.jsx)(_e.a,{})}),Object(M.jsx)(he.a,{children:"Close"})]})]})]})}function De(e){var t=e.filter((function(e){return"owner"===e.role})).sort((function(e,t){return e.email.localeCompare(t.email)})),n=e.filter((function(e){return"@volteuropa.org"===e.email||"@public"===e.email})).sort((function(e,t){return e.email.localeCompare(t.email)})),r=e.filter((function(e){return"owner"!==e.role&&"@volteuropa.org"!==e.email&&"@public"!==e.email})).sort((function(e,t){return e.email.localeCompare(t.email)}));return[].concat(Object(a.a)(t),Object(a.a)(n),Object(a.a)(r))}var Ve=function(e){var t=e.defaultPermissions,n=e.open,o=void 0!==n&&n,i=e.onChange,l=e.onClose,u=Object(b.c)().getString,d=Object(ke.a)(),p="";d&&d.user&&d.user.email&&(p=d.user.email);var j=Object(s.useState)(0),f=Object(c.a)(j,2),h=f[0],O=f[1],g=Object(s.useState)([]),v=Object(c.a)(g,2),x=v[0],m=v[1],_=Object(s.useState)([]),y=Object(c.a)(_,2),k=y[0],w=y[1],C=Object(s.useState)("editor"),I=Object(c.a)(C,2),N=I[0],S=I[1],P=Object(s.useCallback)((function(e){var t;(t=e||[],e=Object(a.a)(t).map((function(e){var t=Object(r.a)({},e);return t.tmp_id=Object(te.a)(),t})),""!==p)&&(0===e.filter((function(e){return"owner"===e.role})).length&&e.unshift({tmp_id:Object(te.a)(),email:p,role:"owner"}));m(e)}),[p,m]);Object(s.useEffect)((function(){var e=t["/"];Array.isArray(e)?P(e):P([])}),[P,t]);var E=Object(s.useCallback)((function(e){var t=x.filter((function(t){return t.email!==e}));"@volteuropa.org"===e&&(t=t.filter((function(e){return"@public"!==e.email}))),0===t.filter((function(e){return"owner"===e.role})).length&&(t=t.filter((function(e){return e.email!==p}))).unshift({tmp_id:Object(te.a)(),email:p,role:"owner"}),m(t),i({"/":t})}),[x,p,m,i]),B=Object(s.useCallback)((function(e,t){var n=x.map((function(n){return n.email===e?Object(r.a)(Object(r.a)({},n),{},{role:t}):n}));m(n),i({"/":n})}),[x,m,i]),R=Object(s.useCallback)((function(e,t){e.includes("@public")&&e.push("@volteuropa.org");var n,r=x.filter((function(t){return!e.includes(t.email)})),a=Object(T.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.unshift({tmp_id:Object(te.a)(),email:o,role:t})}}catch(c){a.e(c)}finally{a.f()}0===r.filter((function(e){return"owner"===e.role})).length&&(r=r.filter((function(e){return e.email!==p}))).unshift({tmp_id:Object(te.a)(),email:p,role:"owner"}),m(r),i({"/":r})}),[x,p,m,i]),A=Object(s.useCallback)((function(){R(k,N),w([]),O((function(e){return e+1}))}),[k,N,R]);if(!o)return null;var D=0===x.filter((function(e){return"@volteuropa.org"===e.email})).length,V=0===x.filter((function(e){return"@public"===e.email})).length;return Object(M.jsx)(F.a,{open:o,onClose:l,hideBackdrop:!0,children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:Re.a.backdrop,onClick:l}),Object(M.jsxs)("div",{className:Re.a.dialog,children:[Object(M.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:Object(M.jsx)(b.a,{id:"permissions_dialog_title"})}),Object(M.jsx)("p",{children:Object(M.jsx)(b.a,{id:"permissions_dialog_description"})}),Object(M.jsxs)("div",{className:Re.a.inputWrapper,children:[Object(M.jsx)(Ne,{className:Re.a.input,children:function(e){var t=e.setError;return Object(M.jsx)(Ee,{multiple:!0,onError:t,defaultValue:"",onChange:w,"aria-label":u("path_editor_permissions_edit_label"),placeholder:u("path_editor_permissions_edit_placeholder"),style:{flexGrow:"1",margin:"var(--basis) 0",width:"calc(100% - var(--basis_x2))"}})}}),Object(M.jsx)(Te,{role:N,changeRole:S,trigger:function(e){return Object(M.jsxs)("button",Object(r.a)(Object(r.a)({className:Re.a.menuButton},e),{},{children:[Object(M.jsx)(Ae,{role:N})," ",Object(M.jsx)(ye.a,{})]}))}})]},h),k.length>0&&k[0].length>0?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("hr",{}),Object(M.jsxs)("div",{className:Re.a.actions,children:[Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:A,className:"green",style:{margin:"0"},children:k.length>1?"Add People":"Add Person"})]})]}):Object(M.jsxs)(M.Fragment,{children:[D||V?Object(M.jsxs)("div",{style:{marginTop:"var(--basis_x2)"},children:["Make visible for\u2026",D?Object(M.jsx)("button",{onClick:function(){return R(["@volteuropa.org"],"viewer")},children:"Volt Europa"}):null,V?Object(M.jsx)("button",{onClick:function(){return R(["@public"],"viewer")},children:"Public"}):null]}):null,0===x.length?null:Object(M.jsx)("hr",{style:{opacity:.2}}),De(x).map((function(e){return Object(M.jsxs)("div",{className:Re.a.permissionRow,children:["@public"===e.email?Object(M.jsx)("strong",{children:"Public"}):"@volteuropa.org"===e.email?Object(M.jsx)("strong",{children:"Volt Europa"}):Object(M.jsx)("span",{children:e.email}),"owner"===e.role?Object(M.jsx)("strong",{className:"type_button ".concat(Re.a.ownerInfo),children:Object(M.jsx)(Ae,{role:e.role})}):Object(M.jsx)(Te,{role:e.role,removePermission:function(){return E(e.email)},changeRole:function(t){return B(e.email,t)},trigger:function(t){return Object(M.jsxs)("button",Object(r.a)(Object(r.a)({className:Re.a.menuButton},t),{},{children:[Object(M.jsx)(Ae,{role:e.role})," ",Object(M.jsx)(ye.a,{})]}))}})]},e.tmp_id)})),Object(M.jsx)("hr",{style:{opacity:.2}}),Object(M.jsxs)("div",{className:Re.a.actions,children:[Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:l,className:"green",style:{margin:"0"},children:Object(M.jsx)(b.a,{id:"dialog_done"})})]})]})]})]})})},Le=n(502),Me=n.n(Le),Ge=n(503),We=n.n(Ge),ze=n(524),He=n(504),Ue=n.n(He),Ze=n(187),qe=n(373),Je=/^([\+-\.0-9A-Z\u017F\u212A]+:(?:\/\/)?)[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+(?:\.[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+)+[!#-;=\?-\[\]_a-z~\xC0-\xFF\u017F\u1E9E\u212A\u212B]+$/gi,Ke=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Ye=/^(?:(?![\/:])[\s\S])+@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/gi;var Xe=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,a=e.onBlur,o=e.onError,i=e.placeholder,l=void 0===i?"https://":i,u=e.style,d=e.className,b=Object(s.useState)(n),p=Object(c.a)(b,2),j=p[0],f=p[1],h=Object(s.useCallback)((function(e){var t=e.target.value||"",n="";if(""!==t){var a=t.split(":"),c=a.shift(),i=a.join(":");"tel"===c||("mailto"===c||t.match(Ye)?i.match(Ke)||(n="invalid_mailto_url"):t.match(Je)||(n="invalid_url"))}r&&r(t),o&&o(n),f(t)}),[r,o]),O=Object(s.useCallback)((function(){a&&a(j)}),[a,j]);return Object(M.jsx)("input",{type:"url",onChange:h,onBlur:O,defaultValue:n,placeholder:l,style:u,className:d})},Qe=n(505),$e=n.n(Qe);function et(e){return new Promise((function(t,n){var r=2e3,a=2e3,o=new Image;o.onload=function(){var n=document.createElement("canvas");o.height>r&&(o.width*=r/o.height,o.height=r),o.width>a&&(o.height*=a/o.width,o.width=a);var c=n.getContext("2d");c.clearRect(0,0,n.width,n.height),n.width=o.width,n.height=o.height,c.drawImage(o,0,0,o.width,o.height);var i=e.type||"image/jpeg";n.toBlob((function(n){var r=new File([n],e.name,{type:i,lastModified:e.lastModified||new Date});t(r)}),i,.9)},o.onerror=n;var c=URL.createObjectURL(e);o.src=c}))}var tt=function(e){var t=e.onChange,n=e.onError,r=e.style,i=Object(s.useRef)(null),u=Object(s.useState)(""),d=Object(c.a)(u,2),b=d[0],p=d[1],j=Object(s.useState)(!1),f=Object(c.a)(j,2),h=f[0],O=f[1],g=Object(s.useCallback)(Object(o.a)(l.a.mark((function e(){var r,o,c,s,u,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(""),O(!0),"function"===typeof n&&n(""),e.prev=3,!((r=Object(a.a)(i.current.files).filter((function(e){return e.type.startsWith("image/")&&e.size<5e6}))).length>0)){e.next=27;break}if(o=r[0],c=o,!o.type.startsWith("image/")){e.next=12;break}return e.next=11,et(o);case 11:c=e.sent;case 12:s=new FormData,u={query:"\n            mutation($file: Upload!) {\n              upload(file: $file)\n            }\n          ",variables:{file:null}},s.append("operations",JSON.stringify(u)),'{"0": ["variables.file"]}',s.append("map",'{"0": ["variables.file"]}'),s.append("0",c),(d=new XMLHttpRequest).withCredentials=!0,d.open("POST",window.graphql_uri,!0),d.onload=function(){if(O(!1),200!==d.status)"function"===typeof n&&n("Error ".concat(d.status,": ").concat(d.statusText));else{var e=null;try{e=JSON.parse(d.response)||null}catch(r){"function"===typeof n&&n(r.message)}"object"===typeof e&&null!==e?e.hasOwnProperty("errors")?"function"===typeof n&&n(e.errors):"object"===typeof e.data&&"string"===typeof e.data.upload&&(t(e.data.upload),O(!1)):"function"===typeof n&&n("Error: Invalid response")}},d.upload.onprogress=function(e){if(e.lengthComputable){var t=parseInt(e.loaded/e.total*100);p("".concat(t,"% (").concat(e.loaded," of ").concat(e.total," bytes)"))}else p("".concat(e.loaded," bytes"))},d.onerror=function(){O(!1),"function"===typeof n&&n("Request failed")},d.send(s),e.next=30;break;case 27:console.error("no file"),O(!1),"function"===typeof n&&n("no file");case 30:e.next=36;break;case 32:e.prev=32,e.t0=e.catch(3),console.error(e.t0),"function"===typeof n&&n(String(e.t0.message));case 36:case"end":return e.stop()}}),e,null,[[3,32]])}))),[t,n,p]);return Object(M.jsxs)("div",{className:$e.a.root,style:r,children:[Object(M.jsxs)("p",{className:$e.a.loadingText,style:{display:!1===h?"none":"flex"},children:["Uploading\u2026 ",b]}),Object(M.jsxs)("div",{className:$e.a.inputWrapper,style:{display:!0===h?"none":"flex"},children:[Object(M.jsx)("label",{children:Object(M.jsx)("input",{type:"file",ref:i,accept:"image/png, image/jpeg"})}),Object(M.jsx)("button",{className:"default",onClick:g,children:"Upload"})]})]})},nt=n(206),rt=["closePopover"],at=new RegExp("^(?:[a-z]+:)?//","i");var ot=Object(b.d)((function(e){var t=e.getString,n=e.trigger,a=e.types,i=void 0===a?["url","emoji","file"]:a,u=e.urlSuggestions,d=void 0===u?[]:u,p=e.imageValue,f=e.onChange,h=Object(s.useState)(null),O=Object(c.a)(h,2),g=O[0],v=O[1],x=Object(s.useState)(null),m=Object(c.a)(x,2),_=m[0],y=m[1],k=Object(s.useState)(null),w=Object(c.a)(k,2),C=w[0],I=w[1],N=Object(s.useState)(null),F=Object(c.a)(N,2),S=F[0],P=F[1],E=Object(s.useState)([]),B=Object(c.a)(E,2),R=B[0],T=B[1],D=Object(s.useCallback)((function(e,t){var n=t.emoji||null;I(n),f({type:g,url:_,emoji:n,fileId:S})}),[f,g,_,S]),V=Object(s.useCallback)((function(e){v(e),f({type:e,url:_,emoji:C,fileId:S})}),[f,_,C,S]),L=Object(s.useCallback)((function(e){y(e),f({type:g,url:e,emoji:C,fileId:S})}),[f,g,C,S]),G=Object(s.useCallback)((function(e){P(e),f({type:g,url:_,emoji:C,fileId:e})}),[f,g,_,C]),W=Object(j.a)();return Object(s.useEffect)((function(){"file"===g&&W({types:["file"],archived:!1}).then(function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(t.map((function(e){var t;return{_id:e._id,text:(null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.text)||void 0}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}))}),[g,W,T]),Object(s.useEffect)((function(){"object"!==typeof p||null===p||Array.isArray(p)||(("url"===p.type||"emoji"===p.type||"file"===p.type)&&i.includes(p.type)?v(p.type):v(null),"string"===typeof p.url&&at.test(p.url)?y(p.url||""):y(null),"string"===typeof p.emoji&&p.emoji.length>0?I(p.emoji||""):I(null),"string"===typeof p.fileId&&p.fileId.length>0?P(p.fileId||""):P(null))}),[p,i,v,y,I,P]),Object(M.jsx)(Ze.a,{trigger:n,children:function(e){var n=e.closePopover,a=Object(A.a)(e,rt);return Object(M.jsxs)(qe.a,Object(r.a)(Object(r.a)({},a),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("button",{className:"emoji"!==g&&"url"!==g&&"file"!==g?"default":"text",onClick:function(){return V(null)},children:"No Image"}),Object(M.jsx)("button",{style:{display:i.includes("emoji")?"inline-block":"none"},className:"emoji"===g?"default":"text",onClick:function(){return V("emoji")},children:"Emoji"}),Object(M.jsx)("button",{style:{display:i.includes("url")?"inline-block":"none"},className:"url"===g?"default":"text",onClick:function(){return V("url")},children:"Url"}),Object(M.jsx)("button",{style:{display:i.includes("file")?"inline-block":"none"},className:"file"===g?"default":"text",onClick:function(){return V("file")},children:"File"})]}),Object(M.jsxs)("div",{style:{display:"url"===g?"block":"none"},children:[Object(M.jsx)("hr",{}),Object(M.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(M.jsx)(b.a,{id:"path_editor_icon_url_info"})}),Object(M.jsx)(Ne,{children:function(e){var t=e.setError;return Object(M.jsx)(Xe,{onError:t,onBlur:L,defaultValue:_,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),d.length>0?Object(M.jsx)(nt.a,{onChange:L,ariaLabel:t("path_editor_coverphoto_label"),defaultValue:_,items:d.map((function(e){var t=e.value,n=void 0===t?"":t,r=e.icon,a=void 0===r?"":r;return{value:n,icon:Object(M.jsx)("img",{alt:"",src:a,className:"icon image"})}}))}):null,Object(M.jsx)("hr",{})]}),Object(M.jsx)("div",{style:{display:"emoji"===g?"block":"none"},children:Object(M.jsx)(Ue.a,{native:!0,onEmojiClick:D,searchPlaceholder:"Search for an emoji\u2026",disableAutoFocus:!0,pickerStyle:{boxShadow:"none",border:"0",borderRadius:"4px",margin:"var(--basis_x4) 0",width:"330px",height:"400px"}})}),Object(M.jsxs)("div",{style:{display:"file"===g?"block":"none"},children:[Object(M.jsx)("hr",{}),Object(M.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(M.jsx)(b.a,{id:"path_editor_icon_file_info"})}),Object(M.jsxs)("div",{children:[Object(M.jsx)(Ne,{children:function(e){var t=e.setError;return Object(M.jsx)(tt,{onChange:G,onError:t,style:{margin:"0"}})}}),"string"===typeof S&&S.length>0?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h4",{style:{marginTop:"var(--basis_x2)"},children:"Selected Image:"}),Object(M.jsx)("img",{src:"".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=40&h=40&id=").concat(encodeURIComponent(S)),alt:"Icon preview.",width:"40",style:{marginTop:"var(--basis)"}})]}):null,Array.isArray(R)&&R.length>0?Object(M.jsxs)("div",{style:{width:"600px",maxWidth:"100%"},children:[Object(M.jsx)("h4",{style:{marginTop:"var(--basis_x2)"},children:"Already uploaded images:"}),R.map((function(e){var t=e._id,n=e.text;return Object(M.jsx)("img",{onClick:function(){return G(t)},src:"".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=40&h=40&id=").concat(encodeURIComponent(t)),alt:n,title:n,width:"40",style:{margin:"var(--basis_x2)",cursor:"pointer",maxHeight:"80px"}},t)}))]}):null]}),Object(M.jsx)("hr",{})]}),"emoji"!==g&&"url"!==g&&"file"!==g?Object(M.jsx)("hr",{}):null,Object(M.jsx)("button",{className:"text",onClick:n,style:{margin:0},children:"Close"})]}))}})})),ct=n.p+"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png",it=n.p+"static/media/Aktion.89c1bcdf.png",lt=[{value:"https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg",icon:n.p+"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png"},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg",icon:n.p+"static/media/Welcome-to-Volt.39e04eca.png"},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg",icon:ct},{value:"https://assets.volteuropa.org/2021-11/portugal.jpg",icon:n.p+"static/media/portugal.682fc2e3.jpg"},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg",icon:it}],st=new RegExp("^(?:[a-z]+:)?//","i");var ut=Object(b.d)((function(e){var t=e.coverphotoValue,n=e.iconValue,a=e.onChange,o=e.noPreview,i=void 0!==o&&o,l=e.className,u=e.style,d=Object(s.useState)(!1),b=Object(c.a)(d,2),p=b[0],j=b[1],f=Object(s.useState)(null),h=Object(c.a)(f,2),O=h[0],g=h[1],v=Object(s.useState)(null),x=Object(c.a)(v,2),m=x[0],_=x[1],y=Object(s.useState)(null),k=Object(c.a)(y,2),w=k[0],C=k[1];Object(s.useEffect)((function(){if("object"===typeof t&&null!==t&&!Array.isArray(t)){var e=!1;"url"===t.type||"file"===t.type?g(t.type):g(null),"string"===typeof t.url&&st.test(t.url)?(_(t.url||""),"url"===t.type&&(e=!0)):_(null),"string"===typeof t.fileId&&t.fileId.length>0?(C(t.fileId||""),"file"===t.type&&(e=!0)):C(null),j(e)}}),[t,g,_,C,j]);var I=!1;"object"!==typeof n||null===n||Array.isArray(n)||("url"===n.type&&"string"===typeof n.url&&st.test(n.url)||"emoji"===n.type&&"string"===typeof n.emoji&&n.emoji.length>0||"file"===n.type&&"string"===typeof n.fileId&&n.fileId.length>0)&&(I=!0);var N="";return!1===i&&("url"===O&&p&&m?N="url(".concat(window.domains.storage,"download_url?f=").concat(window.imageFormat||"jpg","&w=1400&h=400&url=").concat(encodeURIComponent(m),")"):"file"===O&&p&&w&&(N="url(".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=1400&h=400&id=").concat(encodeURIComponent(w),")"))),Object(M.jsx)("div",{className:"\n      ".concat(We.a.root,"\n      ").concat(I?We.a.iconIsSet:We.a.iconIsNotSet,"\n      ").concat(!1===i&&p?We.a.coverphotoIsSet:We.a.coverphotoIsNotSet,"\n      ").concat(l||"","\n    "),style:u,children:Object(M.jsx)(ot,{imageValue:t,onChange:a,types:["url","file"],urlSuggestions:lt,trigger:function(e){return Object(M.jsx)("div",{className:We.a.coverphoto,style:{backgroundImage:!1===i?N:""},children:Object(M.jsx)("div",{className:We.a.button_wrapper,children:Object(M.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"hasIcon ".concat(!1===i&&p?"default":"text"," ").concat(We.a.changeCoverphotoButton),children:[Object(M.jsx)(ze.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Set Coverphoto"})]}))})})}})})})),dt=n(105),bt=n(506),pt=n.n(bt),jt=n(438),ft=new RegExp("^(?:[a-z]+:)?//","i");var ht=Object(b.d)((function(e){var t=e.coverphotoValue,n=e.iconValue,a=e.onChange,o=e.className,i=e.style,l=Object(s.useState)(!1),u=Object(c.a)(l,2),d=u[0],b=u[1],p=Object(s.useState)(null),j=Object(c.a)(p,2),f=j[0],h=j[1],O=Object(s.useState)(null),g=Object(c.a)(O,2),v=g[0],x=g[1],m=Object(s.useState)(null),_=Object(c.a)(m,2),y=_[0],k=_[1],w=Object(s.useState)(null),C=Object(c.a)(w,2),I=C[0],N=C[1];Object(s.useEffect)((function(){if("object"===typeof n&&null!==n&&!Array.isArray(n)){var e=!1;"url"===n.type||"emoji"===n.type||"file"===n.type?h(n.type):h(null),"string"===typeof n.url&&ft.test(n.url)?(x(n.url||""),"url"===n.type&&(e=!0)):x(null),"string"===typeof n.emoji&&n.emoji.length>0?(k(n.emoji||""),"emoji"===n.type&&(e=!0)):k(null),"string"===typeof n.fileId&&n.fileId.length>0?(N(n.fileId||""),"file"===n.type&&(e=!0)):N(null),b(e)}}),[n,h,x,k,N,b]);var F=!1;return"object"!==typeof t||null===t||Array.isArray(t)||("url"===t.type&&"string"===typeof t.url&&ft.test(t.url)||"file"===t.type&&"string"===typeof t.fileId&&t.fileId.lengh>0)&&(F=!0),Object(M.jsx)("div",{className:"\n      ".concat(pt.a.root,"\n      ").concat(d?pt.a.iconIsSet:pt.a.iconIsNotSet,"\n      ").concat(F?pt.a.coverphotoIsSet:pt.a.coverphotoIsNotSet,"\n      ").concat(pt.a["image_type_".concat(f)]||"","\n      ").concat(o||"","\n    "),style:i,children:Object(M.jsx)(ot,{imageValue:n,onChange:a,types:["url","emoji","file"],trigger:function(e){return Object(M.jsxs)("div",{className:pt.a.iconWrapper,children:["url"===f?Object(M.jsx)("div",{className:pt.a.icon,style:{backgroundImage:d&&v?"url(".concat(window.domains.storage,"download_url?f=").concat(window.imageFormat||"jpg","&w=400&h=400&url=").concat(encodeURIComponent(v),")"):""}}):null,"emoji"===f?Object(M.jsx)("div",{className:pt.a.icon,children:Object(M.jsx)(dt.a,{emoji:y,className:pt.a.emojiWrapper})}):null,"file"===f?Object(M.jsx)("div",{className:pt.a.icon,style:{backgroundImage:d&&I?"url(".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=400&h=400&id=").concat(encodeURIComponent(I),")"):""}}):null,Object(M.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"hasIcon ".concat(d?"default":"text"," ").concat(pt.a.changeIconButton),children:[Object(M.jsx)(jt.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Set Icon"})]}))]})}})})})),Ot=n(89),gt=n(54);var vt=["defaultValue","onChange","onBlur","onSubmit","onError","allowExisting","placeholder"];var xt=function(e){var t=e.defaultValue,n=void 0===t?"":t,a=e.onChange,i=e.onBlur,u=(e.onSubmit,e.onError),d=(e.allowExisting,e.placeholder),b=void 0===d?"de-bonn":d,p=Object(A.a)(e,vt),j=Object(s.useRef)(!1);Object(s.useEffect)((function(){return j.current=!0,function(){j.current=!1}}),[]);var f=function(){var e=Object(Ot.a)(),t=Object(s.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(n){e.query({query:gt.a,variables:{slug:t}}).then(function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.data).hasOwnProperty("checkSlug")?n(r.checkSlug):n(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}(),h=Object(s.useState)(""),O=Object(c.a)(h,2),g=O[0],v=O[1];Object(s.useEffect)((function(){j.current&&v(n)}),[v,n]);var x=Object(s.useCallback)(function(){var e=Object(o.a)(l.a.mark((function e(t){var n,r,o,c,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.toLowerCase(),v(t),n=!0,r="",""===t){e.next=15;break}return e.next=7,f(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:o=e.t0,c=o.isOkay,i=o.errors,n=c,r=i.join("\n");case 15:n&&a&&a(t),u&&u(r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v,f,a,u]),m=Object(s.useCallback)((function(){i&&i(g)}),[i,g]);return Object(M.jsx)(H,Object(r.a)({onChange:x,onBlur:m,defaultValue:n,placeholder:b,linebreaks:!1},p))},mt=n(37);var _t=Object(b.d)((function(e){var t=e.getString,n=e.type,a=e.defaultProperties,o=void 0===a?{}:a,i=e.onChange,l=Object(s.useState)({}),u=Object(c.a)(l,2),d=u[0],p=u[1],j=Object(s.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a={text:"string",coverphoto:"object",icon:"object",imprint:"string",privacy_policy:"string",tags:"string",checked:"boolean",slug:"string",url:"string",pronouns:"string",summary:"string"},o=Object(r.a)({},d);if(a.hasOwnProperty(e))switch(a[e]){case"array":t.length>0?o[e]=t:o.hasOwnProperty(e)&&(o[e]=null);break;case"string":""!==t?o[e]=t:o.hasOwnProperty(e)&&(o[e]=null);break;case"boolean":!0===t?o[e]=!0:o.hasOwnProperty(e)&&(o[e]=null);break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?o[e]=t:o.hasOwnProperty(e)&&(o[e]=null);break;default:o[e]=t}JSON.stringify(o)!==JSON.stringify(d)&&(p(o),!1===n&&i&&i(o))}),[d,p,i]),f=Object(s.useCallback)((function(){i&&i(d)}),[d,i]);Object(s.useEffect)((function(){p(Object(r.a)(Object(r.a)({},o),{},{text:(null===o||void 0===o?void 0:o.text)||""}))}),[o,p]);var h=[];"button"!==n&&"redirect"!==n||h.push(Object(M.jsxs)("div",{className:Me.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(b.a,{id:"properties_editor_action_url_label"})}),Object(M.jsx)(Ne,{style:{width:"100%"},children:function(e){var n=e.setError;return Object(M.jsx)(Xe,{onError:n,onBlur:function(e){return j("url",e)},type:"text",defaultValue:d.url||"",placeholder:t("action_input_url_placeholder"),style:{marginRight:"0",marginLeft:"0",width:"100%"}})}})]},"url")),"person"===n&&h.push(Object(M.jsxs)("div",{className:Me.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(b.a,{id:"properties_editor_pronouns_label"})}),Object(M.jsx)(H,{defaultValue:(null===d||void 0===d?void 0:d.pronouns)||"",onChange:function(e){return j("pronouns",e,!0)},onBlur:f,placeholder:t("placeholder_pronouns"),style:{padding:"var(--basis) var(--basis_x2)"},linebreaks:!1,className:"type_p"})]},"pronouns"));var O=Object(mt.getImageUrl)(d.coverphoto,{width:1400,height:1400});return Object(M.jsxs)(M.Fragment,{children:["poster"===n||"image"===n?Object(M.jsx)("div",{style:{width:"1000px",maxWidth:"100%",margin:"0 auto"},children:Object(M.jsx)("img",{src:O,alt:"",style:{width:"100%",height:"auto"}})}):null,"page"===n||"person"===n||"redirect"===n||"poster"===n||"image"===n?Object(M.jsx)(ut,{coverphotoValue:d.coverphoto,iconValue:d.icon,onChange:function(e){return j("coverphoto",e)},noPreview:"poster"===n||"image"===n}):null,"page"===n||"person"===n||"redirect"===n?Object(M.jsx)(ht,{iconValue:d.icon,coverphotoValue:d.coverphoto,onChange:function(e){return j("icon",e)}}):null,Object(M.jsx)("div",{className:Me.a.main_headline,style:{paddingLeft:"calc(8 * var(--basis))"},children:Object(M.jsx)(H,{defaultValue:(null===d||void 0===d?void 0:d.text)||"",onChange:function(e){return j("text",e,!0)},onBlur:f,placeholder:t("placeholder_headline_empty"),style:{padding:"var(--basis) var(--basis_x2)"},linebreaks:!1,className:"type_h1"})}),Object(M.jsxs)("div",{className:Me.a.propertiesFrame,children:[Object(M.jsxs)("div",{className:Me.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(b.a,{id:"properties_editor_trigger_path_label"})}),Object(M.jsx)(Ne,{style:{flexGrow:"1"},children:function(e){var n=e.setError;return Object(M.jsx)(xt,{onError:n,placeholder:t("trigger_input_path_placeholder"),defaultValue:d.slug||"",onBlur:function(e){return j("slug",e)},style:{marginRight:"0",marginLeft:"0",width:"100%"}})}})]}),h]})]})})),yt=n(462),kt=n(538),wt=n(448),Ct=n(449);var It=function(e){var t=e.defaultValue,n=void 0!==t&&t,a=e.onChange,o=e.onBlur,i=e.style,l=e.className,u=e.disabled,d=void 0!==u&&u,b=Object(s.useState)(Boolean(n)),p=Object(c.a)(b,2),j=p[0],f=p[1],h={className:l,onClick:Object(s.useCallback)((function(){if(!0!==d){var e=!j;f(e),a&&a(e),o&&o(e)}}),[d,j,f,a,o]),style:Object(r.a)({display:"inline-block",margin:"var(--basis)",cursor:!0===d?"default":"pointer",lineHeight:0,height:"var(--prefix-icon-size)",width:"var(--prefix-icon-size)"},i)};return j?Object(M.jsx)(wt.a,Object(r.a)({},h)):Object(M.jsx)(Ct.a,Object(r.a)({},h))};var Nt=Object(b.d)((function(e){var t=e.getString,n=e.block,a=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.saveProperty),l=e.onInputRef,u=e.onGoToPrevInput,d=e.onGoToNextInput,b=e.onSplitText,p=e.onMergeToPrevInput,j=e.onMergeFromNextInput,f=(e.onAddRowAfter,a.properties||{}),h=Object(s.useState)(""),O=Object(c.a)(h,2),g=O[0],v=O[1];Object(s.useEffect)((function(){v(f.text||"")}),[f.text,v]);var x=Object(s.useCallback)((function(){o&&o(Object(r.a)(Object(r.a)({},a),{},{properties:Object(r.a)(Object(r.a)({},a.properties),{},{text:g})}))}),[o,a,g]),m="type_p";f.hasOwnProperty("text_style")&&(m="text"===f.text_style?"type_p":"type_"+f.text_style);var _=Object(mt.getBlockColor)(a).color,y={};_&&(y.color=_);var k=Object(s.useCallback)((function(e){i("checked",e)}),[i]),w=f.text_decorations,C=void 0===w?[]:w,I=f.checked;Array.isArray(C)||(C=[]),"boolean"!==typeof I&&(I=!1);var N=[];if(C.includes("checkbox")){var F=Object(M.jsx)(It,{defaultValue:I,onChange:k,style:{margin:"var(--basis_x0_2) var(--basis) 0 0",height:"var(--prefix-icon-size)",width:"var(--prefix-icon-size)"}},"checkbox");N.push(F)}return Object(M.jsxs)("div",{className:m,style:{display:"flex"},children:[Object(M.jsx)("div",{children:N}),Object(M.jsx)(H,{defaultValue:g,onChange:v,onBlur:x,placeholder:t("placeholder_text"),style:Object(r.a)(Object(r.a)({},y),{},{flexGrow:1,margin:"0",padding:"0",backgroundColor:"transparent"}),linebreaks:!0,className:"hide_border",onInputRef:l,onGoToPrevInput:u,onGoToNextInput:d,onMergeToPrevInput:function(){return p(a)},onMergeFromNextInput:function(){return j(a)},onSplitText:b})]})}));var Ft=Object(b.d)((function(e){var t=e.getString,n=e.block,a=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,l=e.onGoToPrevInput,u=e.onGoToNextInput,d=e.onSplitText,b=e.onMergeToPrevInput,p=e.onMergeFromNextInput,j=a.properties||{},f=Object(s.useState)(j.text||""),h=Object(c.a)(f,2),O=h[0],g=h[1],v=j.url,x=void 0===v?"":v,m=Object(s.useState)(x),_=Object(c.a)(m,2),y=_[0],k=_[1],w=Object(s.useCallback)((function(){if(o){var e={_id:a._id,properties:{text:O}};""===y?e.properties.hasOwnProperty("url")&&delete e.properties.url:e.properties.url=y,o(e)}}),[o,a,O,y]),C=Object(mt.getBlockColor)(a),I=C.color,N=C.colorRGB,F=C.contrastingColor,S={};return I&&(S["--on-background-rgb"]=N,S["--button-background"]=I,S["--button-color"]=F),Object(M.jsxs)("div",{style:Object(r.a)({margin:"0 0 var(--basis) 0",cursor:"auto"},S),className:"clickable_card active",children:[Object(M.jsx)(H,{defaultValue:O,onChange:g,onBlur:w,placeholder:t("placeholder_button"),style:Object(r.a)({margin:"0"},S),linebreaks:!0,className:"hide_border type_button default",onInputRef:i,onGoToPrevInput:l,onGoToNextInput:u,onMergeToPrevInput:function(){return b(a)},onMergeFromNextInput:function(){return p(a)},onSplitText:d}),Object(M.jsx)(Ne,{children:function(e){var n=e.setError;return Object(M.jsx)(Xe,{onError:n,onChange:k,onBlur:w,defaultValue:y,placeholder:t("action_input_url_placeholder"),style:{margin:"var(--basis) 0 0 0",width:"100%"}})}})]})})),St=n(525),Pt=n(205);var Et=Object(b.d)((function(e){var t=e.getString,n=e.block,a=void 0===n?{}:n,o=e.onChange,c=e.onInputRef,i=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=e.style,j=void 0===p?{}:p,f=a.properties||{},h=f.slug,O=void 0===h?"":h,g=f.url,v=void 0===g?"":g,x=Object(s.useRef)(f.text||""),m=x.current,_=Object(s.useRef)(O||""),y=_.current,k=function(e){return _.current=e},w=Object(s.useRef)(v||""),C=w.current,I=function(e){return w.current=e},N=Object(s.useCallback)((function(){if(o){var e=x.current,t=_.current,n=w.current,r={_id:a._id,properties:{text:e}};""===t?r.properties.hasOwnProperty("slug")&&delete r.properties.slug:r.properties.slug=t,""===n?r.properties.hasOwnProperty("url")&&delete r.properties.url:r.properties.url=n,o(r)}}),[o,a]),F=Object(mt.getBlockColor)(a),S=F.color,P=void 0===S?"inherit":S,E=F.colorRGB,B=void 0===E?"--on-background-rgb":E;return Object(M.jsxs)("div",{style:Object(r.a)(Object(r.a)({},j),{},{margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":B,paddingInlineStart:"var(--basis_x4)"}),className:"clickable_card active",children:[Object(M.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",color:P},children:[Object(M.jsx)(Pt.a,{block:a}),Object(M.jsx)(H,{defaultValue:m,onChange:function(e){return x.current=e},onBlur:N,placeholder:t("placeholder_headline_empty"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:P},linebreaks:!0,className:"hide_border type_text",onInputRef:c,onGoToPrevInput:i,onGoToNextInput:l,onMergeToPrevInput:function(){return d(a)},onMergeFromNextInput:function(){return b(a)},onSplitText:u})]}),Object(M.jsxs)("div",{style:{paddingInlineStart:"var(--basis_x8)",width:"100%",display:"flex",alignItems:"center"},children:["volt.link/",Object(M.jsx)(Ne,{style:{width:"100%",marginInlineStart:"var(--basis)"},children:function(e){var n=e.setError;return Object(M.jsx)(xt,{onError:n,onChange:k,onBlur:N,defaultValue:y,placeholder:t("trigger_input_path_placeholder"),style:{margin:"var(--basis) 0",width:"100%"}})}})]}),Object(M.jsxs)("div",{style:{paddingInlineStart:"var(--basis_x8)",width:"100%",display:"flex",alignItems:"center"},children:[Object(M.jsx)(St.a,{style:{flexShrink:0,margin:"0 var(--basis) 0 0"}}),Object(M.jsx)(Ne,{style:{width:"100%"},children:function(e){var n=e.setError;return Object(M.jsx)(Xe,{onError:n,onChange:I,onBlur:N,defaultValue:C,placeholder:t("action_input_url_placeholder"),style:{margin:"var(--basis) 0",width:"100%"}})}})]})]})}));function Bt(e){var t=e.block,n=Object(mt.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(M.jsx)("hr",{style:r})}var Rt=Object(b.d)((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,a=e.onChange,o=e.onInputRef,i=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=r.properties||{},j=Object(s.useState)(p.text||""),f=Object(c.a)(j,2),h=f[0],O=f[1],g=Object(s.useRef)(Boolean(p.checked)),v=Object(s.useCallback)((function(){a&&a({_id:r._id,properties:{text:h,checked:g.current}})}),[a,r,h]),x=Object(s.useCallback)((function(e){g.current=e,v()}),[v]);return Object(M.jsxs)("div",{style:{display:"flex"},children:[Object(M.jsx)(It,{checked:g.current,onChange:x}),Object(M.jsx)(H,{defaultValue:h,onChange:O,onBlur:v,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:o,onGoToPrevInput:i,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return b(r)},onSplitText:u})]})}));function At(e){var t=e.block,n=void 0===t?{}:t;return Object(M.jsx)("div",{style:{margin:"0 0 var(--basis) 0"},children:Object(M.jsx)(h.a,{dragable:!0,size:"line",block:n,style:{flexGrow:"1",width:"100%"},pathSuffix:"edit"})})}var Tt=n(239);var Dt=Object(b.d)((function(e){var t=e.getString,n=e.block,a=void 0===n?{}:n,o=e.onChange,i=(e.onInputRef,e.onGoToPrevInput,e.onGoToNextInput,e.onSplitText,e.onMergeToPrevInput,e.onMergeFromNextInput,a.properties||{}),l=Object(s.useState)(i.text||""),u=Object(c.a)(l,2),d=u[0],b=u[1],p="";i.hasOwnProperty("coverphoto")&&i.coverphoto.hasOwnProperty("type")&&(p=i.coverphoto);var j=Object(s.useState)(p),f=Object(c.a)(j,2),h=f[0],O=f[1],g=Object(s.useCallback)((function(){if(o){var e={_id:a._id,properties:{text:d}};null===h?e.properties.hasOwnProperty("coverphoto")&&delete e.properties.coverphoto:e.properties.coverphoto=h,o(e)}}),[o,a,d,h]),v=Object(s.useCallback)((function(e){O(e),g()}),[g]),x=Object(mt.getBlockColor)(a),m=x.color,_=x.colorRGB,y=x.contrastingColor,k={};m&&(k["--on-background-rgb"]=_,k["--button-background"]=m,k["--button-color"]=y);var w="";"url"===(null===h||void 0===h?void 0:h.type)?"string"===typeof(null===h||void 0===h?void 0:h.url)&&(null===h||void 0===h?void 0:h.url.length)>0&&(w="".concat(window.domains.storage,"download_url?f=").concat(window.imageFormat||"jpg","&w=150&h=150&url=").concat(encodeURIComponent(h.url))):"file"===(null===h||void 0===h?void 0:h.type)&&"string"===typeof(null===h||void 0===h?void 0:h.fileId)&&(null===h||void 0===h?void 0:h.fileId.length)>0&&(w="".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=150&h=150&id=").concat(encodeURIComponent(h.fileId)));var C="string"===typeof d&&d.length>0?d:"Image Preview",I=C;return Object(M.jsxs)("div",{style:Object(r.a)({margin:"0 0 var(--basis) 0",cursor:"auto"},k),className:"clickable_card active",children:[Object(M.jsx)("div",{style:{marginBottom:"var(--basis)"},children:""!==w?Object(M.jsx)("img",{src:w,alt:C,title:I,style:{maxWidth:"150px",maxHeight:"100px",boxShadow:"inset 0 0 0 1px rgba(var(--on-background-rgb), var(--alpha-less))"}}):t("inline_editor_image_block_explainer_title")}),Object(M.jsx)(ot,{imageValue:h,onChange:v,types:["url","file"],trigger:function(e){return Object(M.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"hasIcon default",style:{margin:0},children:[Object(M.jsx)(Tt.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Choose an Image"})]}))}}),Object(M.jsx)(H,{defaultValue:d,onChange:b,onBlur:g,placeholder:t("placeholder_image_alt_text"),style:Object(r.a)({margin:"var(--basis) 0 0 0"},k),linebreaks:!0,className:"type_p default"})]})}));var Vt=Object(b.d)((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,a=e.onChange,o=(e.onSaveBlock,e.onInputRef),i=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,p=e.onMergeFromNextInput,j=(e.onAddRowAfter,r.properties||{}),f=Object(s.useState)(""),h=Object(c.a)(f,2),O=h[0],g=h[1];Object(s.useEffect)((function(){g(j.text||"")}),[j.text,g]);var v=Object(s.useCallback)((function(){a&&a({_id:r._id,properties:{text:O}})}),[a,r,O]);return Object(M.jsxs)("div",{style:{display:"block",margin:"0 0 var(--basis) 0",cursor:"auto"},className:"clickable_card active",children:[Object(M.jsx)("p",{style:{margin:"0"},children:Object(M.jsx)(b.a,{id:"inline-editor-block-code-description"})}),Object(M.jsx)("pre",{class:"hljs",children:Object(M.jsx)("code",{children:Object(M.jsx)(H,{defaultValue:O,onChange:g,onBlur:v,type:"code",placeholder:t("placeholder_code"),style:{margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"type_code",onInputRef:o,onGoToPrevInput:i,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return p(r)},onSplitText:u})})})]})})),Lt=n(507),Mt=n.n(Lt),Gt=["type"];function Wt(e){var t=e.type,n=void 0===t?"text":t,a=Object(A.a)(e,Gt),o=null;switch(n){case"text":o=Object(M.jsx)(Nt,Object(r.a)({},a));break;case"button":o=Object(M.jsx)(Ft,Object(r.a)({},a));break;case"redirect":o=Object(M.jsx)(Et,Object(r.a)({},a));break;case"divider":o=Object(M.jsx)(Bt,Object(r.a)({},a));break;case"checkbox":o=Object(M.jsx)(Rt,Object(r.a)({},a));break;case"image":o=Object(M.jsx)(Dt,Object(r.a)({},a));break;case"code":o=Object(M.jsx)(Vt,Object(r.a)({},a));break;default:o=Object(M.jsx)(At,Object(r.a)({},a))}return o}var zt=Object(b.d)((function(e){e.fluentByObject,e.getString;var t=e.contentConfig,n=void 0===t?{}:t,a=e.className,o=e.onChange,i=e.reorderHandle,l=e.onRemoveRow,u=(e.actionButton,e.dataset),d=void 0===u?{}:u,b=e.addRowBefore,p=e.addRowAfter,j=(e.permissions,e.onInputRef),f=e.onGoToPrevInput,h=e.onGoToNextInput,v=e.onSplitText,x=e.onMergeToPrevInput,m=e.onMergeFromNextInput,_=e.onRemoveSelf,y=Object(g.a)(),k=Object(s.useState)(Object(r.a)(Object(r.a)({},n.block||{type:"text"}),{},{_id:n.blockId||null})),w=Object(c.a)(k,2),C=w[0],I=w[1],F=C.properties||{},S="boolean"!==typeof F.active||F.active;Object(s.useEffect)((function(){n.block&&I(n.block)}),[n.block]);var P=Object(s.useCallback)((function(e){y(e).then((function(e){I(e),C._id&&C._id===e._id||o({blockId:e._id,block:e})}))}),[C,o,y]),E=Object(s.useCallback)((function(e){P({_id:C._id,type:e})}),[C,P]),B=Object(s.useCallback)((function(e,t){"string"===typeof e&&(null!==t&&void 0!==t||(t=null),P({_id:C._id,properties:Object(O.a)({},e,t)}))}),[C._id,P]),R=Object(s.useCallback)((function(e,t){y(e).then((function(e){"function"===typeof t&&t(e)})).catch(console.error)}),[y]),A=Object(s.useCallback)((function(e){"function"===typeof _&&_()}),[_]);return Object(M.jsxs)("div",Object(r.a)(Object(r.a)({className:"".concat(Mt.a.block," ").concat(a)},d),{},{children:[Object(M.jsx)(N.a,{block:C,saveType:E,saveProperty:B,onRemoveRow:l,addRowBefore:b,addRowAfter:p,onArchivedToggle:A,trigger:function(e){return Object(M.jsx)("div",Object(r.a)(Object(r.a)({},e),{},{className:Mt.a.reorderHandle,children:i}))}}),Object(M.jsx)("div",{className:"".concat(Mt.a.block_input," ").concat(S?Mt.a.form_active:Mt.a.form_deactivated),children:Object(M.jsx)(Wt,{type:C.type,block:C,onChange:P,onSaveBlock:R,saveProperty:B,onInputRef:j,onGoToPrevInput:f,onGoToNextInput:h,onSplitText:v,onMergeToPrevInput:x,onMergeFromNextInput:m,onAddRowAfter:p})})]}))})),Ht=n(136),Ut=n(245),Zt=n(508),qt=n.n(Zt);function Jt(e){return Object(a.a)(e).map((function(e){var t=Object(r.a)({},e);return t.tmp_id=Object(te.a)(),t}))}function Kt(e){e.normalize();var t=e.childNodes;return t.length>0?t[0]:e}function Yt(e){e.normalize();var t=Object(a.a)(e.childNodes).reverse();if(t.length>0){var n=e;if(3===t[0].nodeType){var r,o=Object(T.a)(t);try{for(o.s();!(r=o.n()).done;){var c=r.value;if(3===c.nodeType)n=c;else if(1===c.nodeType)break}}catch(d){o.e(d)}finally{o.f()}}else if(t.length>1&&3===t[1].nodeType){var i,l=t.slice(1),s=Object(T.a)(l);try{for(s.s();!(i=s.n()).done;){var u=i.value;if(3===u.nodeType)n=u;else if(1===u.nodeType)break}}catch(d){s.e(d)}finally{s.f()}}return n}return e}function Xt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.focus(),window.getSelection){var r=3===t.nodeType?t.length:t.innerText.length;(-1===n||n>r)&&(n=r);var a=document.createRange();a.setStart(t,0),a.setEnd(t,n),a.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(a)}}var Qt=function(e){var t=e.parentId,n=e.defaultValue,i=void 0===n?[]:n,u=e.onChange,d=Object(s.useRef)([]),p=d.current,f=Object(s.useRef)({}),h=f.current,O=Object(s.useState)(0),v=Object(c.a)(O,2),x=v[0],m=v[1],_=Object(j.a)(),y=Object(g.a)(),k=Object(Ht.a)(),w=Object(s.useState)(null),C=Object(c.a)(w,2),I=C[0],N=C[1];Object(s.useEffect)((function(){if("object"===typeof I&&null!==I&&h.hasOwnProperty(I.tmp_id)){var e=h[I.tmp_id];if("object"===typeof e&&null!==e){if(!0===I.inFirstLine){var t=Kt(e.current);Xt(e.current,t,I.positionFromLineStart)}else if(!0===I.inLastLine){var n=Yt(e.current);Xt(e.current,n,I.positionFromLineStart)}N(null)}}}),[I,N,h]),Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(a.a)(Jt(i)),n=t.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),r=[],!(n.length>0)){e.next=7;break}return e.next=6,_({ids:n});case 6:r=e.sent;case 7:t=t.map((function(e){return e.hasOwnProperty("block")||(e.block=r.find((function(t){return t._id===e.blockId}))),e})),d.current=t,m((function(e){return e+1}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===p.length&&i.length>0&&function(){e.apply(this,arguments)}()}),[p,i,_,d,m]);var F=Object(s.useCallback)((function(e,t){var n=Object(r.a)({},f.current);n.hasOwnProperty(e.tmp_id)&&n[e.tmp_id]===t||(n[e.tmp_id]=t,f.current=n)}),[f]),S=Object(s.useCallback)((function(e,t){for(var n=t.caret,r=e.index,a=null,o=p.length-1;o>=0;o--){var c=p[o].tmp_id;if(o<r&&h[c]&&h[c].current){a=h[c];break}}if(a){var i=Yt(a.current);Xt(a.current,i,n.positionFromLineStart)}}),[p,h]),P=Object(s.useCallback)((function(e,t){for(var n=t.caret,r=e.index,a=null,o=0;o<p.length;o++){var c=p[o].tmp_id;if(o>r&&h[c]&&h[c].current){a=h[c];break}}if(a){var i=Kt(a.current);Xt(a.current,i,n.positionFromLineStart)}}),[p,h]),E=Object(s.useCallback)((function(){for(var e=null,t=p.length-1;t>=0;t--){var n=p[t].tmp_id;if(h[n]&&h[n].current){e=h[n];break}}if(e){var r=Yt(e.current);Xt(e.current,r,-1)}}),[p,h]),B=Object(s.useCallback)((function(e,t){var n=Object(a.a)(p);for(var o in n){var c=n[o];if(c.tmp_id===e.tmp_id){n[o]=Object(r.a)(Object(r.a)({},c),t);break}}return d.current=n,u(n),new Promise((function(e){e(n)}))}),[p,d,u]),R=Object(s.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,c=(n="object"===typeof n?Object(r.a)({tmp_id:Object(te.a)()},n):n||{tmp_id:Object(te.a)()}).block||null;null===c||"number"!==typeof e||isNaN(e)||y(c).then(function(){var r=Object(o.a)(l.a.mark((function r(o){var c,i,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_({ids:[o._id]});case 2:(c=r.sent).length>0&&(i=c[0],n.block=i,n.blockId=i._id,(s=Object(a.a)(p)).splice(e+t,0,n),d.current=s,u(s));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()).catch(console.error)}),[p,d,y,_,u]),A=Object(s.useCallback)((function(e){var n=e.type,r=e.close,a={type:n};"string"===typeof t&&t.length>0&&(a.parent=t),R(0,0,{block:a}),"function"===typeof r&&r()}),[R,t]),T=Object(s.useCallback)((function(e){var t=e.index,n=Object(a.a)(p);if(t>0){var o=t-1,c=n[o],i=c.tmp_id,l=n[t].block,s=n[o].block,b="";s&&s.hasOwnProperty("properties")&&(b=s.properties.text||"");var j="";l&&l.hasOwnProperty("properties")&&(j=l.properties.text||"");var h={_id:s._id,properties:{text:b+j}},O=f.current[i].current.textContent.length;y(h).then((function(e){var n=Object(te.a)();B({index:o,tmp_id:i},Object(r.a)(Object(r.a)({},c),{},{tmp_id:n,blockId:e._id,block:e})).then((function(e){var r=e[t].block;e.splice(t,1),k({_id:r._id,archive:!0}).then((function(){d.current=e,N({tmp_id:n,positionFromLineStart:O,inFirstLine:!1,inLastLine:!0}),u(e)}))}))})).catch(console.error)}}),[p,f,y,B,k,d,N,u]),D=Object(s.useCallback)((function(e){var t=e.index,n=e.tmp_id,o=Object(a.a)(p);if(t<o.length-1){var c=t+1,i=o[t],l=o[t].block,s=o[c].block,b="";l&&l.hasOwnProperty("properties")&&(b=l.properties.text||"");var j="";s&&s.hasOwnProperty("properties")&&(j=s.properties.text||"");var h={_id:l._id,properties:{text:b+j}},O=f.current[n].current.textContent.length;y(h).then((function(t){var n=Object(te.a)();B(e,Object(r.a)(Object(r.a)({},i),{},{tmp_id:n,blockId:t._id,block:t})).then((function(e){var t=e[c].block;e.splice(c,1),k({_id:t._id,archive:!0}).then((function(){d.current=e,N({tmp_id:n,positionFromLineStart:O,inFirstLine:!1,inLastLine:!0}),u(e)}))}))})).catch(console.error)}}),[p,f,y,B,k,d,N,u]),V=Object(s.useCallback)((function(e,t){var n=t.texts,o=e.index,c=e.tmp_id,i=Object(a.a)(p),l=i.find((function(e){return e.tmp_id===c})).block||{},s=Object(r.a)(Object(r.a)({},l),{},{properties:Object(r.a)(Object(r.a)({},l.properties),{},{text:n[0]})}),b=Object(r.a)(Object(r.a)({},l),{},{properties:Object(r.a)(Object(r.a)({},l.properties),{},{text:n[1]})});delete b._id,y(s).then((function(e){y(b).then((function(t){i[o]=Object(r.a)(Object(r.a)({},i[o]),{},{tmp_id:Object(te.a)(),blockId:e._id,block:e});var n={tmp_id:Object(te.a)(),blockId:t._id,block:t};i.splice(o+1,0,n),d.current=i,u(i),N({tmp_id:n.tmp_id,positionFromLineStart:0,inFirstLine:!0,inLastLine:!1})})).catch(console.error)})).catch(console.error)}),[p,y,d,u,N]),L=Object(s.useCallback)((function(e){var t=e.index,n=Object(a.a)(p);n.splice(t,1),d.current=n,u(n)}),[p,u]),G=p.filter(Boolean).filter((function(e){return e.tmp_id}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{style:{position:"relative",width:"1000px",maxWidth:"100%",margin:"var(--basis_x8) auto 0 auto"},children:[Object(M.jsx)("div",{children:Object(M.jsx)(Ut.a,{types:["button","text","image","divider","page","redirect","code","poster"],createBlock:A,trigger:function(e){return Object(M.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text hasIcon",style:{margin:"0 0 var(--basis_x2) 0"},children:Object(M.jsxs)("span",{style:{pointerEvents:"none"},children:[Object(M.jsx)(yt.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:Object(M.jsx)(b.a,{id:"add_content_before"})})]})}))}})}),Object(M.jsx)(ee.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var r=Array.from(e),a=r.splice(t,1),o=Object(c.a)(a,1)[0];return r.splice(n,0,o),r}(p,e.source.index,e.destination.index);d.current=t,u(t)}},children:Object(M.jsx)(ee.c,{droppableId:"list",isDropDisabled:!1,children:function(e){return Object(M.jsxs)("div",Object(r.a)(Object(r.a)({ref:e.innerRef},e.droppableProps),{},{className:"inputBorder",style:{"--input-box-shadow":"inset var(--basis_x8) 0 0 0 var(--background), inset var(--basis_x8) 0 0 var(--basis_x0_2) var(--on-background-contrast), inset 0 0 0 var(--basis_x0_2) var(--on-background-contrast)",boxShadow:"var(--input-box-shadow)",paddingTop:G.length>0?"var(--basis)":"",paddingRight:"var(--basis)"},children:[G.map((function(e,t){var n=e.tmp_id,a={index:t,tmp_id:n};return Object(M.jsx)(ee.b,{draggableId:n,index:t,isDragDisabled:!1,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(o){return Object(s.createElement)("div",Object(r.a)(Object(r.a)({ref:o.innerRef},o.draggableProps),{},{key:n,className:qt.a.row}),Object(M.jsx)("div",{className:qt.a.form,children:Object(M.jsx)(zt,{className:qt.a.item,dataset:{"data-index":t,"data-id":n},contentConfig:e,reorderHandle:Object(M.jsx)(kt.a,{title:Object(M.jsxs)("div",{style:{textAlign:"center"},children:[Object(M.jsx)("strong",{children:"Drag"})," to move.",Object(M.jsx)("br",{}),Object(M.jsx)("strong",{children:"Click"})," to open menu."]}),children:Object(M.jsx)("button",Object(r.a)(Object(r.a)({className:"text ".concat(qt.a.inlineRowButton," ").concat(qt.a.dragHandleButton)},o.dragHandleProps),{},{children:Object(M.jsx)(oe.a,{})}))}),onRemoveSelf:function(){return L(a)},addRowBefore:function(e){return R(t,0,e)},addRowAfter:function(e){return R(t,1,e)},onInputRef:function(e){return F(a,e)},onGoToPrevInput:function(e){return S(a,e)},onGoToNextInput:function(e){return P(a,e)},onSplitText:function(e){return V(a,e)},onChange:function(e){return B(a,e)},onMergeToPrevInput:function(e){return T(a,e)},onMergeFromNextInput:function(e){return D(a,e)}},n)}))}},n)})),e.placeholder]}))}})})]},x),Object(M.jsx)("div",{style:{position:"relative",height:"50vh",cursor:0===G.length?"default":"text"},onClick:0===G.length?null:E})]})};function $t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var r in e){var a=t?t+"."+r:r;"object"!==typeof e[r]||Array.isArray(e[r])?n[a]=e[r]:$t(e[r],a,n)}return n}var en=function(e){var t,n=e.block,a=e.onSaveBlock,o=Object(b.c)().getString,i=Object(g.a)(),l=Object(s.useState)(!1),u=Object(c.a)(l,2),d=u[0],p=u[1],j=Object(s.useCallback)((function(){return p(!0)}),[p]),h=Object(s.useCallback)((function(){return p(!1)}),[p]),y=Object(s.useState)(!1),C=Object(c.a)(y,2),F=C[0],S=C[1],P=Object(s.useCallback)((function(){return S(!0)}),[S]),E=Object(s.useCallback)((function(){return S(!1)}),[S]),B=Object(s.useState)(!1),R=Object(c.a)(B,2),A=R[0],T=R[1],D=Object(s.useCallback)((function(){return T(!0)}),[T]),V=Object(s.useCallback)((function(){return T(!1)}),[T]),L=n.type,G=n.properties,W=n.content,z=n.permissions,H=Object(s.useCallback)((function(e){if(e!==n.type){var t=Object(r.a)(Object(r.a)({},n),{},{type:e});i(t).then((function(e){a(e)}))}}),[n,i,a]),U=Object(s.useCallback)((function(e){if(e!==n.properties){var t=$t(n.properties),r=$t(e),o={};for(var c in r)r.hasOwnProperty(c)&&t[c]!==r[c]&&(o[c]=r[c]);for(var l in t)!t.hasOwnProperty(l)||r.hasOwnProperty(l)||o.hasOwnProperty(l)||(o[l]=null);o=function(e){var t={},n=function(n){var r=n.split(".");r.reduce((function(t,a,o){return t[a]||(t[a]=r.length-1===o?e[n]:{})}),t)};for(var r in e)n(r);return t}(o),Object.keys(o).length>0&&i({_id:n._id,properties:o}).then((function(e){a(e)}))}}),[n,i,a]),q=Object(s.useCallback)((function(e,t){"string"===typeof e&&i({_id:n._id,properties:Object(O.a)({},e,t)}).then((function(e){a(e)}))}),[n,i,a]),J=Object(s.useCallback)((function(e){if(e!==n.content){var t={_id:n._id,content:e};i(t).then((function(e){a(e)}))}}),[n,i,a]),K=Object(s.useCallback)((function(e){if(e!==n.permissions){var t={_id:n._id,permissions:e};i(t).then((function(e){a(e)}))}}),[n,i,a]),Y=Object(s.useCallback)((function(){i(n).then((function(e){e._id!==n._id&&a(e)}))}),[i,n,a]),X=w.c;if(n&&n.computed&&n.computed.inherited_block_permissions&&Array.isArray(n.computed.inherited_block_permissions)){var Q=n.computed.inherited_block_permissions.reduce((function(e,t){return e[t.email]=t.role,e}),{});"viewer"===Q["@public"]||"editor"===Q["@public"]||"owner"===Q["@public"]?X=w.b:"viewer"!==Q["@volteuropa.org"]&&"editor"!==Q["@volteuropa.org"]&&"owner"!==Q["@volteuropa.org"]||(X=w.a)}var $=Object(M.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[d?Object(M.jsx)(Z,{defaultBlock:n,open:d,onClose:h,onChange:U}):null,Object(M.jsxs)("button",{className:"text hasIcon",onClick:j,children:[Object(M.jsx)(x.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(b.a,{id:"path_editor_share"})})]}),"divider"!==L?Object(M.jsxs)(M.Fragment,{children:[F?Object(M.jsx)(be,{defaultBlock:n,open:F,onClose:E,onSaveProperty:q}):null,Object(M.jsxs)("button",{className:"text hasIcon",onClick:P,children:[Object(M.jsx)(k.a,{path:w.d,className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(b.a,{id:"path_editor_translate"})})]})]}):null,A?Object(M.jsx)(Ve,{defaultPermissions:z,open:A,onClose:V,onChange:K}):null,Object(M.jsxs)("button",{className:"red hasIcon",onClick:D,children:[Object(M.jsx)(k.a,{path:X,className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(b.a,{id:"path_editor_permissions"})})]}),Object(M.jsxs)("button",{className:"text hasIcon",onClick:Y,children:[Object(M.jsx)(m.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(b.a,{id:"path_editor_publish"})})]}),Object(M.jsx)(N.a,{block:n,saveType:H,saveProperty:q,typeOptions:["page","redirect","poster","definition"],trigger:function(e){return Object(M.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"default hasIcon",children:Object(M.jsx)(_.a,{className:"icon"})}))}})]}),ee=(null===n||void 0===n||null===(t=n.properties)||void 0===t?void 0:t.text)||o("placeholder_headline_empty"),te="\u270d\ufe0f ".concat(ee);return Object(M.jsxs)("div",{className:"hasHeader ".concat(I.a.editor," ").concat("string"===typeof L&&""!==L?I.a["type_"+L]:""),children:[Object(M.jsxs)(v.a,{children:[Object(M.jsx)("title",{children:te}),Object(M.jsx)("meta",{name:"title",content:te}),Object(M.jsx)("meta",{name:"og:title",content:te}),Object(M.jsx)("meta",{name:"twitter:title",content:te}),Object(M.jsx)("meta",{name:"description",content:""}),Object(M.jsx)("meta",{property:"og:description",content:""}),Object(M.jsx)("meta",{name:"twitter:description",content:""}),Object(M.jsx)("meta",{property:"og:image",content:""}),Object(M.jsx)("meta",{name:"twitter:image",content:""}),Object(M.jsx)("meta",{property:"twitter:card",content:"summary"})]}),Object(M.jsx)(f.a,{block:n,title:ee,rightActions:$}),Object(M.jsx)(_t,{type:L,defaultProperties:G,onChange:U}),Object(M.jsx)(Qt,{parentId:n._id||null,onChange:J,defaultValue:W})]},n._id)},tn=n(44),nn=n.n(tn),rn=Object(s.lazy)((function(){return n.e(1).then(n.bind(null,533))}));t.default=function(){var e=Object(s.useRef)(!1),t=Object(p.a)(),n=Object(j.a)(),i=Object(d.h)().id,u=void 0===i?"":i,O=u;if(u.includes("=")){var g=u.split("="),v=Object(c.a)(g,2)[1];O=v}var x=Object(s.useState)({type:"page",properties:{},content:[]}),m=Object(c.a)(x,2),_=m[0],y=m[1],k=Object(s.useState)(null),w=Object(c.a)(k,2),C=w[0],I=w[1],N=Object(s.useCallback)((function(e){I(e),window.umami&&"object"===typeof e&&null!==e&&e.hasOwnProperty("code")&&"string"===typeof e.code&&window.umami.trackEvent("E: "+e.code)}),[I]);return Object(s.useEffect)((function(){var c=_.properties||{};!1!==e.current||"string"!==typeof O||""===O||O===_._id||O===c.slug||null!==C&&C.for_slugOrId===O||(e.current=!0,t(O).then(function(){var t=Object(o.a)(l.a.mark((function t(o){var c,i,s,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===typeof o&&null!==o){t.next=5;break}N({code:"404",for_slugOrId:O}),e.current=!1,t.next=19;break;case 5:if(c=o,!(Array.isArray(o.content)&&o.content.length>0)){t.next=16;break}if(i=Object(a.a)(o.content),s=o.content.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),u=[],!(s.length>0)){t.next=14;break}return t.next=13,n({ids:s});case 13:u=t.sent;case 14:i=i.map((function(e){return e.hasOwnProperty("block")||(e.block=u.find((function(t){return t._id===e.blockId}))),e})),c=Object(r.a)(Object(r.a)({},c),{},{content:i});case 16:N(null),y(c),e.current=!1;case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),N(Object(r.a)(Object(r.a)({},t),{},{for_slugOrId:O})),e.current=!1})))}),[C,O,_,_._id,t,y,n,N]),null!==C&&C.for_slugOrId===O?Object(M.jsxs)("div",{className:nn.a.viewer,children:[Object(M.jsx)(f.a,{block:null,title:"Error",rightActions:null}),Object(M.jsx)("div",{className:"basis_x1 ".concat(nn.a.app," ").concat(nn.a.spine_aligned),dir:"auto",children:Object(M.jsxs)("main",{className:"".concat(nn.a.contentWrapper),children:["300"===C.code?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h1",{children:Object(M.jsx)(b.a,{id:"error_300_title"})}),Object(M.jsx)("br",{}),Object(M.jsx)("p",{children:Object(M.jsx)(b.a,{id:"error_300_description"})}),Object(M.jsx)("br",{}),C.blocks.map((function(e){return Object(M.jsx)(h.a,{block:e,forceId:!0,pathSuffix:"edit"},e._id)}))]}):null,"403"===C.code?Object(M.jsx)(s.Suspense,{children:Object(M.jsx)(rn,{errorName:"no_access"})}):null,"404"===C.code?Object(M.jsx)(s.Suspense,{children:Object(M.jsx)(rn,{errorName:"not_found"})}):null]})})]}):Object(M.jsx)(en,{block:_,onSaveBlock:y})}}}]);
//# sourceMappingURL=5.bf8a893b.chunk.js.map