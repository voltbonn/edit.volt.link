(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[8,17],{393:function(e,t,n){"use strict";var c=n(18),r=n(6),a=n(11),o=n.n(a),i=n(0),s=n(31),l=n(104),u=n(125),j=n(81);function b(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&b(e[n],t);return e}t.a=function(){var e=Object(s.c)().getString,t=Object(l.a)(),n=Object(j.b)(),a=n.enqueueSnackbar,d=n.closeSnackbar,O=Object(i.useCallback)((function(n){return new Promise((function(i){var s=null,l=Object(r.a)({},n);(l=b(l,"__typename")).hasOwnProperty("content")&&Array.isArray(l.content)&&(l.content=l.content.map((function(e){return{blockId:e.blockId}})));var j=new Promise((function(n){t.mutate({mutation:u.c,variables:{block:l}}).then(function(){var t=Object(c.a)(o.a.mark((function t(c){var r,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=c.data,n("got-data"),null!==s&&d(s),"string"===typeof r.error?"no_edit_permission"===r.error?a(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):a(""+r.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(l=r.saveBlock,i(l),a(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(c.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(c),n("got-error"),null!==s&&d(s),a(e("path_editor_status_error_while_saving",{error:c.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),j]).then((function(t){"show-loading"===t&&(s=a(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch(console.error)}))}),[a,d,t,e]);return O}},394:function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return k}));var c=n(319),r=n(305),a=n(316),o=n(442),i=n(443),s=n(444),l=n(445),u=n(446),j=n(447),b=n(448),d=n(379),O=n(449),p=n(106),x=n(124),h=n(31),f=n(1),m={button:Object(f.jsx)(o.a,{}),text:Object(f.jsx)(i.a,{}),code:Object(f.jsx)(s.a,{}),divider:Object(f.jsx)(l.a,{}),checkbox:Object(f.jsx)(u.a,{}),page:Object(f.jsx)(j.a,{}),person:Object(f.jsx)(b.a,{}),redirect:Object(f.jsx)(d.a,{}),image:Object(f.jsx)(O.a,{})},v=["page","redirect"];function g(e){var t=e.createBlock,n=e.types,o=e.close,i=void 0===o?null:o;return n&&Array.isArray(n)||(n=v),Object(f.jsx)(f.Fragment,{children:n.map((function(e){return Object(f.jsxs)(c.a,{className:"roundMenuItem",onClick:function(){return t({type:e,close:i})},children:[Object(f.jsx)(r.a,{children:m[e]}),Object(f.jsx)(a.a,{children:Object(f.jsx)(h.a,{id:"block_menu_type_label_"+e})})]},e)}))})}function k(e){var t=e.trigger,n=e.createBlock,c=e.types;return Object(p.a)().loggedIn?Object(f.jsx)(x.a,{trigger:t,children:function(e){var t=e.close;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{style:{marginTop:"8px"}}),Object(f.jsx)(g,{createBlock:n,types:c,close:t})]})}}):null}},395:function(e,t,n){"use strict";n.r(t);var c=n(6),r=n(5),a=n(0),o=n(319),i=n(124),s=n(396),l=n.n(s),u=n(398),j=n(1),b={_:"??",en:"English",de:"Deutsch",es:"Espa\xf1ol",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano",nl:"Nederlands",da:"Dansk",sv:"Svenska",nb:"Norsk bokm\xe5l",fi:"Suomi",se:"Davvis\xe1megiella (Northern Sami)",mt:"Malti",pl:"J\u0119zyk polski",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",tr:"T\xfcrk\xe7e",ar:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629",el:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",ro:"limba rom\xe2n\u0103",sl:"sloven\u0161\u010dina"},d=Object.entries(b).map((function(e){var t=Object(r.a)(e,2);return{code:t[0],nativeName:t[1]}})),O=Object.keys(b);t.default=function(e){var t=e.defaultValue,n=e.onChange,s=e.options,p=void 0===s?O:s;null!==t&&void 0!==t&&""!==t&&!1!==b.hasOwnProperty(t)||(t=p.length>0?p[0]:"_");var x=Object(a.useState)(t),h=Object(r.a)(x,2),f=h[0],m=h[1],v=Object(a.useCallback)((function(e){m(e),"_"===e&&(e=null),n&&n(e)}),[m,n]);return Object(j.jsx)(i.a,{trigger:function(e,t){var n=t.isOpen;return Object(j.jsxs)("button",Object(c.a)(Object(c.a)({},e),{},{className:"default hasIcon",style:{margin:"0",flexShrink:"0"},children:[Object(j.jsx)("span",{style:{width:"100%",textAlign:"start"},children:"_"===f?Object(j.jsx)(l.a,{path:u.d,className:"icon"}):f.toUpperCase()}),Object(j.jsx)("span",{style:{marginLeft:"var(--basis)",lineHeight:"1",verticalAlign:"text-top"},children:n?"\u25b4":"\u25be"})]}))},paperProps:{sx:{maxHeight:"300px"}},children:function(e){var t=e.close;return Object(j.jsx)("div",{style:{padding:"var(--basis_x2) 0"},children:d.filter((function(e){var t=e.code;return p.includes(t)})).map((function(e){var n=e.code,c=e.nativeName;return Object(j.jsx)(o.a,{onClick:function(){v(n),t()},className:"roundMenuItem",selected:n===f,children:"_"===n?c:"".concat(n.toUpperCase()," \u2014 ").concat(c)},n)}))})}})}},397:function(e,t,n){"use strict";var c=n(0),r=n(104),a=n(125);t.a=function(){var e=Object(r.a)();return Object(c.useCallback)((function(t){var n=t._id,c=t.archive;return e.mutate({mutation:c?a.a:a.d,variables:{_id:n}})}),[e])}},399:function(e,t,n){"use strict";var c=n(22),r=n(18),a=n(5),o=n(11),i=n.n(o),s=n(0),l=n(14),u=n(54),j=n(305),b=n(319),d=n(304),O=n(316),p=n(484),x=n(442),h=n(443),f=n(449),m=n(445),v=n(447),g=n(379),k=n(450),_=n(451),y=n(452),w=n(453),C=n(454),N=n(455),I=n(456),S=n(457),B=n(458),M=n(459),T=n(460),R=n(381),L=n(461),A=n(31),F=n(42),E=n(397),P=n(106),D=n(124),H=n(6),z=n(486),J=n(489),W=n(440),U=n(306),V=n(1);function G(e){var t=e.disabled,n=void 0!==t&&t,c=e.parentMenuIsOpen,r=void 0===c||c,o=e.label,i=void 0===o?"":o,l=e.triggerProps,u=void 0===l?{}:l,O=e.header,p=void 0===O?null:O,x=e.MenuListProps,h=void 0===x?{}:x,f=e.position,m=void 0===f?"right":f,v=e.onOpen,g=void 0===v?function(){}:v,k=e.children,_=Object(s.useRef)(null),y=Object(s.useState)(!1),w=Object(a.a)(y,2),C=w[0],N=w[1],I=C&&r,S=Object(s.useCallback)((function(){if(!0!==n){var e=!I;N(e),!0===e&&g()}}),[N,I,g,n]),B=Object(s.useCallback)((function(){N(!1)}),[N]);return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(b.a,Object(H.a)(Object(H.a)({},u),{},{disabled:n,ref:_,onClick:S,className:"roundMenuItem",style:Object(H.a)({display:"flex",justifyContent:"space-between"},u.style),children:[Object(V.jsx)("div",{style:{display:"flex"},children:i}),Object(V.jsx)(W.a,{style:{marginRight:"-10px"}})]})),Object(V.jsx)(z.a,{style:{pointerEvents:"none"},anchorEl:_.current,anchorOrigin:{vertical:"top",horizontal:"right"===m?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"===m?"left":"right"},open:I,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:B,sx:{marginTop:"-8px"},MenuListProps:Object(H.a)(Object(H.a)({},h),{},{sx:Object(H.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},h.sx)}),children:Object(V.jsxs)("div",{style:{pointerEvents:"auto"},children:[null!==p?Object(V.jsx)(J.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"0",padding:"4px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:p}):null,k,Object(V.jsx)(d.a,{style:{opacity:.2}}),Object(V.jsxs)(b.a,{className:"roundMenuItem",style:{marginTop:"8px"},onClick:B,children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(U.a,{})}),Object(V.jsx)(A.a,{id:"block_menu_close_menu"})]})]})})]})}var q=n(394),K=n(125),X=n(153),Y={button:Object(V.jsx)(x.a,{}),text:Object(V.jsx)(h.a,{}),image:Object(V.jsx)(f.a,{}),divider:Object(V.jsx)(m.a,{}),page:Object(V.jsx)(v.a,{}),redirect:Object(V.jsx)(g.a,{})},Z=["button","text","image","divider","page","redirect"],Q={default:"var(--on-background)",yellow:"var(--yellow)",green:"var(--green)",red:"var(--red)",blue:"var(--blue)"},$=Object.keys(Q);function ee(e){if(Q.hasOwnProperty(e))return Q[e];var t=Object(F.getBlockColor)({properties:{color:e}}).color;return t||e}t.a=Object(A.d)((function(e){var t=e.block,n=void 0===t?{}:t,o=e.getString,x=e.trigger,h=e.onToogle,f=e.saveType,m=e.saveProperty,v=e.typeOptions,g=void 0===v?Z:v,H=(e.onRemoveRow,e.addRowBefore,e.onArchivedToggle),z=void 0===H?null:H,J=e.onReloadContext,W=void 0===J?null:J,U=Object(P.a)(),Q=U.loggedIn,te=U.userroles;n.hasOwnProperty("properties")&&"object"===typeof n.properties&&null!==n.properties&&!Array.isArray(n.properties)||(n.properties={});var ne=n._id,ce=void 0===ne?"":ne,re=n.type,ae=void 0===re?"":re,oe=n.properties,ie=void 0===oe?{}:oe,se=n.computed,le=void 0===se?{}:se,ue=ie.active,je=void 0===ue||ue,be=ie.text_style,de=void 0===be?null:be,Oe=ie.text_decorations,pe=void 0===Oe?[]:Oe,xe=ie.color,he=void 0===xe?null:xe;Array.isArray(pe)||(pe=[]);var fe=(null===le?{}:le).roles,me=void 0===fe?[]:fe,ve=Q&&(te.includes("admin")||me.includes("owner")||me.includes("editor")),ge=Object(s.useState)(!0===ie.archived),ke=Object(a.a)(ge,2),_e=ke[0],ye=ke[1],we=Object(E.a)(),Ce=Object(X.a)(),Ne=Object(l.g)(),Ie=Object(s.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){var n,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,e.prev=1,!("string"===typeof n&&n.length>0)){e.next=12;break}return e.next=5,Ce({mutation:K.c,variables:{block:{type:n}}});case 5:if(c=e.sent,null===(r=c.saveBlock)){e.next=12;break}return e.next=10,Ce({mutation:K.b,variables:{movingBlockId:r,newParentId:ce,newIndex:0}});case 10:"function"===typeof W&&W(),Ne("/".concat(r,"/edit"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),[Ce,ce,W,Ne]),Se=Object(s.useCallback)((function(){var e=!_e;we({_id:n._id,archive:e}).then((function(){ye(e),"function"===typeof z&&z(e),"function"===typeof W&&W()})).catch(console.error)}),[we,ye,_e,n,z,W]),Be=Object(s.useCallback)((function(){"function"===typeof m&&m("active",!je)}),[je,m]),Me=n.metadata||{},Te=Object(F.getBlockColor)(n).color;Te||(Te="transparent");var Re=Object(s.useCallback)((function(e){var t=Object(c.a)(new Set(pe));pe.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),m("text_decorations",t)}),[pe,m]);return Object(V.jsx)(D.a,{trigger:x,onToogle:h,children:function(e){var t=e.open;return Object(V.jsxs)("div",{children:[Object(V.jsx)("div",{style:{height:"8px"}}),ve&&"function"===typeof f&&Array.isArray(g)&&g.length>0&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(G,{disabled:"person"===ae,parentMenuIsOpen:t,label:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(k.a,{})}),Object(V.jsx)(A.a,{id:"block_menu_choose_type_label"})]}),header:Object(V.jsx)(A.a,{id:"block_menu_choose_type_label"}),children:g.map((function(e){return Object(V.jsxs)(b.a,{selected:e===ae,onClick:function(){return f(e)},className:"roundMenuItem",children:[Object(V.jsx)(j.a,{children:Y[e]}),o("block_menu_type_label_".concat(e),e)]},e)}))}),Object(V.jsx)(d.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),ve&&"function"===typeof m&&Object(V.jsxs)(G,{parentMenuIsOpen:t,label:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(_.a,{style:{color:ee(he)}})}),Object(V.jsx)(A.a,{id:"block_menu_choose_color_label"})]}),header:Object(V.jsx)(A.a,{id:"block_menu_choose_color_label"}),children:[$.map((function(e){return Object(V.jsxs)(b.a,{selected:"default"===e?null===he:he===e,onClick:function(){return m("color","default"===e?null:e)},className:"roundMenuItem",children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(y.a,{style:{color:ee(e)}})}),e]},e)})),Object(V.jsxs)(b.a,{className:"roundMenuItem",selected:null!==he&&!$.includes(he),children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(y.a,{style:{color:Te}})}),Object(V.jsx)("input",{type:"text",placeholder:"#FFFFFF",defaultValue:he,onBlur:function(e){return m("color",e.target.value)},style:{width:"160px",margin:"0 calc(-1 * var(--basis)) 0 0"}},$.includes(he)?he:"custom")]})]}),ve&&"function"===typeof m&&"text"===ae&&Object(V.jsx)(G,{parentMenuIsOpen:t,label:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(w.a,{})}),Object(V.jsx)(A.a,{id:"block_menu_choose_text_style_label"})]}),header:Object(V.jsx)(A.a,{id:"block_menu_choose_text_style_label"}),children:["h2","h3","body"].map((function(e){return Object(V.jsx)(b.a,{selected:"body"===e?null===de:de===e,onClick:function(){return m("text_style","body"===e?null:e)},className:"roundMenuItem",children:o("block_menu_text_style_label_".concat(e),e)},e)}))}),ve&&"function"===typeof m&&"text"===ae&&Object(V.jsx)(G,{parentMenuIsOpen:t,label:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(C.a,{})}),Object(V.jsx)(A.a,{id:"block_menu_choose_text_decorations_label"})]}),header:Object(V.jsx)(A.a,{id:"block_menu_choose_text_decorations_label"}),children:["checkbox"].map((function(e){var t=pe.includes(e);return Object(V.jsxs)(b.a,{selected:t,onClick:function(){return Re(e)},className:"roundMenuItem",children:[Object(V.jsx)(j.a,{children:t?Object(V.jsx)(N.a,{}):Object(V.jsx)(N.a,{style:{opacity:0}})}),o("block_menu_text_decoration_label_".concat(e),e)]},e)}))}),ve&&"function"===typeof m&&Object(V.jsx)(d.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),ve&&Object(V.jsx)(G,{parentMenuIsOpen:t,label:Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(I.a,{})}),Object(V.jsx)(A.a,{id:"block_menu_create_child_block"})]}),children:Object(V.jsx)(q.a,{createBlock:Ie})}),ve&&"function"===typeof m&&Object(V.jsxs)(b.a,{className:"roundMenuItem",onClick:Be,children:[Object(V.jsx)(j.a,{children:je?Object(V.jsx)(S.a,{}):Object(V.jsx)(B.a,{})}),Object(V.jsx)(O.a,{primary:Object(V.jsx)("span",{children:je?Object(V.jsx)(A.a,{id:"block_menu_hide"}):Object(V.jsx)(A.a,{id:"block_menu_show"})}),secondary:Object(V.jsx)("span",{style:{whiteSpace:"normal"},children:Object(V.jsx)(A.a,{id:"block_menu_hide_show_description"})})})]}),ve&&"function"===typeof z&&Object(V.jsxs)(b.a,{className:"roundMenuItem",onClick:Se,children:[Object(V.jsx)(j.a,{children:!0===_e?Object(V.jsx)(M.a,{}):Object(V.jsx)(T.a,{})}),!0===_e?Object(V.jsx)(A.a,{id:"block_menu_unarchive"}):Object(V.jsx)(A.a,{id:"block_menu_archive"})]}),ve&&Object(V.jsx)(d.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),"string"===typeof ce&&""!==ce&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(b.a,{component:u.b,to:"/".concat(ce,"/view"),className:"roundMenuItem",style:{marginTop:"8px"},children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(R.a,{})}),Object(V.jsx)(A.a,{id:"view_block"})]}),ve&&Object(V.jsxs)(b.a,{component:u.b,to:"/".concat(ce,"/edit"),className:"roundMenuItem",children:[Object(V.jsx)(j.a,{children:Object(V.jsx)(L.a,{})}),Object(V.jsx)(A.a,{id:"edit_block"})]}),Object(V.jsx)(d.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),Object(V.jsx)(p.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(V.jsx)(O.a,{primary:Object(V.jsx)("span",{children:Object(V.jsx)(A.a,{id:"block_menu_info_modified"})}),secondary:Object(V.jsx)("span",{children:(Me.modified||"").replace(/[TZ]/g," ")})})}),Object(V.jsx)(p.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(V.jsx)(O.a,{primary:Object(V.jsx)("span",{children:Object(V.jsx)(A.a,{id:"block_menu_info_id"})}),secondary:Object(V.jsx)("span",{children:ce})})})]})}})}))},428:function(e,t,n){e.exports={content:"SidebarContent_content__RAi8X",header:"SidebarContent_header__1pYRG",headerBar:"SidebarContent_headerBar__2xkje",scrollContainer:"SidebarContent_scrollContainer__2eS9U"}},433:function(e,t,n){e.exports={blockRow:"BlockTree_blockRow__80Vim",blockRowActions:"BlockTree_blockRowActions__GDOGf",fakeHover:"BlockTree_fakeHover__TKaWl"}},487:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return je}));var c=n(6),r=n(22),a=n(5),o=n(0),i=n(428),s=n.n(i),l=n(315),u=n(319),j=n(305),b=n(316),d=n(304),O=n(478),p=n(456),x=n(479),h=n(410),f=n(480),m=n(481),v=n(482),g=n(393),k=n(14),_=n(31),y=n(106),w=n(78),C=n(394),N=n(18),I=n(17),S=n(11),B=n.n(S),M=n(429),T=n(434),R=n(430),L=n(399),A=n(82),F=n(433),E=n.n(F),P=n(447),D=n(448),H=n(379),z=n(473),J=n(474),W=n(475),U=n(476),V=n(460),G=n(381),q=n(477),K=n(150),X=n(124),Y=n(1),Z=B.a.mark(ee),Q={page:Object(Y.jsx)(P.a,{}),person:Object(Y.jsx)(D.a,{}),redirect:Object(Y.jsx)(H.a,{})},$=function(){return Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)};function ee(e){var t,n,c,a,o,i,s,l,u,j,b,d,O,p,x,h;return B.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:t=[],n=e.sort((function(e,t){return t.block.metadata.modified>e.block.metadata.modified?1:-1})),c=n.findIndex((function(e){return"6249c879fcaf12b124914396"===e.block._id})),c>-1&&(n=[n[c]].concat(Object(r.a)(n.slice(0,c)),Object(r.a)(n.slice(c+1)))),a=Object(I.a)(n);try{for(a.s();!(o=a.n()).done;)i=o.value,t.unshift({nestingLevel:0,node:i})}catch(m){a.e(m)}finally{a.f()}case 6:if(0===t.length){f.next=13;break}return s=t.pop(),l=s.node,u=l.children,j=void 0===u?[]:u,b=l._id,d=l.block,O=l.isOpen,p=s.nestingLevel,f.next=10,{_id:b,isLeaf:0===j.length,isOpen:O,block:d,nestingLevel:p};case 10:if(0!==j.length&&O)for(x=j.sort((function(e,t){return t.block.metadata.modified>e.block.metadata.modified?1:-1})),h=x.length-1;h>=0;h--)t.push({nestingLevel:p+1,node:x[h]});f.next=6;break;case 13:case"end":return f.stop()}}),Z)}var te=function(e){var t=e.createBlock,n=e.index,r=e.style,i=e.data,s=e.toggleOpenById,l=e.refetchData,u=e.showBlockMenu,j=void 0===u||u,b=i[n],d=b._id,O=b.isLeaf,p=b.isOpen,x=b.block,h=b.nestingLevel,f=Object(o.useState)(!1),m=Object(a.a)(f,2),v=m[0],g=m[1],k=Object(o.useCallback)((function(e){!1===e?setTimeout((function(){g(e)}),200):g(e)}),[g]),_=Object(o.useCallback)((function(){"function"===typeof s&&s(d)}),[s,d]),y=Object(o.useCallback)((function(){"function"===typeof l&&setTimeout((function(){l({force:!0})}),200)}),[l]),w=Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(A.a,{dragable:!0,size:"line",block:x,style:{flexGrow:"1",width:"100%"}}),!0===j&&Object(Y.jsx)("div",{className:E.a.blockRowActions,children:Object(Y.jsx)(L.a,{onToogle:k,onReloadContext:y,block:x,createBlock:t,trigger:function(e){return Object(Y.jsx)("button",Object(c.a)(Object(c.a)({},e),{},{className:"text hasIcon ".concat(v?"fakeHover":""),style:{margin:"0",padding:"var(--basis) 0",flexShrink:"0"},children:Object(Y.jsx)(z.a,{className:"icon"})}))}})})]}),C=~~(25*h+(O?24:0));return Object(Y.jsxs)("div",{style:Object(c.a)(Object(c.a)({display:"flex",alignItems:"center",flexDirection:"row"},r),{},{marginLeft:C,minWidth:"calc(100% - ".concat(O?24:0,"px)"),width:"calc(100% - ".concat(C,"px)")}),className:"".concat(E.a.blockRow," ").concat(v?E.a.fakeHover:""),children:[!O&&Object(Y.jsx)("button",{onClick:_,className:"text hasIcon",style:{margin:"0",padding:"var(--basis) 0",flexShrink:"0"},children:p?Object(Y.jsx)(J.a,{style:{verticalAlign:"middle"}}):Object(Y.jsx)(W.a,{style:{verticalAlign:"middle"}})}),w]},x._id)},ne=function(e){return Object.entries(e).filter((function(e){return!0===Object(a.a)(e,2)[1]})).map((function(e){return Object(a.a)(e,1)[0]}))};var ce=function(e){var t=e.createBlock,n=void 0===t?function(){}:t,r=e.scrollContainer,i=void 0===r?window:r,s=e.showBlockMenu,l=void 0===s||s,O=Object(_.c)().getString,p=Object(y.a)().loggedIn,x=Object(o.useRef)(null),h=Object(o.useRef)(null),f=Object(o.useRef)(null),m=Object(o.useState)(43),v=Object(a.a)(m,2),g=v[0],k=v[1],w=Object(o.useState)(0),C=Object(a.a)(w,2),S=C[0],L=C[1],A=Object(o.useState)({}),F=Object(a.a)(A,2),E=F[0],P=F[1],D=Object(o.useState)({}),H=Object(a.a)(D,2),z=H[0],J=H[1],W=Object(o.useState)([]),Z=Object(a.a)(W,2),ce=Z[0],re=Z[1],ae=Object(o.useState)([]),oe=Object(a.a)(ae,2),ie=oe[0],se=oe[1],le=Object(o.useState)(""),ue=Object(a.a)(le,2),je=ue[0],be=ue[1],de=Object(o.useRef)({}),Oe=Object(o.useState)(!1),pe=Object(a.a)(Oe,2),xe=pe[0],he=pe[1],fe=Object(o.useState)({person:!0,page:!0,redirect:!0}),me=Object(a.a)(fe,2),ve=me[0],ge=me[1],ke=ne(ve),_e=Object(o.useState)(!1),ye=Object(a.a)(_e,2),we=ye[0],Ce=ye[1],Ne=function(){var e=Object(o.useState)($()),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(o.useEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){c($())}),150)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),{height:n}}().height,Ie=Object(o.useCallback)((function(){h.current&&x.current&&setTimeout((function(){var e=x.current.getBoundingClientRect(),t=Ne-e.top,n=h.current.getBoundingClientRect().height;if("number"===typeof n&&!isNaN(n)&&n>43){var c=Math.min(t,n);k(~~c),L(~~Math.max(n-c,0))}}),100)}),[Ne,h,x,k,L]);Object(R.useScrollPosition)(Ie,[Ie],null,!1,300,i);var Se=Object(o.useCallback)((function(e){if(e.length>0){var t=!1;je.length>0&&(t=!0),e=e.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{isOpen:z.hasOwnProperty(e._id)?z[e._id]:t})}));var n=function(e){var t,n=[],c=Object(I.a)(e);try{var r=function(){var c=t.value,r=null;c.block.parent&&(r=e.find((function(e){return e._id===c.block.parent}))),r?(r.children||(r.children=[]),r.children.push(c)):n.push(c)};for(c.s();!(t=c.n()).done;)r()}catch(a){c.e(a)}finally{c.f()}return n}(JSON.parse(JSON.stringify(e))),r=function(e){for(var t=[],n=ee(e),c=!1;!c;){var r=n.next(),a=r.done,o=r.value;(c=a)||t.push(o)}return t}(n);re(r)}else re([]);Ie()}),[je,re,Ie,z]),Be=Object(K.a)(),Me=Object(o.useCallback)((function(e){var t=e||{},n=t.force,c=void 0!==n&&n,r=t.filteredTypes,a=t.archived;!0!==c&&de.current.archived===a&&de.current.types===r||(de.current.types=r,de.current.archived=a,Be({types:r,archived:a}).then(function(){var e=Object(N.a)(B.a.mark((function e(t){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.map((function(e){return{_id:e._id,block:e,children:[],isOpen:!1}})),P(n),Se(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)})))}),[Be,P,Se]);Object(o.useEffect)((function(){var e=ce;if(je.length>0){for(var t=je.toLowerCase(),n=0;n<e.length;n+=1){var c=e[n],r=!1;if(c&&c.block&&c.block.properties&&c.block.properties.text&&c.block.properties.text.toLowerCase().includes(t))r=!0;else if(c&&c.block&&c.block.properties&&c.block.properties.translations){var a,o=c.block.properties.translations,i=Object(I.a)(o);try{for(i.s();!(a=i.n()).done;){var s=a.value;if(s.hasOwnProperty("text")&&s.text.toLowerCase().includes(t)){r=!0;break}}}catch(d){i.e(d)}finally{i.f()}}else c&&c.block&&c.block.properties&&c.block.properties.slug&&c.block.properties.slug.toLowerCase().includes(t)&&(r=!0);e[n].showNode=r}for(var l=0,u=0,j=e.length-1;j>=0;j-=1){var b=e[j];0!==u?u>b.nestingLevel?(u=b.nestingLevel,e[j].showNode=!0):u<b.nestingLevel&&(u=l):!0===b.showNode&&(u=b.nestingLevel),(0===l||u<l)&&(l=u)}e=e.filter((function(e){return!0===e.showNode}))}!0===xe&&(e=e.filter((function(e){return!!e&&!!e.block&&!!e.block.computed&&!!e.block.computed.roles&&(e.block.computed.roles.includes("owner")||e.block.computed.roles.includes("editor"))}))),se(e),Ie()}),[je,xe,ce,se,Ie]);var Te=Object(o.useCallback)((function(e){be(e.target.value||"")}),[be]),Re=Object(o.useCallback)((function(e){var t=Object(c.a)({},ve);t[e]=!t[e],Object.values(t).every((function(e){return!1===e}))||ge(t)}),[ve,ge]);Object(o.useEffect)((function(){Me({filteredTypes:ne(ve),archived:we})}),[ve,we,Me]);var Le=Object(o.useCallback)((function(e){z[e]=!z[e],J(z),Se(E)}),[J,z,Se,E]),Ae=Object(o.useCallback)((function(e){Me(Object(c.a)(Object(c.a)({},e),{},{filteredTypes:ne(ve),archived:we}))}),[ve,we,Me]),Fe=function(e){return Object(Y.jsx)(te,Object(c.a)({createBlock:n,toggleOpenById:Le,refetchData:Ae,showBlockMenu:l},e))};return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"0 0 var(--basis_x2) 0"},children:[Object(Y.jsx)("input",{type:"text",placeholder:O("search"),style:{width:"100%"},onChange:Te}),Object(Y.jsxs)(X.a,{trigger:function(e){return Object(Y.jsx)("button",Object(c.a)(Object(c.a)({},e),{},{className:"text hasIcon",style:{flexShrink:"0"},children:Object(Y.jsx)(U.a,{className:"icon"})}))},children:[Object(Y.jsx)("div",{style:{marginTop:"8px"}}),Object.keys(ve).map((function(e){return Object(Y.jsxs)(u.a,{className:"roundMenuItem",onClick:function(){return Re(e)},selected:ke.includes(e),sx:{marginTop:"2px !important",marginBottom:"2px !important"},children:[Object(Y.jsx)(j.a,{children:Q[e]}),Object(Y.jsx)(b.a,{children:Object(Y.jsx)(_.a,{id:"block_menu_type_label_plural_"+e})})]},e)})),p&&Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(d.a,{style:{opacity:.2}}),Object(Y.jsxs)(u.a,{className:"roundMenuItem",onClick:function(){Ce((function(e){return!e}))},selected:!0===we,sx:{marginBottom:"2px !important"},children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(V.a,{className:"icon"})}),Object(Y.jsx)(b.a,{children:Object(Y.jsx)(_.a,{id:!0===we?"filter_menu_showing_archiv":"filter_menu_show_archiv"})})]}),Object(Y.jsxs)(u.a,{className:"roundMenuItem",onClick:function(){he((function(e){return!e}))},selected:!0===xe,children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(G.a,{className:"icon"})}),Object(Y.jsx)(b.a,{children:Object(Y.jsx)(_.a,{id:!0===xe?"filter_menu_showing_editing":"filter_menu_show_editing"})})]})]})]}),Object(Y.jsx)("button",{className:"text hasIcon",onClick:Ae,style:{flexShrink:"0"},children:Object(Y.jsx)(q.a,{className:"icon"})})]}),Object(Y.jsxs)("div",{style:{height:g,marginRight:"-12px",marginLeft:"-12px",marginBottom:S},ref:x,children:[Object(Y.jsx)(M.a,{disableWidth:!0,children:function(e){var t=e.height;return Object(Y.jsx)(T.a,{itemData:ie,itemCount:ie.length,ref:f,innerRef:h,itemSize:43,height:t,width:"100%",style:{overflowY:"hidden",overflowX:"auto"},itemKey:function(e,t){return t[e]._id},children:Fe})}}),0===ie.length?Object(Y.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:Object(Y.jsx)(_.a,{id:"blocktree_no_nodes_to_show"})}):null]})]})},re=n(20),ae=n(104),oe=n(48),ie=["slug","children"];function se(e){var t=e.slug,n=void 0===t?null:t,r=e.children,i=Object(re.a)(e,ie),s=Object(o.useRef)(!1);Object(o.useEffect)((function(){return s.current=!0,function(){s.current=!1}}),[]);var l=Object(o.useState)(null),u=Object(a.a)(l,2),j=u[0],b=u[1],d=Object(ae.a)();return Object(o.useEffect)((function(){n&&null!==n&&d.query({query:oe.c,variables:{slug:n}}).then(function(){var e=Object(N.a)(B.a.mark((function e(t){var n,c,r;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.errors,c=t.data,!0!==s.current){e.next=9;break}if(!Array.isArray(n)&&null!==c.block){e.next=6;break}throw new Error(n.map((function(e){return e.message})).join("\n"));case 6:r=c.block,console.log("loadedBlock",r),b(r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(N.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n,d,b]),null===j||"function"!==typeof r?null:r(Object(c.a)(Object(c.a)({},i),{},{block:j}))}var le=n(395),ue=n(135);function je(){var e=Object(o.useRef)(!1);Object(o.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]);var t=Object(_.c)(),n=t.getString,i=t.userLocales,N=void 0===i?[]:i,I=Object(o.useState)(!1),S=Object(a.a)(I,2),B=S[0],M=S[1],T=Object(o.useCallback)((function(){e.current&&function(e,t,n){var c;return function(){var r=this,a=arguments,o=function(){c=null,n||e.apply(r,a)},i=n&&!c;clearTimeout(c),c=setTimeout(o,t),i&&e.apply(r,a)}}((function(){e.current&&M(!0)}),10)()}),[M,e]);Object(o.useEffect)((function(){T()}),[T]);var R=Object(y.a)().loggedIn,L=Object(w.e)().toggleSidebar,F=Object(k.f)("/"),E=Object(g.a)(),P=Object(k.g)(),D=Object(o.useCallback)((function(e){var t=e.type;"string"===typeof t&&t.length>0&&E({type:t}).then((function(e){P("/".concat(e._id,"/edit"))})).catch((function(e){console.error(e)}))}),[E,P]),H=Object(o.useRef)(null),z=Object(o.useCallback)((function(e){var t=new CustomEvent("change_locale",{detail:{locale:e},bubbles:!0,cancelable:!1});document.dispatchEvent(t)}),[]),J=["_"].concat(Object(r.a)(Object.keys(ue.b))),W=n("choose_locale_information");return Object(Y.jsx)("div",{ref:H,className:s.a.scrollContainer,children:Object(Y.jsxs)("div",{className:s.a.content,children:[Object(Y.jsx)("header",{className:s.a.header,children:Object(Y.jsxs)("div",{className:s.a.headerBar,children:[F?Object(Y.jsx)("h1",{children:"VoltLink"}):Object(Y.jsx)("button",{onClick:L,className:"text hasIcon",style:{margin:"0"},children:Object(Y.jsx)(O.a,{className:"icon"})}),Object(Y.jsx)(C.b,{trigger:function(e){return Object(Y.jsx)("button",Object(c.a)(Object(c.a)({className:"default hasIcon"},e),{},{children:Object(Y.jsx)(p.a,{className:"icon"})}))},createBlock:D})]})}),Object(Y.jsxs)(l.a,{style:{maxWidth:"100%"},children:[R?Object(Y.jsx)("a",{href:"".concat(window.domains.backend,"logout?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(Y.jsxs)(u.a,{className:"roundMenuItem",children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(x.a,{})}),Object(Y.jsx)(b.a,{primary:Object(Y.jsx)(_.a,{id:"logout"})})]})}):Object(Y.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(Y.jsxs)(u.a,{className:"roundMenuItem",children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(h.a,{})}),Object(Y.jsx)(b.a,{primary:Object(Y.jsx)(_.a,{id:"login"})})]})}),R?Object(Y.jsxs)(u.a,{component:"a",target:"_blank",href:"https://volteuropa.workplace.com/groups/voltlink",className:"roundMenuItem",children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(f.a,{})}),Object(Y.jsx)(b.a,{primary:Object(Y.jsx)(_.a,{id:"workplace_group"})})]}):null,Object(Y.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:Object(Y.jsxs)(u.a,{className:"roundMenuItem",children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(m.a,{})}),Object(Y.jsx)(b.a,{primary:Object(Y.jsx)(_.a,{id:"contact"})})]})}),Object(Y.jsx)("a",{href:"https://github.com/voltbonn/",target:"_blank",rel:"noopener noreferrer",children:Object(Y.jsxs)(u.a,{className:"roundMenuItem",children:[Object(Y.jsx)(j.a,{children:Object(Y.jsx)(v.a,{})}),Object(Y.jsx)(b.a,{primary:Object(Y.jsx)(_.a,{id:"source_code"})})]})}),Object(Y.jsx)(se,{slug:"glossary",children:function(e){var t=e.block;return Object(Y.jsx)(A.a,{block:t})}}),Object(Y.jsx)(se,{slug:"tools",children:function(e){var t=e.block;return Object(Y.jsx)(A.a,{block:t})}}),R?Object(Y.jsx)(se,{slug:"stats",children:function(e){var t=e.block;return Object(Y.jsx)(A.a,{block:t})}}):null]}),Object(Y.jsx)("br",{}),Object(Y.jsx)(d.a,{style:{opacity:.2}}),Object(Y.jsx)("br",{}),Object(Y.jsxs)("div",{children:[Object(Y.jsx)("span",{style:{marginInlineEnd:"var(--basis_x4)"},children:Object(Y.jsx)(_.a,{id:"choose_locale"})}),Object(Y.jsx)(le.default,{onChange:z,defaultValue:N[0],options:J})]}),"string"===typeof W&&""!==W?Object(Y.jsx)("p",{style:{marginBottom:"0"},children:Object(Y.jsx)(_.a,{id:"choose_locale_information"})}):null,Object(Y.jsx)("br",{}),Object(Y.jsx)(d.a,{style:{opacity:.2}}),Object(Y.jsx)("br",{}),B?Object(Y.jsx)(ce,{showBlockMenu:!0,scrollContainer:H}):null]})})}}}]);
//# sourceMappingURL=8.ed774384.chunk.js.map