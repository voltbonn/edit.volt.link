(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[0],{100:function(e,t,n){e.exports={row:"ContentEditor_row__JonRI",form:"ContentEditor_form__wtoB9",item:"ContentEditor_item__3U0XE",inlineRowButton:"ContentEditor_inlineRowButton__2pw6r",dragHandleButton:"ContentEditor_dragHandleButton__1Y_RP"}},112:function(e,t,n){e.exports={content:"SidebarContent_content__RAi8X",header:"SidebarContent_header__1pYRG",headerBar:"SidebarContent_headerBar__2xkje",scrollContainer:"SidebarContent_scrollContainer__2eS9U"}},115:function(e,t,n){e.exports={drag_over:"DataTransmat_drag_over__3XVzh",drag_active:"DataTransmat_drag_active__2nwCM"}},116:function(e,t,n){e.exports={app:"Editor_app__3WzMm",spine_aligned:"Editor_spine_aligned__1h8Ra",contentWrapper:"Editor_contentWrapper__1cY6-",editor:"Editor_editor__2hX0g",loadingContent:"Editor_loadingContent__2fqdK",editor_form_row:"Editor_editor_form_row__17Pul"}},117:function(e,t,n){e.exports={dialog:"TranslationEditor_dialog__YL0sv",backdrop:"TranslationEditor_backdrop__hfIzh",inputWrapper:"TranslationEditor_inputWrapper__3aVMH",input:"TranslationEditor_input__3U2bK",actions:"TranslationEditor_actions__3dTaz"}},135:function(e,t,n){e.exports={blockRow:"BlockTree_blockRow__80Vim",blockRowActions:"BlockTree_blockRowActions__GDOGf",fakeHover:"BlockTree_fakeHover__TKaWl"}},136:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},148:function(e,t,n){e.exports={app:"App_app__3hbGO",isStartpage:"App_isStartpage__1Q6rs"}},149:function(e,t,n){var r=n(87).negotiateLanguages;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var a=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===a.length?null:e[a[0]]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",a=e.map((function(e){return e[n]})).filter(Boolean);if(0===a.length)return null;var c=r(t,a,{defaultLocale:a[0],strategy:"lookup"});return 0===c.length?null:e.filter((function(e){return e[n]===c[0]}))}e.exports={fluentByObject:a,fluentByArray:c,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=c(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=a(e,t));return"string"!==typeof e&&(e=n),e}}},154:function(e,t,n){e.exports={main:"Sidebar_main__1MCX5",open:"Sidebar_open__gnBQb"}},155:function(e,t,n){e.exports={app:"PageEditor_app__26Zo3",spine_aligned:"PageEditor_spine_aligned__2i6Wu",contentWrapper:"PageEditor_contentWrapper__WlUIr",editor:"PageEditor_editor__U1pPN",type_redirect:"PageEditor_type_redirect__2KPht",loadingContent:"PageEditor_loadingContent__1YK7g",editor_form_row:"PageEditor_editor_form_row__j4vjp"}},157:function(e,t,n){e.exports={rebuild_textarea:"HtmlInput_rebuild_textarea__ZfRzZ",show_placeholder:"HtmlInput_show_placeholder__hM8g2"}},200:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},205:function(e,t,n){e.exports={input_with_local:"InputWithLocal_input_with_local__3qqYa"}},206:function(e,t,n){e.exports={error:"FancyInput_error__2DFWE"}},231:function(e,t,n){},26:function(e,t){function n(e){if(e.startsWith("#")&&(e=e.substring(1)),3===e.length)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);else if(6!==e.length)throw new Error("Invalid hex color: "+e);for(var t=[],n=0;n<=2;n++)t[n]=parseInt(e.substr(2*n,2),16);return t}function r(e){return function(e){var t="string"===typeof e?n(e):e;return.2126*t[0]+.7152*t[1]+.0722*t[2]}(e)>=165?"000":"fff"}function a(e){var t;return t=function(e){var t,n;return(t=document.createElement("canvas")).height=1,t.width=1,(n=t.getContext("2d")).fillStyle=e,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}(e),"#"+[0,1,2].map((function(e){return("0"+t[e].toString(16)).slice(-2)})).join("")}e.exports={getImageUrl:function(e){return"object"!==typeof e||null===e||Array.isArray(e)||"url"!==e.type?"":e.url||""},getBlockColor:function(e){var t={color:null,colorRGB:null,contrastingColor:null,contrastingColorRGB:null};if(e.hasOwnProperty("properties")&&e.properties.hasOwnProperty("color")&&e.properties.color){var c=e.properties.color;if(["purple","red","green","blue","yellow"].includes(c))t.color="var(--".concat(c,")"),t.colorRGB="var(--".concat(c,"-rgb)"),t.contrastingColor="var(--on-".concat(c,")"),t.contrastingColorRGB="var(--on-".concat(c,"-rgb)");else{if(c.startsWith("#"))4!==c.length&&7!==c.length&&(c=null);else{var o=a(c);c="#000000"===o&&"black"!==c?null:o}if(c){t.color=c;var i=n(c);t.colorRGB=i.join(", "),t.contrastingColor="#"+r(c),t.contrastingColorRGB=n(t.contrastingColor)}}}return t}}},318:function(e,t,n){var r={"./de.ftl":[329,3],"./en.ftl":[330,4]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=318,e.exports=a},319:function(e,t,n){"use strict";n.r(t);var r=n(21),a=n(5),c=n(1),o=n.n(c),i=n(189),s=(n(231),n(77)),l=n.n(s),u=n(148),d=n.n(u),b=n(22),j=n(12),p=n(444),O=function(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&o(t.matches);var n=function(){return o(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r,e]),r},f=n(3),h=n(112),x=n.n(h),g=n(447),v=n(454),m=n(383),_=n(448),y=n(382),k=n(415),w=n(400),C=n(416),I=n(417),N=n(418),S=n(419),B=n(20),F=n(8),P=n.n(F),R=n(14),E=n(96),T=n(87),A=n(64),D=n(149),L=n.n(D),M=n(0),V=function(e){return Object(M.jsx)(E.b,Object(f.a)(Object(f.a)({},e),{},{elems:Object(f.a)({br:Object(M.jsx)("br",{})},e.elems),children:Object(M.jsx)(o.a.Fragment,{children:e.children})}),e.id)};function G(e){return function(t){var n=o.a.useContext(A.a);return o.a.createElement(e,Object(f.a)({fluentByObject:function(e,t){if(t||(t=null),e){var a,c=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return c.includes(e)})),i=Object(T.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),s=Object(r.a)(i);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(e[l])return e[l]}}catch(u){s.e(u)}finally{s.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||" ")}},t))}}function W(e,t,n){var r=(e||{}).properties,a=void 0===r?{}:r,c=a.locale||"en",o=a.text||n||"";t&&Array.isArray(t)||(t=[c]);var i=a.translations||[];if(Array.isArray(i)){i=[{locale:c,text:o}].concat(Object(R.a)(i));var s=L.a.fluentByArray(i,t,"locale");s.length>0&&(o=s[0].text)}return o}function H(){var e=o.a.useContext(A.a);return Object(f.a)(Object(f.a)({},e),{},{getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return L.a.fluentByAny(t,e.userLocales,n)},translateBlock:W})}var z,q,U,$,J=n(378),Z=n(37),X=n(440),K=Object(X.a)(z||(z=Object(Z.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),Y=Object(X.a)(q||(q=Object(Z.a)(["\n  mutation archiveBlock ($_id: ObjectID!) {\n    archiveBlock (_id: $_id)\n  }\n"]))),Q=Object(X.a)(U||(U=Object(Z.a)(["\n  mutation unarchiveBlock ($_id: ObjectID!) {\n    unarchiveBlock (_id: $_id)\n  }\n"]))),ee=Object(X.a)($||($=Object(Z.a)(["\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n"]))),te=n(94);function ne(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&ne(e[n],t);return e}var re,ae,ce,oe,ie,se,le,ue=function(){var e=H().getString,t=Object(J.a)(),n=Object(te.b)(),r=n.enqueueSnackbar,a=n.closeSnackbar,o=Object(c.useCallback)((function(n){return new Promise((function(c){var o=null,i=Object(f.a)({},n);(i=ne(i,"__typename")).hasOwnProperty("content")&&Array.isArray(i.content)&&(i.content=i.content.map((function(e){return{blockId:e.blockId}})));var s=new Promise((function(s){t.mutate({mutation:K,variables:{block:i}}).then(function(){var t=Object(B.a)(P.a.mark((function t(i){var l;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=i.data,s("got-data"),null!==o&&a(o),"string"===typeof l.error?"no_edit_permission"===l.error?r(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):r(""+l.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(c(Object(f.a)(Object(f.a)({},n),{},{_id:l.saveBlock})),r(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(B.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(n),s("got-error"),null!==o&&a(o),r(e("path_editor_status_error_while_saving",{error:n.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),s]).then((function(t){"show-loading"===t&&(o=r(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}))}),[r,a,t,e]);return o},de=Object(X.a)(re||(re=Object(Z.a)(["\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n      }\n    }\n  }\n"]))),be=Object(X.a)(ae||(ae=Object(Z.a)(["\n  query getBlocks ($ids: [ObjectID], $types: [String], $archived: Boolean, $roots: [ObjectID]) {\n    blocks (ids: $ids, types: $types, archived: $archived, roots: $roots) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n      }\n    }\n  }\n"]))),je=Object(X.a)(ce||(ce=Object(Z.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n    }\n  }\n"]))),pe=(Object(X.a)(oe||(oe=Object(Z.a)(["\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),Object(X.a)(ie||(ie=Object(Z.a)(["\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed {\n        sort\n      }\n    }\n  }\n"])))),Oe=Object(X.a)(se||(se=Object(Z.a)(["\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"]))),fe=Object(X.a)(le||(le=Object(Z.a)(["\n  query checkPath ($path: String!) {\n    checkPath (path: $path) {\n      isOkay\n      errors\n    }\n  }\n"])));function he(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(c.useRef)(!1);Object(c.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]);var n=Object(c.useState)({}),r=Object(a.a)(n,2),o=r[0],i=r[1],s=Object(c.useState)(!1),l=Object(a.a)(s,2),u=l[0],d=l[1],b=Object(J.a)();return Object(c.useEffect)((function(){b.query({query:je}).then(function(){var e=Object(B.a)(P.a.mark((function e(n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data,!0===t.current&&(r.hasOwnProperty("self")?(i(r.self),d(r.self.logged_in)):(i({}),d(!1)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),!0===t.current&&(i({}),d(!1))}))}),[e,i,d,b]),Object(f.a)(Object(f.a)({},o),{},{loggedIn:u})}var xe=n(385),ge=n(386),ve=n(387),me=n(388),_e=n(389),ye=n(390),ke=n(391),we=n(392),Ce=n(19),Ie=n(453),Ne=n(384),Se=n(379),Be=n(438),Fe=n(380);var Pe=function(e){var t=e.trigger,n=e.children,r=void 0===n?function(){}:n,o=e.onToogle,i=void 0===o?function(){}:o,s=e.setOpenBlockMenuRef,l=Object(c.useRef)(null),u=Object(c.useState)(!1),d=Object(a.a)(u,2),b=d[0],j=d[1],p=Object(c.useCallback)((function(e){j(e)}),[j]);Object(c.useEffect)((function(){s&&(s.current=p)}),[p,s]);var O=function(){i(!1),j(!1)},h=b?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(M.jsxs)(M.Fragment,{children:[t({ref:l,"aria-describedby":h,onClick:function(){j((function(e){return i(!e),!e}))},style:{pointerEvents:b?"none":"all"}},{isOpen:b}),Object(M.jsxs)(Se.a,{children:[Object(M.jsx)("div",{onClick:O,style:{display:b?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(M.jsx)(Be.a,{id:h,open:b,anchorEl:l.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(M.jsx)(Fe.a,Object(f.a)(Object(f.a)({},t),{},{children:Object(M.jsx)("div",{children:r&&"function"===typeof r?r({open:b,style:{transformOrigin:"top left"},closePopover:O}):null})}))}})]})]})},Re=["closePopover","open"],Ee=["sx"];function Te(e){var t=e.trigger,n=e.children,r=e.onToogle,a=e.paperProps,c=void 0===a?{}:a;return Object(M.jsx)(Pe,{trigger:t,onToogle:r,children:function(e){var t=e.closePopover,r=e.open,a=Object(Ce.a)(e,Re),o=c||{},i=o.sx,s=void 0===i?{}:i,l=Object(Ce.a)(o,Ee);return Object(M.jsx)(Ie.a,Object(f.a)(Object(f.a)(Object(f.a)({},a),{},{sx:Object(f.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},s),elevation:8},l),{},{children:Object(M.jsx)(g.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:Object(M.jsxs)("div",{children:["function"===typeof n?n({isOpen:r,close:t}):n,Object(M.jsx)(y.a,{style:{opacity:.2,marginBottom:"8px"}}),Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:t,children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Ne.a,{})}),Object(M.jsx)(_.a,{children:Object(M.jsx)(V,{id:"block_menu_close_menu"})})]})]})})}))}})}var Ae={button:Object(M.jsx)(xe.a,{}),text:Object(M.jsx)(ge.a,{}),code:Object(M.jsx)(ve.a,{}),divider:Object(M.jsx)(me.a,{}),checkbox:Object(M.jsx)(_e.a,{}),page:Object(M.jsx)(ye.a,{}),person:Object(M.jsx)(ke.a,{}),redirect:Object(M.jsx)(we.a,{})},De=["page","redirect"];function Le(e){var t=e.createBlock,n=e.types;return n&&Array.isArray(n)||(n=De),Object(M.jsx)(M.Fragment,{children:n.map((function(e){return Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:function(){return t({type:e})},children:[Object(M.jsx)(m.a,{children:Ae[e]}),Object(M.jsx)(_.a,{children:Object(M.jsx)(V,{id:"block_menu_type_label_"+e})})]},e)}))})}function Me(e){var t=e.trigger,n=e.createBlock,r=e.types;return he().loggedIn?Object(M.jsxs)(Te,{trigger:t,children:[Object(M.jsx)("div",{style:{marginTop:"8px"}}),Object(M.jsx)(Le,{createBlock:n,types:r})]}):null}var Ve=n(194),Ge=n(201),We=n(195),He=n(43),ze=n(445),qe=n(396),Ue=n(397),$e=n(398),Je=n(399),Ze=n(401),Xe=n(402),Ke=n(403),Ye=n(404),Qe=n(405),et=n(406),tt=n(26);var nt=function(){var e=Object(J.a)();return Object(c.useCallback)((function(t){var n=t._id,r=t.archive;return e.mutate({mutation:r?Y:Q,variables:{_id:n}})}),[e])},rt=n(449),at=n(455),ct=n(393);function ot(e){var t=e.disabled,n=void 0!==t&&t,r=e.parentMenuIsOpen,o=void 0===r||r,i=e.label,s=void 0===i?"":i,l=e.triggerProps,u=void 0===l?{}:l,d=e.header,b=void 0===d?null:d,j=e.MenuListProps,p=void 0===j?{}:j,O=e.position,h=void 0===O?"right":O,x=e.onOpen,g=void 0===x?function(){}:x,_=e.children,k=Object(c.useRef)(null),w=Object(c.useState)(!1),C=Object(a.a)(w,2),I=C[0],N=C[1],S=I&&o,B=Object(c.useCallback)((function(){if(!0!==n){var e=!S;N(e),!0===e&&g()}}),[N,S,g,n]),F=Object(c.useCallback)((function(){N(!1)}),[N]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(v.a,Object(f.a)(Object(f.a)({},u),{},{disabled:n,ref:k,onClick:B,className:"roundMenuItem",style:Object(f.a)({display:"flex",justifyContent:"space-between"},u.style),children:[Object(M.jsx)("div",{style:{display:"flex"},children:s}),Object(M.jsx)(ct.a,{style:{marginRight:"-10px"}})]})),Object(M.jsx)(rt.a,{style:{pointerEvents:"none"},anchorEl:k.current,anchorOrigin:{vertical:"top",horizontal:"right"===h?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"===h?"left":"right"},open:S,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:F,sx:{marginTop:"-8px"},MenuListProps:Object(f.a)(Object(f.a)({},p),{},{sx:Object(f.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},p.sx)}),children:Object(M.jsxs)("div",{style:{pointerEvents:"auto"},children:[null!==b?Object(M.jsx)(at.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"0",padding:"4px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:b}):null,_,Object(M.jsx)(y.a,{style:{opacity:.2}}),Object(M.jsxs)(v.a,{className:"roundMenuItem",style:{marginTop:"8px"},onClick:F,children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Ne.a,{})}),Object(M.jsx)(V,{id:"block_menu_close_menu"})]})]})})]})}var it=function(){var e=Object(J.a)();return Object(c.useCallback)((function(t){return new Promise((function(n,r){e.mutate(t).then((function(e){var t=e.data;"string"===typeof t.error?r(t.error):n(t)})).catch(r)}))}),[e])},st={button:Object(M.jsx)(xe.a,{}),text:Object(M.jsx)(ge.a,{}),divider:Object(M.jsx)(me.a,{}),page:Object(M.jsx)(ye.a,{}),redirect:Object(M.jsx)(we.a,{})},lt=["button","text","divider","page","redirect"],ut={default:"var(--on-background)",yellow:"var(--yellow)",green:"var(--green)",red:"var(--red)",blue:"var(--blue)"},dt=Object.keys(ut);function bt(e){if(ut.hasOwnProperty(e))return ut[e];var t=Object(tt.getBlockColor)({properties:{color:e}}).color;return t||e}var jt=G((function(e){var t=e.block,n=void 0===t?{}:t,r=e.getString,o=e.trigger,i=e.onToogle,s=e.setProperty,l=e.setType,u=e.typeOptions,d=void 0===u?lt:u,j=(e.onRemoveRow,e.addRowBefore,e.onArchivedToggle),p=void 0===j?null:j,O=e.onReloadContext,f=void 0===O?null:O,h=he().loggedIn,x=n._id,g=void 0===x?"":x,k=n.type,C=void 0===k?"":k,I=n.properties,N=void 0===I?{}:I,S=n.computed,F=void 0===S?{}:S,R=N.active,E=void 0===R||R,T=N.text_style,A=void 0===T?null:T,D=N.color,L=void 0===D?null:D,G=(null===F?{}:F).roles,W=void 0===G?[]:G,H=h&&(W.includes("owner")||W.includes("editor")),z=Object(c.useState)(!0===N.archived),q=Object(a.a)(z,2),U=q[0],$=q[1],J=nt(),Z=it(),X=Object(b.g)(),Y=Object(c.useCallback)(function(){var e=Object(B.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=11;break}return e.next=4,Z({mutation:K,variables:{block:t}});case 4:if(n=e.sent,null===(r=n.saveBlock)){e.next=11;break}return e.next=9,Z({mutation:ee,variables:{movingBlockId:r,newParentId:g,newIndex:0}});case 9:"function"===typeof f&&f(),X("/".concat(r,"/edit"));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[Z,g,f,X]),Q=Object(c.useCallback)((function(){var e=!U;J({_id:n._id,archive:e}).then((function(){$(e),"function"===typeof p&&p(e),"function"===typeof f&&f()})).catch(console.error)}),[J,$,U,n,p,f]),te=Object(c.useCallback)((function(){"function"===typeof s&&s("active",!E)}),[E,s]),ne=n.metadata||{},re=Object(tt.getBlockColor)(n).color;return re||(re="transparent"),Object(M.jsx)(Te,{trigger:o,onToogle:i,children:function(e){var t=e.open;return Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{style:{height:"8px"}}),H&&"function"===typeof l&&Array.isArray(d)&&d.length>0&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(ot,{disabled:"person"===C,parentMenuIsOpen:t,label:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(qe.a,{})}),Object(M.jsx)(V,{id:"block_menu_choose_type_label"})]}),header:Object(M.jsx)(V,{id:"block_menu_choose_type_label"}),children:d.map((function(e){return Object(M.jsxs)(v.a,{selected:e===C,onClick:function(){return l(e)},className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:st[e]}),r("block_menu_type_label_".concat(e),e)]},e)}))}),Object(M.jsx)(y.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),H&&"function"===typeof s&&Object(M.jsxs)(ot,{parentMenuIsOpen:t,label:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Ue.a,{style:{color:bt(L)}})}),Object(M.jsx)(V,{id:"block_menu_choose_color_label"})]}),header:Object(M.jsx)(V,{id:"block_menu_choose_color_label"}),children:[dt.map((function(e){return Object(M.jsxs)(v.a,{selected:"default"===e?null===L:L===e,onClick:function(){return s("color","default"===e?null:e)},className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:Object(M.jsx)($e.a,{style:{color:bt(e)}})}),e]},e)})),Object(M.jsxs)(v.a,{className:"roundMenuItem",selected:null!==L&&!dt.includes(L),children:[Object(M.jsx)(m.a,{children:Object(M.jsx)($e.a,{style:{color:re}})}),Object(M.jsx)("input",{type:"text",placeholder:"#FFFFFF",defaultValue:L,onBlur:function(e){return s("color",e.target.value)},style:{width:"160px",margin:"0 calc(-1 * var(--basis)) 0 0"}},dt.includes(L)?L:"custom")]})]}),H&&"function"===typeof s&&"text"===C&&Object(M.jsx)(ot,{parentMenuIsOpen:t,label:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Je.a,{})}),Object(M.jsx)(V,{id:"block_menu_choose_text_style_label"})]}),header:Object(M.jsx)(V,{id:"block_menu_choose_text_style_label"}),children:["h2","h3","body"].map((function(e){return Object(M.jsx)(v.a,{selected:"body"===e?null===A:A===e,onClick:function(){return s("text_style","body"===e?null:e)},className:"roundMenuItem",children:r("block_menu_text_style_label_".concat(e),e)},e)}))}),H&&"function"===typeof s&&Object(M.jsx)(y.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),H&&Object(M.jsx)(ot,{parentMenuIsOpen:t,label:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(w.a,{})}),Object(M.jsx)(V,{id:"block_menu_create_child_block"})]}),children:Object(M.jsx)(Le,{createBlock:Y})}),H&&"function"===typeof s&&Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:te,children:[Object(M.jsx)(m.a,{children:E?Object(M.jsx)(Ze.a,{}):Object(M.jsx)(Xe.a,{})}),Object(M.jsx)(_.a,{primary:Object(M.jsx)("span",{children:E?Object(M.jsx)(V,{id:"block_menu_hide"}):Object(M.jsx)(V,{id:"block_menu_show"})}),secondary:Object(M.jsx)("span",{style:{whiteSpace:"normal"},children:Object(M.jsx)(V,{id:"block_menu_hide_show_description"})})})]}),H&&"function"===typeof p&&Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:Q,children:[Object(M.jsx)(m.a,{children:!0===U?Object(M.jsx)(Ke.a,{}):Object(M.jsx)(Ye.a,{})}),!0===U?Object(M.jsx)(V,{id:"block_menu_unarchive"}):Object(M.jsx)(V,{id:"block_menu_archive"})]}),H&&Object(M.jsx)(y.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),"string"===typeof g&&""!==g&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(v.a,{component:He.b,to:"/".concat(g,"/view"),className:"roundMenuItem",style:{marginTop:"8px"},children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Qe.a,{})}),Object(M.jsx)(V,{id:"view_block"})]}),H&&Object(M.jsxs)(v.a,{component:He.b,to:"/".concat(g,"/edit"),className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(et.a,{})}),Object(M.jsx)(V,{id:"edit_block"})]}),Object(M.jsx)(y.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),Object(M.jsx)(ze.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(M.jsx)(_.a,{primary:Object(M.jsx)("span",{children:Object(M.jsx)(V,{id:"block_menu_info_modified"})}),secondary:Object(M.jsx)("span",{children:(ne.modified||"").replace(/[TZ]/g," ")})})}),Object(M.jsx)(ze.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(M.jsx)(_.a,{primary:Object(M.jsx)("span",{children:Object(M.jsx)(V,{id:"block_menu_info_id"})}),secondary:Object(M.jsx)("span",{children:g})})})]})}})})),pt=n(57),Ot=n(115),ft=n.n(Ot);function ht(e){var t=e.onTransmit,n=e.onReceive,a=e.draggable,o=e.style,i=e.className,s=e.children,l=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=Object(pt.addListeners)(l.current,"transmit",function(){var e=Object(B.a)(P.a.mark((function e(n){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new pt.Transmat(n),"function"!==typeof t){e.next=6;break}return e.next=4,t(r);case 4:"object"!==typeof(a=e.sent)||null===a||Array.isArray(a.data)||"object"!==typeof a.data||null===a.data||r.setData(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a=Object(pt.addListeners)(l.current,"receive",(function(e){var t=new pt.Transmat(e);if(t.hasType("application/json")&&t.accept()){var r=t.getData("application/json");"function"===typeof n&&n({data:JSON.parse(r)}),e.preventDefault()}})),c=new pt.TransmatObserver((function(e){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;new pt.Transmat(a.event).hasType("application/json")&&(a.target.classList.toggle(ft.a.drag_over,a.isTarget),a.target.classList.toggle(ft.a.drag_active,a.isActive))}}catch(c){n.e(c)}finally{n.f()}}));return c.observe(l.current),function(){e(),a(),c.disconnect()}}),[t,n]),Object(M.jsx)("div",{ref:l,style:o,className:i,draggable:a?"true":"false",tabIndex:"0",children:s})}var xt=n(196),gt=n.n(xt),vt=n(197),mt=n.n(vt),_t=n(198),yt=n.n(_t),kt=n(199);function wt(e){var t=gt()(Object(f.a)({html:!1,xhtmlOut:!1,linkify:!0,typographer:!0,breaks:!1},e));return t.use(mt.a),t.use(yt.a),t}function Ct(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(e=e||"").replace(/\(TM\)/gi,"\u2122").replace(/\(SM\)/gi,"\u2120").replace(/\(C\)/gi,"\xa9").replace(/\(R\)/gi,"\xae");var n=wt(t);return e=n.renderInline(e),e=kt.a.parse(e,{folder:"svg",ext:".svg",base:"/public/twemoji/assets/"})}var It=function(e){var t=e.block,n=e.style,r=e.locales,o=Object(c.useState)({__html:""}),i=Object(a.a)(o,2),s=i[0],l=i[1],u=(0,H().translateBlock)(t,r,"");Object(c.useEffect)((function(){var e=Ct(u);l({__html:e})}),[u,l]);var d={dir:"auto",style:Object(f.a)({whiteSpace:"pre-wrap"},n)},b=Object(tt.getBlockColor)(t).color;b&&(d.style.color=b);var j="body";t.properties.hasOwnProperty("text_style")&&(j=t.properties.text_style);var p=null;switch(j){case"h1":p=Object(M.jsx)("h1",Object(f.a)({dangerouslySetInnerHTML:s},d));break;case"h2":p=Object(M.jsx)("h2",Object(f.a)({dangerouslySetInnerHTML:s},d));break;case"h3":p=Object(M.jsx)("h3",Object(f.a)({dangerouslySetInnerHTML:s},d));break;case"caption":p=Object(M.jsx)("caption",Object(f.a)({dangerouslySetInnerHTML:s},d));break;default:p=Object(M.jsx)("p",Object(f.a)({dangerouslySetInnerHTML:s},d))}return p};var Nt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,o=e.locales,i=Object(c.useState)({__html:""}),s=Object(a.a)(i,2),l=s[0],u=s[1],d=H(),b=d.getString,j=(0,d.translateBlock)(t,o,b("placeholder_main_headline"));Object(c.useEffect)((function(){var e=Ct(j,{linkify:!1});u({__html:e})}),[j,u]);var p="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(p=t.properties.action.url);var O=Object(tt.getBlockColor)(t),h=O.color,x=O.contrastingColor,g={};h&&(g["--button-background"]=h,g["--button-color"]=x);var v=r.hasOwnProperty("click");return!1===v&&""!==p?Object(M.jsx)("a",{href:p,target:"_blank",rel:"noreferrer",children:Object(M.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,className:"default square",style:Object(f.a)({margin:"0",whiteSpace:"pre-wrap"},g)})}):!0===v&&"function"===typeof r.click?Object(M.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,className:"default square",style:Object(f.a)({margin:"0",whiteSpace:"pre-wrap"},g),onClick:r.click}):Object(M.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,disabled:"disabled",className:"default square",style:Object(f.a)({margin:"0",whiteSpace:"pre-wrap"},g)})};function St(e){var t=e.block,n=Object(tt.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(M.jsx)("hr",{style:r})}var Bt=n(407);var Ft=function(e){var t=e.block,n=t.properties.text||"",r=Boolean(t.properties.checked),a={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(M.jsxs)("p",{dir:"auto",children:[r?Object(M.jsx)(_e.a,{style:a}):Object(M.jsx)(Bt.a,{style:a}),n]})};var Pt=n(408),Rt=n(409),Et=n(58),Tt=n.n(Et);var At=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,o=e.locales,i=H(),s=i.getString,l=i.translateBlock,u=function(e){var t=e.block,n=void 0===t?null:t,r=Object(c.useState)(null),o=Object(a.a)(r,2),i=o[0],s=o[1],l=Object(c.useState)(null),u=Object(a.a)(l,2),d=u[0],b=u[1];return Object(c.useEffect)((function(){var e=null,t=null;if(null!==n){var r=n._id,a=(n.properties||{}).trigger||{},c=a.type,o=(n.properties||{}).action||{},i=o.type;"path"===c||"click"===c?"open_url"===i&&"string"===typeof o.url&&o.url.length>0?(e=o.url||"",t=null):"render_block"===i&&"string"===typeof a.path&&a.path.length>0?"string"===typeof o.blockId&&o.blockId.length>0?(e="".concat(window.domains.frontend).concat(a.path,"=").concat(o.blockId),t="/".concat(a.path,"=").concat(o.blockId)):(e="".concat(window.domains.frontend).concat(a.path,"=").concat(r),t="/".concat(a.path,"=").concat(r)):(e="/".concat(r,"/view"),t="/".concat(r)):(e="".concat(window.domains.frontend).concat(r,"/view"),t="/".concat(r))}s(e),b(t)}),[n,s,b]),{link:i,path:d}}({block:t}),d=u.link,b=u.path,j=l(t,o,"");if(""===j){var p=(t.properties||{}).trigger||{},O=p.type;j="path"===O?"/"+p.path:"redirect"===t.type?"click"===O?p.blockId:"cron"===O?p.cron:"block_change"===O?p.blockId:Object.keys(p).length>0?JSON.stringify(p):s("placeholder_main_headline"):s("placeholder_main_headline")}var h=!1,x=Object(tt.getImageUrl)(t.properties.icon);x||(h=!0,x=Object(tt.getImageUrl)(t.properties.coverphoto));var g=null;if(""===x)switch(t.type){case"person":g=Object(M.jsx)(Pt.a,{className:Tt.a.icon});break;case"redirect":g=Object(M.jsx)(we.a,{className:Tt.a.icon});break;default:g=Object(M.jsx)(Rt.a,{className:Tt.a.icon})}else g=Object(M.jsx)("div",{className:"".concat(Tt.a.icon," ").concat(h?Tt.a.square:Tt.a.round),style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=png&w=40&h=40&url=").concat(encodeURIComponent(x),")")},alt:j});var v=null,m=b||d;r.hasOwnProperty("link")?"string"===typeof r.link&&(m=r.link):r.hasOwnProperty("click")&&"function"===typeof r.click&&(v=r.click);var _=Object(tt.getBlockColor)(t),y=_.color,k=void 0===y?"inherit":y,w=_.colorRGB,C=void 0===w?"--on-background-rgb":w;if("string"===typeof m&&m.length>0)return m.includes(":")?Object(M.jsx)("a",{href:m,target:"_blank",rel:"noreferrer",title:j,className:"clickable_card ".concat(Tt.a.root),style:{display:"block",cursor:"pointer",color:k,"--on-background-rgb":C},children:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[g,Object(M.jsx)("span",{dir:"auto",className:Tt.a.title,children:j})]})}):Object(M.jsx)(He.b,{to:m,title:j,className:"clickable_card ".concat(Tt.a.root),style:{display:"block",cursor:"pointer",color:k,"--on-background-rgb":C},children:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[g,Object(M.jsx)("span",{dir:"auto",className:Tt.a.title,children:j})]})});var I={};return"function"===typeof v&&(I.onClick=v),Object(M.jsx)("div",Object(f.a)(Object(f.a)({},I),{},{title:j,className:"clickable_card ".concat(Tt.a.root),style:{cursor:"function"===typeof v?"pointer":"auto",color:k,"--on-background-rgb":C},children:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[g,Object(M.jsx)("span",{dir:"auto",className:Tt.a.title,children:j})]})}))},Dt=n(200),Lt=n.n(Dt),Mt=["block","actions","size","dragable"];var Vt=function(e){var t=e.block,n=void 0===t?{}:t,r=e.actions,a=void 0===r?{}:r,o=(e.size,e.dragable),i=void 0!==o&&o,s=Object(Ce.a)(e,Mt),l=null;switch(n.type||null){case"text":l=Object(M.jsx)(It,Object(f.a)({block:n,actions:a},s),n._id);break;case"button":l=Object(M.jsx)(Nt,Object(f.a)({block:n,actions:a},s),n._id);break;case"divider":l=Object(M.jsx)(St,Object(f.a)({block:n,actions:a},s),n._id);break;case"checkbox":l=Object(M.jsx)(Ft,Object(f.a)({block:n,actions:a},s),n._id);break;case"page":case"person":case"redirect":l=Object(M.jsx)(At,Object(f.a)({block:n,actions:a},s),n._id);break;default:l=JSON.stringify(n)}var u=it(),d=Object(c.useCallback)((function(e){var t=e.data;t._id!==n._id&&u({mutation:ee,variables:{movingBlockId:t._id,newParentId:n._id,newIndex:0}}).catch(console.error)}),[u,n]);return Object(M.jsx)(ht,{draggable:i,className:Lt.a.root,onTransmit:function(){return{data:{"application/json":n}}},onReceive:d,children:l},n._id)},Gt=n(135),Wt=n.n(Gt),Ht=n(410),zt=n(411),qt=n(412),Ut=n(413),$t=n(414);var Jt=function(){var e=Object(J.a)(),t=Object(c.useCallback)((function(t){return new Promise((function(n){e.query({query:be,variables:t}).then(function(){var e=Object(B.a)(P.a.mark((function e(t){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.errors,a=t.data,!(Array.isArray(r)&&r.length>0)){e.next=5;break}throw r;case 5:if(!Array.isArray(a.blocks)){e.next=9;break}n(a.blocks),e.next=10;break;case 9:throw new Error("Unknown error while loading blocks.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t},Zt=P.a.mark(Yt),Xt={page:Object(M.jsx)(ye.a,{}),person:Object(M.jsx)(ke.a,{}),redirect:Object(M.jsx)(we.a,{})},Kt=function(){return Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)};function Yt(e){var t,n,a,c,o,i,s,l,u,d,b,j,p,O,f,h;return P.a.wrap((function(x){for(;;)switch(x.prev=x.next){case 0:t=[],n=e.sort((function(e,t){return t.block.metadata.modified>e.block.metadata.modified?1:-1})),a=n.findIndex((function(e){return"6249c879fcaf12b124914396"===e.block._id})),a>-1&&(n=[n[a]].concat(Object(R.a)(n.slice(0,a)),Object(R.a)(n.slice(a+1)))),c=Object(r.a)(n);try{for(c.s();!(o=c.n()).done;)i=o.value,t.unshift({nestingLevel:0,node:i})}catch(g){c.e(g)}finally{c.f()}case 6:if(0===t.length){x.next=13;break}return s=t.pop(),l=s.node,u=l.children,d=void 0===u?[]:u,b=l._id,j=l.block,p=l.isOpen,O=s.nestingLevel,x.next=10,{_id:b,isLeaf:0===d.length,isOpen:p,block:j,nestingLevel:O};case 10:if(0!==d.length&&p)for(f=d.sort((function(e,t){return t.block.metadata.modified>e.block.metadata.modified?1:-1})),h=f.length-1;h>=0;h--)t.push({nestingLevel:O+1,node:f[h]});x.next=6;break;case 13:case"end":return x.stop()}}),Zt)}var Qt=function(e){var t=e.createBlock,n=e.index,r=e.style,o=e.data,i=e.toggleOpenById,s=e.refetchData,l=e.showBlockMenu,u=void 0===l||l,d=o[n],b=d._id,j=d.isLeaf,p=d.isOpen,O=d.block,h=d.nestingLevel,x=Object(c.useState)(!1),g=Object(a.a)(x,2),v=g[0],m=g[1],_=Object(c.useCallback)((function(){"function"===typeof i&&i(b)}),[i,b]),y=Object(c.useCallback)((function(e){!1===e?setTimeout((function(){m(e)}),200):m(e)}),[m]),k=Object(c.useCallback)((function(){"function"===typeof s&&setTimeout((function(){s({force:!0})}),200)}),[s]),w=Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Vt,{dragable:!0,size:"line",block:O,style:{flexGrow:"1",width:"100%"}}),!0===u&&Object(M.jsx)("div",{className:Wt.a.blockRowActions,children:Object(M.jsx)(jt,{onToogle:y,onReloadContext:k,block:O,createBlock:t,trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon ".concat(v?"fakeHover":""),style:{margin:"0",padding:"var(--basis) 0",flexShrink:"0"},children:Object(M.jsx)(Ht.a,{className:"icon"})}))}})})]}),C=~~(25*h+(j?24:0));return Object(M.jsxs)("div",{style:Object(f.a)(Object(f.a)({display:"flex",alignItems:"center",flexDirection:"row"},r),{},{marginLeft:C,minWidth:"calc(100% - ".concat(j?24:0,"px)"),width:"calc(100% - ".concat(C,"px)")}),className:"".concat(Wt.a.blockRow," ").concat(v?Wt.a.fakeHover:""),children:[!j&&Object(M.jsx)("button",{onClick:_,className:"text hasIcon",style:{margin:"0",padding:"var(--basis) 0",flexShrink:"0"},children:p?Object(M.jsx)(zt.a,{style:{verticalAlign:"middle"}}):Object(M.jsx)(qt.a,{style:{verticalAlign:"middle"}})}),w]},O._id)},en=function(e){return Object.entries(e).filter((function(e){return!0===Object(a.a)(e,2)[1]})).map((function(e){return Object(a.a)(e,1)[0]}))};var tn=function(e){var t=e.createBlock,n=void 0===t?function(){}:t,o=e.scrollContainer,i=void 0===o?window:o,s=e.showBlockMenu,l=void 0===s||s,u=H().getString,d=he().loggedIn,b=Object(c.useRef)(null),j=Object(c.useRef)(null),p=Object(c.useRef)(null),O=Object(c.useState)(43),h=Object(a.a)(O,2),x=h[0],g=h[1],k=Object(c.useState)(0),w=Object(a.a)(k,2),C=w[0],I=w[1],N=Object(c.useState)({}),S=Object(a.a)(N,2),F=S[0],R=S[1],E=Object(c.useState)({}),T=Object(a.a)(E,2),A=T[0],D=T[1],L=Object(c.useState)([]),G=Object(a.a)(L,2),W=G[0],z=G[1],q=Object(c.useState)([]),U=Object(a.a)(q,2),$=U[0],J=U[1],Z=Object(c.useState)(""),X=Object(a.a)(Z,2),K=X[0],Y=X[1],Q=Object(c.useRef)({}),ee=Object(c.useState)(!1),te=Object(a.a)(ee,2),ne=te[0],re=te[1],ae=Object(c.useState)({person:!0,page:!0,redirect:!0}),ce=Object(a.a)(ae,2),oe=ce[0],ie=ce[1],se=en(oe),le=Object(c.useState)(!1),ue=Object(a.a)(le,2),de=ue[0],be=ue[1],je=function(){var e=Object(c.useState)(Kt()),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){r(Kt())}),150)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),{height:n}}().height,pe=Object(c.useCallback)((function(){j.current&&b.current&&setTimeout((function(){var e=b.current.getBoundingClientRect(),t=je-e.top,n=j.current.getBoundingClientRect().height;if("number"===typeof n&&!isNaN(n)&&n>43){var r=Math.min(t,n);g(~~r),I(~~Math.max(n-r,0))}}),100)}),[je,j,b,g,I]);Object(We.useScrollPosition)(pe,[pe],null,!1,300,i);var Oe=Object(c.useCallback)((function(e){if(e.length>0){e=e.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{isOpen:A[e._id]||!1})}));var t=function(e){var t,n=[],a=Object(r.a)(e);try{var c=function(){var r=t.value,a=null;r.block.parent&&(a=e.find((function(e){return e._id===r.block.parent}))),a?(a.children||(a.children=[]),a.children.push(r)):n.push(r)};for(a.s();!(t=a.n()).done;)c()}catch(o){a.e(o)}finally{a.f()}return n}(JSON.parse(JSON.stringify(e))),n=function(e){for(var t=[],n=Yt(e),r=!1;!r;){var a=n.next(),c=a.done,o=a.value;(r=c)||t.push(o)}return t}(t);z(n)}else z([]);pe()}),[z,pe,A]),fe=Jt(),xe=Object(c.useCallback)((function(e){var t=e||{},n=t.force,r=void 0!==n&&n,a=t.filteredTypes,c=t.archived;!0!==r&&Q.current.archived===c&&Q.current.types===a||(Q.current.types=a,Q.current.archived=c,fe({types:a,archived:c}).then(function(){var e=Object(B.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.map((function(e){return{_id:e._id,block:e,children:[],isOpen:!1}})),R(n),Oe(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)})))}),[fe,R,Oe]);Object(c.useEffect)((function(){var e=W;if(K.length>0){var t=K.toLowerCase();e=e.filter((function(e){return!!(e&&e.block&&e.block.properties&&e.block.properties.text&&e.block.properties.text.toLowerCase().includes(t))||!!(e&&e.block&&e.block.properties&&e.block.properties.trigger&&e.block.properties.trigger.path&&e.block.properties.trigger.path.toLowerCase().includes(t))}))}!0===ne&&(e=e.filter((function(e){return!!e&&!!e.block&&!!e.block.computed&&!!e.block.computed.roles&&(e.block.computed.roles.includes("owner")||e.block.computed.roles.includes("editor"))}))),J(e),pe()}),[K,ne,W,J,pe]);var ge=Object(c.useCallback)((function(e){Y(e.target.value||"")}),[Y]),ve=Object(c.useCallback)((function(e){var t=Object(f.a)({},oe);t[e]=!t[e],Object.values(t).every((function(e){return!1===e}))||ie(t)}),[oe,ie]);Object(c.useEffect)((function(){xe({filteredTypes:en(oe),archived:de})}),[oe,de,xe]);var me=Object(c.useCallback)((function(e){A[e]=!A[e],D(A),Oe(F)}),[D,A,Oe,F]),_e=Object(c.useCallback)((function(e){xe(Object(f.a)(Object(f.a)({},e),{},{filteredTypes:en(oe),archived:de}))}),[oe,de,xe]),ye=function(e){return Object(M.jsx)(Qt,Object(f.a)({createBlock:n,toggleOpenById:me,refetchData:_e,showBlockMenu:l},e))};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center",margin:"0 0 var(--basis_x2) 0"},children:[Object(M.jsx)("input",{type:"text",placeholder:u("search"),style:{width:"100%"},onChange:ge}),Object(M.jsxs)(Te,{trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{flexShrink:"0"},children:Object(M.jsx)(Ut.a,{className:"icon"})}))},children:[Object(M.jsx)("div",{style:{marginTop:"8px"}}),Object.keys(oe).map((function(e){return Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:function(){return ve(e)},selected:se.includes(e),sx:{marginTop:"2px !important",marginBottom:"2px !important"},children:[Object(M.jsx)(m.a,{children:Xt[e]}),Object(M.jsx)(_.a,{children:Object(M.jsx)(V,{id:"block_menu_type_label_plural_"+e})})]},e)})),d&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(y.a,{style:{opacity:.2}}),Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:function(){be((function(e){return!e}))},selected:!0===de,sx:{marginBottom:"2px !important"},children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Ye.a,{className:"icon"})}),Object(M.jsx)(_.a,{children:Object(M.jsx)(V,{id:!0===de?"filter_menu_showing_archiv":"filter_menu_show_archiv"})})]}),Object(M.jsxs)(v.a,{className:"roundMenuItem",onClick:function(){re((function(e){return!e}))},selected:!0===ne,children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Qe.a,{className:"icon"})}),Object(M.jsx)(_.a,{children:Object(M.jsx)(V,{id:!0===ne?"filter_menu_showing_editing":"filter_menu_show_editing"})})]})]})]}),Object(M.jsx)("button",{className:"text hasIcon",onClick:_e,style:{flexShrink:"0"},children:Object(M.jsx)($t.a,{className:"icon"})})]}),Object(M.jsxs)("div",{style:{height:x,marginRight:"-12px",marginLeft:"-12px",marginBottom:C},ref:b,children:[Object(M.jsx)(Ve.a,{disableWidth:!0,children:function(e){var t=e.height;return Object(M.jsx)(Ge.a,{itemData:$,itemCount:$.length,ref:p,innerRef:j,itemSize:43,height:t,width:"100%",style:{overflowY:"hidden",overflowX:"auto"},itemKey:function(e,t){return t[e]._id},children:ye})}}),0===$.length?Object(M.jsx)("p",{style:{textAlign:"center",fontWeight:"bold"},children:Object(M.jsx)(V,{id:"blocktree_no_nodes_to_show"})}):null]})]})};function nn(){var e=Object(c.useRef)(!1);Object(c.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]);var t=Object(c.useState)(!1),n=Object(a.a)(t,2),r=n[0],o=n[1],i=Object(c.useCallback)((function(){e.current&&function(e,t,n){var r;return function(){var a=this,c=arguments,o=function(){r=null,n||e.apply(a,c)},i=n&&!r;clearTimeout(r),r=setTimeout(o,t),i&&e.apply(a,c)}}((function(){e.current&&o(!0)}),10)()}),[o,e]);Object(c.useEffect)((function(){i()}),[i]);var s=he().loggedIn,l=on().toggleSidebar,u=Object(b.f)("/"),d=ue(),j=Object(b.g)(),p=Object(c.useCallback)((function(e){d(e).then((function(e){j("/".concat(e._id,"/edit"))})).catch((function(e){console.error(e)}))}),[d,j]),O=Object(c.useRef)(null);return Object(M.jsx)("div",{ref:O,className:x.a.scrollContainer,children:Object(M.jsxs)("div",{className:x.a.content,children:[Object(M.jsx)("header",{className:x.a.header,children:Object(M.jsxs)("div",{className:x.a.headerBar,children:[u?Object(M.jsx)("h1",{children:"VoltLink"}):Object(M.jsx)("button",{onClick:l,className:"text hasIcon",style:{margin:"0"},children:Object(M.jsx)(k.a,{className:"icon"})}),Object(M.jsx)(Me,{trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({className:"default hasIcon"},e),{},{children:Object(M.jsx)(w.a,{className:"icon"})}))},createBlock:p})]})}),Object(M.jsxs)(g.a,{style:{maxWidth:"100%"},children:[s?Object(M.jsx)("a",{href:"".concat(window.domains.backend,"logout?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(M.jsxs)(v.a,{className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(C.a,{})}),Object(M.jsx)(_.a,{primary:Object(M.jsx)(V,{id:"logout"})})]})}):Object(M.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(M.jsxs)(v.a,{className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(I.a,{})}),Object(M.jsx)(_.a,{primary:Object(M.jsx)(V,{id:"login"})})]})}),Object(M.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:Object(M.jsxs)(v.a,{className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(N.a,{})}),Object(M.jsx)(_.a,{primary:Object(M.jsx)(V,{id:"contact"})})]})}),Object(M.jsx)("a",{href:"https://github.com/voltbonn/",target:"_blank",rel:"noopener noreferrer",children:Object(M.jsxs)(v.a,{className:"roundMenuItem",children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(S.a,{})}),Object(M.jsx)(_.a,{primary:Object(M.jsx)(V,{id:"source_code"})})]})})]}),Object(M.jsx)("br",{}),Object(M.jsx)(y.a,{style:{opacity:.2}}),Object(M.jsx)("br",{}),r?Object(M.jsx)(tn,{showBlockMenu:!0,scrollContainer:O}):null]})})}var rn=n(154),an=n.n(rn),cn=Object(c.createContext)({});function on(){return Object(c.useContext)(cn)}function sn(e){var t=e.children,n=Object(c.useState)(!1),r=Object(a.a)(n,2),o=r[0],i=r[1],s=!Object(b.f)("/")&&o,l=Object(c.useCallback)((function(){i((function(e){return!e}))}),[i]);return Object(M.jsx)(cn.Provider,{value:{open:s,setOpen:i,toggleSidebar:l},children:t})}function ln(){var e=on(),t=e.open,n=e.toggleSidebar,r="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),a=O("(min-width: 960px)");return t?Object(M.jsx)(p.a,{variant:a?"permanent":"temporary",anchor:"left",open:t,onOpen:n,onClose:n,disableBackdropTransition:!r,disableDiscovery:r,sx:Object(j.a)({width:320,flexShrink:0},"& .MuiDrawer-paper",{width:320,boxSizing:"border-box",backgroundColor:"var(--background-contrast)",color:"var(--on-background)",border:"none"}),PaperProps:{sx:{background:"var(--background-contrast)",color:"var(--on-background)"}},children:Object(M.jsx)(nn,{})}):null}function un(e){var t=e.children,n=on().open;return Object(M.jsx)("main",{className:"".concat(an.a.main," ").concat(n?an.a.open:""),style:{"--sidebarWidth":"320px"},children:t})}var dn=n(116),bn=n.n(dn);var jn=function(){var e=H().getString,t=Object(J.a)(),n=Object(te.b)(),r=n.enqueueSnackbar,a=n.closeSnackbar,o=Object(c.useCallback)((function(n){return new Promise((function(c){var o=null;if(n&&""!==n){var i=new Promise((function(i){t.query({query:de,variables:{_id:n}}).then(function(){var t=Object(B.a)(P.a.mark((function t(n){var s,l;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=n.data,i("got-data"),null!==o&&a(o),"string"!==typeof s.error&&s.block?(l=s.block,c(l)):"no_edit_permission"===s.error?r(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):r(""+s.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),i("got-error"),null!==o&&a(o),r("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=r(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else c({type:"text"})}))}),[r,a,t,e]);return o};function pn(){var e=Object(J.a)(),t=Object(c.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r){t&&""!==t?e.query({query:Oe,variables:{_id:t,roles:n}}).then(function(){var e=Object(B.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("blockMatchesRoles")?r(n.blockMatchesRoles):r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):r(!1)}))}),[e]);return t}var On=n(136),fn=n.n(On),hn=n(420),xn=n(421),gn=n(422);function vn(e){var t=e.title,n=e.block,r=void 0===n?{}:n,o=e.rightActions,i=e.notificationBanner,s=on(),l=s.open,u=s.toggleSidebar,d=Object(J.a)(),b=r?r._id:null,j=r?r.parent:null,p=Object(c.useState)([]),O=Object(a.a)(p,2),h=O[0],x=O[1],g=Object(c.useState)([]),v=Object(a.a)(g,2),m=v[0],_=v[1],y=Object(c.useCallback)((function(e){d.query({query:pe,variables:{_id:e}}).then(function(){var e=Object(B.a)(P.a.mark((function e(t){var n,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.blocks?(r=(n.blocks||[]).sort((function(e,t){return t.computed.sort-e.computed.sort})),x(r)):(console.error(n.error),x([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),x([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[d,x]),k=Object(c.useCallback)((function(e,t){d.query({query:be,variables:{roots:[e||t],types:["page","person","redirect"],archived:!1}}).then(function(){var e=Object(B.a)(P.a.mark((function e(n){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(r=n.data).error&&r.blocks?_((r.blocks||[]).filter((function(e){return e._id!==t}))):(console.error(r.error),_([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),_([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[d,_]);Object(c.useEffect)((function(){b&&(y(b),k(j,b))}),[b,j,y,k]);var w=Object(M.jsxs)(M.Fragment,{children:[l?null:Object(M.jsx)("button",{onClick:u,className:"text hasIcon",style:{margin:"0"},children:Object(M.jsx)(hn.a,{className:"icon"})}),Object(M.jsxs)("div",{style:{flexGrow:"1"},children:[Object(M.jsx)(He.b,{to:"/",children:Object(M.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(M.jsx)(xn.a,{style:{verticalAlign:"middle"}})})}),Object(M.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),b&&h.length>0?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Te,{trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(M.jsx)(gn.a,{style:{verticalAlign:"middle"}})}))},children:Object(M.jsx)("div",{style:{padding:"var(--basis_x2)"},children:h.map((function(e){return Object(M.jsx)(Vt,{block:e,size:"line"},e._id)}))})}),Object(M.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,m.length>0?Object(M.jsx)(Te,{trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(M.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:Object(M.jsx)("div",{style:{padding:"var(--basis_x2)"},children:m.map((function(e){return Object(M.jsx)(Vt,{block:e,size:"line"},e._id)}))})}):Object(M.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(M.jsxs)("header",{className:fn.a.header,children:[Object(M.jsxs)("div",{className:fn.a.headerBar,children:[w,o]}),i?Object(M.jsx)("div",{className:fn.a.notificationBanner,children:i}):null]})}function mn(e){var t=e.errorName,n="Unknown Error",r="",a="";return"no_access"===t?(n="You don't have access to this page!",r=Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h2",{children:"If you are not logged in:"}),"You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.",Object(M.jsx)("br",{}),Object(M.jsx)("h2",{children:"If you are logged in:"}),"You propably don't have access to this page."]}),a=Object(M.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(M.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(M.jsx)(I.a,{className:"icon"}),Object(M.jsx)("span",{children:Object(M.jsx)(V,{id:"login"})})]})})):"not_found"===t&&(n="We could not find the requested URL\u2026",r="The URL you requested does currently not exist. Did you type the URL correctly?",a=Object(M.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(M.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(M.jsx)(I.a,{className:"icon"}),Object(M.jsx)("span",{children:Object(M.jsx)(V,{id:"login"})})]})})),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h1",{children:n}),Object(M.jsx)("p",{children:r}),a,Object(M.jsx)("br",{})," ",Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsx)("br",{}),Object(M.jsxs)("p",{children:["Please contact ",Object(M.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:"thomas.rosen@volteuropa.org"})," if you think this is a bug.",Object(M.jsx)("br",{}),"Go to ",Object(M.jsx)("a",{href:"https://volteuropa.org",children:"volteuropa.org"})," for information about the Pan-European Political Movement."]})]})}var _n=n(93),yn=n(431),kn=n(432),wn=n(433),Cn=n(129),In=n.n(Cn),Nn=n(130),Sn=n(155),Bn=n.n(Sn),Fn=n(442),Pn=n(423),Rn=n(424),En=n(425),Tn=n(98),An=n.n(Tn),Dn=n(156),Ln=n(157),Mn=n.n(Ln),Vn=["type","defaultValue","children","className","onChange","onBlur","onError","linebreaks","style","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeFromNextInput"];function Gn(e,t){if(e.normalize(),!window.getSelection)return 0;var n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0):null;if(!r)return 0;var a=r.cloneRange();a.selectNodeContents(e),a.setEnd(r.endContainer,r.endOffset);var c=a.cloneContents(),o=0;return c.childNodes.length>0&&("first"===t?o=3===c.childNodes[0].nodeType?c.childNodes[0].length:0:"last"===t&&(o=3===c.childNodes[c.childNodes.length-1].nodeType?c.childNodes[c.childNodes.length-1].length:c.childNodes.length>1&&3===c.childNodes[c.childNodes.length-2].nodeType?c.childNodes[c.childNodes.length-2].length:0)),a.detach(),o}function Wn(e){var t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),a=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),c=e.offsetHeight-n-a,o=Object(Dn.a)(e),i=Object(Dn.b)(e);i.top=i.top-o.top,i.left=i.left-o.left;var s=i.top<i.height,l=c-i.top<i.height,u=function(e){if(e.normalize(),!window.getSelection)return 0;var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(!n)return 0;var a=n.cloneRange();a.selectNodeContents(e),a.setEnd(n.endContainer,n.endOffset);var c,o=a.cloneContents(),i=0,s=Object(r.a)(o.childNodes);try{for(s.s();!(c=s.n()).done;){var l=c.value;3===l.nodeType?i+=l.textContent.length:1===l.nodeType&&"BR"===l.nodeName&&(i+=1)}}catch(u){s.e(u)}finally{s.f()}return a.detach(),i}(e),d=e.innerText.length||0;d<0&&(d=0);var b=d-u;return{inFirstLine:s,inLastLine:l,left:i.left,top:i.top,height:i.height,positionFromLineStart:Gn(e,s?"first":"last"),positionFromStart:u,positionFromEnd:b}}var Hn=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,o=void 0===r?"":r,i=(e.children,e.className),s=e.onChange,l=e.onBlur,u=(e.onError,e.linebreaks),d=e.style,b=e.placeholder,j=void 0===b?"":b,p=e.onInputRef,O=e.onGoToPrevInput,f=e.onGoToNextInput,h=e.onSplitText,x=e.onMergeToPrevInput,g=e.onMergeFromNextInput,v=(Object(Ce.a)(e,Vn),Object(c.useRef)(null)),m=Object(c.useRef)(""),_=m.current,y=Object(c.useState)({__html:""}),k=Object(a.a)(y,2),w=k[0],C=k[1],I=Object(c.useCallback)((function(e){var t=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(e);if(m.current=e,w.__html!==t)return C({__html:t})}),[w,C]);Object(c.useEffect)((function(){_!==o&&I(o)}),[_,o,I]);var N=Object(c.useCallback)((function(e){var t=e.target.innerHTML||"";t=(t=!1===u?t.replace(/<\/? ?br ?\/?>/g," "):t.replace(/<\/? ?br ?\/?>/g,"\n")).trim(),m.current=t,s&&s(t)}),[s,u]),S=Object(c.useCallback)((function(){l&&l(_)}),[l,_]),B=Object(c.useCallback)((function(e){if("Enter"===e.key&&!0===e.shiftKey)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if("Tab"===e.key)document.execCommand("insertText",!1,"\t"),e.preventDefault();else if("ArrowUp"===e.key){if(O){var t=Wn(v.current);t.inFirstLine&&(O({caret:t}),e.preventDefault())}}else if("ArrowLeft"===e.key){if(O){var r=Wn(v.current);r.inFirstLine&&r.positionFromStart<=0&&(r.positionFromLineStart=-1,O({caret:r}),e.preventDefault())}}else if("ArrowDown"===e.key){if(f){var a=Wn(v.current);a.inLastLine&&(f({caret:a}),e.preventDefault())}}else if("ArrowRight"===e.key){if(f){var c=Wn(v.current);c.inLastLine&&c.positionFromEnd<=1&&(c.positionFromLineStart=0,f({caret:c}),e.preventDefault())}}else if("Enter"===e.key){if("code"===n)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if(h){var o=Wn(v.current),i=v.current.innerText,s=i.slice(0,o.positionFromStart),l=i.slice(o.positionFromStart);h({texts:[s,l]}),e.preventDefault()}}else if("Backspace"===e.key){if(x){var d=Wn(v.current);0===d.positionFromStart&&d.inFirstLine&&(x({caret:d,text:v.current.innerText}),e.preventDefault())}}else if("Delete"===e.key&&g){var b=Wn(v.current);0===b.positionFromEnd&&b.inLastLine&&(g({caret:b,text:v.current.innerText}),e.preventDefault())}}),[v,u,O,f,h,x,g,n]);Object(c.useEffect)((function(){p&&p(v)}),[p,v]);var F=Object(c.useCallback)((function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");!1===u&&(t=t.replace(/\n/g," ")),document.execCommand("insertText",!1,t)}),[u]);return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("div",{ref:v,onKeyDown:B,onInput:N,onBlur:S,onPaste:F,className:"".concat(Mn.a.rebuild_textarea," ").concat(0===_.length?Mn.a.show_placeholder:""," ").concat(i),contentEditable:!0,dangerouslySetInnerHTML:w,style:d,placeholder:j})})};function zn(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.info("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.info("Fallback: Copying text command was "+n)}catch(r){console.error("Fallback: Oops, unable to copy",r)}document.body.removeChild(t)}(e)}var qn=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,r=e.open,o=void 0!==r&&r,i=e.onChange,s=e.onClose,l=Object(c.useState)(""),u=Object(a.a)(l,2),d=u[0],b=u[1];Object(c.useEffect)((function(){var e=((n.properties||{}).trigger||{}).path||"";b(e)}),[n,b]);var j=Object(c.useCallback)((function(e){var t=Object(f.a)({},n.properties||{});""===e?(t.hasOwnProperty("trigger")&&delete t.trigger,t.hasOwnProperty("action")&&delete t.action):(t.trigger={type:"path",path:e},t.action={type:"render_block"}),b(e),i(t)}),[n,i,b]);return o?Object(M.jsx)(Fn.a,{open:o,onClose:s,hideBackdrop:!0,children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:An.a.backdrop,onClick:s}),Object(M.jsxs)("div",{className:An.a.dialog,children:[Object(M.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Share the link"}),Object(M.jsxs)("div",{className:An.a.inputWrapper,children:[Object(M.jsx)("span",{style:{paddingRight:"var(--basis)"},children:"volt.link/"}),Object(M.jsx)(Hn,{defaultValue:d,onBlur:j,linebreak:!1,className:An.a.input,style:{margin:"0"}})]}),Object(M.jsx)("hr",{style:{opacity:.2}}),Object(M.jsxs)("div",{className:An.a.actions,children:[""!==d?Object(M.jsxs)("div",{children:[Object(M.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://qrcode.volt.link/?c=volt.link/".concat(d),e.target="_blank",e.rel="noreferrer",e.click()},style:{marginInlineStart:"0"},children:[Object(M.jsx)(Pn.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",children:Object(M.jsx)(V,{id:"sharing_qrcode"})})]}),Object(M.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(d),e.target="_blank",e.rel="noreferrer",e.click()},children:[Object(M.jsx)(Rn.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",children:Object(M.jsx)(V,{id:"sharing_statistics"})})]}),Object(M.jsxs)("button",{className:"text hasIcon",onClick:function(){zn("https://volt.link/".concat(d))},children:[Object(M.jsx)(En.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",children:Object(M.jsx)(V,{id:"sharing_copy_url"})})]})]}):Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:s,className:"green",style:{marginInlineEnd:"0"},children:Object(M.jsx)(V,{id:"dialog_done"})})]})]})]})}):null},Un=n(117),$n=n.n(Un),Jn=n(205),Zn=n.n(Jn),Xn={_:"??",en:"English",de:"Deutsch",es:"Espa\xf1ol",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano",nl:"Nederlands",da:"Dansk",sv:"Svenska",nb:"Norsk bokm\xe5l",fi:"Suomi",mt:"Malti",pl:"J\u0119zyk polski",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",tr:"T\xfcrk\xe7e",ar:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629",el:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",ro:"limba rom\xe2n\u0103",sl:"sloven\u0161\u010dina"},Kn=Object.entries(Xn).map((function(e){var t=Object(a.a)(e,2);return{code:t[0],nativeName:t[1]}})),Yn=Object.keys(Xn);var Qn=function(e){var t=e.defaultValue,n=e.onChange,r=e.options,o=void 0===r?Yn:r;null!==t&&void 0!==t&&""!==t&&!1!==Xn.hasOwnProperty(t)||(t="_");var i=Object(c.useState)(t),s=Object(a.a)(i,2),l=s[0],u=s[1],d=Object(c.useCallback)((function(e){u(e),"_"===e&&(e=null),n&&n(e)}),[u,n]);return Object(M.jsx)(Te,{trigger:function(e,t){var n=t.isOpen;return Object(M.jsxs)("button",Object(f.a)(Object(f.a)({},e),{},{className:"default hasIcon",style:{margin:"0",flexShrink:"0"},children:[Object(M.jsx)("span",{style:{width:"100%",textAlign:"start"},children:"_"===l?Object(M.jsx)(In.a,{path:Nn.a,className:"icon"}):l.toUpperCase()}),Object(M.jsx)("span",{style:{marginLeft:"var(--basis)",lineHeight:"1",verticalAlign:"text-top"},children:n?"\u25b4":"\u25be"})]}))},paperProps:{sx:{maxHeight:"300px"}},children:function(e){var t=e.close;return Object(M.jsx)("div",{style:{padding:"var(--basis_x2) 0"},children:Kn.filter((function(e){var t=e.code;return o.includes(t)})).map((function(e){var n=e.code,r=e.nativeName;return Object(M.jsx)(v.a,{onClick:function(){d(n),t()},className:"roundMenuItem",selected:n===l,children:"_"===n?r:"".concat(n.toUpperCase()," \u2014 ").concat(r)},n)}))})}})},er=["reorderHandle","actionButton","locale","defaultValue","children","style","onChange","onBlur","className","dataset"];var tr=function(e){e.reorderHandle,e.actionButton;var t=e.locale,n=e.defaultValue,r=e.children,o=e.style,i=e.onChange,s=e.onBlur,l=e.className,u=e.dataset,d=void 0===u?{}:u,b=(Object(Ce.a)(e,er),Object(c.useState)(t)),j=Object(a.a)(b,2),p=j[0],O=j[1],f=Object(c.useState)(n),h=Object(a.a)(f,2),x=h[0],g=h[1],v=Object(c.useCallback)((function(){s&&s({value:{locale:p,text:x},dataset:d})}),[s,p,x,d]),m=Object(c.useCallback)((function(e){O(e);var t={value:{locale:e,text:x},dataset:d};i&&i(t),s&&s(t)}),[O,i,x,d,s]),_=Object(c.useCallback)((function(e){var t=e;e&&e.target&&e.target.value&&(t=e.target.value),g(t),i&&i({value:{locale:p,text:t},dataset:d})}),[g,i,p,d]);return Object(M.jsxs)("div",{className:Zn.a.input_with_local+" "+l,style:o,children:[Object(M.jsx)(Qn,{onChange:m,defaultValue:t}),r?r({onChange:_,onBlur:v,defaultValue:n,style:{flexGrow:"1"}}):null]})},nr=n(80),rr=n(446),ar=n(59),cr=n.n(ar),or=n(111),ir=n.n(or);function sr(e){var t=e.subDefaultValue,n=e.index,r=e.render,a=e.handleRowChange,o=e.isReorderable,i=e.handleAddRow,s=e.handleRemoveRow,l=e.showReorderControls,u=e.reorderLabel,d=e.showActionButton,b=e.hasOnlyOneRow,j=e.addRowByIndex;return Object(M.jsx)(nr.b,{draggableId:t.tmp_id,index:n,isDragDisabled:!0!==o,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(e){return Object(c.createElement)("div",Object(f.a)(Object(f.a)({ref:e.innerRef},e.draggableProps),{},{key:t.tmp_id,className:cr.a.row}),Object(M.jsxs)("div",{className:cr.a.form,children:[!0===o&&!0===l?Object(M.jsx)("button",Object(f.a)(Object(f.a)({"aria-label":u,className:"text ".concat(cr.a.inlineRowButton," ").concat(cr.a.dragHandleButton)},e.dragHandleProps),{},{children:Object(M.jsx)(ir.a,{})})):null,r({key:t.tmp_id,defaultValue:t,className:cr.a.item,dataset:{"data-index":n,"data-id":t.tmp_id},onChange:a,onRemoveRow:function(){return s(n)},addRowBefore:function(e){return j(n,0,e)},addRowAfter:function(e){return j(n,1,e)},reorderHandle:Object(M.jsx)("button",Object(f.a)(Object(f.a)({"aria-label":u,className:"text ".concat(cr.a.inlineRowButton," ").concat(cr.a.dragHandleButton)},e.dragHandleProps),{},{children:Object(M.jsx)(ir.a,{})})),actionButton:b?Object(M.jsx)("button",{className:"green ".concat(cr.a.inlineRowButton),onClick:i,children:"+"}):Object(M.jsx)("button",{className:"red ".concat(cr.a.inlineRowButton),"data-index":n,onClick:s,children:"\u2013"})}),!0===d?b?Object(M.jsx)("button",{className:"green ".concat(cr.a.inlineRowButton),onClick:i,children:"+"}):Object(M.jsx)("button",{className:"red ".concat(cr.a.inlineRowButton),"data-index":n,onClick:s,children:"\u2013"}):null]}))}},t.tmp_id)}function lr(e){var t=e;return"object"===typeof e&&(e.target&&(e=e.target),e.dataset&&e.dataset.index&&(t=parseInt(e.dataset.index),isNaN(t)&&(t=null))),t}var ur=function(e){var t=e.defaultValue,n=e.addDefaultValue,r=e.addButtonText,o=e.hideAddButton,i=void 0!==o&&o,s=e.reorderLabel,l=void 0===s?"Reorder":s,u=e.render,d=e.style,b=e.onChange,j=e.prependNewItems,p=e.showReorderControls,O=void 0!==p&&p,h=e.showActionButton,x=void 0===h||h,g=e.isReorderable,v=void 0!==g&&g;r||(r="Add Row");var m=Object(c.useState)([]),_=Object(a.a)(m,2),y=_[0],k=_[1],w=Object(c.useCallback)((function(){var e={};if("function"===typeof n){var t=n();"object"===typeof t&&null!==t&&("string"===typeof(e=t).tmp_id&&""!==e.tmp_id||(e.tmp_id=Object(rr.a)()))}return e}),[n]);Object(c.useEffect)((function(){var e=t;Array.isArray(t)&&0!==t.length||(e=[w()]),e=e.map((function(e){return e.tmp_id?e:Object(f.a)(Object(f.a)({},e),{},{tmp_id:Object(rr.a)()})})),k(e)}),[t,w,k]);var C=Object(c.useCallback)((function(e){var t=lr(e),n=Object(R.a)(y);n.splice(t,1);var r=b(n);Array.isArray(r)&&(n=r),k(n)}),[y,k,b]),I=Object(c.useCallback)((function(e){var t=e.dataset.index||e.dataset["data-index"],n=e.dataset.id||e.dataset["data-id"],r=e.value,a=Object(R.a)(y);"object"!==typeof r||null===r||Array.isArray(r)?a[t]={tmp_id:n,value:r}:"object"===typeof r&&(a[t]=Object(f.a)({tmp_id:n},r)),k(a),b(a)}),[y,k,b]),N=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n="object"===typeof n?Object(f.a)(Object(f.a)({},w()),n):n||w();var r=null;null!==e&&e>=0&&(r=Object(R.a)(y)).splice(e+t,0,n),k(r),b(r)}),[y,w,k,b]),S=Object(c.useCallback)((function(e){var t=w(),n=lr(e),r=null;null!==n&&n>=0?(r=Object(R.a)(y)).splice(n,0,t):r=!0===j?[t].concat(Object(R.a)(y)):[].concat(Object(R.a)(y),[t]),k(r),b(r)}),[y,w,k,b,j]),B=1===y.length,F=Object(M.jsx)("div",{style:{textAlign:"right"},children:Object(M.jsx)("button",{className:"green ".concat(cr.a.addRowButton),onClick:S,children:r})});return Object(M.jsxs)("div",{style:d,children:[!1===i&&!B&&j?Object(M.jsx)("div",{style:{marginBottom:"var(--basis)"},children:F}):null,Object(M.jsx)(nr.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var r=Array.from(e),c=r.splice(t,1),o=Object(a.a)(c,1)[0];return r.splice(n,0,o),r}(y,e.source.index,e.destination.index);k(t),b(t)}},children:Object(M.jsx)(nr.c,{droppableId:"list",isDropDisabled:!0!==v,children:function(e){return Object(M.jsxs)("div",Object(f.a)(Object(f.a)({ref:e.innerRef},e.droppableProps),{},{children:[y.filter((function(e){return e.tmp_id})).map((function(e,t){return Object(M.jsx)(sr,{subDefaultValue:e,index:t,render:u,handleRowChange:I,isReorderable:v,handleAddRow:S,handleRemoveRow:C,showReorderControls:O,reorderLabel:l,showActionButton:x,hasOnlyOneRow:B,addRowByIndex:N},e.tmp_id)})),e.placeholder]}))}})}),!1!==i||B||j?null:F]})},dr=["defaultValue"],br=["onChange"];function jr(e){var t=e.onSaveProperty,n=e.block,r=e.isFirst,a=function(){return{locale:null,text:""}},o=n.properties.translations||[];0===o.length&&(o=[a]);var i=Object(c.useCallback)((function(e){e=e.map((function(e){return{locale:e.locale||null,text:e.text||""}})),t("translations",e)}),[t]),s=Object(c.useCallback)((function(e){t("locale",e)}),[t]),l=Object(f.a)({},n);return!0===r&&"page"===l.type&&(l.type="text",l.properties.text_style="h1"),Object(M.jsxs)("div",{style:{width:"100%"},children:[Object(M.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",marginBottom:"var(--basis)",gap:"var(--basis)"},children:[Object(M.jsx)(Qn,{onChange:s,defaultValue:n.properties.locale||null}),Object(M.jsx)(Vt,{block:l,style:{margin:"0",minHeight:"30px"},actions:{click:!1}})]}),Object(M.jsx)(ur,{onChange:i,defaultValue:o,addDefaultValue:a,addButtonText:"+",render:function(e){var t=e.defaultValue,n=Object(Ce.a)(e,dr),r=n.onChange,a=Object(Ce.a)(n,br),c=t.locale,o=t.text;return Object(M.jsx)(tr,Object(f.a)(Object(f.a)({onBlur:r,locale:c,defaultValue:o,style:{marginBottom:"var(--basis)"}},a),{},{children:function(e){return Object(M.jsx)(Hn,Object(f.a)(Object(f.a)({},e),{},{style:Object(f.a)(Object(f.a)({},e.style),{},{margin:"0"})}))}}))}})]})}var pr=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,r=e.open,o=void 0!==r&&r,i=e.onSaveProperty,s=e.onClose,l=Object(c.useState)([]),u=Object(a.a)(l,2),d=u[0],b=u[1],p=Jt();Object(c.useEffect)((function(){function e(){return(e=Object(B.a)(P.a.mark((function e(){var t,r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(R.a)(n.content.filter((function(e){return e.hasOwnProperty("blockId")&&e.hasOwnProperty("block")})).map((function(e){return e.blockId||e.block._id}))),r=[],!(t.length>0)){e.next=6;break}return e.next=5,p({ids:t});case 5:r=e.sent;case 6:return a=t.map((function(e){var t=r.find((function(t){return t._id===e}));return t&&"divider"!==t.type&&t.properties.text?t:null})).filter(Boolean),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===d.length?function(){return e.apply(this,arguments)}().then((function(e){var t=[n].concat(Object(R.a)(e));b(t)})):JSON.stringify(n)!==JSON.stringify(d[0])&&b([n].concat(Object(R.a)(d.slice(1))))}),[n,p,b,d]);var O=ue(),h=Object(c.useCallback)((function(e,t,n){var r=Object(f.a)(Object(f.a)({},e),{},{properties:Object(f.a)(Object(f.a)({},e.properties),{},Object(j.a)({},t,n))});O(r).then((function(e){var t=r._id,n=d.findIndex((function(e){return e._id===t})),a=[].concat(Object(R.a)(d.slice(0,n)),[r],Object(R.a)(d.slice(n+1)));b(a)}))}),[O,d,b]);return o?Object(M.jsx)(Fn.a,{open:o,onClose:s,hideBackdrop:!0,style:{zIndex:"1000"},children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:$n.a.backdrop,onClick:s}),Object(M.jsxs)("div",{className:$n.a.dialog,children:[Object(M.jsxs)("div",{className:$n.a.actions,children:[Object(M.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:Object(M.jsx)(V,{id:"translate_dialog_title"})}),Object(M.jsx)("button",{onClick:s,className:"green",style:{marginInlineEnd:"0"},children:Object(M.jsx)(V,{id:"dialog_done"})})]}),Object(M.jsx)("p",{children:Object(M.jsx)(V,{id:"translate_dialog_description"})}),Object(M.jsx)("hr",{style:{opacity:.2}}),d.flatMap((function(e,t){return[Object(M.jsx)("hr",{style:{opacity:0}},"hr-"+t),Object(M.jsx)("div",{style:{margin:"var(--basis_x4) 0"},children:Object(M.jsx)(jr,{onSaveProperty:e._id===n._id?i:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h.apply(void 0,[e].concat(n))},block:e,isFirst:0===t})},"div-"+t)]})),Object(M.jsx)("hr",{style:{opacity:.2}}),Object(M.jsxs)("div",{className:$n.a.actions,children:[Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:s,className:"green",style:{marginInlineEnd:"0"},children:Object(M.jsx)(V,{id:"dialog_done"})})]})]})]})}):null},Or=n(426),fr=n(427),hr=n(428),xr=n(206),gr=n.n(xr),vr=["children","className","style"];var mr=function(e){var t=e.children,n=e.className,r=e.style,o=(Object(Ce.a)(e,vr),Object(c.useState)("")),i=Object(a.a)(o,2),s=i[0],l=i[1];return Object(M.jsxs)("div",{className:n,style:r,children:[t({setError:l}),s?Object(M.jsx)("div",{className:gr.a.error,children:s.split("\n").map((function(e){return Object(M.jsx)("p",{children:e},e)}))}):null]})},_r=["multiple","onChange","onError"],yr=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,kr=/((?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?))/gi;var wr=function(e){var t=e.multiple,n=void 0!==t&&t,r=e.onChange,a=e.onError,o=Object(Ce.a)(e,_r),i=Object(c.useCallback)((function(e){if(r||a){var t=e.target.value||"",c=!1,o="";if(""!==t)if(!0===n){var i=t.match(kr);i?(t=i,c=!0):o="Invalid email(s) format"}else t.match(yr)?c=!0:o="invalid_email";r&&r(c?t:!0===n?[]:""),a&&a(o)}}),[n,r,a]);return Object(M.jsx)("input",Object(f.a)({type:"email",onChange:i},o))},Cr=n(67),Ir=n.n(Cr);function Nr(e){var t=e.role;return Object(M.jsx)(V,{id:"role_"+t})}function Sr(e){var t=e.role,n=e.trigger,r=e.changeRole,c=e.removePermission,i=o.a.useState(null),s=Object(a.a)(i,2),l=s[0],u=s[1],d=Boolean(l),b=function(){u(null)};return Object(M.jsxs)(M.Fragment,{children:[n({onClick:function(e){u(e.currentTarget)}}),Object(M.jsxs)(rt.a,{anchorEl:l,open:d,onClose:b,MenuListProps:{style:{maxWidth:"100%"}},children:["editor"===t?Object(M.jsxs)(v.a,{onClick:function(){return r("viewer")},children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Xe.a,{})}),Object(M.jsx)(_.a,{children:Object(M.jsx)(Nr,{role:"viewer"})})]}):Object(M.jsxs)(v.a,{onClick:function(){return r("editor")},children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Or.a,{})}),Object(M.jsx)(_.a,{children:Object(M.jsx)(Nr,{role:"editor"})})]}),"function"===typeof c?Object(M.jsxs)(v.a,{onClick:c,children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(fr.a,{})}),Object(M.jsx)(_.a,{children:"Remove"})]}):null,Object(M.jsx)(y.a,{style:{opacity:.2}}),Object(M.jsxs)(v.a,{onClick:b,children:[Object(M.jsx)(m.a,{children:Object(M.jsx)(Ne.a,{})}),Object(M.jsx)(_.a,{children:"Close"})]})]})]})}function Br(e){var t=e.filter((function(e){return"owner"===e.role})).sort((function(e,t){return e.email.localeCompare(t.email)})),n=e.filter((function(e){return"@volteuropa.org"===e.email||"@public"===e.email})).sort((function(e,t){return e.email.localeCompare(t.email)})),r=e.filter((function(e){return"owner"!==e.role&&"@volteuropa.org"!==e.email&&"@public"!==e.email})).sort((function(e,t){return e.email.localeCompare(t.email)}));return[].concat(Object(R.a)(t),Object(R.a)(n),Object(R.a)(r))}var Fr=function(e){var t=e.defaultPermissions,n=e.open,o=void 0!==n&&n,i=e.onChange,s=e.onClose,l=H().getString,u=he(),d="";u&&u.user&&u.user.email&&(d=u.user.email);var b=Object(c.useState)(0),j=Object(a.a)(b,2),p=j[0],O=j[1],h=Object(c.useState)([]),x=Object(a.a)(h,2),g=x[0],v=x[1],m=Object(c.useState)([]),_=Object(a.a)(m,2),y=_[0],k=_[1],w=Object(c.useState)("editor"),C=Object(a.a)(w,2),I=C[0],N=C[1],S=Object(c.useCallback)((function(e){var t;(t=e||[],e=Object(R.a)(t).map((function(e){var t=Object(f.a)({},e);return t.tmp_id=Object(rr.a)(),t})),""!==d)&&(0===e.filter((function(e){return"owner"===e.role})).length&&e.unshift({tmp_id:Object(rr.a)(),email:d,role:"owner"}));v(e)}),[d,v]);Object(c.useEffect)((function(){var e=t["/"];Array.isArray(e)?S(e):S([])}),[S,t]);var B=Object(c.useCallback)((function(e){var t=g.filter((function(t){return t.email!==e}));"@volteuropa.org"===e&&(t=t.filter((function(e){return"@public"!==e.email}))),0===t.filter((function(e){return"owner"===e.role})).length&&(t=t.filter((function(e){return e.email!==d}))).unshift({tmp_id:Object(rr.a)(),email:d,role:"owner"}),v(t),i({"/":t})}),[g,d,v,i]),F=Object(c.useCallback)((function(e,t){var n=g.map((function(n){return n.email===e?Object(f.a)(Object(f.a)({},n),{},{role:t}):n}));v(n),i({"/":n})}),[g,v,i]),P=Object(c.useCallback)((function(e,t){e.includes("@public")&&e.push("@volteuropa.org");var n,a=g.filter((function(t){return!e.includes(t.email)})),c=Object(r.a)(e);try{for(c.s();!(n=c.n()).done;){var o=n.value;a.unshift({tmp_id:Object(rr.a)(),email:o,role:t})}}catch(s){c.e(s)}finally{c.f()}0===a.filter((function(e){return"owner"===e.role})).length&&(a=a.filter((function(e){return e.email!==d}))).unshift({tmp_id:Object(rr.a)(),email:d,role:"owner"}),v(a),i({"/":a})}),[g,d,v,i]),E=Object(c.useCallback)((function(){P(y,I),k([]),O((function(e){return e+1}))}),[y,I,P]);if(!o)return null;var T=0===g.filter((function(e){return"@volteuropa.org"===e.email})).length,A=0===g.filter((function(e){return"@public"===e.email})).length;return Object(M.jsx)(Fn.a,{open:o,onClose:s,hideBackdrop:!0,children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:Ir.a.backdrop,onClick:s}),Object(M.jsxs)("div",{className:Ir.a.dialog,children:[Object(M.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Give viewing and editing rights"}),Object(M.jsxs)("p",{children:["Enter @volteuropa.org addresses to give editing rights.",Object(M.jsx)("br",{}),"Groups addresses are not supported."]}),Object(M.jsxs)("div",{className:Ir.a.inputWrapper,children:[Object(M.jsx)(mr,{className:Ir.a.input,children:function(e){var t=e.setError;return Object(M.jsx)(wr,{multiple:!0,onError:t,defaultValue:"",onChange:k,"aria-label":l("path_editor_permissions_edit_label"),placeholder:l("path_editor_permissions_edit_placeholder"),style:{flexGrow:"1",margin:"var(--basis) 0",width:"calc(100% - var(--basis_x2))"}})}}),Object(M.jsx)(Sr,{role:I,changeRole:N,trigger:function(e){return Object(M.jsxs)("button",Object(f.a)(Object(f.a)({className:Ir.a.menuButton},e),{},{children:[Object(M.jsx)(Nr,{role:I})," ",Object(M.jsx)(hr.a,{})]}))}})]},p),y.length>0&&y[0].length>0?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("hr",{}),Object(M.jsxs)("div",{className:Ir.a.actions,children:[Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:E,className:"green",style:{margin:"0"},children:y.length>1?"Add People":"Add Person"})]})]}):Object(M.jsxs)(M.Fragment,{children:[T||A?Object(M.jsxs)("div",{style:{marginTop:"var(--basis_x2)"},children:["Make visible for\u2026",T?Object(M.jsx)("button",{onClick:function(){return P(["@volteuropa.org"],"viewer")},children:"Volt Europa"}):null,A?Object(M.jsx)("button",{onClick:function(){return P(["@public"],"viewer")},children:"Public"}):null]}):null,0===g.length?null:Object(M.jsx)("hr",{style:{opacity:.2}}),Br(g).map((function(e){return Object(M.jsxs)("div",{className:Ir.a.permissionRow,children:["@public"===e.email?Object(M.jsx)("strong",{children:"Public"}):"@volteuropa.org"===e.email?Object(M.jsx)("strong",{children:"Volt Europa"}):Object(M.jsx)("span",{children:e.email}),"owner"===e.role?Object(M.jsx)("strong",{className:"type_button ".concat(Ir.a.ownerInfo),children:Object(M.jsx)(Nr,{role:e.role})}):Object(M.jsx)(Sr,{role:e.role,removePermission:function(){return B(e.email)},changeRole:function(t){return F(e.email,t)},trigger:function(t){return Object(M.jsxs)("button",Object(f.a)(Object(f.a)({className:Ir.a.menuButton},t),{},{children:[Object(M.jsx)(Nr,{role:e.role})," ",Object(M.jsx)(hr.a,{})]}))}})]},e.tmp_id)})),Object(M.jsx)("hr",{style:{opacity:.2}}),Object(M.jsxs)("div",{className:Ir.a.actions,children:[Object(M.jsx)("div",{}),Object(M.jsx)("button",{onClick:s,className:"green",style:{margin:"0"},children:Object(M.jsx)(V,{id:"dialog_done"})})]})]})]})]})})},Pr=n(81),Rr=n.n(Pr);var Er=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,o=e.onBlur,i=e.style,s=e.className,l=e.disabled,u=void 0!==l&&l,d=Object(c.useState)(Boolean(n)),b=Object(a.a)(d,2),j=b[0],p=b[1],O=Object(c.useCallback)((function(){r&&r(j),o&&o(j)}),[r,o,j]),h=Object(c.useCallback)((function(){!0!==u&&(O(),p(!0))}),[u,O,p]),x=Object(c.useCallback)((function(){!0!==u&&(O(),p(!1))}),[u,O,p]);return Object(M.jsx)("div",{style:Object(f.a)({display:"inline-block",padding:"var(--basis)",cursor:!0===u?"default":"pointer",verticalAlign:"middle"},i),className:s,children:j?Object(M.jsx)(_e.a,{onClick:x}):Object(M.jsx)(Bt.a,{onClick:h})})},Tr=n(78),Ar=n.n(Tr),Dr=n(429);var Lr=function(e){var t=e.ariaLabel,n=e.items,r=e.defaultValue,o=e.onChange,i=e.style,s=e.className,l=Object(c.useState)(),u=Object(a.a)(l,2),d=u[0],b=u[1];Object(c.useEffect)((function(){return b(r)}),[r,b]);var j=Object(c.useCallback)((function(e){var t=e.target.dataset.value;b(t),o&&o(t)}),[b,o]);return Object(M.jsx)("div",{"aria-label":t,className:"buttonRow "+(s||""),style:Object(f.a)({display:"inline-block"},i),children:n.map((function(e){var t=e.value,n=e.title,r=e.icon||null;return Object(M.jsx)("button",{className:"default ".concat(d===t?"choosen":""," ").concat(r?"hasIcon":""),onClick:j,"data-value":t,children:Object(M.jsxs)("span",{style:{pointerEvents:"none"},children:[r||null,n?Object(M.jsx)("span",{style:{verticalAlign:"middle"},children:n}):null]})},t+"_"+n)}))})},Mr=/^([\+-\.0-9A-Z\u017F\u212A]+:(?:\/\/)?)[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+(?:\.[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+)+[!#-;=\?-\[\]_a-z~\xC0-\xFF\u017F\u1E9E\u212A\u212B]+$/gi,Vr=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Gr=/^(?:(?![\/:])[\s\S])+@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/gi;var Wr=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,o=e.onBlur,i=e.onError,s=e.placeholder,l=void 0===s?"https://":s,u=e.style,d=e.className,b=Object(c.useState)(n),j=Object(a.a)(b,2),p=j[0],O=j[1],f=Object(c.useCallback)((function(e){var t=e.target.value||"",n="";if(""!==t){var a=t.split(":"),c=a.shift(),o=a.join(":");"tel"===c||("mailto"===c||t.match(Gr)?o.match(Vr)||(n="invalid_mailto_url"):t.match(Mr)||(n="invalid_url"))}r&&r(t),i&&i(n),O(t)}),[r,i]),h=Object(c.useCallback)((function(){o&&o(p)}),[o,p]);return Object(M.jsx)("input",{type:"url",onChange:f,onBlur:h,defaultValue:n,placeholder:l,style:u,className:d})},Hr=n.p+"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png",zr=n.p+"static/media/Aktion.89c1bcdf.png",qr=n.p+"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png",Ur=n.p+"static/media/Welcome-to-Volt.39e04eca.png",$r=n.p+"static/media/portugal.682fc2e3.jpg",Jr=["closePopover"];var Zr=G((function(e){var t=e.getString,n=e.coverphotoValue,r=e.iconValue,a=e.onChange,c=e.className,o=void 0===c?"":c,i=e.style,s=void 0===i?{}:i,l=function(e){a({type:"url",url:e})},u=new RegExp("^(?:[a-z]+:)?//","i"),d="",b=!1,j=!1;return"object"!==typeof n||null===n||Array.isArray(n)||"url"===n.type&&"string"===typeof n.url&&u.test(n.url)&&(b=!0,d=n.url||""),"object"!==typeof r||null===r||Array.isArray(r)||"url"===r.type&&"string"===typeof r.url&&u.test(r.url)&&(j=!0),Object(M.jsx)("div",{className:"\n      ".concat(Ar.a.root,"\n      ").concat(b?Ar.a.coverphotoIsSet:Ar.a.coverphotoIsNotSet,"\n      ").concat(j?Ar.a.iconIsSet:Ar.a.iconIsNotSet,"\n      ").concat(o,"\n    "),style:s,children:Object(M.jsx)(Pe,{trigger:function(e){return Object(M.jsx)("div",{className:Ar.a.coverphoto,style:{backgroundImage:b?"url(".concat(window.domains.backend,"download_url?f=jpg&w=1400&h=400&url=").concat(encodeURIComponent(n.url),")"):""},children:Object(M.jsx)("div",{className:Ar.a.button_wrapper,children:Object(M.jsxs)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon ".concat(Ar.a.changeCoverphotoButton),children:[Object(M.jsx)(Dr.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Set Coverphoto"})]}))})})},children:function(e){var n=e.closePopover,r=Object(Ce.a)(e,Jr);return Object(M.jsxs)(Ie.a,Object(f.a)(Object(f.a)({},r),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(M.jsx)("h3",{style:{marginTop:"0"},children:Object(M.jsx)(V,{id:"path_editor_coverphoto_label"})}),Object(M.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(M.jsx)(V,{id:"path_editor_coverphoto_info"})}),Object(M.jsx)(mr,{children:function(e){var t=e.setError;return Object(M.jsx)(Wr,{onError:t,onChange:l,defaultValue:d,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(M.jsx)(Lr,{onChange:l,ariaLabel:t("path_editor_coverphoto_label"),defaultValue:d,items:[{value:"",title:t("path_editor_no_coverphoto")}].concat(Object(R.a)([{value:"https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg",icon:qr},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg",icon:Ur},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg",icon:Hr},{value:"https://assets.volteuropa.org/2021-11/portugal.jpg",icon:$r},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg",icon:zr}].map((function(e){var t=e.value,n=void 0===t?"":t,r=e.icon,a=void 0===r?"":r;return{value:n,icon:Object(M.jsx)("img",{alt:"",src:a,className:"icon image"})}}))))}),Object(M.jsx)("hr",{}),Object(M.jsx)("button",{className:"text",onClick:n,style:{margin:0},children:"Close"})]}))}})})})),Xr=n(73),Kr=n.n(Xr),Yr=["closePopover"];var Qr=G((function(e){var t=e.coverphotoValue,n=e.iconValue,r=e.onChange,a=e.className,c=e.style,o=function(e){r({type:"url",url:e})},i=new RegExp("^(?:[a-z]+:)?//","i"),s="",l=!1,u=!1;return"object"!==typeof t||null===t||Array.isArray(t)||"url"===t.type&&"string"===typeof t.url&&i.test(t.url)&&(l=!0),"object"!==typeof n||null===n||Array.isArray(n)||"url"===n.type&&"string"===typeof n.url&&i.test(n.url)&&(u=!0,s=n.url||""),Object(M.jsx)("div",{className:"\n      ".concat(Kr.a.root,"\n      ").concat(u?Kr.a.iconIsSet:Kr.a.iconIsNotSet,"\n      ").concat(l?Kr.a.coverphotoIsSet:Kr.a.coverphotoIsNotSet,"\n      ").concat(a,"\n    "),style:c,children:Object(M.jsx)(Pe,{trigger:function(e){return Object(M.jsxs)("div",{className:Kr.a.iconWrapper,children:[Object(M.jsx)("div",{className:"".concat(Kr.a.icon," ").concat(u?"":Kr.a.no_image),style:{backgroundImage:u?"url(".concat(window.domains.backend,"download_url?f=png&w=400&h=400&url=").concat(encodeURIComponent(s),")"):""}}),Object(M.jsxs)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon ".concat(Kr.a.changeIconButton),children:[Object(M.jsx)($e.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Set Icon"})]}))]})},children:function(e){var t=e.closePopover,n=Object(Ce.a)(e,Yr);return Object(M.jsxs)(Ie.a,Object(f.a)(Object(f.a)({},n),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(M.jsx)("h3",{style:{marginTop:"0"},children:Object(M.jsx)(V,{id:"path_editor_icon_label"})}),Object(M.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(M.jsx)(V,{id:"path_editor_icon_info"})}),Object(M.jsx)(mr,{children:function(e){var t=e.setError;return Object(M.jsx)(Wr,{onError:t,onBlur:o,defaultValue:s,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(M.jsx)("hr",{}),Object(M.jsx)("button",{className:"text",onClick:t,style:{margin:0},children:"Close"})]}))}})})}));var ea=["defaultValue","onChange","onBlur","onSubmit","onError","allowExisting","placeholder"];var ta=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,o=e.onBlur,i=(e.onSubmit,e.onError),s=(e.allowExisting,e.placeholder),l=void 0===s?"de-bonn":s,u=Object(Ce.a)(e,ea),d=Object(c.useRef)(!1);Object(c.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]);var b=function(){var e=Object(J.a)(),t=Object(c.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(n){e.query({query:fe,variables:{path:t}}).then(function(){var e=Object(B.a)(P.a.mark((function e(t){var r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.data).hasOwnProperty("checkPath")?n(r.checkPath):n(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(B.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}(),j=Object(c.useState)(n),p=Object(a.a)(j,2),O=p[0],h=p[1],x=Object(c.useCallback)(function(){var e=Object(B.a)(P.a.mark((function e(t){var n,a,c,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.toLowerCase(),h(t),n=!0,a="",""===t){e.next=15;break}return e.next=7,b(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:c=e.t0,o=c.isOkay,s=c.errors,n=o,a=s.join("\n");case 15:n&&r&&r(t),i&&i(a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,b,r,i]),g=Object(c.useCallback)((function(){o&&o(O)}),[o,O]);return Object(M.jsx)(Hn,Object(f.a)({onChange:x,onBlur:g,defaultValue:n,placeholder:l,linebreaks:!1},u))};var na=function(e){var t=e.defaultValue,n=e.className,r=e.style,o=e.onChange,i=H().getString,s=Object(c.useState)({}),l=Object(a.a)(s,2),u=l[0],d=l[1];Object(c.useEffect)((function(){t.type="path",d(t)}),[t,d]);var b=Object(c.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(f.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(u)&&(d(r),o&&o(r))}}),[u,d,o]),j=u.type||"",p=null;return"click"===j?p=null:"path"===j&&(p=Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(mr,{style:{flexGrow:"1"},children:function(e){var t=e.setError;return Object(M.jsx)(ta,{onError:t,placeholder:i("trigger_input_path_placeholder"),defaultValue:u.path,onBlur:function(e){return b("path",e)},style:{flexGrow:"1",margin:"0",minWidth:"300px"}})}})})),Object(M.jsx)("div",{className:n,style:Object(f.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},r),children:p})};var ra=function(e){var t=e.defaultValue,n=e.className,r=e.style,o=e.onChange,i=H().getString,s=Object(c.useState)({}),l=Object(a.a)(s,2),u=l[0],d=l[1];Object(c.useEffect)((function(){t.type="open_url",d(t)}),[t,d]);var b=Object(c.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(f.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(u)&&(d(r),o&&o(r))}}),[u,d,o]),j=u.type||"",p=null;return"open_url"===j||"send_payload"===j?p=Object(M.jsx)(M.Fragment,{children:Object(M.jsx)(mr,{style:{flexGrow:"1",margin:"0",minWidth:"300px"},children:function(e){var t=e.setError;return Object(M.jsx)(Wr,{onError:t,onBlur:function(e){return b("url",e)},defaultValue:u.url,placeholder:i("action_input_url_placeholder"),type:"text",style:{flexGrow:1,margin:"0",width:"100%"}})}})}):"render_block"!==j&&"run_block"!==j||(p=Object(M.jsx)(Hn,{placeholder:"blockId",defaultValue:u.blockId,onBlur:function(e){return b("blockId",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"}})),Object(M.jsx)("div",{className:n,style:Object(f.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},r),children:p})};var aa=G((function(e){var t=e.getString,n=e.type,r=e.defaultProperties,o=void 0===r?{}:r,i=e.onChange,s=Object(c.useState)({}),l=Object(a.a)(s,2),u=l[0],d=l[1],b=Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={text:"string",coverphoto:"string",icon:"string",imprint:"string",privacy_policy:"string",tags:"string",checked:"boolean",trigger:"object",action:"object",pronouns:"string"},a=Object(f.a)({},u);if(r.hasOwnProperty(e))switch(r[e]){case"array":t.length>0?a[e]=t:a.hasOwnProperty(e)&&delete a[e];break;case"string":""!==t?a[e]=t:a.hasOwnProperty(e)&&delete a[e];break;case"boolean":!0===t?a[e]=!0:a.hasOwnProperty(e)&&delete a[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?a[e]=t:a.hasOwnProperty(e)&&delete a[e];break;default:a[e]=t}JSON.stringify(a)!==JSON.stringify(u)&&(d(a),!1===n&&i&&i(a))}),[u,d,i]),j=Object(c.useCallback)((function(){i&&i(u)}),[u,i]);Object(c.useEffect)((function(){d(Object(f.a)(Object(f.a)({},o),{},{text:o.text||""}))}),[o,d]);var p=null;return"checkbox"===n?p=Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:Rr.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(V,{id:"properties_editor_checked_label"})}),Object(M.jsx)(Er,{onChange:function(e){return b("checked",e)},defaultValue:Boolean(u.checked),style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"button"===n?p=Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:Rr.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(V,{id:"properties_editor_action_label"})}),Object(M.jsx)(ra,{onChange:function(e){return b("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"page"===n||"person"===n?p=Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:Rr.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(V,{id:"properties_editor_trigger_path_label"})}),Object(M.jsx)(na,{onChange:function(e){return b("trigger",e)},defaultValue:u.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"redirect"===n&&(p=Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{className:Rr.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(V,{id:"properties_editor_trigger_path_label"})}),Object(M.jsx)(na,{onChange:function(e){return b("trigger",e)},defaultValue:u.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]}),Object(M.jsxs)("div",{className:Rr.a.properties_row,children:[Object(M.jsx)("h3",{children:Object(M.jsx)(V,{id:"properties_editor_action_url_label"})}),Object(M.jsx)(ra,{onChange:function(e){return b("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})]})),Object(M.jsxs)(M.Fragment,{children:["page"===n||"person"===n||"redirect"===n?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Zr,{coverphotoValue:u.coverphoto,iconValue:u.icon,onChange:function(e){return b("coverphoto",e)}}),Object(M.jsx)(Qr,{iconValue:u.icon,coverphotoValue:u.coverphoto,onChange:function(e){return b("icon",e)}})]}):null,Object(M.jsx)("div",{className:Rr.a.main_headline,style:{paddingLeft:"calc(8 * var(--basis))"},children:Object(M.jsx)(Hn,{defaultValue:u.text,onChange:function(e){return b("text",e,!0)},onBlur:j,placeholder:t("placeholder_main_headline"),style:{padding:"var(--basis) var(--basis_x2)"},linebreaks:!0,className:"type_h1"})}),Object(M.jsx)("div",{className:Rr.a.propertiesFrame,style:null===p?{display:"none"}:null,children:p})]})})),ca=n(451);var oa=G((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.onInputRef),s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,j=(e.onAddRowAfter,r.properties||{}),p=Object(c.useState)(""),O=Object(a.a)(p,2),h=O[0],x=O[1];Object(c.useEffect)((function(){x(j.text||"")}),[j.text,x]);var g=Object(c.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]),v="type_text";j.hasOwnProperty("text_style")&&(v="type_"+j.text_style);var m=Object(tt.getBlockColor)(r).color,_={};return m&&(_.color=m),Object(M.jsx)(Hn,{defaultValue:h,onChange:x,onBlur:g,placeholder:t("placeholder_text"),style:Object(f.a)({margin:"0",backgroundColor:"transparent"},_),linebreaks:!0,className:"hide_border ".concat(v),onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return b(r)},onSplitText:u})}));var ia=G((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,j=r.properties||{},p=Object(c.useState)(j.text||""),O=Object(a.a)(p,2),h=O[0],x=O[1],g=j.action,v=void 0===g?{}:g,m=Object(c.useState)(v.url||""),_=Object(a.a)(m,2),y=_[0],k=_[1],w=Object(c.useCallback)((function(){if(o){var e=Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})});""===y?(e.properties.hasOwnProperty("trigger")&&delete e.properties.trigger,e.properties.hasOwnProperty("action")&&delete e.properties.action):(e.properties.trigger={type:"click"},e.properties.action={type:"open_url",url:y}),o(e)}}),[o,r,h,y]),C=Object(tt.getBlockColor)(r),I=C.color,N=C.colorRGB,S=C.contrastingColor,B={};return I&&(B["--on-background-rgb"]=N,B["--button-background"]=I,B["--button-color"]=S),Object(M.jsxs)("div",{style:Object(f.a)({margin:"0 0 var(--basis) 0",cursor:"auto"},B),className:"clickable_card active",children:[Object(M.jsx)(Hn,{defaultValue:h,onChange:x,onBlur:w,placeholder:t("placeholder_button"),style:Object(f.a)({margin:"0"},B),linebreaks:!0,className:"hide_border type_button default",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return b(r)},onSplitText:u}),Object(M.jsx)(mr,{children:function(e){var n=e.setError;return Object(M.jsx)(Wr,{onError:n,onChange:k,onBlur:w,type:"text",defaultValue:y,placeholder:t("action_input_url_placeholder"),style:{margin:"var(--basis) 0 0 0",width:"100%"}})}})]})})),sa=n(430);var la=G((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,a=e.onChange,o=e.onInputRef,i=e.onGoToPrevInput,s=e.onGoToNextInput,l=e.onSplitText,u=e.onMergeToPrevInput,d=e.onMergeFromNextInput,b=e.style,j=void 0===b?{}:b,p=r.properties||{},O=p.trigger,h=void 0===O?{}:O,x=p.action,g=void 0===x?{}:x,v=Object(c.useRef)(p.text||""),m=v.current,_=Object(c.useRef)(h.path||""),y=_.current,k=function(e){return _.current=e},w=Object(c.useRef)(g.url||""),C=w.current,I=function(e){return w.current=e},N=Object(c.useCallback)((function(){if(a){var e=v.current,t=_.current,n=w.current,c=Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:e})});""===t?c.properties.hasOwnProperty("trigger")&&delete c.properties.trigger:c.properties.trigger={type:"path",path:t},""===n?c.properties.hasOwnProperty("action")&&delete c.properties.action:c.properties.action={type:"open_url",url:n},a(c)}}),[a,r]),S=Object(tt.getBlockColor)(r),B=S.color,F=void 0===B?"inherit":B,P=S.colorRGB,R=void 0===P?"--on-background-rgb":P;return Object(M.jsxs)("div",{style:Object(f.a)(Object(f.a)({},j),{},{margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":R}),className:"clickable_card active",children:[Object(M.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",color:F},children:[Object(M.jsx)(we.a,{style:{margin:"var(--basis)"}}),Object(M.jsx)(Hn,{defaultValue:m,onChange:function(e){return v.current=e},onBlur:N,placeholder:t("placeholder_headline_main"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:F},linebreaks:!0,className:"hide_border type_text",onInputRef:o,onGoToPrevInput:i,onGoToNextInput:s,onMergeToPrevInput:function(){return u(r)},onMergeFromNextInput:function(){return d(r)},onSplitText:l})]}),Object(M.jsxs)("div",{style:{paddingInlineStart:"var(--basis_x8)",width:"100%",display:"flex",alignItems:"center"},children:["volt.link/",Object(M.jsx)(mr,{style:{width:"100%",marginInlineStart:"var(--basis)"},children:function(e){var n=e.setError;return Object(M.jsx)(ta,{onError:n,onChange:k,onBlur:N,defaultValue:y,placeholder:t("trigger_input_path_placeholder"),style:{margin:"var(--basis) 0",width:"100%"}})}})]}),Object(M.jsxs)("div",{style:{paddingInlineStart:"var(--basis_x8)",width:"100%",display:"flex",alignItems:"center"},children:[Object(M.jsx)(sa.a,{style:{flexShrink:0,margin:"0 var(--basis) 0 0"}}),Object(M.jsx)(mr,{style:{width:"100%"},children:function(e){var n=e.setError;return Object(M.jsx)(Wr,{onError:n,onChange:I,onBlur:N,type:"text",defaultValue:C,placeholder:t("path_editor_item_link_label"),style:{margin:"var(--basis) 0",width:"100%"}})}})]})]})}));function ua(e){var t=e.block,n=Object(tt.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(M.jsx)("hr",{style:r})}var da=G((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,j=r.properties||{},p=Object(c.useState)(j.text||""),O=Object(a.a)(p,2),h=O[0],x=O[1],g=Object(c.useRef)(Boolean(j.checked)),v=Object(c.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h,checked:g.current})}))}),[o,r,h]),m=Object(c.useCallback)((function(e){g.current=e,v()}),[v]);return Object(M.jsxs)("div",{style:{display:"flex"},children:[Object(M.jsx)(Er,{checked:g.current,onChange:m}),Object(M.jsx)(Hn,{defaultValue:h,onChange:x,onBlur:v,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return b(r)},onSplitText:u})]})}));var ba=G((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,j=r.properties||{},p=Object(c.useState)(j.text||""),O=Object(a.a)(p,2),h=O[0],x=O[1],g=Object(c.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]),v=Object(tt.getBlockColor)(r),m=v.color,_=void 0===m?"inherit":m,y=v.colorRGB,k=void 0===y?"--on-background-rgb":y;return Object(M.jsxs)("div",{style:{display:"flex",margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":k,color:_},className:"clickable_card active",children:[Object(M.jsx)(Pt.a,{style:{margin:"var(--basis)"}}),Object(M.jsx)(Hn,{defaultValue:h,onChange:x,onBlur:g,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:_},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return b(r)},onSplitText:u})]})}));var ja=G((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,j=r.properties||{},p=Object(c.useState)(j.text||""),O=Object(a.a)(p,2),h=O[0],x=O[1],g=Object(c.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]),v=Object(tt.getBlockColor)(r),m=v.color,_=void 0===m?"inherit":m,y=v.colorRGB,k=void 0===y?"--on-background-rgb":y;return Object(M.jsxs)("div",{style:{display:"flex",margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":k,color:_},className:"clickable_card active",children:[Object(M.jsx)(Rt.a,{style:{margin:"var(--basis)"}}),Object(M.jsx)(Hn,{defaultValue:h,onChange:x,onBlur:g,placeholder:t("placeholder_headline_main"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:_},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return d(r)},onMergeFromNextInput:function(){return b(r)},onSplitText:u})]})})),pa=n(99),Oa=n.n(pa),fa=["type"];function ha(e){var t=e.type,n=void 0===t?"text":t,r=Object(Ce.a)(e,fa),a=null;switch(n){case"button":a=Object(M.jsx)(ia,Object(f.a)({},r));break;case"redirect":a=Object(M.jsx)(la,Object(f.a)({},r));break;case"divider":a=Object(M.jsx)(ua,Object(f.a)({},r));break;case"checkbox":a=Object(M.jsx)(da,Object(f.a)({},r));break;case"person":a=Object(M.jsx)(ba,Object(f.a)({},r));break;case"page":a=Object(M.jsx)(ja,Object(f.a)({},r));break;default:a=Object(M.jsx)(oa,Object(f.a)({},r))}return a}var xa=G((function(e){e.fluentByObject,e.getString;var t=e.contentConfig,n=void 0===t?{}:t,r=e.className,o=e.onChange,i=e.reorderHandle,s=e.onRemoveRow,l=(e.actionButton,e.dataset),u=void 0===l?{}:l,d=e.addRowBefore,b=e.addRowAfter,j=(e.permissions,e.onInputRef),p=e.onGoToPrevInput,O=e.onGoToNextInput,h=e.onSplitText,x=e.onMergeToPrevInput,g=e.onMergeFromNextInput,v=e.onRemoveSelf,m=ue(),_=Object(c.useState)(Object(f.a)(Object(f.a)({},n.block||{type:"text"}),{},{_id:n.blockId||null})),y=Object(a.a)(_,2),k=y[0],w=y[1],C=k.properties||{},I="boolean"!==typeof C.active||C.active;Object(c.useEffect)((function(){n.block&&w(n.block)}),[n.block]);var N=Object(c.useCallback)((function(e){m(e).then((function(e){w(e),k._id&&k._id===e._id||o({blockId:e._id,block:e})}))}),[k,o,m]),S=Object(c.useCallback)((function(e){var t=Object(f.a)(Object(f.a)({},k),{},{type:e});N(t)}),[k,N]),B=Object(c.useCallback)((function(e,t){if("string"===typeof e){var n=Object(f.a)({},k.properties);if(null===t?delete n[e]:n[e]=t,n!==k.properties){var r=Object(f.a)(Object(f.a)({},k),{},{properties:n});N(r)}}}),[k,N]),F=Object(c.useCallback)((function(e){JSON.stringify(e)!==JSON.stringify(k)&&m(e).then((function(e){w(e),k._id&&k._id===e._id||o({blockId:e._id,block:e})}))}),[m,k,o]),P=Object(c.useCallback)((function(e,t){m(e).then((function(e){t&&t(e)})).catch(console.error)}),[m]),R=Object(c.useCallback)((function(e){"function"===typeof v&&v()}),[v]);return Object(M.jsxs)("div",Object(f.a)(Object(f.a)({className:"".concat(Oa.a.block," ").concat(r)},u),{},{children:[Object(M.jsx)(jt,{block:k,setType:S,setProperty:B,onRemoveRow:s,addRowBefore:d,addRowAfter:b,onArchivedToggle:R,trigger:function(e){return Object(M.jsx)("div",Object(f.a)(Object(f.a)({},e),{},{className:Oa.a.reorderHandle,children:i}))}}),Object(M.jsx)("div",{className:"".concat(Oa.a.block_input," ").concat(I?Oa.a.form_active:Oa.a.form_deactivated),children:Object(M.jsx)(ha,{type:k.type,block:k,onChange:F,onSaveBlock:P,onInputRef:j,onGoToPrevInput:p,onGoToNextInput:O,onSplitText:h,onMergeToPrevInput:x,onMergeFromNextInput:g,onAddRowAfter:b})})]}))})),ga=n(100),va=n.n(ga);function ma(e){return Object(R.a)(e).map((function(e){var t=Object(f.a)({},e);return t.tmp_id=Object(rr.a)(),t}))}function _a(e){e.normalize();var t=e.childNodes;return t.length>0?t[0]:e}function ya(e){e.normalize();var t=Object(R.a)(e.childNodes).reverse();if(t.length>0){var n=e;if(3===t[0].nodeType){var a,c=Object(r.a)(t);try{for(c.s();!(a=c.n()).done;){var o=a.value;if(3===o.nodeType)n=o;else if(1===o.nodeType)break}}catch(d){c.e(d)}finally{c.f()}}else if(t.length>1&&3===t[1].nodeType){var i,s=t.slice(1),l=Object(r.a)(s);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(3===u.nodeType)n=u;else if(1===u.nodeType)break}}catch(d){l.e(d)}finally{l.f()}}return n}return e}function ka(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.focus(),window.getSelection){var r=3===t.nodeType?t.length:t.innerText.length;(-1===n||n>r)&&(n=r);var a=document.createRange();a.setStart(t,0),a.setEnd(t,n),a.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(a)}}var wa=function(e){var t=e.parentId,n=e.defaultValue,r=void 0===n?[]:n,o=e.onChange,i=Object(c.useRef)([]),s=i.current,l=Object(c.useRef)({}),u=l.current,d=Object(c.useState)(0),b=Object(a.a)(d,2),j=b[0],p=b[1],O=Jt(),h=ue(),x=nt(),g=Object(c.useState)(null),v=Object(a.a)(g,2),m=v[0],_=v[1];Object(c.useEffect)((function(){if("object"===typeof m&&null!==m&&u.hasOwnProperty(m.tmp_id)){var e=u[m.tmp_id];if("object"===typeof e&&null!==e){if(!0===m.inFirstLine){var t=_a(e.current);ka(e.current,t,m.positionFromLineStart)}else if(!0===m.inLastLine){var n=ya(e.current);ka(e.current,n,m.positionFromLineStart)}_(null)}}}),[m,_,u]),Object(c.useEffect)((function(){function e(){return(e=Object(B.a)(P.a.mark((function e(){var t,n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(R.a)(ma(r)),n=t.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),a=[],!(n.length>0)){e.next=7;break}return e.next=6,O({ids:n});case 6:a=e.sent;case 7:t=t.map((function(e){return e.hasOwnProperty("block")||(e.block=a.find((function(t){return t._id===e.blockId}))),e})),i.current=t,p((function(e){return e+1}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===s.length&&r.length>0&&function(){e.apply(this,arguments)}()}),[s,r,O,i,p]);var y=Object(c.useCallback)((function(e,t){var n=Object(f.a)({},l.current);n.hasOwnProperty(e.tmp_id)&&n[e.tmp_id]===t||(n[e.tmp_id]=t,l.current=n)}),[l]),k=Object(c.useCallback)((function(e,t){for(var n=t.caret,r=e.index,a=null,c=s.length-1;c>=0;c--){var o=s[c].tmp_id;if(c<r&&u[o]&&u[o].current){a=u[o];break}}if(a){var i=ya(a.current);ka(a.current,i,n.positionFromLineStart)}}),[s,u]),C=Object(c.useCallback)((function(e,t){for(var n=t.caret,r=e.index,a=null,c=0;c<s.length;c++){var o=s[c].tmp_id;if(c>r&&u[o]&&u[o].current){a=u[o];break}}if(a){var i=_a(a.current);ka(a.current,i,n.positionFromLineStart)}}),[s,u]),I=Object(c.useCallback)((function(){for(var e=null,t=s.length-1;t>=0;t--){var n=s[t].tmp_id;if(u[n]&&u[n].current){e=u[n];break}}if(e){var r=ya(e.current);ka(e.current,r,-1)}}),[s,u]),N=Object(c.useCallback)((function(e,t){var n=Object(R.a)(s);for(var r in n){var a=n[r];if(a.tmp_id===e.tmp_id){n[r]=Object(f.a)(Object(f.a)({},a),t);break}}return i.current=n,o(n),new Promise((function(e){e(n)}))}),[s,i,o]),S=Object(c.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=(n="object"===typeof n?Object(f.a)({tmp_id:Object(rr.a)()},n):n||{tmp_id:Object(rr.a)()}).block||null;null===r||"number"!==typeof e||isNaN(e)||h(r).then((function(r){n.block=r,n.blockId=r._id;var a=Object(R.a)(s);a.splice(e+t,0,n),i.current=a,o(a)})).catch(console.error)}),[s,i,h,o]),F=Object(c.useCallback)((function(e){var n={type:e.type};"string"===typeof t&&t.length>0&&(n.parent=t),S(0,0,{block:n})}),[S,t]),E=Object(c.useCallback)((function(e){var t=e.index,n=Object(R.a)(s);if(t>0){var r=t-1,a=n[r],c=a.tmp_id,u=n[t].block,d=n[r].block,b=Object(f.a)(Object(f.a)({},d),{},{properties:Object(f.a)(Object(f.a)({},d.properties),{},{text:d.properties.text+u.properties.text})}),j=l.current[c].current.textContent.length;h(b).then((function(e){var n=Object(rr.a)();N({index:r,tmp_id:c},Object(f.a)(Object(f.a)({},a),{},{tmp_id:n,blockId:e._id,block:e})).then((function(e){var r=e[t].block;e.splice(t,1),x({_id:r._id,archive:!0}).then((function(){i.current=e,_({tmp_id:n,positionFromLineStart:j,inFirstLine:!1,inLastLine:!0}),o(e)}))}))})).catch(console.error)}}),[s,l,h,N,x,i,_,o]),T=Object(c.useCallback)((function(e){var t=e.index,n=e.tmp_id,r=Object(R.a)(s);if(t<r.length-1){var a=t+1,c=r[t],u=r[t].block,d=r[a].block,b=Object(f.a)(Object(f.a)({},u),{},{properties:Object(f.a)(Object(f.a)({},u.properties),{},{text:u.properties.text+d.properties.text})}),j=l.current[n].current.textContent.length;h(b).then((function(t){var n=Object(rr.a)();N(e,Object(f.a)(Object(f.a)({},c),{},{tmp_id:n,blockId:t._id,block:t})).then((function(e){var t=e[a].block;e.splice(a,1),x({_id:t._id,archive:!0}).then((function(){i.current=e,_({tmp_id:n,positionFromLineStart:j,inFirstLine:!1,inLastLine:!0}),o(e)}))}))})).catch(console.error)}}),[s,l,h,N,x,i,_,o]),A=Object(c.useCallback)((function(e,t){var n=t.texts,r=e.index,a=e.tmp_id,c=Object(R.a)(s),l=c.find((function(e){return e.tmp_id===a})).block||{},u=Object(f.a)(Object(f.a)({},l),{},{properties:Object(f.a)(Object(f.a)({},l.properties),{},{text:n[0]})}),d={type:l.type,properties:{text:n[1]}};h(u).then((function(e){h(d).then((function(t){c[r]=Object(f.a)(Object(f.a)({},c[r]),{},{tmp_id:Object(rr.a)(),blockId:e._id,block:e});var n={tmp_id:Object(rr.a)(),blockId:t._id,block:t};c.splice(r+1,0,n),i.current=c,o(c),_({tmp_id:n.tmp_id,positionFromLineStart:0,inFirstLine:!0,inLastLine:!1})})).catch(console.error)})).catch(console.error)}),[s,h,i,o,_]),D=Object(c.useCallback)((function(e){var t=e.index,n=Object(R.a)(s);n.splice(t,1),i.current=n,o(n)}),[s,o]),L=s.filter(Boolean).filter((function(e){return e.tmp_id}));return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)("div",{style:{position:"relative",width:"1000px",maxWidth:"100%",margin:"var(--basis_x8) auto 0 auto"},children:[Object(M.jsx)("div",{children:Object(M.jsx)(Me,{types:["button","text","divider","page","redirect"],createBlock:F,trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{margin:"0 0 var(--basis_x2) 0"},children:Object(M.jsxs)("span",{style:{pointerEvents:"none"},children:[Object(M.jsx)(w.a,{className:"icon"}),Object(M.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:Object(M.jsx)(V,{id:"add_content_before"})})]})}))}})}),Object(M.jsx)(nr.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var r=Array.from(e),c=r.splice(t,1),o=Object(a.a)(c,1)[0];return r.splice(n,0,o),r}(s,e.source.index,e.destination.index);i.current=t,o(t)}},children:Object(M.jsx)(nr.c,{droppableId:"list",isDropDisabled:!1,children:function(e){return Object(M.jsxs)("div",Object(f.a)(Object(f.a)({ref:e.innerRef},e.droppableProps),{},{className:"inputBorder",style:{"--input-box-shadow":"inset var(--basis_x8) 0 0 0 var(--background), inset var(--basis_x8) 0 0 var(--basis_x0_2) var(--on-background-contrast), inset 0 0 0 var(--basis_x0_2) var(--on-background-contrast)",boxShadow:"var(--input-box-shadow)",paddingTop:L.length>0?"var(--basis)":"",paddingRight:"var(--basis)"},children:[L.map((function(e,t){var n=e.tmp_id,r={index:t,tmp_id:n};return Object(M.jsx)(nr.b,{draggableId:n,index:t,isDragDisabled:!1,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(a){return Object(c.createElement)("div",Object(f.a)(Object(f.a)({ref:a.innerRef},a.draggableProps),{},{key:n,className:va.a.row}),Object(M.jsx)("div",{className:va.a.form,children:Object(M.jsx)(xa,{className:va.a.item,dataset:{"data-index":t,"data-id":n},contentConfig:e,reorderHandle:Object(M.jsx)(ca.a,{title:Object(M.jsxs)("div",{style:{textAlign:"center"},children:[Object(M.jsx)("strong",{children:"Drag"})," to move.",Object(M.jsx)("br",{}),Object(M.jsx)("strong",{children:"Click"})," to open menu."]}),children:Object(M.jsx)("button",Object(f.a)(Object(f.a)({className:"text ".concat(va.a.inlineRowButton," ").concat(va.a.dragHandleButton)},a.dragHandleProps),{},{children:Object(M.jsx)(ir.a,{})}))}),onRemoveSelf:function(){return D(r)},addRowBefore:function(e){return S(t,0,e)},addRowAfter:function(e){return S(t,1,e)},onInputRef:function(e){return y(r,e)},onGoToPrevInput:function(e){return k(r,e)},onGoToNextInput:function(e){return C(r,e)},onSplitText:function(e){return A(r,e)},onChange:function(e){return N(r,e)},onMergeToPrevInput:function(e){return E(r,e)},onMergeFromNextInput:function(e){return T(r,e)}},n)}))}},n)})),e.placeholder]}))}})})]},j),Object(M.jsx)("div",{style:{position:"relative",height:"50vh",cursor:0===L.length?"default":"text"},onClick:0===L.length?null:I})]})};var Ca=function(e){var t=e.block,n=e.onSaveBlock,r=H().getString,o=ue(),i=Object(c.useState)(!1),s=Object(a.a)(i,2),l=s[0],u=s[1],d=Object(c.useCallback)((function(){return u(!0)}),[u]),b=Object(c.useCallback)((function(){return u(!1)}),[u]),j=Object(c.useState)(!1),p=Object(a.a)(j,2),O=p[0],h=p[1],x=Object(c.useCallback)((function(){return h(!0)}),[h]),g=Object(c.useCallback)((function(){return h(!1)}),[h]),v=Object(c.useState)(!1),m=Object(a.a)(v,2),_=m[0],y=m[1],k=Object(c.useCallback)((function(){return y(!0)}),[y]),w=Object(c.useCallback)((function(){return y(!1)}),[y]),C=t.type,I=t.properties,N=t.content,S=t.permissions,B=Object(c.useCallback)((function(e){if(e!==t.type){var r=Object(f.a)(Object(f.a)({},t),{},{type:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),F=Object(c.useCallback)((function(e){if(e!==t.properties){var r=Object(f.a)(Object(f.a)({},t),{},{properties:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),P=Object(c.useCallback)((function(e,t){if("string"===typeof e){var n=Object(f.a)({},I);null===t?delete n[e]:n[e]=t,F(n)}}),[I,F]),R=Object(c.useCallback)((function(e){if(e!==t.content){var r=Object(f.a)(Object(f.a)({},t),{},{content:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),E=Object(c.useCallback)((function(e){if(e!==t.permissions){var r=Object(f.a)(Object(f.a)({},t),{},{permissions:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),T=Object(c.useCallback)((function(){o(t).then((function(e){e._id!==t._id&&n(e)}))}),[o,t,n]),A=Object(M.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[l?Object(M.jsx)(qn,{defaultBlock:t,open:l,onClose:b,onChange:F}):null,Object(M.jsxs)("button",{className:"text hasIcon",onClick:d,children:[Object(M.jsx)(yn.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(V,{id:"path_editor_share"})})]}),"divider"!==C?Object(M.jsxs)(M.Fragment,{children:[O?Object(M.jsx)(pr,{defaultBlock:t,open:O,onClose:g,onSaveProperty:P}):null,Object(M.jsxs)("button",{className:"text hasIcon",onClick:x,children:[Object(M.jsx)(In.a,{path:Nn.a,className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(V,{id:"path_editor_translate"})})]})]}):null,_?Object(M.jsx)(Fr,{defaultPermissions:S,open:_,onClose:w,onChange:E}):null,Object(M.jsxs)("button",{className:"text hasIcon",onClick:k,children:[Object(M.jsx)(kn.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(V,{id:"path_editor_permissions"})})]}),Object(M.jsxs)("button",{className:"text hasIcon",onClick:T,children:[Object(M.jsx)(wn.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(V,{id:"path_editor_publish"})})]}),Object(M.jsx)(jt,{block:t,setType:B,setProperty:P,typeOptions:["page","redirect"],trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"default hasIcon",children:Object(M.jsx)(Ht.a,{className:"icon"})}))}})]}),D=t.properties.text||r("placeholder_main_headline");return Object(M.jsxs)("div",{className:"hasHeader ".concat(Bn.a.editor," ").concat("string"===typeof C&&""!==C?Bn.a["type_"+C]:""),children:[Object(M.jsx)(_n.a,{children:Object(M.jsxs)("title",{children:["\u270d\ufe0f ",D]})}),Object(M.jsx)(vn,{block:t,title:D,rightActions:A}),Object(M.jsx)(aa,{type:C,defaultProperties:I,onChange:F}),Object(M.jsx)(wa,{parentId:t._id||null,onChange:R,defaultValue:N})]},t._id)};var Ia=function(){var e=jn(),t=Object(c.useRef)(!1),n=Object(b.h)().id,r=void 0===n?"":n,o=Object(c.useState)({type:"page",properties:{},content:[]}),i=Object(a.a)(o,2),s=i[0],l=i[1],u=Object(c.useCallback)((function(e){l(e)}),[l]),d=Object(c.useState)(null),j=Object(a.a)(d,2),p=j[0],O=j[1],f=pn();return Object(c.useEffect)((function(){f(r,["editor","owner"]).then((function(e){O(e)})).catch((function(e){console.error(e),O(!1)}))}),[r,f,O]),Object(c.useEffect)((function(){!p||"string"!==typeof r||""===r||t.current&&r===s._id||e(r).then((function(e){t.current=!0,u(e)}))}),[p,r,s,e,u]),!1===p?Object(M.jsxs)("div",{className:bn.a.editor,children:[Object(M.jsx)(vn,{block:null,title:"Error",rightActions:null}),Object(M.jsx)("div",{className:"basis_x1 ".concat(bn.a.app," ").concat(bn.a.spine_aligned),dir:"auto",children:Object(M.jsx)("main",{className:"".concat(bn.a.contentWrapper),children:Object(M.jsx)(mn,{errorName:"no_access"})})})]}):!0===p?Object(M.jsx)(Ca,{block:s,onSaveBlock:u}):null},Na=n(52),Sa=n.n(Na);var Ba=function(){var e=Object(c.useRef)(!1),t=H(),n=t.getString,r=t.translateBlock,o=t.userLocales,i=he().loggedIn,s=jn(),l=Jt(),u=Object(b.h)().id,d=void 0===u?"":u,j=Object(c.useState)({type:"page",properties:{},content:[]}),p=Object(a.a)(j,2),O=p[0],h=p[1],x=Object(c.useState)([]),g=Object(a.a)(x,2),v=g[0],m=g[1],_=Object(c.useState)([]),y=Object(a.a)(_,2),k=y[0],w=y[1],C=Object(c.useState)(O.properties.locale||o||["en"]),I=Object(a.a)(C,2),N=I[0],S=I[1],F=Object(c.useCallback)((function(e){S([e])}),[S]),E=Object(c.useState)(null),T=Object(a.a)(E,2),A=T[0],D=T[1],L=pn();if(Object(c.useEffect)((function(){L(d,["viewer","owner"]).then((function(e){D(e)})).catch((function(e){console.error(e),D(!1)}))}),[d,L,D]),Object(c.useEffect)((function(){A&&!1===e.current&&"string"===typeof d&&""!==d&&d!==O._id&&(e.current=!0,s(d).then(function(){var t=Object(B.a)(P.a.mark((function t(n){var r,a,c,o,i,s;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n,!(Array.isArray(n.content)&&n.content.length>0)){t.next=11;break}if(a=Object(R.a)(n.content),c=n.content.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),o=[],!(c.length>0)){t.next=9;break}return t.next=8,l({ids:c});case 8:o=t.sent;case 9:a=a.map((function(e){return e.hasOwnProperty("block")||(e.block=o.find((function(t){return t._id===e.blockId}))),e})),r=Object(f.a)(Object(f.a)({},r),{},{content:a});case 11:i=(r.content||[]).map((function(e){return e.block})),s=Object(R.a)(new Set([O].concat(Object(R.a)(i)).flatMap((function(e){return[e.properties.locale].concat(Object(R.a)((e.properties.translations||[]).filter((function(e){return e.text&&e.text.length>0})).map((function(e){return e.locale}))))})).filter(Boolean))),w(s),h(r),m(i),e.current=!1;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[A,d,O,O._id,s,h,l,m,w]),!1===A)return Object(M.jsxs)("div",{className:Sa.a.viewer,children:[Object(M.jsx)(vn,{block:null,title:"Error",rightActions:null}),Object(M.jsx)("div",{className:"basis_x1 ".concat(Sa.a.app," ").concat(Sa.a.spine_aligned),dir:"auto",children:Object(M.jsx)("main",{className:"".concat(Sa.a.contentWrapper),children:Object(M.jsx)(mn,{errorName:"no_access"})})})]});var G=O.type||null,W=r(O,N,n("placeholder_main_headline")),z=Object(tt.getImageUrl)(O.properties.coverphoto),q=Object(tt.getImageUrl)(O.properties.icon),U=Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[i&&Object(M.jsx)(He.b,{to:"/".concat(O._id,"/edit"),style:{marginRight:"var(--basis_x2)"},children:Object(M.jsxs)("button",{className:"text hasIcon",children:[Object(M.jsx)(Qe.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)(V,{id:"edit_block"})})]})}),k.length>1&&Object(M.jsx)(Qn,{onChange:F,defaultValue:N[0]||o[0]||"en",options:k})]})}),$={__html:Ct(W)};return Object(M.jsxs)("div",{className:Sa.a.viewer,children:[Object(M.jsx)(_n.a,{children:Object(M.jsx)("title",{children:W})}),Object(M.jsx)(vn,{block:O,title:Object(M.jsx)("span",{dir:"auto",dangerouslySetInnerHTML:$}),rightActions:U}),Object(M.jsxs)("div",{className:"basis_x1 ".concat(Sa.a.app," ").concat(Sa.a.spine_aligned),dir:"auto",children:["page"!==G&&"person"!==G&&"redirect"!==G||""===z?null:Object(M.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=1400&h=400&url=").concat(encodeURIComponent(z),")")},className:Sa.a.coverphoto}),Object(M.jsxs)("main",{className:"".concat(Sa.a.contentWrapper),children:["page"!==G&&"person"!==G&&"redirect"!==G||""===q?null:Object(M.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=png&w=400&h=400&url=").concat(encodeURIComponent(q),")")},className:"".concat(Sa.a.icon," ").concat(""===z?Sa.a.coverphotoIsNotSet:Sa.a.coverphotoIsSet)}),""!==W?Object(M.jsx)("h1",{dir:"auto",dangerouslySetInnerHTML:$,style:{whiteSpace:"pre-wrap"}}):null,Object(M.jsx)("div",{className:Sa.a.items,children:v.filter((function(e){return!!e})).filter((function(e){return!1!==e.properties.active})).map((function(e){return Object(M.jsx)(Vt,{block:e,locales:N},e._id)}))})]})]})]})};var Fa=function(){var e=Object(b.f)("/"),t=Object(b.e)(),n=Object(c.useState)({}),r=Object(a.a)(n,2),o=r[0],i=r[1];return Object(c.useEffect)((function(){var e=t.pathname.match(/^\/([^=/]*)(?:=?)([^=/]*)(.*)/),n=e[1],r=e[2],a=e[3];!r&&n&&(r=n),""!==r&&"/edit"!==a&&"/view"!==a&&(a="/view");var c="/".concat(r).concat(a);o.pathname!==c&&i({pathname:c})}),[t,o,i]),Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("div",{className:"".concat(d.a.app," ").concat(e?d.a.isStartpage:""),children:Object(M.jsxs)(sn,{children:[e?null:Object(M.jsx)(ln,{}),Object(M.jsx)(un,{children:Object(M.jsxs)(b.c,{location:o,children:[Object(M.jsx)(b.a,{path:"/:id/view",element:Object(M.jsx)(Ba,{})}),Object(M.jsx)(b.a,{path:"/:id/edit",element:Object(M.jsx)(Ia,{})}),Object(M.jsx)(b.a,{path:"/",element:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(_n.a,{children:Object(M.jsx)("title",{children:"VoltLink"})}),Object(M.jsx)(nn,{})]})})]})})]})})})},Pa=(n(314),n(118)),Ra={de:"Deutsch",en:"English",fr:"Fran\xe7ais"},Ea=Object.keys(Ra),Ta="en";function Aa(e){return Da.apply(this,arguments)}function Da(){return(Da=Object(B.a)(P.a.mark((function e(t){var r,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(318)("./"+t+".ftl");case 2:return r=e.sent,e.next=5,fetch(r.default);case 5:return a=e.sent,e.next=8,a.text();case 8:return c=e.sent,e.abrupt("return",Object(j.a)({},t,new Pa.b(c)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e){return Ma.apply(this,arguments)}function Ma(){return(Ma=Object(B.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(Aa));case 2:return n=e.sent,a=n.reduce((function(e,t){return Object.assign(e,t)})),e.abrupt("return",P.a.mark((function e(){var n,c,o,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(r.a)(t),e.prev=1,n.s();case 3:if((c=n.n()).done){e.next=11;break}return o=c.value,(i=new Pa.a(o)).addResource(a[o]),e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Va(e){var t=e.userLocales,n=e.children,r=e.onLocaleChange,o=Object(c.useState)(function(){var e=new Pa.a("");return e.addResource(new Pa.b("")),new E.c([e])}()),i=Object(a.a)(o,2),s=i[0],l=i[1];return Object(c.useEffect)((function(){function e(){return(e=Object(B.a)(P.a.mark((function e(){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(T.negotiateLanguages)(t,Ea,{defaultLocale:Ta}),r&&r(n),e.next=4,La(n);case 4:a=e.sent,(c=new E.c(a())).userLocales=t,c.defaultLocale=Ta,c.supportedLocales=Ea,l(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,r]),s?Object(M.jsx)(E.a,{l10n:s,children:n}):Object(M.jsx)("div",{children:"Loading texts\u2026"})}var Ga=n(436),Wa=n(208),Ha=n(450),za=n(439),qa=n(441),Ua=n(437);window.process={},window.env="prod",window.domains={frontend:"https://volt.link/",backend:"https://api.volt.link/"};var $a=new za.a({uri:window.domains.backend+"graphql/v1/",cache:new qa.a,credentials:"include",defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});function Ja(){var e=Object(c.useState)(navigator.languages),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(null),u=Object(a.a)(s,2),d=u[0],b=u[1];Object(c.useEffect)((function(){if(window.umami){var e=navigator.languages;if(e||Array.isArray(e)){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,c=(a=a.toLowerCase()).split("-")[0];c!==a&&window.umami.trackEvent("L: "+c),window.umami.trackEvent("L: "+a)}}catch(o){n.e(o)}finally{n.f()}}}}),[]);var j=Object(c.useCallback)((function(e){i([e.target.dataset.locale])}),[i]),p=Object(c.useCallback)((function(e){b(e.length>0?e[0]:"")}),[b]),O=Object(Ga.a)("(prefers-color-scheme: dark)"),f=o.a.useMemo((function(){return Object(Wa.a)({palette:{mode:O?"dark":"light"}})}),[O]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{id:"react-notification",style:{zIndex:"10000"}},"react-notification"),Object(M.jsx)(Va,{userLocales:n,onLocaleChange:p,children:Object(M.jsx)(Ua.a,{client:$a,children:Object(M.jsx)(Ha.a,{theme:f,children:Object(M.jsx)(te.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{minWidth:"unset"},classes:{variantSuccess:"".concat(l.a.snackbar," ").concat(l.a.success),variantError:"".concat(l.a.snackbar," ").concat(l.a.error),variantWarning:"".concat(l.a.snackbar," ").concat(l.a.warning),variantInfo:"".concat(l.a.snackbar," ").concat(l.a.info)},domRoot:document.getElementById("react-notification"),children:Object(M.jsx)(He.a,{children:Object(M.jsx)(Fa,{locales:Ra,currentLocale:d,onLanguageChange:j})})})})})},"AppLocalizationProvider")]})}var Za=document.getElementById("root");Object(i.createRoot)(Za).render(Object(M.jsx)(Ja,{}))},52:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",items:"Viewer_items__2FgjF",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",type_p:"Viewer_type_p__O5DZS",viewer:"Viewer_viewer__JHrvB"}},58:function(e,t,n){e.exports={icon:"ViewerLine_icon__DvsyX",square:"ViewerLine_square__3knjg",round:"ViewerLine_round__1pnCx",title:"ViewerLine_title__35XNW"}},59:function(e,t,n){e.exports={row:"Repeater_row__1ODoF",middleActions:"Repeater_middleActions__3nRoT",trigger:"Repeater_trigger__1VtG5",content:"Repeater_content__110R9",form:"Repeater_form__2N6kw",item:"Repeater_item__2OI78",inlineRowButton:"Repeater_inlineRowButton__uqk8Y",dragHandleButton:"Repeater_dragHandleButton__2eLww",addRowButton:"Repeater_addRowButton__3huSP"}},67:function(e,t,n){e.exports={dialog:"PermissionsEditor_dialog__2rpyk",backdrop:"PermissionsEditor_backdrop__1dRPN",inputWrapper:"PermissionsEditor_inputWrapper__4DGsr",input:"PermissionsEditor_input__1HyOC",actions:"PermissionsEditor_actions__k4oBn",permissionRow:"PermissionsEditor_permissionRow__2HaWO",menuButton:"PermissionsEditor_menuButton__2jIMI",ownerInfo:"PermissionsEditor_ownerInfo__EEKXP"}},73:function(e,t,n){e.exports={root:"IconPicker_root__2okyv",iconIsSet:"IconPicker_iconIsSet__SnQwA",coverphotoIsSet:"IconPicker_coverphotoIsSet__3m9Dw",icon:"IconPicker_icon__JWgfX",iconWrapper:"IconPicker_iconWrapper__1zo6g",sizing_pixel:"IconPicker_sizing_pixel__3TeE0",iconIsNotSet:"IconPicker_iconIsNotSet__1T0Zd",changeIconButton:"IconPicker_changeIconButton__TxsdG"}},77:function(e,t,n){e.exports={snackbar:"Snackbar_snackbar__119_w",default:"Snackbar_default__31-eU",success:"Snackbar_success__zvTW8",error:"Snackbar_error__3XeD6",warning:"Snackbar_warning__2CBXt",info:"Snackbar_info__EuVSN"}},78:function(e,t,n){e.exports={coverphoto:"CoverphotoPicker_coverphoto__1mWB4",root:"CoverphotoPicker_root__3T8t9",coverphotoIsNotSet:"CoverphotoPicker_coverphotoIsNotSet__1O3-S",button_wrapper:"CoverphotoPicker_button_wrapper__2oEjh",coverphotoIsSet:"CoverphotoPicker_coverphotoIsSet__2o24A",iconIsSet:"CoverphotoPicker_iconIsSet__D_4uA",changeCoverphotoButton:"CoverphotoPicker_changeCoverphotoButton__2GnZD"}},81:function(e,t,n){e.exports={main_headline:"PropertiesEditor_main_headline__3wy7R",propertiesFrame:"PropertiesEditor_propertiesFrame__1uBEz",properties_row:"PropertiesEditor_properties_row__2tX7M"}},98:function(e,t,n){e.exports={dialog:"SharingEditor_dialog__22jfY",backdrop:"SharingEditor_backdrop__1Gra9",inputWrapper:"SharingEditor_inputWrapper__1UyBD",input:"SharingEditor_input__brkXK",actions:"SharingEditor_actions__2zz6x"}},99:function(e,t,n){e.exports={block:"InlineEditorBlock_block__14-zd",block_input:"InlineEditorBlock_block_input__2I1iu",form_deactivated:"InlineEditorBlock_form_deactivated__2oktp",form_active:"InlineEditorBlock_form_active__hi5HC",reorderHandle:"InlineEditorBlock_reorderHandle__2_s23"}}},[[319,1,2]]]);
//# sourceMappingURL=main.66f17d1d.chunk.js.map