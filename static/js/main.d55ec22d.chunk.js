(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[2],{102:function(e,t,n){"use strict";var r=n(20),c=n(8),a=n.n(c),o=n(1),i=n(89),s=n(54);t.a=function(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){return new Promise((function(n){e.query({query:s.d,variables:t}).then(function(){var e=Object(r.a)(a.a.mark((function e(t){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.errors,c=t.data,!(Array.isArray(r)&&r.length>0)){e.next=5;break}throw r;case 5:if(!Array.isArray(c.blocks)){e.next=9;break}n(c.blocks),e.next=10;break;case 9:throw new Error("Unknown error while loading blocks.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}},105:function(e,t,n){"use strict";var r=n(4),c=n(5),a=n(1),o=n(143),i=n(0),s=function(e){var t=e.className,n=e.emojiClassName,s=void 0===n?"emoji":n,l=e.style,u=e.emoji,d=void 0===u?"":u,b=Object(a.useState)({__html:""}),j=Object(c.a)(b,2),p=j[0],f=j[1];return Object(a.useEffect)((function(){if("string"===typeof d&&d.length>0){var e=o.a.parse(d,{folder:"svg",ext:".svg",className:s,base:"/public/twemoji/assets/"});f({__html:e})}else f({__html:""})}),[d,s,f]),Object(i.jsx)("span",{className:t,style:Object(r.a)({fontSize:0},l),dangerouslySetInnerHTML:p})};t.a=Object(a.memo)(s)},116:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(4),c=n(20),a=n(5),o=n(8),i=n.n(o),s=n(1),l=n(150),u=n.n(l),d=n(363),b=n(364),j=n(365),p=n(51),f=n(97),O=n(67),h=n(70),v=n(89),m=n(54),g=n(0);function x(e){e.title;var t=e.block,n=void 0===t?{}:t,o=e.rightActions,l=e.notificationBanner,x=e.className,y=Object(f.e)(),_=y.open,k=y.toggleSidebar,w=Object(v.a)(),S=n?n._id:null,I=n?n.parent:null,A=Object(s.useState)([]),C=Object(a.a)(A,2),N=C[0],B=C[1],P=Object(s.useCallback)((function(e){w.query({query:m.f,variables:{_id:e}}).then(function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.blocks?(r=(n.blocks||[]).sort((function(e,t){return t.computed.sort-e.computed.sort})),B(r)):(console.error(n.error),B([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),B([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[w,B]);Object(s.useEffect)((function(){S&&P(S)}),[S,I,P]);var E=Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{style:{flexGrow:"1",display:"flex",alignItems:"center",height:"32px"},children:[_?Object(g.jsx)(p.b,{to:"/",children:Object(g.jsx)("button",{className:"text hasIcon",style:{margin:"0 calc(-2 * var(--basis)) 0 0"},children:Object(g.jsx)(d.a,{className:"icon"})})}):Object(g.jsx)("button",{onClick:k,className:"text hasIcon",style:{margin:"0 calc(-2 * var(--basis)) 0 0"},children:Object(g.jsx)(b.a,{className:"icon"})}),Object(g.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),S&&N.length>0?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(h.a,{trigger:function(e){return Object(g.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"0 calc(-2 * var(--basis))"},children:Object(g.jsx)(j.a,{style:{verticalAlign:"middle"}})}))},children:Object(g.jsx)("div",{style:{padding:"var(--basis_x2)"},children:N.map((function(e){return Object(g.jsx)(O.a,{block:e,size:"line"},e._id)}))})}),Object(g.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,Object(g.jsx)(O.a,{block:n,size:"line",parentProps:{style:{flexGrow:"0",margin:"0 calc(-2 * var(--basis))"}}},n)]})});return Object(g.jsxs)("header",{className:"".concat(u.a.header," ").concat(x),children:[Object(g.jsxs)("div",{className:u.a.headerBar,children:[E,o]}),l?Object(g.jsx)("div",{className:u.a.notificationBanner,children:l}):null]})}},128:function(e,t,n){e.exports={drag_over:"DataTransmat_drag_over__3XVzh",drag_active:"DataTransmat_drag_active__2nwCM"}},130:function(e,t,n){"use strict";var r=n(20),c=n(4),a=n(8),o=n.n(a),i=n(1),s=n(16),l=n(89),u=n(48),d=n(87);function b(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&b(e[n],t);return e}t.a=function(){var e=Object(s.c)().getString,t=Object(l.a)(),n=Object(d.b)(),a=n.enqueueSnackbar,j=n.closeSnackbar,p=Object(i.useCallback)((function(n){return new Promise((function(i){var s=null,l=Object(c.a)({},n);(l=b(l,"__typename")).hasOwnProperty("content")&&Array.isArray(l.content)&&(l.content=l.content.map((function(e){return{blockId:e.blockId}})));var d=new Promise((function(n){t.mutate({mutation:u.c,variables:{block:l}}).then(function(){var t=Object(r.a)(o.a.mark((function t(r){var c,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=r.data,n("got-data"),null!==s&&j(s),"string"===typeof c.error?"no_edit_permission"===c.error?a(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):a(""+c.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(l=c.saveBlock,i(l),a(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(r.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(r),n("got-error"),null!==s&&j(s),a(e("path_editor_status_error_while_saving",{error:r.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),d]).then((function(t){"show-loading"===t&&(s=a(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch(console.error)}))}),[a,j,t,e]);return p}},131:function(e,t,n){"use strict";var r=n(15),c=n(20),a=n(5),o=n(8),i=n.n(o),s=n(1),l=n.n(s),u=n(23),d=n(51),b=n(230),j=n(243),p=n(360),f=n(242),O=n(476),h=n(231),v=n(232),m=n(239),g=n(233),x=n(234),y=n(236),_=n(238),k=n(240),w=n(241),S=n(436),I=n(437),A=n(438),C=n(439),N=n(440),B=n(441),P=n(442),E=n(443),R=n(444),L=n(445),T=n(446),D=n(447),$=n(16),M=n(38),z=n(136),F=n(69),q=n(70),V=n(4),H=n(373),U=n(479),W=n(435),G=n(208),J=n(0);function K(e){var t=e.name,n=void 0===t?"":t,r=e.disabled,c=void 0!==r&&r,o=e.label,i=void 0===o?"":o,u=e.triggerProps,d=void 0===u?{}:u,b=e.onToggle,p=void 0===b?null:b,f=e.open,O=void 0!==f&&f,h=e.children,v=Object(s.useRef)(null),m=function(e){var t=l.a.useRef(!1);l.a.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]);var n=l.a.useState(),r=Object(a.a)(n,2),c=r[0],o=r[1];return l.a.useLayoutEffect((function(){!0===t.current&&o(e.current.getBoundingClientRect())}),[e]),Object(G.a)(e,(function(e){!0===t.current&&o(e.contentRect)})),c}(v),g=Object(s.useCallback)((function(){!0!==c&&"function"===typeof p&&p({name:n})}),[c,p,n]),x={};return x=!0===O?{margin:"var(--basis)",boxShadow:"0 var(--basis_x0_5) var(--basis_x4) 0 rgba(var(--on-background-rgb), 0.4)",padding:"8px 0",background:"var(--background-contrast)"}:{margin:"0",boxShadow:"none",background:"transparent"},Object(J.jsxs)(H.a,{sx:Object(V.a)({color:"var(--on-background)",overflow:"hidden",transition:"padding var(--timing), margin var(--timing), box-shadow var(--timing)",borderRadius:"var(--basis_x2)"},x),children:[null!==i?Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(U.a,{onClick:g,style:{whiteSpace:"nowrap",lineHeight:"1",margin:"0",padding:"0",backgroundColor:"transparent",color:"var(--on-background)"},children:Object(J.jsxs)(j.a,Object(V.a)(Object(V.a)({},d),{},{disabled:c,className:"roundMenuItem",style:Object(V.a)({display:"flex",justifyContent:"space-between"},d.style),children:[Object(J.jsx)("div",{style:{display:"flex"},children:i}),Object(J.jsx)(W.a,{style:{marginRight:"-10px",transition:"transform var(--timing)",transform:!0===O?"rotate(90deg)":""}})]}))}),!0===O?Object(J.jsx)("div",{style:{height:"12px"}}):null]}):null,Object(J.jsx)("div",{style:{height:null===m||void 0===m?void 0:m.height,overflow:"hidden",transition:"height var(--timing)"},children:Object(J.jsx)("div",{ref:v,children:!0===O?h:""})})]})}n(245);var X=n(48),Y=n(142),Z={button:Object(J.jsx)(h.a,{}),text:Object(J.jsx)(v.a,{}),image:Object(J.jsx)(m.a,{}),code:Object(J.jsx)(g.a,{}),divider:Object(J.jsx)(x.a,{}),page:Object(J.jsx)(y.a,{}),redirect:Object(J.jsx)(_.a,{}),poster:Object(J.jsx)(k.a,{}),definition:Object(J.jsx)(w.a,{})},Q=["button","text","image","code","divider","page","redirect","poster","definition"],ee={default:"var(--on-background)",yellow:"var(--yellow)",green:"var(--green)",red:"var(--red)",blue:"var(--blue)"},te=Object.keys(ee);function ne(e){if(ee.hasOwnProperty(e))return ee[e];var t=Object(M.getBlockColor)({properties:{color:e}}).color;return t||e}t.a=Object($.d)((function(e){var t=e.block,n=void 0===t?{}:t,o=e.getString,l=e.trigger,h=e.onToogle,v=e.saveType,m=e.saveProperty,g=e.typeOptions,x=void 0===g?Q:g,y=(e.onRemoveRow,e.addRowBefore,e.onArchivedToggle),_=void 0===y?null:y,k=e.onReloadContext,w=void 0===k?null:k,V=Object(F.a)(),H=V.loggedIn,U=V.userroles;n.hasOwnProperty("properties")&&"object"===typeof n.properties&&null!==n.properties&&!Array.isArray(n.properties)||(n.properties={});var W=n._id,G=void 0===W?"":W,ee=n.type,re=void 0===ee?"":ee,ce=n.properties,ae=void 0===ce?{}:ce,oe=n.computed,ie=void 0===oe?{}:oe,se=ae.active,le=void 0===se||se,ue=ae.text_style,de=void 0===ue?null:ue,be=ae.text_decorations,je=void 0===be?[]:be,pe=ae.color,fe=void 0===pe?null:pe;Array.isArray(je)||(je=[]);var Oe=(null===ie?{}:ie).roles,he=void 0===Oe?[]:Oe,ve=H&&(U.includes("admin")||he.includes("owner")||he.includes("editor")),me=Object(s.useState)(!0===ae.archived),ge=Object(a.a)(me,2),xe=ge[0],ye=ge[1],_e=Object(z.a)(),ke=Object(s.useState)(null),we=Object(a.a)(ke,2),Se=we[0],Ie=we[1],Ae=Object(s.useCallback)((function(e){Ie((function(t){return t===e?null:e}))}),[]),Ce=Object(Y.a)(),Ne=Object(u.g)(),Be=(Object(s.useCallback)(function(){var e=Object(c.a)(i.a.mark((function e(t){var n,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.type,e.prev=1,!("string"===typeof n&&n.length>0)){e.next=12;break}return e.next=5,Ce({mutation:X.c,variables:{block:{type:n}}});case 5:if(r=e.sent,null===(c=r.saveBlock)){e.next=12;break}return e.next=10,Ce({mutation:X.b,variables:{movingBlockId:c,newParentId:G,newIndex:0}});case 10:"function"===typeof w&&w(),Ne("/".concat(c,"/edit"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}(),[Ce,G,w,Ne]),Object(s.useCallback)((function(){var e=!xe;_e({_id:n._id,archive:e}).then((function(){ye(e),"function"===typeof _&&_(e),"function"===typeof w&&w()})).catch(console.error)}),[_e,ye,xe,n,_,w])),Pe=Object(s.useCallback)((function(){"function"===typeof m&&m("active",!le)}),[le,m]),Ee=n.metadata||{},Re=Object(M.getBlockColor)(n).color;Re||(Re="transparent");var Le=Object(s.useCallback)((function(e){var t=Object(r.a)(new Set(je));je.includes(e)?t=t.filter((function(t){return t!==e})):t.push(e),m("text_decorations",t)}),[je,m]);return Object(J.jsx)(q.a,{trigger:l,onToogle:h,children:function(e){e.open;return Object(J.jsxs)("div",{children:[Object(J.jsx)("div",{style:{height:"8px"}}),ve&&"function"===typeof v&&Array.isArray(x)&&x.length>0&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(K,{disabled:"person"===re,name:"type",open:"type"===Se,onToggle:function(e){var t=e.name;return Ae(t)},label:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(S.a,{})}),Object(J.jsx)($.a,{id:"block_menu_choose_type_label"})]}),children:x.map((function(e){return Object(J.jsxs)(j.a,{selected:e===re,onClick:function(){return v(e)},className:"roundMenuItem",children:[Object(J.jsx)(b.a,{children:Z[e]}),o("block_menu_type_label_".concat(e),e)]},e)}))}),Object(J.jsx)(p.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),ve&&"function"===typeof m&&Object(J.jsxs)(K,{name:"color",open:"color"===Se,onToggle:function(e){var t=e.name;return Ae(t)},label:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(I.a,{style:{color:ne(fe)}})}),Object(J.jsx)($.a,{id:"block_menu_choose_color_label"})]}),children:[te.map((function(e){return Object(J.jsxs)(j.a,{selected:"default"===e?null===fe:fe===e,onClick:function(){return m("color","default"===e?null:e)},className:"roundMenuItem",children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(A.a,{style:{color:ne(e)}})}),e]},e)})),Object(J.jsxs)(j.a,{className:"roundMenuItem",selected:null!==fe&&!te.includes(fe),children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(A.a,{style:{color:Re}})}),Object(J.jsx)("input",{type:"text",placeholder:"#FFFFFF",defaultValue:fe,onBlur:function(e){return m("color",e.target.value)},style:{width:"160px",margin:"0 calc(-1 * var(--basis)) 0 0"}},te.includes(fe)?fe:"custom")]})]}),ve&&"function"===typeof m&&"text"===re&&Object(J.jsx)(K,{name:"text_style",open:"text_style"===Se,onToggle:function(e){var t=e.name;return Ae(t)},label:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(C.a,{})}),Object(J.jsx)($.a,{id:"block_menu_choose_text_style_label"})]}),children:["h2","h3","body"].map((function(e){return Object(J.jsx)(j.a,{selected:"body"===e?null===de:de===e,onClick:function(){return m("text_style","body"===e?null:e)},className:"roundMenuItem",children:o("block_menu_text_style_label_".concat(e),e)},e)}))}),ve&&"function"===typeof m&&"text"===re&&Object(J.jsx)(K,{name:"text_decorations",open:"text_decorations"===Se,onToggle:function(e){var t=e.name;return Ae(t)},label:Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(N.a,{})}),Object(J.jsx)($.a,{id:"block_menu_choose_text_decorations_label"})]}),children:["checkbox"].map((function(e){var t=je.includes(e);return Object(J.jsxs)(j.a,{selected:t,onClick:function(){return Le(e)},className:"roundMenuItem",children:[Object(J.jsx)(b.a,{children:t?Object(J.jsx)(B.a,{}):Object(J.jsx)(B.a,{style:{opacity:0}})}),o("block_menu_text_decoration_label_".concat(e),e)]},e)}))}),ve&&"function"===typeof m&&Object(J.jsx)(p.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),!1,ve&&"function"===typeof m&&Object(J.jsxs)(j.a,{className:"roundMenuItem",onClick:Pe,children:[Object(J.jsx)(b.a,{children:le?Object(J.jsx)(P.a,{}):Object(J.jsx)(E.a,{})}),Object(J.jsx)(f.a,{primary:Object(J.jsx)("span",{children:le?Object(J.jsx)($.a,{id:"block_menu_hide"}):Object(J.jsx)($.a,{id:"block_menu_show"})}),secondary:Object(J.jsx)("span",{style:{whiteSpace:"normal"},children:Object(J.jsx)($.a,{id:"block_menu_hide_show_description"})})})]}),ve&&"function"===typeof _&&Object(J.jsxs)(j.a,{className:"roundMenuItem",onClick:Be,children:[Object(J.jsx)(b.a,{children:!0===xe?Object(J.jsx)(R.a,{}):Object(J.jsx)(L.a,{})}),!0===xe?Object(J.jsx)($.a,{id:"block_menu_unarchive"}):Object(J.jsx)($.a,{id:"block_menu_archive"})]}),("function"===typeof m||"function"===typeof _)&&Object(J.jsx)(p.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),"string"===typeof G&&""!==G&&Object(J.jsxs)(J.Fragment,{children:[Object(J.jsxs)(j.a,{component:d.b,to:"/".concat(G,"/view"),className:"roundMenuItem",style:{marginTop:"8px"},children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(T.a,{})}),Object(J.jsx)($.a,{id:"view_block"})]}),ve&&Object(J.jsxs)(j.a,{component:d.b,to:"/".concat(G,"/edit"),className:"roundMenuItem",children:[Object(J.jsx)(b.a,{children:Object(J.jsx)(D.a,{})}),Object(J.jsx)($.a,{id:"edit_block"})]}),Object(J.jsx)(p.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),Object(J.jsx)(O.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(J.jsx)(f.a,{primary:Object(J.jsx)("span",{children:Object(J.jsx)($.a,{id:"block_menu_info_modified"})}),secondary:Object(J.jsx)("span",{children:(Ee.modified||"").replace(/[TZ]/g," ")})})}),Object(J.jsx)(O.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(J.jsx)(f.a,{primary:Object(J.jsx)("span",{children:Object(J.jsx)($.a,{id:"block_menu_info_id"})}),secondary:Object(J.jsx)("span",{children:G})})})]})}})}))},136:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(1),c=n(89),a=n(48);function o(){var e=Object(c.a)();return Object(r.useCallback)((function(t){var n=t.ids,r=t.archive;return e.mutate({mutation:r?a.a:a.d,variables:{ids:n}})}),[e])}t.a=function(){var e=Object(c.a)();return Object(r.useCallback)((function(t){var n=t._id,r=t.archive;return e.mutate({mutation:r?a.a:a.d,variables:{ids:[n]}})}),[e])}},142:function(e,t,n){"use strict";var r=n(1),c=n(89);t.a=function(){var e=Object(c.a)();return Object(r.useCallback)((function(t){return new Promise((function(n,r){e.mutate(t).then((function(e){var t=e.data;"string"===typeof t.error?r(t.error):n(t)})).catch(r)}))}),[e])}},150:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},151:function(e,t,n){e.exports={reactionButton:"ReactionButton_reactionButton__iHGkG",selected:"ReactionButton_selected___YxTx",emoji:"ReactionButton_emoji__3d99A"}},16:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n(15),c=n(17),a=n(4),o=n(1),i=n.n(o),s=n(112),l=n(107),u=n(62),d=n(167),b=n.n(d),j=n(0),p=function(e){return Object(j.jsx)(s.b,Object(a.a)(Object(a.a)({},e),{},{elems:Object(a.a)({br:Object(j.jsx)("br",{})},e.elems),children:Object(j.jsx)(i.a.Fragment,{children:e.children})}),e.id)};function f(e){return function(t){var n=i.a.useContext(u.a);return i.a.createElement(e,Object(a.a)({fluentByObject:function(e,t){if(t||(t=null),e){var r,a=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return a.includes(e)})),i=Object(l.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),s=Object(c.a)(i);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(e[u])return e[u]}}catch(d){s.e(d)}finally{s.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||"")}},t))}}function O(e,t,n){var c=e.properties||{},a=c.locale||"en",o=c.text||n||"";t&&Array.isArray(t)||(t=[a]);var i=c.translations||[];if(Array.isArray(i)){i=[{locale:a,text:o}].concat(Object(r.a)(i));var s=b.a.fluentByArray(i,t,"locale");s.length>0&&(o=s[0].text)}return o}function h(){var e=i.a.useContext(u.a);return Object(a.a)(Object(a.a)({},e),{},{userLocales:e.userLocales||[],getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return b.a.fluentByAny(t,e.userLocales,n)},translateBlock:O})}},160:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return x}));var r=n(17),c=n(13),a=n(5),o=n(20),i=n(8),s=n.n(i),l=n(1),u=n(112),d=n(129),b=n(107),j=n(0),p={de:"Deutsch (German)",en:"English",it:"Italiano (Italian)",se:"Davvis\xe1megiella (Northern S\xe1mi)",lt:"Lietuvi\u0161kai (Lithuanian)",fr:"Fran\xe7ais (French)",es:"Espa\xf1ol (Spanish)",nl:"Dutch (Nederlands)"},f=Object.keys(p),O="en";function h(e){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(s.a.mark((function e(t){var r,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(352)("./"+t+".ftl");case 2:return r=e.sent,e.next=5,fetch(r.default);case 5:return a=e.sent,e.next=8,a.text();case 8:return o=e.sent,e.abrupt("return",Object(c.a)({},t,new d.b(o)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(s.a.mark((function e(t){var n,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(h));case 2:return n=e.sent,c=n.reduce((function(e,t){return Object.assign(e,t)})),e.abrupt("return",s.a.mark((function e(){var n,a,o,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(r.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return o=a.value,(i=new d.a(o)).addResource(c[o]),e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e){var t=e.userLocales,n=e.children,r=e.onLocaleChange,c=Object(l.useState)(function(){var e=new d.a("");return e.addResource(new d.b("")),new u.c([e])}()),i=Object(a.a)(c,2),p=i[0],h=i[1];return Object(l.useEffect)((function(){function e(){return(e=Object(o.a)(s.a.mark((function e(){var n,c,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.negotiateLanguages)(t,f,{defaultLocale:O}),r&&r(n),e.next=4,m(n);case 4:c=e.sent,(a=new u.c(c())).userLocales=t,a.defaultLocale=O,a.supportedLocales=f,h(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,r]),p?Object(j.jsx)(u.a,{l10n:p,children:n}):Object(j.jsx)("div",{children:"Loading texts\u2026"})}},163:function(e,t,n){e.exports={app:"App_app__3hbGO",isStartpage:"App_isStartpage__1Q6rs"}},164:function(e,t,n){e.exports={main:"Sidebar_main__1MCX5",open:"Sidebar_open__gnBQb"}},167:function(e,t,n){var r=n(107).negotiateLanguages;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var c=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===c.length?null:e[c[0]]}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",c=e.map((function(e){return e[n]})).filter(Boolean);if(0===c.length)return null;var a=r(t,c,{defaultLocale:c[0],strategy:"lookup"});return 0===a.length?null:e.filter((function(e){return e[n]===a[0]}))}e.exports={fluentByObject:c,fluentByArray:a,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=a(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=c(e,t));return"string"!==typeof e&&(e=n),e}}},187:function(e,t,n){"use strict";var r=n(4),c=n(5),a=n(1),o=n(369),i=n(358),s=n(0);t.a=function(e){var t=e.trigger,n=e.children,l=void 0===n?function(){}:n,u=e.onToogle,d=void 0===u?function(){}:u,b=e.setOpenBlockMenuRef,j=Object(a.useRef)(null),p=Object(a.useState)(!1),f=Object(c.a)(p,2),O=f[0],h=f[1],v=Object(a.useCallback)((function(e){h(e)}),[h]);Object(a.useEffect)((function(){b&&(b.current=v)}),[v,b]);var m=function(){d(!1),h(!1)},g=O?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(s.jsxs)(s.Fragment,{children:[t({ref:j,"aria-describedby":g,onClick:function(){h((function(e){return d(!e),!e}))},style:{pointerEvents:O?"none":"all"}},{isOpen:O}),Object(s.jsx)("div",{onClick:m,style:{display:O?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(s.jsx)(o.a,{id:g,open:O,anchorEl:j.current,transition:!0,placement:"bottom-start",disablePortal:!1,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(s.jsx)(i.a,Object(r.a)(Object(r.a)({},t),{},{children:Object(s.jsx)("div",{children:l&&"function"===typeof l?l({open:O,style:{transformOrigin:"top left"},closePopover:m}):null})}))}})]})}},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(4),c=n(24),a=n(231),o=n(235),i=n(234),s=n(233),l=n(239),u=n(232),d=n(237),b=n(238),j=n(362),p=n(240),f=n(241),O=n(236),h=n(105),v=n(38),m=n(36),g=n.n(m),x=n(1),y=n(0),_=["block","style","className","size"];function k(e){var t=e.block,n=e.style,m=void 0===n?{}:n,k=e.className,w=void 0===k?"":k,S=e.size,I=void 0===S?40:S,A=Object(c.a)(e,_),C=(null===t||void 0===t?void 0:t.type)||"page",N=t.properties||{},B=null,P=!1,E="poster"!==C;if(E&&N.hasOwnProperty("icon")&&"object"===typeof N.icon&&null!==N.icon&&!Array.isArray(N.icon)&&N.icon.hasOwnProperty("type")&&"string"===typeof N.icon.type&&("emoji"===N.icon.type&&N.icon.hasOwnProperty("emoji")&&"string"===typeof N.icon.emoji&&0!==N.icon.emoji.length&&(B=Object(x.createElement)(h.a,Object(r.a)(Object(r.a)({},A),{},{style:m,key:N.icon.emoji,className:"".concat(g.a.icon," ").concat(w),emoji:N.icon.emoji}))),null===B&&"file"===N.icon.type&&N.icon.hasOwnProperty("fileId")&&"string"===typeof N.icon.fileId&&0!==N.icon.fileId.length)){var R=N.icon.fileId;B=Object(y.jsx)("div",Object(r.a)(Object(r.a)({},A),{},{className:"".concat(g.a.icon," ").concat(P?g.a.square:g.a.round," ").concat(w),style:Object(r.a)(Object(r.a)({},m),{},{backgroundImage:"url(".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=").concat(I,"&h=").concat(I,"&id=").concat(encodeURIComponent(R),")")}),alt:""}))}if(null===B){var L=E?Object(v.getImageUrl)(N.icon,{width:I,height:I}):null;L||(P=!0,L=Object(v.getImageUrl)(N.coverphoto,{width:I,height:I})),"string"===typeof L&&0!==L.length&&(B=Object(y.jsx)("div",Object(r.a)(Object(r.a)({},A),{},{className:"".concat(g.a.icon," ").concat(P?g.a.square:g.a.round," ").concat(w),style:Object(r.a)(Object(r.a)({},m),{},{backgroundImage:"url(".concat(L,")"),backgroundSize:"poster image".split(" ").includes(C)?"contain":"cover"}),alt:""})))}if(null===B)switch(t.type){case"button":B=Object(y.jsx)(a.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"checkbox":B=Object(y.jsx)(o.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"divider":B=Object(y.jsx)(i.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"code":B=Object(y.jsx)(s.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"image":B=Object(y.jsx)(l.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"text":B=Object(y.jsx)(u.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"person":B=Object(y.jsx)(d.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"redirect":B=Object(y.jsx)(b.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"website":B=Object(y.jsx)(j.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"poster":B=Object(y.jsx)(p.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;case"definition":B=Object(y.jsx)(f.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}));break;default:B=Object(y.jsx)(O.a,Object(r.a)(Object(r.a)({},A),{},{style:m,className:"".concat(g.a.icon," ").concat(w)}))}return B}},206:function(e,t,n){"use strict";var r=n(4),c=n(5),a=n(1),o=n(0);t.a=function(e){var t=e.ariaLabel,n=e.items,i=e.defaultValue,s=e.onChange,l=e.style,u=void 0===l?{}:l,d=e.buttonProps,b=void 0===d?{}:d,j=e.className,p=void 0===j?"":j,f=Object(a.useState)(),O=Object(c.a)(f,2),h=O[0],v=O[1];Object(a.useEffect)((function(){return v(i)}),[i,v]);var m=Object(a.useCallback)((function(e){var t=e.target.dataset.value;v(t),s&&s(t)}),[v,s]);return Object(o.jsx)("div",{"aria-label":t,className:"buttonRow "+(p||""),style:u,children:n.map((function(e){var t=e.value,n=e.title,c=e.icon||null;return Object(a.createElement)("button",Object(r.a)(Object(r.a)({},b),{},{key:t,className:"default ".concat(h===t?"choosen":""," ").concat(c?"hasIcon":""," ").concat((null===b||void 0===b?void 0:b.className)||""),onClick:m,"data-value":t}),Object(o.jsxs)("span",{style:{pointerEvents:"none",display:"flex",gap:"var(--basis)"},children:[c||null,n?"object"===typeof n?n:Object(o.jsx)("span",{style:{verticalAlign:"middle"},children:n}):null]}))}))})}},207:function(e,t,n){"use strict";var r=n(20),c=n(8),a=n.n(c),o=n(1),i=n(16),s=n(89),l=n(54),u=n(87);t.a=function(){var e=Object(i.c)().getString,t=Object(s.a)(),n=Object(u.b)(),c=n.enqueueSnackbar,d=n.closeSnackbar,b=Object(o.useCallback)((function(e){return new Promise((function(n){if(e&&""!==e){var r=[];"object"!==typeof window.SERVER_DATA||null===window.SERVER_DATA||Array.isArray(window.SERVER_DATA)||(r=window.SERVER_DATA.preloaded_blocks||[]),Array.isArray(r)||(r=[]),(r=r.filter((function(t){var n;return null!==(null===t||void 0===t?void 0:t._id)&&((null===t||void 0===t?void 0:t._id)===e||(null===t||void 0===t||null===(n=t.properties)||void 0===n?void 0:n.slug)===e)}))).length>0?(window.SERVER_DATA={preloaded_blocks:null},n(r)):t.query({query:l.c,variables:{slugs:[e],ids:[e].filter((function(e){return 24===e.length}))}}).then((function(e){var t=e.errors,r=e.data;if(Array.isArray(t))n(null);else if(Array.isArray(r.blocks)&&r.blocks.length>0){var c=r.blocks.filter((function(e){return null!==(null===e||void 0===e?void 0:e._id)}));c.length>0?n(c):n(null)}else n(null)})).catch((function(e){console.error("error",e),n(null)}))}else n(null)}))}),[t]),j=Object(o.useCallback)((function(e){return new Promise((function(n){e&&""!==e?t.query({query:l.a,variables:{slug:e}}).then((function(e){var t=e.errors,r=e.data;Array.isArray(t)?n(null):null!==r.block?n(r.block):n(null)})).catch((function(e){console.error("error",e),n(null)})):n(null)}))}),[t]),p=Object(o.useCallback)((function(t){return new Promise((function(n,o){var i=null;if(t&&""!==t){var s=new Promise(function(){var e=Object(r.a)(a.a.mark((function e(r){var s,l,u,p,f,O,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==(s=!1)||"string"!==typeof t||""===t){e.next=6;break}return e.next=4,b(t);case 4:l=e.sent,Array.isArray(l)&&(1===l.length?(s=!0,r("got-data"),null!==i&&d(i),n(l[0])):l.length>1&&(s=!0,r("got-error"),null!==i&&d(i),o({code:"300",blocks:l}),c("Error 300: Multiple blocks found..",{variant:"error",preventDuplicate:!0,autoHideDuration:2e3})));case 6:if(!1!==s||"string"!==typeof t||""===t){e.next=21;break}return e.next=9,j(t);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:u=e.t0,p=u.existsAsSlug,f=void 0!==p&&p,O=u.existsAsId,h=void 0!==O&&O,s=!0,r("got-error"),null!==i&&d(i),!0===h||!0===f?(o({code:"403"}),c("Error 403: You are not allowed to view this page.",{variant:"error",preventDuplicate:!0,autoHideDuration:2e3})):(o({code:"404"}),c("Error 404: The page does not exist.",{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),s]).then((function(t){"show-loading"===t&&(i=c(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else o({code:"404"})}))}),[b,j,c,d,e]);return p}},222:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(243),c=n(230),a=n(242),o=n(231),i=n(232),s=n(233),l=n(234),u=n(235),d=n(236),b=n(237),j=n(238),p=n(239),f=n(240),O=n(241),h=n(69),v=n(70),m=n(16),g=n(0),x={button:Object(g.jsx)(o.a,{}),text:Object(g.jsx)(i.a,{}),code:Object(g.jsx)(s.a,{}),divider:Object(g.jsx)(l.a,{}),checkbox:Object(g.jsx)(u.a,{}),page:Object(g.jsx)(d.a,{}),person:Object(g.jsx)(b.a,{}),redirect:Object(g.jsx)(j.a,{}),image:Object(g.jsx)(p.a,{}),poster:Object(g.jsx)(f.a,{}),definition:Object(g.jsx)(O.a,{})},y=["page","redirect","definition"];function _(e){var t=e.createBlock,n=e.types,o=void 0===n?y:n,i=e.close,s=void 0===i?null:i;return o&&Array.isArray(o)||(o=y),Object(g.jsx)(g.Fragment,{children:o.map((function(e){return Object(g.jsxs)(r.a,{className:"roundMenuItem",onClick:function(){return t({type:e,close:s})},children:[Object(g.jsx)(c.a,{children:x[e]}),Object(g.jsx)(a.a,{children:Object(g.jsx)(m.a,{id:"block_menu_type_label_"+e})})]},e)}))})}function k(e){var t=e.trigger,n=e.createBlock,r=e.types;return Object(h.a)().loggedIn?Object(g.jsx)(v.a,{trigger:t,children:function(e){var t=e.close;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{style:{marginTop:"8px"}}),Object(g.jsx)(_,{createBlock:n,types:r,close:t})]})}}):null}},262:function(e,t,n){},347:function(e,t){},352:function(e,t,n){var r={"./de.ftl":[377,9],"./en.ftl":[378,10],"./es.ftl":[379,11],"./fr.ftl":[380,12],"./it.ftl":[381,13],"./lt.ftl":[382,14],"./nl.ftl":[383,15],"./se.ftl":[384,16]};function c(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(r)},c.id=352,e.exports=c},353:function(e,t,n){"use strict";n.r(t);var r=n(17),c=n(5),a=n(1),o=n.n(a),i=n(211),s=(n(262),n(82)),l=n.n(s),u=n(163),d=n.n(u),b=n(23),j=n(97),p=n(93),f=n(4),O=n(20),h=n(8),v=n.n(h),m=n(469),g=n(174),x=n(473),y=n(236),_=n(237),k=n(238),w=n(362),S=n(241),I=n(451),A=n(452),C=n(453),N=n(76),B=n.n(N),P=n(131),E=n(67),R=n(206),L=n(89),T=n(54),D=n(48),$=n(16),M=n(0),z={page:Object(M.jsx)(y.a,{}),person:Object(M.jsx)(_.a,{}),redirect:Object(M.jsx)(k.a,{}),website:Object(M.jsx)(w.a,{}),definition:Object(M.jsx)(S.a,{})},F=["everything","page","redirect","person","website","definition"];var q=function(){var e=Object($.c)().getString,t=Object(L.a)(),n=Object(a.useState)(!1),r=Object(c.a)(n,2),o=r[0],i=r[1],s=Object(a.useState)([]),l=Object(c.a)(s,2),u=l[0],d=l[1],b=Object(a.useState)([]),j=Object(c.a)(b,2),p=j[0],h=j[1],y=Object(a.useRef)(""),_=Object(a.useState)(F[0]),k=Object(c.a)(_,2),w=k[0],S=k[1],N=Object(a.useState)(!1),q=Object(c.a)(N,2),V=q[0],H=q[1],U=Object(a.useState)(""),W=Object(c.a)(U,2),G=W[0],J=W[1];Object(g.a)("cmd+k, ctrl+k",(function(e){e.preventDefault(),i(!0)}),{}),Object(g.a)("esc",(function(e){e.preventDefault(),i(!1)}),{enableOnTags:["INPUT","SELECT","TEXTAREA"],enableOnContentEditable:!0});var K=Object(a.useCallback)((function(e){"Enter"===e.key&&e.target&&e.target.blur()}),[]);Object(a.useEffect)((function(){var e=function(){return i(!0)},t=function(){return i(!1)};return window.addEventListener("open_search",e),window.addEventListener("close_search",t),function(){window.removeEventListener("open_search",e),window.removeEventListener("close_search",t)}}),[i]);var X=Object(a.useCallback)(function(){var e=Object(O.a)(v.a.mark((function e(n,r,c){var a,o,i,s,l,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length>0){a="";try{a=Object(m.a)(n)}catch(b){}(a=String(a)).length>0?J("".concat(n," = ").concat(a)):J("")}else J("");if(0!==n.length){e.next=6;break}d([]),h([]),e.next=31;break;case 6:if(!(n.length<2)){e.next=11;break}d([]),h(["Type more than one characters."]),e.next=31;break;case 11:return o={query:n,archived:c},"string"===typeof r&&r.length>0&&F.includes(r)&&"everything"!==r?o.types=[r]:o.types=F.filter((function(e){return"everything"!==e})),e.prev=13,e.next=16,t.query({query:T.h,variables:o});case 16:if(i=e.sent,s=i.errors,l=i.data,y.current!==n){e.next=25;break}if(!(Array.isArray(s)&&s.length>0)){e.next=24;break}throw s;case 24:Array.isArray(l.blocks)?(u=l.blocks.filter((function(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)})),d(u),0===u.length?h(["No results found."]):h([])):h(["Unknown error while loading blocks."]);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(13),console.error("error",e.t0),y.current===n&&d([]);case 31:case"end":return e.stop()}}),e,null,[[13,27]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,d,h,J]),Y=Object(a.useCallback)(function(){var e=Object(O.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.target.value||"")&&(n=""),y.current=n,X(n,w,V);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[X,w,V]);Object(a.useEffect)((function(){X(y.current,w,V)}),[X,w,V]);var Z=Object(a.useCallback)((function(){i(!1)}),[i]),Q=Object(a.useCallback)(function(){var e=Object(O.a)(v.a.mark((function e(n,r){var c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!1),c={type:"search",properties:{text:y.current,chosenResult:{index:r,blockId:n._id}}},e.prev=2,e.next=5,t.mutate({mutation:D.c,variables:{block:c}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error("error",e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,t]);return Object(M.jsx)(x.a,{open:o,onClose:Z,hideBackdrop:!0,BackdropProps:{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}}},children:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{className:B.a.backdrop,onClick:Z}),Object(M.jsxs)("div",{className:B.a.dialog,children:[Object(M.jsxs)("div",{style:{position:"sticky",top:0,zIndex:2,background:"var(--background)"},children:[Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(M.jsx)("input",{autoFocus:!0,onFocus:function(e){return e.currentTarget.select()},type:"search",placeholder:e("search"),className:B.a.searchInput,defaultValue:y.current,onChange:Y,onKeyDown:K,style:{}}),Object(M.jsx)("button",{className:"hasIcon",onClick:Z,style:{margin:"0 var(--basis_x2) 0 calc(-4 * var(--basis))"},children:Object(M.jsx)(I.a,{className:"icon"})})]}),Object(M.jsx)(R.a,{defaultValue:w,items:F.map((function(e){return{value:e,title:Object(M.jsx)($.a,{id:"block_menu_type_label_plural_"+e}),icon:Object(M.jsx)("span",{className:"icon",children:z[e]})}})),onChange:S,className:B.a.filters})]}),Object(M.jsxs)("div",{className:B.a.searchResults,style:{display:"string"===typeof y.current&&y.current.length>1||Array.isArray(p)&&p.length>0||Array.isArray(u)&&u.length>0?"block":"none"},children:["string"===typeof G&&G.length>0?Object(M.jsx)("div",{className:B.a.mathResult,children:G}):null,"string"===typeof y.current&&y.current.length>1?Object(M.jsxs)("button",{onClick:function(){return H(!V)},className:!0===V?"default hasIcon":" hasIcon",style:{margin:"0"},children:[Object(M.jsx)("span",{className:"icon",children:Object(M.jsx)(A.a,{})}),!0===V?Object(M.jsx)($.a,{id:"filter_menu_showing_archiv"}):Object(M.jsx)($.a,{id:"filter_menu_show_archiv"})]}):null,"string"===typeof y.current&&y.current.length>1&&(Array.isArray(p)&&p.length>0||Array.isArray(u)&&u.length>0)?Object(M.jsx)("hr",{}):null,Array.isArray(p)&&p.length>0?Object(M.jsx)("div",{className:B.a.searchErrors,children:p.map((function(e){return Object(M.jsx)("p",{children:e},e)}))}):null,Array.isArray(u)&&u.length>0?Object(M.jsx)("div",{children:u.map((function(e,t){return Object(M.jsxs)("div",{className:B.a.blockRow,style:{display:"flex",alignItems:"center",flexDirection:"row"},children:[Object(M.jsx)(E.a,{size:"card",block:e,onClick:function(){return Q(e,t)}}),Object(M.jsx)("div",{className:B.a.blockRowActions,children:Object(M.jsx)(P.a,{block:e,trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{margin:"0",padding:"var(--basis) 0",flexShrink:"0"},children:Object(M.jsx)(C.a,{className:"icon"})}))}})})]},e._id)}))}):null]})]})]})})},V=n(116),H=n(70),U=n(102),W=n(69),G=n(130),J=n(66),K=n.n(J),X=n(243),Y=n(242),Z=n(230),Q=n(239),ee=n(240),te=n(454),ne=n(455),re=n(443),ce=n(456),ae=n(457),oe=n(458),ie=n(459),se=n(460),le=n(461),ue=n(462),de=n(463),be={image:Object(M.jsx)(Q.a,{}),redirect:Object(M.jsx)(k.a,{}),page:Object(M.jsx)(y.a,{}),person:Object(M.jsx)(_.a,{}),poster:Object(M.jsx)(ee.a,{}),definition:Object(M.jsx)(y.a,{})},je=["image","redirect","page","person","poster","definition"],pe={owner:Object(M.jsx)(te.a,{}),editor:Object(M.jsx)(ne.a,{}),viewer:Object(M.jsx)(re.a,{})},fe={"metadate.modified":{type:"date"},"properties.text":{type:"text"},"properties.locale":{type:"text"}},Oe={path:"metadate.modified",asc:!0};function he(e){var t=e.preselectedTypes,n=void 0===t?je:t,r=e.preselectedSorting,i=void 0===r?Oe:r,s=n.filter((function(e){return je.includes(e)}));n=0===s.length?je:s;var l=Object($.c)(),u=l.getString,d=l.translateBlock,j=l.userLocales,p=Object(a.useState)([]),h=Object(c.a)(p,2),m=h[0],g=h[1],x=Object(a.useState)([]),y=Object(c.a)(x,2),_=y[0],k=y[1],w=Object(U.a)(),S=Object(a.useState)(i),I=Object(c.a)(S,2),A=I[0],N=I[1],B=Object(a.useState)("list"),R=Object(c.a)(B,2),L=R[0],T=R[1],D="grid"===L,z=Object(a.useRef)({type:n[0],roles:[]}),F=Object(a.useCallback)((function(){T((function(e){return"grid"===e?"list":"grid"}))}),[]),q=Object(W.a)().loggedIn,V=Object(a.useState)([]),J=Object(c.a)(V,2),Q=J[0],ee=J[1];Object(a.useEffect)((function(){q?(ee(["owner","editor","viewer"]),z.current.roles=["owner","editor","viewer"]):(ee(["viewer"]),z.current.roles=["viewer"])}),[q]);var te=Object(a.useCallback)((function(e){var t,n;if(!e)return"";var r=(null===e||void 0===e||null===(t=e.properties)||void 0===t?void 0:t.text)||(null===e||void 0===e||null===(n=e.properties)||void 0===n?void 0:n.slug)||"",c=d(e,j,r);return c.toLowerCase().startsWith("volt ")?c.slice(5):c}),[d,j]),ne=Object.keys(fe),re=Object(a.useCallback)((function(e){var t=e.filter((function(e){return!!e})).map((function(e){e.hasOwnProperty("properties")||(e.properties={});var t,n="",r="";if("metadate.modified"===A.path)r=n=(null===e||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.modified)||"";else if("properties.text"===A.path)r=function(e){var t=/^(\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff]|.)/i.exec(e);return t?t[0].toUpperCase():""}(n=te(e)||"");else if("properties.locale"===A.path){var c;r=n=String((null===e||void 0===e||null===(c=e.properties)||void 0===c?void 0:c.locale)||"en").toUpperCase()}return Object(f.a)(Object(f.a)({},e),{},{sorting_text:n,sorting_display_text:r})})).sort((function(e,t){return e.sorting_text.localeCompare(t.sorting_text,void 0,{ignorePunctuation:!1,numeric:!1})}));!1===A.asc&&(t=t.reverse());var n=fe[A.path].type;if("text"===n){var r={};if(Array.isArray(t)&&t.length>0)for(var c="???",a=-1;a<=t.length-2;a+=1){var o,i="";if(a>=0&&t.length>=a)i=(null===(o=t[a])||void 0===o?void 0:o.sorting_display_text)||"";var s,l="";if(a+1>=0&&t.length>=a+1)l=(null===(s=t[a+1])||void 0===s?void 0:s.sorting_display_text)||"";a<=t.length-2&&(-1===a||i!==l)&&(c=""===l?"???":l),r.hasOwnProperty(c)||(r[c]={heading:c,blocks:[]}),r[c].blocks.push(t[a+1])}k(Object.values(r))}else if("date"===n){var u={};if(Array.isArray(t)&&t.length>0)for(var d="???",b=-1;b<=t.length-2;b+=1){var j,p,O="";if(b>=0&&t.length>=b)O=((null===(j=t[b])||void 0===j||null===(p=j.metadata)||void 0===p?void 0:p.modified)||"").slice(0,10);var h,v,m="";if(b+1>=0&&t.length>=b+1)m=((null===(h=t[b+1])||void 0===h||null===(v=h.metadata)||void 0===v?void 0:v.modified)||"").slice(0,10);b<=t.length-2&&(-1===b||O!==m)&&(d=""===m?"???":m),u.hasOwnProperty(d)||(u[d]={heading:d,blocks:[]}),u[d].blocks.push(t[b+1])}k(Object.values(u))}else k(t)}),[A,k,te]),de=Object(a.useCallback)((function(e){N((function(t){return Object(f.a)(Object(f.a)({},t),{},{path:e})})),re(m)}),[m,re]),he=Object(a.useCallback)((function(){N((function(e){return Object(f.a)(Object(f.a)({},e),{},{asc:!e.asc})})),re(m)}),[m,re]),ve=Object(a.useCallback)(Object(O.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({types:[z.current.type],roles:z.current.roles,archived:!1});case 2:t=e.sent,g(t),re(t);case 5:case"end":return e.stop()}}),e)}))),[w,g,re]);Object(a.useEffect)((function(){ve()}),[ve]);var me=Object(a.useCallback)((function(e){z.current.type=e,ve()}),[ve]),ge=Object(a.useCallback)((function(e){z.current.roles.includes(e)?z.current.roles=z.current.roles.filter((function(t){return t!==e})):z.current.roles.push(e),ve()}),[ve]),xe=Object(G.a)(),ye=Object(b.g)(),_e=Object(a.useCallback)((function(e){var t=e.type;"string"===typeof t&&t.length>0&&xe({type:t}).then((function(e){ye("/".concat(e._id,"/edit"))})).catch((function(e){console.error(e)}))}),[xe,ye]);return Object(M.jsxs)("div",{style:{margin:"var(--basis_x2) 0"},children:[Object(M.jsxs)("div",{style:{display:"flex",gap:"var(--basis)",flexWrap:"wrap",justifyItems:"flex-start"},children:[Object(M.jsx)("button",{className:"".concat("list"===L?"default":"text"," hasIcon"),style:{width:"auto",margin:"0 calc(-1 * var(--basis)) 0 0","--borderRadius":"list"===L?"0":"calc(0.3 * var(--body-font-size)) 0 0 calc(0.3 * var(--body-font-size))"},onClick:F,children:Object(M.jsx)(ce.a,{className:"icon"})}),Object(M.jsx)("button",{className:"".concat("grid"===L?"default":"text"," hasIcon"),style:{width:"auto",margin:"0","--borderRadius":"grid"===L?"0":"0 calc(0.3 * var(--body-font-size)) calc(0.3 * var(--body-font-size)) 0"},onClick:F,children:Object(M.jsx)(ae.a,{className:"icon"})}),Object(M.jsx)("button",{className:"text hasIcon",style:{width:"auto",margin:"0 calc(-1 * var(--basis)) 0 0",justifyContent:"flex-start",alignItems:"center",paddingInlineEnd:"var(--basis_x0_5)","--borderRadius":"calc(0.3 * var(--body-font-size)) 0 0 calc(0.3 * var(--body-font-size))"},onClick:he,children:!0===A.asc?Object(M.jsx)(oe.a,{className:"icon"}):Object(M.jsx)(ie.a,{className:"icon"})}),Object(M.jsxs)(H.a,{trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text",style:{width:"auto",display:"flex",margin:"0",justifyContent:"flex-start",alignItems:"center",paddingInlineStart:"var(--basis_x0_5)","--borderRadius":"0 calc(0.3 * var(--body-font-size)) calc(0.3 * var(--body-font-size)) 0"},children:Object(M.jsx)("span",{style:{verticalAlign:"middle"},children:Object(M.jsx)($.a,{id:"sort_label_"+A.path.replace(/\./g,"_")})})}))},children:[Object(M.jsx)("div",{style:{marginTop:"8px"}}),ne.map((function(e){return Object(M.jsx)(X.a,{className:"roundMenuItem",onClick:function(){return de(e)},selected:A.path===e,sx:{marginTop:"2px !important",marginBottom:"2px !important"},children:Object(M.jsx)(Y.a,{children:Object(M.jsx)($.a,{id:"sort_label_"+e.replace(/\./g,"_")})})},e)}))]}),n.length>1||Q.length>1?Object(M.jsxs)(M.Fragment,{children:[n.length>1?Object(M.jsxs)(H.a,{trigger:function(e){return Object(M.jsxs)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{width:"auto",flexShrink:"0",margin:"0",justifyContent:"flex-start"},children:[Object(M.jsx)(se.a,{className:"icon"}),Object(M.jsx)("span",{style:{verticalAlign:"middle"},children:u("block_menu_type_label_plural_"+z.current.type)})]}))},children:[Object(M.jsx)("div",{style:{marginTop:"8px"}}),n.map((function(e){return Object(M.jsxs)(X.a,{className:"roundMenuItem",onClick:function(){return me(e)},selected:z.current.type===e,sx:{marginTop:"2px !important",marginBottom:"2px !important"},children:[Object(M.jsx)(Z.a,{children:be[e]}),Object(M.jsx)(Y.a,{children:Object(M.jsx)($.a,{id:"block_menu_type_label_plural_"+e})})]},e)}))]}):null,Q.length>1?Object(M.jsxs)(H.a,{trigger:function(e){return Object(M.jsxs)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{width:"auto",flexShrink:"0",margin:"0",justifyContent:"flex-start"},children:[Object(M.jsx)(se.a,{className:"icon"}),Object(M.jsx)("span",{style:{verticalAlign:"middle"},children:0===z.current.roles.length?u("path_editor_permissions"):z.current.roles.map((function(e){return u("role_"+e)})).join(", ")})]}))},children:[Object(M.jsx)("div",{style:{marginTop:"8px"}}),Q.map((function(e){return Object(M.jsxs)(X.a,{className:"roundMenuItem",onClick:function(){return ge(e)},selected:z.current.roles.includes(e),sx:{marginTop:"2px !important",marginBottom:"2px !important"},children:[Object(M.jsx)(Z.a,{children:pe[e]}),Object(M.jsx)(Y.a,{children:Object(M.jsx)($.a,{id:"role_"+e})})]},e)}))]}):null]}):null,["person"].includes(z.current.type)?null:q?Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("button",{className:"default green hasIcon",style:{width:"auto",flexShrink:"0",margin:"0",justifyContent:"flex-start"},onClick:function(){return _e({type:z.current.type})},children:[Object(M.jsx)(le.a,{className:"icon"}),Object(M.jsx)("span",{style:{verticalAlign:"middle"},children:u("block_type_new_"+z.current.type)})]})}):Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(M.jsxs)("button",{className:"default green hasIcon",style:{flexShrink:"0",margin:"0",justifyContent:"flex-start"},children:[Object(M.jsx)(ue.a,{className:"icon"}),Object(M.jsx)("span",{style:{verticalAlign:"middle"},children:u("needs_login_block_type_new_"+z.current.type)})]})})})]}),Object(M.jsx)("hr",{className:K.a.smallDivider}),Object(M.jsx)(o.a.Fragment,{children:_.filter((function(e){return!!e.blocks&&Array.isArray(e.blocks)&&e.blocks.length>0})).map((function(e){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h2",{style:{marginTop:"var(--basis_x8)"},children:e.heading}),Object(M.jsx)("div",{className:D?K.a.grid_layout:K.a.list_layout,children:e.blocks.filter(Boolean).map((function(e){return Object(M.jsxs)("div",{style:{alignItems:D?"flex-end":"center",flexDirection:"row",height:"auto",display:"inline-flex"},className:K.a.blockRow,children:[Object(M.jsx)(E.a,{size:D?"icon":"image"===(null===e||void 0===e?void 0:e.type)?"line":"card",block:e}),!0===(null===e||void 0===e?void 0:e.isSortHeading)?null:Object(M.jsx)("div",{className:K.a.blockRowActions,children:Object(M.jsx)(P.a,{onReloadContext:ve,block:e,trigger:function(e){return Object(M.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{margin:"0",padding:"var(--basis_x0_5) 0",flexShrink:"0"},children:Object(M.jsx)(C.a,{className:"icon"})}))}})})]},e._id)}))})]})}))},A)]})}var ve=function(e){var t=e.preselectedTypes,n=(0,Object($.c)().getString)("list_title"),r=Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:Object(M.jsx)("button",{className:"default hasIcon",onClick:function(){var e=new CustomEvent("open_search");window.dispatchEvent(e)},title:"Search (\u2318K / Ctrl+K)",children:Object(M.jsx)(de.a,{className:"icon"})})})});return Object(M.jsxs)("div",{className:K.a.root,children:[Object(M.jsxs)(p.a,{children:[Object(M.jsx)("title",{children:n}),Object(M.jsx)("meta",{name:"title",content:n}),Object(M.jsx)("meta",{name:"og:title",content:n}),Object(M.jsx)("meta",{name:"twitter:title",content:n}),Object(M.jsx)("meta",{name:"description",content:""}),Object(M.jsx)("meta",{property:"og:description",content:""}),Object(M.jsx)("meta",{name:"twitter:description",content:""})]}),Object(M.jsx)(V.a,{block:{type:"page",properties:{text:n,slug:"list",icon:{type:"emoji",emoji:"\ud83d\uddd2"}}},title:n,rightActions:r}),Object(M.jsx)("div",{className:"basis_0_2 ".concat(K.a.app," ").concat(K.a.spine_aligned),dir:"auto",children:Object(M.jsxs)("main",{className:"".concat(K.a.contentWrapper),children:[Object(M.jsx)("h1",{dir:"auto",style:{whiteSpace:"pre-wrap"},children:n}),Object(M.jsx)("div",{className:K.a.items,children:Object(M.jsx)(he,{preselectedTypes:t})})]})})]})},me=n(15),ge=n(51),xe=n(105),ye=n(136),_e=n(151),ke=n.n(_e),we=function(e){var t=e.className,n=void 0===t?"":t,r=e.style,o=void 0===r?{}:r,i=e.forBlockId,s=void 0===i?"":i,l=Object(a.useState)([]),u=Object(c.a)(l,2),d=u[0],b=u[1],j=Object(U.a)(),p=Object(G.a)(),f=Object(ye.b)(),h=Object(a.useCallback)(Object(O.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({types:["reaction"],roles:["owner"],archived:!1});case 2:t=e.sent.filter((function(e){return e.properties.reactionFor===s})),console.log("loadedUserReactions",t),b(t);case 5:case"end":return e.stop()}}),e)}))),[s,j]);Object(a.useEffect)((function(){"string"===typeof s&&s.length>0&&h()}),[s,h]);var m=Object(a.useCallback)((function(e){var t=d.filter((function(t){var n,r,c,a;return"reaction"===(null===t||void 0===t?void 0:t.type)&&"emoji"===(null===t||void 0===t||null===(n=t.properties)||void 0===n||null===(r=n.icon)||void 0===r?void 0:r.type)&&(null===t||void 0===t||null===(c=t.properties)||void 0===c||null===(a=c.icon)||void 0===a?void 0:a.emoji)===e}));t.length>0?f({ids:t.map((function(e){return e._id})),archive:!0}).then((function(){h()})).catch((function(e){console.error("error",e)})):p({type:"reaction",properties:{icon:{type:"emoji",emoji:e},reactionFor:s}}).then((function(e){console.log("data",e),h()})).catch((function(e){console.error("error",e)}))}),[d,s,f,p,h]);return Object(M.jsx)("div",{className:n,style:o,children:["\u2b50\ufe0f"].map((function(e){var t=d.filter((function(t){var n,r,c,a;return"reaction"===(null===t||void 0===t?void 0:t.type)&&"emoji"===(null===t||void 0===t||null===(n=t.properties)||void 0===n||null===(r=n.icon)||void 0===r?void 0:r.type)&&(null===t||void 0===t||null===(c=t.properties)||void 0===c||null===(a=c.icon)||void 0===a?void 0:a.emoji)===e}));return Object(M.jsx)("button",{className:"\n              ".concat(ke.a.reactionButton,"\n              ").concat(t.length>0?ke.a.selected:"","\n              ").concat(t.length>0?"default":"text","\n              hasIcon\n            "),onClick:function(){return m(e)},children:Object(M.jsx)(xe.a,{className:"icon",emojiClassName:ke.a.emoji,emoji:e},e)},e)}))},d)},Se=n(38),Ie=n(207),Ae=n(44),Ce=n.n(Ae),Ne=n(446),Be=n(464),Pe=n(71),Ee=Object(a.lazy)((function(){return n.e(1).then(n.bind(null,533))})),Re=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(17)]).then(n.bind(null,481))}));var Le=function(){var e=Object(a.useRef)(!1),t=Object($.c)(),n=t.getString,r=t.translateBlock,o=t.userLocales,i=Object(W.a)().loggedIn,s=Object(Ie.a)(),l=Object(U.a)(),u=Object(b.h)().id,d=void 0===u?"":u,j=d;if(d.includes("=")){var h=d.split("="),m=Object(c.a)(h,2)[1];j=m}var g=Object(a.useState)({type:"page",properties:{},content:[]}),x=Object(c.a)(g,2),y=x[0],_=x[1],k=y.properties||{},w=k.slug||j||"",S=Object(a.useState)([]),I=Object(c.a)(S,2),A=I[0],C=I[1],N=Object(a.useState)([]),B=Object(c.a)(N,2),P=B[0],R=B[1],L=Object(a.useState)(k.locale||o||["en"]),T=Object(c.a)(L,2),D=T[0],z=T[1],F=Object(a.useCallback)((function(e){z([e])}),[z]),q=Object(a.useState)(null),H=Object(c.a)(q,2),G=H[0],J=H[1],K=Object(a.useCallback)((function(e){J(e),window.umami&&"object"===typeof e&&null!==e&&e.hasOwnProperty("code")&&"string"===typeof e.code&&window.umami.trackEvent("E: "+e.code)}),[J]);if(Object(a.useEffect)((function(){var t=y.properties||{};!1!==e.current||"string"!==typeof j||""===j||j===y._id||j===t.slug||null!==G&&G.for_slugOrId===j||(e.current=!0,s(j).then(function(){var t=Object(O.a)(v.a.mark((function t(n){var r,c,a,o,i,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("object"===typeof n&&null!==n){t.next=5;break}K({code:"404",for_slugOrId:j}),e.current=!1,t.next=23;break;case 5:if(r=n,!(Array.isArray(n.content)&&n.content.length>0)){t.next=16;break}if(c=Object(me.a)(n.content),a=n.content.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),o=[],!(a.length>0)){t.next=14;break}return t.next=13,l({ids:a});case 13:o=t.sent;case 14:c=c.map((function(e){return e.hasOwnProperty("block")||(e.block=o.find((function(t){return t._id===e.blockId}))),e})),r=Object(f.a)(Object(f.a)({},r),{},{content:c});case 16:i=(r.content||[]).map((function(e){return e.block})),s=Object(me.a)(new Set([n].concat(Object(me.a)(i)).filter(Boolean).flatMap((function(e){var t=(null===e||void 0===e?void 0:e.properties)||{};return[t.locale||null].concat(Object(me.a)((t.translations||[]).filter((function(e){return e.text&&e.text.length>0})).map((function(e){return e.locale}))))})).filter(Boolean))),R(s),K(null),_(r),C(i),e.current=!1;case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){console.error(t),K(Object(f.a)(Object(f.a)({},t),{},{for_slugOrId:j})),e.current=!1})))}),[G,j,y,y._id,s,_,l,C,R,K]),null!==G&&G.for_slugOrId===j){var X="Error "+G.code;return Object(M.jsxs)("div",{className:Ce.a.viewer,children:[Object(M.jsxs)(p.a,{children:[Object(M.jsx)("title",{children:X}),Object(M.jsx)("meta",{name:"title",content:X}),Object(M.jsx)("meta",{name:"og:title",content:X}),Object(M.jsx)("meta",{name:"twitter:title",content:X}),Object(M.jsx)("meta",{name:"description",content:""}),Object(M.jsx)("meta",{property:"og:description",content:""}),Object(M.jsx)("meta",{name:"twitter:description",content:""}),Object(M.jsx)("meta",{property:"og:image",content:""}),Object(M.jsx)("meta",{name:"twitter:image",content:""}),Object(M.jsx)("meta",{property:"twitter:card",content:"summary"})]}),Object(M.jsx)(V.a,{block:{type:"page",properties:{text:X,icon:{type:"emoji",emoji:"\u26a0\ufe0f"}}},title:"Error",rightActions:null}),Object(M.jsx)("div",{className:"basis_x1 ".concat(Ce.a.app," ").concat(Ce.a.spine_aligned),dir:"auto",children:Object(M.jsxs)("main",{className:"".concat(Ce.a.contentWrapper),children:["300"===G.code?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h1",{children:Object(M.jsx)($.a,{id:"error_300_title"})}),Object(M.jsx)("br",{}),Object(M.jsx)("p",{children:Object(M.jsx)($.a,{id:"error_300_description"})}),Object(M.jsx)("br",{}),G.blocks.map((function(e){return Object(M.jsx)(E.a,{block:e,forceId:!0,pathSuffix:"view"},e._id)}))]}):null,"403"===G.code?Object(M.jsx)(Ee,{errorName:"no_access"}):null,"404"===G.code?Object(M.jsx)(Ee,{errorName:"not_found"}):null]})})]})}var Y,Z=y.type||null,Q=r(y,D,n("placeholder_headline_empty")),ee=k.coverphoto||{},te=k.pronouns||"",ne=Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[i&&!!y._id&&Object(M.jsx)(ge.b,{to:"/".concat(y._id,"/edit"),style:{marginRight:"var(--basis_x2)"},children:Object(M.jsxs)("button",{className:"text hasIcon",children:[Object(M.jsx)(Ne.a,{className:"icon"}),Object(M.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(M.jsx)($.a,{id:"edit_block"})})]})}),i&&!!y._id&&Object(M.jsx)(we,{forBlockId:y._id,style:{marginRight:"var(--basis_x2)"}}),i&&y._id&&""!==w?Object(M.jsx)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(w),e.target="_blank",e.rel="noreferrer",e.click()},children:Object(M.jsx)(Be.a,{className:"icon"})}):null,P.length>1?Object(M.jsx)(a.Suspense,{children:Object(M.jsx)(Re,{onChange:F,defaultValue:D[0]||o[0]||"en",options:P,style:{marginRight:"var(--basis_x2)"}})}):null,Object(M.jsx)("button",{className:"default hasIcon",onClick:function(){var e=new CustomEvent("open_search");window.dispatchEvent(e)},title:"Search (\u2318K / Ctrl+K)",children:Object(M.jsx)(de.a,{className:"icon"})})]})}),re={__html:Object(Pe.a)(Q)},ce="",ae=(null===y||void 0===y||null===(Y=y.computed)||void 0===Y?void 0:Y.contentAsPlaintext)||null;if("string"===typeof ae&&""!==ae.length){(ae=ae.replace(/[\r\n]+/g,"\n")).length>200&&(ae=ae.slice(0,200)+"\u2026"),(ae=ae.split("\n")).length>2&&(ae=ae.slice(0,2)).push("\u2026"),ce=ae.join("\n")}var oe=Object(Se.getImageUrl)(ee,{width:1400,height:400}),ie=Object(Se.getImageUrl)(ee,{width:1e3,height:1e3}),se=null;"string"===typeof oe&&oe.length>0&&(se="poster"===Z||"image"===Z?Object(M.jsx)("div",{style:{width:"1000px",maxWidth:"100%",margin:"0 auto"},children:Object(M.jsx)("img",{src:oe,alt:"",style:{width:"100%",height:"auto"}})}):Object(M.jsx)("div",{style:{backgroundImage:"url(".concat(oe,")")},className:Ce.a.coverphoto}));var le=null;if(k.hasOwnProperty("icon")&&"object"===typeof k.icon&&null!==k.icon&&!Array.isArray(k.icon)&&k.icon.hasOwnProperty("type")&&"string"===typeof k.icon.type){if("emoji"===k.icon.type&&k.icon.hasOwnProperty("emoji")&&"string"===typeof k.icon.emoji&&0!==k.icon.emoji.length&&(le=Object(M.jsx)(xe.a,{className:"".concat(Ce.a.icon," ").concat(""===oe?"":Ce.a.coverphotoIsSet),emoji:k.icon.emoji})),null===le&&"file"===k.icon.type&&k.icon.hasOwnProperty("fileId")&&"string"===typeof k.icon.fileId&&0!==k.icon.fileId.length){var ue=k.icon.fileId;le=Object(M.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=400&h=400&id=").concat(encodeURIComponent(ue),")")},className:"".concat(Ce.a.icon," ").concat(""===oe?"":Ce.a.coverphotoIsSet)})}if(null===le){var be=Object(Se.getImageUrl)(k.icon,{width:400,height:400});"string"===typeof be&&0!==be.length&&(le=Object(M.jsx)("div",{style:{backgroundImage:"url(".concat(be,")")},className:"".concat(Ce.a.icon," ").concat(""===oe?"":Ce.a.coverphotoIsSet)}))}}return Object(M.jsxs)("div",{className:Ce.a.viewer,children:[Object(M.jsxs)(p.a,{children:[Object(M.jsx)("title",{children:Q}),Object(M.jsx)("meta",{name:"title",content:Q}),Object(M.jsx)("meta",{name:"og:title",content:Q}),Object(M.jsx)("meta",{name:"twitter:title",content:Q}),Object(M.jsx)("meta",{name:"description",content:ce}),Object(M.jsx)("meta",{property:"og:description",content:ce}),Object(M.jsx)("meta",{name:"twitter:description",content:ce}),Object(M.jsx)("meta",{property:"og:image",content:ie}),Object(M.jsx)("meta",{name:"twitter:image",content:ie}),Object(M.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),Object(M.jsx)("meta",{property:"twitter:card",content:"summary"}),Object(M.jsx)("meta",{property:"og:url",content:window.location.href}),Object(M.jsx)("meta",{property:"og:type",content:"article"})]}),Object(M.jsx)(V.a,{block:y,rightActions:ne}),Object(M.jsxs)("div",{className:"basis_0_8 ".concat(Ce.a.app," ").concat(Ce.a.spine_aligned),dir:"auto",children:["page"===Z||"person"===Z||"redirect"===Z||"poster"===Z||"image"===Z?se:null,Object(M.jsxs)("main",{className:"".concat(Ce.a.contentWrapper),children:["page"===Z||"person"===Z||"redirect"===Z?le:null,""!==Q?Object(M.jsx)("h1",{dir:"auto",dangerouslySetInnerHTML:re,style:{whiteSpace:"pre-wrap"}}):null,"person"===Z&&""!==te?Object(M.jsx)("p",{dir:"auto",children:Object(M.jsx)("strong",{style:{padding:"var(--basis)",display:"inline-block",backgroundColor:"rgba(var(--on-background-rgb), var(--alpha-less))"},children:te})}):null,Object(M.jsxs)("div",{className:Ce.a.items,children:[A.filter((function(e){return!!e})).filter((function(e){return!1!==e.properties.active})).map((function(e){return Object(M.jsx)(E.a,{block:e,locales:D,size:["page","person","redirect"].includes((null===e||void 0===e?void 0:e.type)||"")?"line":"card"},e._id)})),"glossary"===w?Object(M.jsx)(he,{preselectedTypes:["definition"],preselectedSorting:{path:"properties.text",asc:!1}}):null]})]})]})]})},Te=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(5)]).then(n.bind(null,534))}));function De(){var e=Object(b.h)().type,t=void 0===e?"":e;return Object(M.jsx)(ve,{preselectedTypes:[t]},t)}var $e=function(){var e=Object(b.f)("/"),t=Object(b.e)(),n=Object(a.useState)({}),r=Object(c.a)(n,2),o=r[0],i=r[1];Object(a.useEffect)((function(){var e="",n=t.pathname.split("/").filter((function(e){return e.length>0}));if(n.length>0){var r=n.pop(),c=r,a="view";("edit"===r||"view"===r)&&n.length>0&&(a=r,c=n.pop());var s="redirect page poster person definition image".split(" "),l="redirects pages posters people definitions images".split(" ");if("list"===c||"map"===c||"places"===c)e="/".concat(c);else if(s.includes(c))e="/list/".concat(c);else if(l.includes(c)){var u=s[l.indexOf(c)];e="/list/".concat(u)}else e="/".concat(c,"/").concat(a);"search"===c&&window.dispatchEvent(new CustomEvent("open_search"))}o.pathname!==e&&i({pathname:e})}),[t,o,i]);var s="VoltLink",l="VoltLink is an information-hub about Volt Europa.";return Object(M.jsx)(M.Fragment,{children:Object(M.jsx)("div",{className:"".concat(d.a.app," ").concat(e?d.a.isStartpage:""),children:Object(M.jsxs)(j.d,{children:[e?null:Object(M.jsx)(j.b,{}),Object(M.jsxs)(j.a,{children:[Object(M.jsx)(q,{}),Object(M.jsxs)(b.c,{location:o,children:[Object(M.jsx)(b.a,{path:"/list",element:Object(M.jsx)(ve,{})}),Object(M.jsx)(b.a,{path:"/list/:type",element:Object(M.jsx)(De,{})}),Object(M.jsx)(b.a,{path:"/:id/view",element:Object(M.jsx)(Le,{})}),Object(M.jsx)(b.a,{path:"/:id/edit",element:Object(M.jsx)(a.Suspense,{children:Object(M.jsx)(Te,{})})}),Object(M.jsx)(b.a,{path:"/",element:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(p.a,{children:[Object(M.jsx)("title",{children:s}),Object(M.jsx)("meta",{name:"title",content:s}),Object(M.jsx)("meta",{name:"og:title",content:s}),Object(M.jsx)("meta",{name:"twitter:title",content:s}),Object(M.jsx)("meta",{name:"description",content:l}),Object(M.jsx)("meta",{name:"og:description",content:l}),Object(M.jsx)("meta",{name:"twitter:description",content:l})]}),Object(M.jsx)(j.c,{})]})})]})]})]})})})},Me=(n(348),n(160)),ze=n(467),Fe=n(225),qe=n(477),Ve=n(87),He=n(470),Ue=n(471),We=n(468);window.process={},window.env="prod",window.domains={frontend:"https://volt.link/",backend:"https://api.volt.link/",storage:"https://storage.volt.link/"},window.graphql_uri=window.domains.backend+"graphql/v1/";var Ge=new He.a({uri:window.graphql_uri,cache:new Ue.a,credentials:"include",defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});function Je(){var e=Object(a.useState)(navigator.languages),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(null),u=Object(c.a)(s,2),d=u[0],b=u[1];Object(a.useEffect)((function(){var e=window.localStorage.getItem("locale")||null;i("string"===typeof e&&""!==e?[e]:navigator.languages)}),[i]),Object(a.useEffect)((function(){if(window.umami){var e=navigator.languages;if(e||Array.isArray(e)){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,a=(c=c.toLowerCase()).split("-")[0];"string"===typeof a&&""!==a&&window.umami.trackEvent("L: "+a)}}catch(o){n.e(o)}finally{n.f()}}}}),[]);var j=Object(a.useCallback)((function(e){i([e.target.dataset.locale])}),[i]),p=Object(a.useCallback)((function(e){b(e.length>0?e[0]:"")}),[b]);Object(a.useEffect)((function(){var e=function(e){var t=(e.detail||{}).locale||null;null===t?n&&Array.isArray(n)&&n.length>0&&(i(navigator.languages),window.localStorage.removeItem("locale")):(i([t]),window.localStorage.setItem("locale",t))};return window.addEventListener("change_locale",e),function(){window.removeEventListener("change_locale",e)}}),[n,i]);var f=Object(ze.a)("(prefers-color-scheme: dark)"),O=o.a.useMemo((function(){return Object(Fe.a)({palette:{mode:f?"dark":"light"},components:{MuiListItemIcon:{styleOverrides:{root:{color:"inherit"}}},MuiListItemText:{styleOverrides:{primary:{fontFamily:"'Ubuntu', 'Noto Kufi Arabic', 'Geeza Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif"}}}}})}),[f]);return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("div",{id:"react-notification",style:{zIndex:"10000"}},"react-notification"),Object(M.jsx)(Me.a,{userLocales:n,onLocaleChange:p,children:Object(M.jsx)(We.a,{client:Ge,children:Object(M.jsx)(qe.a,{theme:O,children:Object(M.jsx)(Ve.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{minWidth:"unset"},classes:{variantSuccess:"".concat(l.a.snackbar," ").concat(l.a.success),variantError:"".concat(l.a.snackbar," ").concat(l.a.error),variantWarning:"".concat(l.a.snackbar," ").concat(l.a.warning),variantInfo:"".concat(l.a.snackbar," ").concat(l.a.info)},domRoot:document.getElementById("react-notification"),children:Object(M.jsx)(ge.a,{children:Object(M.jsx)($e,{locales:Me.b,currentLocale:d,onLanguageChange:j})})})})})},"AppLocalizationProvider")]})}var Ke=document.getElementById("root");Object(i.createRoot)(Ke).render(Object(M.jsx)(Je,{}))},36:function(e,t,n){e.exports={icon:"BlockIcon_icon__1wJFr",square:"BlockIcon_square__11KYn",round:"BlockIcon_round__1sKzE"}},38:function(e,t){function n(e){if(e.startsWith("#")&&(e=e.substring(1)),3===e.length)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);else if(6!==e.length)throw new Error("Invalid hex color: "+e);for(var t=[],n=0;n<=2;n++)t[n]=parseInt(e.substr(2*n,2),16);return t}function r(e){return function(e){var t="string"===typeof e?n(e):e;return.2126*t[0]+.7152*t[1]+.0722*t[2]}(e)>=165?"000":"fff"}function c(e){var t;return t=function(e){var t,n;return(t=document.createElement("canvas")).height=1,t.width=1,(n=t.getContext("2d")).fillStyle=e,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}(e),"#"+[0,1,2].map((function(e){return("0"+t[e].toString(16)).slice(-2)})).join("")}e.exports={getImageUrl:function(e,t){var n=t||{},r=n.width,c=void 0===r?null:r,a=n.height,o=void 0===a?null:a,i=n.format,s=void 0===i?window.imageFormat||"jpg":i;if("object"===typeof e&&null!==e&&!Array.isArray(e)){if("url"===e.type&&e.url)return"".concat(window.domains.storage,"download_url/?f=").concat(s,"&w=").concat(c,"&h=").concat(o,"&url=").concat(encodeURIComponent(e.url||""));if("file"===e.type&&e.fileId)return"".concat(window.domains.storage,"download_file/?f=").concat(s,"&w=").concat(c,"&h=").concat(o,"&id=").concat(encodeURIComponent(e.fileId||""))}return""},getBlockColor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={color:null,colorRGB:null,contrastingColor:null,contrastingColorRGB:null};if(e.properties=e.properties||{},e.hasOwnProperty("properties")&&e.properties.hasOwnProperty("color")&&e.properties.color){var a=["purple","red","green","blue","yellow"],o=e.properties.color;if(a.includes(o))t.color="var(--".concat(o,")"),t.colorRGB="var(--".concat(o,"-rgb)"),t.contrastingColor="var(--on-".concat(o,")"),t.contrastingColorRGB="var(--on-".concat(o,"-rgb)");else{if(o.startsWith("#"))4!==o.length&&7!==o.length&&(o=null);else{var i=c(o);o="#000000"===i&&"black"!==o?null:i}if(o){t.color=o;var s=n(o);t.colorRGB=s.join(", "),t.contrastingColor="#"+r(o),t.contrastingColorRGB=n(t.contrastingColor)}}}return t}}},44:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",items:"Viewer_items__2FgjF",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",type_p:"Viewer_type_p__O5DZS",viewer:"Viewer_viewer__JHrvB"}},48:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"b",(function(){return p}));var r,c,a,o,i,s,l=n(32),u=n(45),d=Object(u.a)(r||(r=Object(l.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),b=Object(u.a)(c||(c=Object(l.a)(["\n  mutation archiveBlocks ($ids: [ObjectID]!) {\n    archiveBlocks (ids: $ids)\n  }\n"]))),j=Object(u.a)(a||(a=Object(l.a)(["\n  mutation unarchiveBlocks ($ids: [ObjectID]!) {\n    unarchiveBlocks (ids: $ids)\n  }\n"]))),p=Object(u.a)(o||(o=Object(l.a)(["\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n"])));Object(u.a)(i||(i=Object(l.a)(["\n  mutation setCursor ($cursor: InputCursor!) {\n    setCursor(cursor: $cursor)\n  }\n"]))),Object(u.a)(s||(s=Object(l.a)(["\n  mutation removeCursor ($type: CursorType!, $blockId: ObjectID!, $propertyName: String) {\n    removeCursor(type: $type, blockId: $blockId, propertyName: $propertyName)\n  }\n"])))},54:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return x})),n.d(t,"h",(function(){return y})),n.d(t,"e",(function(){return _}));var r,c,a,o,i,s,l,u,d,b,j,p=n(32),f=n(45),O=Object(f.a)(r||(r=Object(p.a)(["\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n\t\t\t\t    # contentAsPlaintextPerBlock\n\t\t\t\t    # contentAsMarkdownPerBlock\n\t\t\t\t    contentAsPlaintext\n\t\t\t\t    # contentAsMarkdown\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n\t\t\t\t# contentAsPlaintextPerBlock\n\t\t\t\t# contentAsMarkdownPerBlock\n\t\t\t\tcontentAsPlaintext\n\t\t\t\t# contentAsMarkdown\n      }\n    }\n  }\n"]))),h=Object(f.a)(c||(c=Object(p.a)(["\n  query getBlocks ($ids: [ObjectID], $slugs: [String], $types: [String], $archived: Boolean, $roots: [ObjectID], $roles: [String]) {\n    blocks (ids: $ids, slugs: $slugs, types: $types, archived: $archived, roots: $roots, roles: $roles) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n\t\t\t\t# contentAsPlaintextPerBlock\n\t\t\t\t# contentAsMarkdownPerBlock\n\t\t\t\tcontentAsPlaintext\n\t\t\t\t# contentAsMarkdown\n      }\n    }\n  }\n"]))),v=Object(f.a)(a||(a=Object(p.a)(["\n  query getBlocks ($ids: [ObjectID], $slugs: [String], $types: [String], $archived: Boolean, $roots: [ObjectID] $roles: [String]) {\n    blocks (ids: $ids, slugs: $slugs, types: $types, archived: $archived, roots: $roots, roles: $roles) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n\t\t\t\t    # contentAsPlaintextPerBlock\n\t\t\t\t    # contentAsMarkdownPerBlock\n\t\t\t\t    contentAsPlaintext\n\t\t\t\t    # contentAsMarkdown\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n\t\t\t\t# contentAsPlaintextPerBlock\n\t\t\t\t# contentAsMarkdownPerBlock\n\t\t\t\tcontentAsPlaintext\n\t\t\t\t# contentAsMarkdown\n      }\n    }\n  }\n"]))),m=(Object(f.a)(o||(o=Object(p.a)(["\n  query getBlockBySlug ($slug: String!) {\n    block: blockBySlug (slug: $slug) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n\t\t\t\t    # contentAsPlaintextPerBlock\n\t\t\t\t    # contentAsMarkdownPerBlock\n\t\t\t\t    contentAsPlaintext\n\t\t\t\t    # contentAsMarkdown\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n\t\t\t\t# contentAsPlaintextPerBlock\n\t\t\t\t# contentAsMarkdownPerBlock\n\t\t\t\tcontentAsPlaintext\n\t\t\t\t# contentAsMarkdown\n      }\n    }\n  }\n"]))),Object(f.a)(i||(i=Object(p.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n      userroles\n    }\n  }\n"])))),g=(Object(f.a)(s||(s=Object(p.a)(["\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),Object(f.a)(l||(l=Object(p.a)(["\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed {\n        sort\n        # roles\n        # inherited_block_permissions\n\t\t\t\t# contentAsPlaintextPerBlock\n\t\t\t\t# contentAsMarkdownPerBlock\n\t\t\t\t# contentAsPlaintext\n\t\t\t\t# contentAsMarkdown\n      }\n    }\n  }\n"])))),x=(Object(f.a)(u||(u=Object(p.a)(["\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"]))),Object(f.a)(d||(d=Object(p.a)(["\n  query checkSlug ($slug: String!) {\n    checkSlug (slug: $slug) {\n      isOkay\n      errors\n      existsAsSlug\n      existsAsId\n    }\n  }\n"])))),y=Object(f.a)(b||(b=Object(p.a)(["\n  query search ($query: String!, $types: [String], $archived: Boolean) {\n    blocks: search (query: $query, types: $types, archived: $archived) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n\t\t\t\t# contentAsPlaintextPerBlock\n\t\t\t\t# contentAsMarkdownPerBlock\n\t\t\t\tcontentAsPlaintext\n\t\t\t\t# contentAsMarkdown\n      }\n    }\n  }\n"]))),_=Object(f.a)(j||(j=Object(p.a)(["\n  query getLastModifiedBlocks ($first: Int, $types: [String], $archived: Boolean) {\n    lastModifiedBlocks (first: $first, types: $types, archived: $archived) {\n    \t_id\n      type\n      properties\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n\t\t\t\tcontentAsPlaintext\n      }\n    }\n  }\n"])))},66:function(e,t,n){e.exports={root:"List_root__HV2hJ",app:"List_app__osHkL",spine_aligned:"List_spine_aligned__1_f4u",items:"List_items__29a1C",contentWrapper:"List_contentWrapper__1H5GD",type_p:"List_type_p__V70Yn",blockRow:"List_blockRow__2h-9h",blockRowActions:"List_blockRowActions__O3oX6",smallDivider:"List_smallDivider__12mlJ",grid_layout:"List_grid_layout__1CpOq",list_layout:"List_list_layout__7zKtm"}},67:function(e,t,n){"use strict";var r=n(4),c=n(20),a=n(5),o=n(24),i=n(8),s=n.n(i),l=n(1),u=n(17),d=n(57),b=n(128),j=n.n(b),p=n(0);function f(e,t){var n,r={},c=Object(u.a)(t);try{for(c.s();!(n=c.n()).done;){var a=n.value;e.hasType(a)&&(r[a]="application/json"===a?JSON.parse(e.getData(a)):e.getData(a))}}catch(o){c.e(o)}finally{c.f()}return{data:r,transmat:e}}function O(e){var t=e.onTransmit,n=e.onReceive,r=e.checkEntry,a=e.draggable,o=e.style,i=e.className,b=e.children,O=e.mimetypes,h=void 0===O?["application/json"]:O,v=Object(l.useRef)(null);return Object(l.useEffect)((function(){var e=Object(d.addListeners)(v.current,"transmit",function(){var e=Object(c.a)(s.a.mark((function e(n){var r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new d.Transmat(n),"function"!==typeof t){e.next=6;break}return e.next=4,t(r);case 4:"object"!==typeof(c=e.sent)||null===c||Array.isArray(c.data)||"object"!==typeof c.data||null===c.data||r.setData(c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a=Object(d.addListeners)(v.current,"receive",(function(e){var t=new d.Transmat(e),c=f(t,h),a=!1;"function"===typeof r&&(a=r(c)),t.accept()&&(a&&"function"===typeof n&&n(c),e.preventDefault())})),o=new d.TransmatObserver((function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,a=f(new d.Transmat(c.event),h),o=!1;"function"===typeof r&&(o=r(a)),o&&(c.target.classList.toggle(j.a.drag_over,c.isTarget),c.target.classList.toggle(j.a.drag_active,c.isActive))}}catch(i){n.e(i)}finally{n.f()}}));return o.observe(v.current),function(){e(),a(),o.disconnect()}}),[t,n,r,h]),Object(p.jsx)("div",{ref:v,style:o,className:i,draggable:a?"true":"false",tabIndex:"0",children:b})}var h=n(71),v=n(16),m=n(38),g=n(448),x=n(449);var y=function(e){var t=e.block,n=e.style,c=e.locales,o=Object(l.useState)({__html:""}),i=Object(a.a)(o,2),s=i[0],u=i[1],d=(0,Object(v.c)().translateBlock)(t,c,"");Object(l.useEffect)((function(){var e=Object(h.a)(d);u({__html:e})}),[d,u]);var b={dir:"auto",style:Object(r.a)({whiteSpace:"pre-wrap",display:"flex"},n)},j=Object(m.getBlockColor)(t).color;j&&(b.style.color=j);var f="body";t.properties.hasOwnProperty("text_style")&&(f=t.properties.text_style);var O=(t||{}).properties||{},y=O.text_decorations,_=void 0===y?[]:y,k=O.checked,w=[];if(_.includes("checkbox")){var S={key:"checkbox",style:{margin:"var(--basis_x0_2) var(--basis) 0 0",height:"var(--prefix-icon-size)",width:"var(--prefix-icon-size)"}};k?w.push(Object(p.jsx)(g.a,Object(r.a)({},S))):w.push(Object(p.jsx)(x.a,Object(r.a)({},S)))}var I=Object(p.jsx)("span",{dangerouslySetInnerHTML:s}),A=null;switch(f){case"h1":A=Object(p.jsx)("a",{href:"#".concat(t._id),id:t._id,children:Object(p.jsxs)("h1",Object(r.a)(Object(r.a)({},b),{},{children:[w,I]}))});break;case"h2":A=Object(p.jsx)("a",{href:"#".concat(t._id),id:t._id,children:Object(p.jsxs)("h2",Object(r.a)(Object(r.a)({},b),{},{id:t._id,children:[w,I]}))});break;case"h3":A=Object(p.jsx)("a",{href:"#".concat(t._id),id:t._id,children:Object(p.jsxs)("h3",Object(r.a)(Object(r.a)({},b),{},{id:t._id,children:[w,I]}))});break;case"caption":A=Object(p.jsxs)("caption",Object(r.a)(Object(r.a)({},b),{},{children:[w,I]}));break;default:A=Object(p.jsxs)("p",Object(r.a)(Object(r.a)({},b),{},{children:[w,I]}))}return Object(p.jsx)("div",{style:{display:"flex"},children:A})};var _=function(e){var t=e.block,n=e.clickable,c=void 0===n||n,o=e.locales,i=Object(l.useState)({__html:""}),s=Object(a.a)(i,2),u=s[0],d=s[1],b=Object(v.c)(),j=b.getString,f=(0,b.translateBlock)(t,o,j("placeholder_headline_empty"));Object(l.useEffect)((function(){var e=Object(h.a)(f,{linkify:!1});d({__html:e})}),[f,d]);var O="";t&&t.properties&&t.properties.url&&(O=t.properties.url);var g=Object(m.getBlockColor)(t),x=g.color,y=g.contrastingColor,_={};return x&&(_["--button-background"]=x,_["--button-color"]=y),!0===c&&"string"===typeof O&&O.length>0?Object(p.jsx)("a",Object(r.a)(Object(r.a)({href:O},O.startsWith(window.domains.frontend)?{}:{target:"_blank",rel:"noopener noreferrer"}),{},{children:Object(p.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:u,className:"default square",style:Object(r.a)({margin:"0",whiteSpace:"pre-wrap"},_)})})):Object(p.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:u,disabled:"disabled",className:"default square",style:Object(r.a)({margin:"0",whiteSpace:"pre-wrap"},_)})};function k(e){var t=e.block,n=Object(m.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(p.jsx)("hr",{style:r})}var w=n(15);var S=n(51),I=n(83),A=n.n(I),C=n(205);function N(e){return e.toISOString().replace("T"," ").replace(/(:[^:]*?)$/,"")}var B=function(e){var t=e.block,n=e.clickable,c=void 0===n||n,o=e.onClick,i=e.locales,s=e.forceId,u=e.pathSuffix,d=e.size,b=void 0===d?"line":d,j=Object(v.c)(),f=j.getString,O=j.translateBlock,g=j.userLocales,x=(null===t||void 0===t?void 0:t.type)||"unknown",y=t.properties||{},_=y.slug||"",k=function(e){var t=e.block,n=void 0===t?null:t,r=e.forceId,c=void 0!==r&&r,o=e.pathSuffix,i=void 0===o?"":o,s=Object(l.useState)(null),u=Object(a.a)(s,2),d=u[0],b=u[1],j=Object(l.useState)(null),p=Object(a.a)(j,2),f=p[0],O=p[1];return Object(l.useEffect)((function(){var e=null,t=null,r=i.trim().toLowerCase();"view"===r&&(r="");var a=r;if(a.length>0&&(a="/".concat(a)),null!==n){var o=n._id,s=n.type,l=n.properties||{},u=l.slug||"",d=l.url||"";"website"===s&&"string"===typeof d&&d.length>0&&""===r?(e=d,t=null):"redirect"===s&&"string"===typeof d&&d.length>0&&""===r?(e=u.length>0?!0===c?"".concat(window.domains.frontend).concat(u,"=").concat(o).concat(a):"".concat(window.domains.frontend).concat(u).concat(a):"".concat(window.domains.frontend).concat(o).concat(a),t=null):"string"===typeof u&&u.length>0?!0===c?(e="".concat(window.domains.frontend).concat(u,"=").concat(o).concat(a),t="/".concat(u,"=").concat(o).concat(a)):(e="".concat(window.domains.frontend).concat(u).concat(a),t="/".concat(u).concat(a)):(e="".concat(window.domains.frontend).concat(o).concat(a),t="/".concat(o).concat(a))}b(e),O(t)}),[n,c,i,b,O]),{link:d,path:f}}({block:t,forceId:s,pathSuffix:u}),I=k.link,B=k.path,P=O(t,i||g,""),E=[];if("page"===x||"redirect"===x||"person"===x)""===P&&"string"===typeof _&&""!==_&&E.push(Object(p.jsx)("div",{importance:"less",children:"/"+_},"slug"));else if("website"===x)y.hasOwnProperty("url")&&"string"===typeof y.url&&y.url.length>0&&E.push(Object(p.jsx)("div",{style:{fontSize:"calc(0.6 * var(--body-font-size))",margin:"var(--basis_x0_5) 0"},children:Object(p.jsx)("em",{children:y.url})},"url")),y.hasOwnProperty("description")&&"string"===typeof y.description&&y.description.length>0&&E.push(Object(p.jsx)("div",{importance:"less",children:y.description},"description"));else if("apikey"===x)if(y.hasOwnProperty("nbf")&&y.hasOwnProperty("exp")){var R=new Date(y.nbf),L=new Date(y.exp);E.push(Object(p.jsx)("div",{children:f("apikey_validity",{from:N(R),to:N(L)})},"nbf_and_exp"))}else if(y.hasOwnProperty("nbf")){var T=new Date(y.nbf);E.push(Object(p.jsx)("div",{children:f("apikey_validity_from",{from:N(T)})},"nbf"))}else if(y.hasOwnProperty("exp")){var D=new Date(y.exp);E.push(Object(p.jsx)("div",{children:f("apikey_validity_to",{to:N(D)})},"exp"))}var $=null;if("page"===x||"person"===x||"poster"===x||"definition"===x){var M,z=(null===t||void 0===t||null===(M=t.computed)||void 0===M?void 0:M.contentAsPlaintext)||null;if("string"===typeof z&&""!==z.length){(z=z.replace(/[\r\n]+/g,"\n")).length>200&&(z=z.slice(0,200)+"\u2026"),(z=z.split("\n")).length>2&&(z=z.slice(0,2)).push("\u2026"),$=z.join("\n");var F={__html:Object(h.a)(z.join("\n"))};E.push(Object(p.jsx)("div",{importance:"more",dir:"auto",dangerouslySetInnerHTML:F,style:{whiteSpace:"pre-wrap"}},"contentAsPlaintext"))}}if("website"===x&&y.hasOwnProperty("tags")&&Array.isArray(y.tags)){var q=Object(w.a)(new Set(y.tags)).filter((function(e){return"string"===typeof e&&e.length>0})).map((function(e){return Object(p.jsx)("span",{className:A.a.tag,children:e},e)}));E.push(Object(p.jsx)("div",{style:{margin:"var(--basis_x0_5) calc(-1 * var(--basis_x0_5))"},children:q},"tags"))}""===P&&0===E.length&&(P=f("placeholder_headline_empty")),"line"!==b&&"icon"!==b||(""!==P?E=[]:0===E.length&&(E=[E[0]]));var V=Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(C.a,{className:A.a.icon,block:t,size:"icon"===b?140:40}),Object(p.jsxs)("div",{className:A.a.content,children:[Object(p.jsx)("div",{dir:"auto",className:A.a.title,children:P}),E.length>0?Object(p.jsx)("div",{dir:"auto",className:A.a.additionalInfos,children:E}):null]})]}),H=B||I,U=Object(m.getBlockColor)(t),W=U.color,G=void 0===W?"inherit":W,J=U.colorRGB,K=void 0===J?"--on-background-rgb":J,X={};"function"===typeof o&&(X.onClick=o);var Y="";return"string"===typeof P&&""!==P&&"string"===typeof $&&""!==$?Y="".concat(P,"\n\n").concat($):"string"===typeof P&&""!==P?Y=P:"string"===typeof $&&""!==$&&(Y=$),!0===c&&"string"===typeof H&&H.length>0?H.includes(":")?Object(p.jsx)("a",Object(r.a)(Object(r.a)({href:H,target:"_blank",rel:"noreferrer",title:Y,"data-size":b,className:"clickable_card ".concat(A.a.root),style:{cursor:"pointer",color:G,"--on-background-rgb":K}},X),{},{children:V})):Object(p.jsx)(S.b,Object(r.a)(Object(r.a)({to:H,title:Y,"data-size":b,className:"clickable_card ".concat(A.a.root),style:{cursor:"pointer",color:G,"--on-background-rgb":K}},X),{},{children:V})):Object(p.jsx)("div",Object(r.a)(Object(r.a)({title:Y,"data-size":b,className:"clickable_card ".concat(A.a.root),style:{cursor:"auto",color:G,"--on-background-rgb":K}},X),{},{children:V}))};var P=function(e){var t=e.block,n=e.locales,r=Object(l.useState)({__html:""}),c=Object(a.a)(r,2),o=c[0],i=c[1],s=(0,Object(v.c)().translateBlock)(t,n,"");Object(l.useEffect)((function(){var e=Object(h.a)(s,{linkify:!1});i({__html:e})}),[s,i]);var u="";return t&&t.properties&&t.properties.coverphoto&&t.properties.coverphoto.type&&("url"===t.properties.coverphoto.type?"string"===typeof t.properties.coverphoto.url&&t.properties.coverphoto.url.length>0&&(u="".concat(window.domains.storage,"download_url?f=").concat(window.imageFormat||"jpg","&w=1000&h=1000&url=").concat(encodeURIComponent(t.properties.coverphoto.url))):"file"===t.properties.coverphoto.type&&"string"===typeof t.properties.coverphoto.fileId&&t.properties.coverphoto.fileId.length>0&&(u="".concat(window.domains.storage,"download_file/?f=").concat(window.imageFormat||"jpg","&w=1000&h=1000&id=").concat(encodeURIComponent(t.properties.coverphoto.fileId)))),""!==u?Object(p.jsxs)("div",{children:[Object(p.jsx)("img",{src:u,alt:s,title:s,style:{maxWidth:"100%",margin:"0 auto",display:"block",boxShadow:"inset 0 0 0 1px rgba(var(--on-background-rgb), var(--alpha-less))"}}),Object(p.jsx)("div",{dir:"auto",dangerouslySetInnerHTML:o,className:"type_caption",style:{textAlign:"center",marginTop:"var(--basis_x0_5)"}})]}):null};var E=function(e){var t=e.block,n=e.style,r=Object(l.useState)({__html:""}),c=Object(a.a)(r,2),o=c[0],i=c[1];return Object(l.useEffect)((function(){i({__html:t.properties.text})}),[t.properties.text,i]),Object(p.jsx)("div",{style:n,dangerouslySetInnerHTML:o})},R=n(222),L=n.n(R),T=n(48),D=n(142),$=n(89),M=n(54),z=n(87);var F=function(){var e=Object(v.c)().getString,t=Object($.a)(),n=Object(z.b)(),r=n.enqueueSnackbar,a=n.closeSnackbar,o=Object(l.useCallback)((function(n){return new Promise((function(o){var i=null;if(n&&""!==n){var l=new Promise((function(e){var l=null;"object"!==typeof window.SERVER_DATA||null===window.SERVER_DATA||Array.isArray(window.SERVER_DATA)||(l=window.SERVER_DATA.preloaded_block||null),"object"===typeof l&&null!==l&&l.hasOwnProperty("_id")&&l._id===n?(window.SERVER_DATA={preloaded_block:null},e("got-preloaded-data"),o(l)):t.query({query:M.b,variables:{_id:n}}).then(function(){var t=Object(c.a)(s.a.mark((function t(n){var c,l,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=n.errors,l=n.data,e("got-data"),null!==i&&a(i),Array.isArray(c)?(r(c.map((function(e){return e.message})).join("\n"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}),o(null)):null===l.block?(r("Could not load the content.",{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}),o(null)):(u=l.block,o(u));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(c.a)(s.a.mark((function t(n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error("error",n),e("got-error"),null!==i&&a(i),r("[could not load data] "+n.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),l]).then((function(t){"show-loading"===t&&(i=r(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else o({type:"text"})}))}),[r,a,t,e]);return o},q=n(69),V=["blockId","block","clickable","size","dragable","parentProps"];function H(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&H(e[n],t);return e}t.a=function(e){var t=e.blockId,n=void 0===t?null:t,i=e.block,u=void 0===i?{}:i,d=(e.clickable,e.size),b=void 0===d?"line":d,j=e.dragable,f=void 0!==j&&j,h=e.parentProps,v=void 0===h?{}:h,m=Object(o.a)(e,V),g=null,x=Object(l.useState)(u||{}),w=Object(a.a)(x,2),S=w[0],I=w[1],A=Object(l.useRef)(!1),C=Object(q.a)().userroles,N=function(e){var t=e.keys,n=void 0===t?[]:t,r=Object(l.useRef)(new Set);return Object(l.useEffect)((function(){function e(e){var t=e.key.toLowerCase();n.includes(t)&&r.current.add(t)}function t(e){var t=e.key.toLowerCase();r.current.delete(t)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[n]),{getPressedKeys:function(){return r.current}}}({keys:["shift"]}).getPressedKeys,R=F();switch(Object(l.useEffect)((function(){JSON.stringify(u)!==JSON.stringify(S)&&I(u||{})}),[S,u]),Object(l.useEffect)((function(){!n||S.hasOwnProperty("_id")&&n===S._id||!1!==A.current||(A.current=!0,R(n).then(function(){var e=Object(c.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("object"===typeof t&&null!==t){e.next=4;break}throw new Error("ViewerAuto: loadBlock returned no object");case 4:null!==t.type&&I(t);case 5:A.current=!1;case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),A.current=!1})))}),[n,S,R,I]),S.type||null){case"text":g="card"===b?Object(p.jsx)(y,Object(r.a)({block:S},m),S._id):Object(p.jsx)(B,Object(r.a)({block:S,size:b},m),S._id);break;case"button":g="card"===b?Object(p.jsx)(_,Object(r.a)({block:S},m),S._id):Object(p.jsx)(B,Object(r.a)({block:S,size:b},m),S._id);break;case"divider":g="card"===b?Object(p.jsx)(k,Object(r.a)({block:S},m),S._id):Object(p.jsx)(B,Object(r.a)({block:S,size:b},m),S._id);break;case"page":case"person":case"redirect":case"website":case"apikey":case"poster":case"definition":default:g=Object(p.jsx)(B,Object(r.a)({block:S,size:b},m),S._id);break;case"image":g="card"===b?Object(p.jsx)(P,Object(r.a)({block:S},m),S._id):Object(p.jsx)(B,Object(r.a)({block:S,size:b},m),S._id);break;case"code":g="card"===b?Object(p.jsx)(E,Object(r.a)({block:S},m),S._id):Object(p.jsx)(B,Object(r.a)({block:S,size:b},m),S._id)}var $=Object(D.a)(),M=Object(l.useCallback)(function(){var e=Object(c.a)(s.a.mark((function e(t){var n,r,c,a,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,"object"!==typeof(r=((void 0===n?{}:n)||{})["application/json"])||null===r){e.next=23;break}if(c=H(c=r,"__typename"),a=S.computed.roles||[],o=c.computed.roles||[],c._id===S._id||!(C.includes("admin")||(a.includes("editor")||a.includes("owner"))&&(o.includes("editor")||o.includes("owner")))){e.next=23;break}return i=N(),l=!1,e.prev=10,e.next=13,$({mutation:T.b,variables:{movingBlockId:c._id,newParentId:S._id,newIndex:0}});case 13:if(!i.has("shift")){e.next=16;break}return e.next=16,$({mutation:T.c,variables:{block:{_id:c._id,properties:{active:!1}}}});case 16:l=!0,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.error(e.t0);case 22:l&&console.log("TODO reload sidebar");case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),[$,S,N,C]),z=Object(l.useCallback)((function(e){var t=e.data,n=((void 0===t?{}:t)||{})["application/json"],r=!1;if("object"===typeof n&&null!==n&&n.hasOwnProperty("computed")&&n.computed.hasOwnProperty("roles")){var c=n.computed.roles||[];(C.includes("admin")||c.includes("editor")||c.includes("owner"))&&(r=!0)}return r}),[C]);return Object(p.jsx)(O,Object(r.a)(Object(r.a)({draggable:f,className:L.a.root,onTransmit:function(){return{data:{"text/plain":S.properties.text||"","application/json":S}}},onReceive:M,checkEntry:z},v),{},{children:g}),S._id)}},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(20),c=n(4),a=n(5),o=n(8),i=n.n(o),s=n(1),l=n(89),u=n(54),d={userroles:[]};function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.useRef)(!1);Object(s.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]);var n=Object(s.useState)(d),o=Object(a.a)(n,2),b=o[0],j=o[1],p=Object(s.useState)(!1),f=Object(a.a)(p,2),O=f[0],h=f[1],v=Object(l.a)();return Object(s.useEffect)((function(){!0!==e&&window.hasOwnProperty("user")?(j(Object(c.a)(Object(c.a)({},window.user),{},{userroles:window.user.userroles||[]})),h(window.user.logged_in)):v.query({query:u.g}).then(function(){var e=Object(r.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data,!0===t.current&&(r.hasOwnProperty("self")&&null!==r.self?(window.user=r.self,j(Object(c.a)(Object(c.a)({},r.self),{},{userroles:r.self.userroles||[]})),h(r.self.logged_in)):(j(d),h(!1)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),!0===t.current&&(j(d),h(!1))}))}),[e,j,h,v]),Object(c.a)(Object(c.a)({},b),{},{loggedIn:O})}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(4),c=n(24),a=n(373),o=n(371),i=n(360),s=n(243),l=n(230),u=n(242),d=n(361),b=n(16),j=n(187),p=n(0),f=["closePopover","open"],O=["sx"];function h(e){var t=e.trigger,n=e.children,h=e.onToogle,v=e.paperProps,m=void 0===v?{}:v;return Object(p.jsx)(j.a,{trigger:t,onToogle:h,children:function(e){var t=e.closePopover,j=e.open,h=Object(c.a)(e,f),v=m||{},g=v.sx,x=void 0===g?{}:g,y=Object(c.a)(v,O);return Object(p.jsx)(a.a,Object(r.a)(Object(r.a)(Object(r.a)({},h),{},{sx:Object(r.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)",borderRadius:"var(--basis_x2)"},x),elevation:8},y),{},{children:Object(p.jsx)(o.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:Object(p.jsxs)("div",{children:["function"===typeof n?n({isOpen:j,close:t}):n,Object(p.jsx)(i.a,{style:{opacity:.2,marginBottom:"8px"}}),Object(p.jsxs)(s.a,{className:"roundMenuItem",onClick:t,children:[Object(p.jsx)(l.a,{children:Object(p.jsx)(d.a,{})}),Object(p.jsx)(u.a,{children:Object(p.jsx)(b.a,{id:"block_menu_close_menu"})})]})]})})}))}})}},71:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(4),c=n(219),a=n.n(c),o=n(220),i=n.n(o),s=n(221),l=n.n(s),u=n(143);function d(e){var t=a()(Object(r.a)({html:!1,xhtmlOut:!1,linkify:!0,typographer:!0,breaks:!1},e));return t.use(i.a),t.use(l.a),t}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(e=e||"").replace(/\(TM\)/gi,"\u2122").replace(/\(SM\)/gi,"\u2120").replace(/\(C\)/gi,"\xa9").replace(/\(R\)/gi,"\xae");var n=d(t);return e=n.renderInline(e),e=u.a.parse(e,{folder:"svg",ext:".svg",base:"/public/twemoji/assets/"})}},76:function(e,t,n){e.exports={dialog:"SearchBox_dialog__1znAI",backdrop:"SearchBox_backdrop__2e5Wz",inputWrapper:"SearchBox_inputWrapper__24CrI",input:"SearchBox_input__1qb9w",actions:"SearchBox_actions__4Zrwb",searchInput:"SearchBox_searchInput__3M4FI",filters:"SearchBox_filters__1axwa",searchResults:"SearchBox_searchResults__3ySIT",searchErrors:"SearchBox_searchErrors__1Q8W1",mathResult:"SearchBox_mathResult__YFSbr",blockRow:"SearchBox_blockRow__13jhD",blockRowActions:"SearchBox_blockRowActions__1FRMH",fakeHover:"SearchBox_fakeHover__30G2t"}},82:function(e,t,n){e.exports={snackbar:"Snackbar_snackbar__119_w",default:"Snackbar_default__31-eU",success:"Snackbar_success__zvTW8",error:"Snackbar_error__3XeD6",warning:"Snackbar_warning__2CBXt",info:"Snackbar_info__EuVSN"}},83:function(e,t,n){e.exports={content:"ViewerLineAndCard_content__1lFI-",title:"ViewerLineAndCard_title__2hfbo",additionalInfos:"ViewerLineAndCard_additionalInfos__2CGI1",tag:"ViewerLineAndCard_tag__XiCzV",root:"ViewerLineAndCard_root__2LObL",icon:"ViewerLineAndCard_icon__1XBJZ"}},97:function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return v}));var r=n(13),c=n(5),a=n(1),o=n(475),i=n(23),s=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&o(t.matches);var n=function(){return o(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r,e]),r},l=n(164),u=n.n(l),d=n(0),b=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(7),n.e(8)]).then(n.bind(null,536))})),j=Object(a.createContext)({});function p(){return Object(a.useContext)(j)}function f(e){var t=e.children,n=Object(a.useState)(!1),r=Object(c.a)(n,2),o=r[0],s=r[1],l=!Object(i.f)("/")&&o,u=Object(a.useCallback)((function(){s((function(e){return!e}))}),[s]);return Object(d.jsx)(j.Provider,{value:{open:l,setOpen:s,toggleSidebar:u},children:t})}function O(){var e=p(),t=e.open,n=e.toggleSidebar,c="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),i=s("(min-width: 960px)");return t?Object(d.jsx)(o.a,{variant:i?"permanent":"temporary",anchor:"left",open:t,onOpen:n,onClose:n,disableBackdropTransition:!c,disableDiscovery:c,sx:Object(r.a)({width:320,flexShrink:0},"& .MuiDrawer-paper",{width:320,boxSizing:"border-box",backgroundColor:"var(--background-contrast)",color:"var(--on-background)",border:"none"}),PaperProps:{sx:{background:"var(--background-contrast)",color:"var(--on-background)"}},children:Object(d.jsx)(a.Suspense,{children:Object(d.jsx)(h,{oneColumn:!0})})}):null}function h(e){var t=e.oneColumn,n=void 0!==t&&t;return Object(d.jsx)(a.Suspense,{children:Object(d.jsx)(b,{oneColumn:n})})}function v(e){var t=e.children,n=p().open;return Object(d.jsx)("main",{className:"".concat(u.a.main," ").concat(n?u.a.open:""),style:{"--sidebarWidth":"320px"},children:t})}}},[[353,3,4]]]);
//# sourceMappingURL=main.d55ec22d.chunk.js.map