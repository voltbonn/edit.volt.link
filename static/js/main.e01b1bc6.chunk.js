(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[1],{104:function(e,t,n){e.exports={drag_over:"DataTransmat_drag_over__3XVzh",drag_active:"DataTransmat_drag_active__2nwCM"}},106:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(18),a=n(8),c=n(5),o=n(11),i=n.n(o),s=n(0),l=n(88),u=n(49),d={userroles:[]};function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.useRef)(!1);Object(s.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]);var n=Object(s.useState)(d),o=Object(c.a)(n,2),b=o[0],j=o[1],p=Object(s.useState)(!1),f=Object(c.a)(p,2),O=f[0],h=f[1],v=Object(l.a)();return Object(s.useEffect)((function(){!0!==e&&window.hasOwnProperty("user")?(j(Object(a.a)(Object(a.a)({},window.user),{},{userroles:window.user.userroles||[]})),h(window.user.logged_in)):v.query({query:u.f}).then(function(){var e=Object(r.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data,!0===t.current&&(r.hasOwnProperty("self")&&null!==r.self?(window.user=r.self,j(Object(a.a)(Object(a.a)({},r.self),{},{userroles:r.self.userroles||[]})),h(r.self.logged_in)):(j(d),h(!1)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),!0===t.current&&(j(d),h(!1))}))}),[e,j,h,v]),Object(a.a)(Object(a.a)({},b),{},{loggedIn:O})}},120:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},124:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"b",(function(){return p}));var r,a,c,o,i,s=n(30),l=n(48),u=Object(l.a)(r||(r=Object(s.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),d=Object(l.a)(a||(a=Object(s.a)(["\n  mutation saveProperty ($_id: ObjectID!, $key: String!, $value: JSON) {\n    saveProperty (_id: $_id, key: $key, value: $value)\n  }\n"]))),b=Object(l.a)(c||(c=Object(s.a)(["\n  mutation archiveBlock ($_id: ObjectID!) {\n    archiveBlock (_id: $_id)\n  }\n"]))),j=Object(l.a)(o||(o=Object(s.a)(["\n  mutation unarchiveBlock ($_id: ObjectID!) {\n    unarchiveBlock (_id: $_id)\n  }\n"]))),p=Object(l.a)(i||(i=Object(s.a)(["\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n"])))},128:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(8),a=n(18),c=n(5),o=n(11),i=n.n(o),s=n(0),l=n(120),u=n.n(l),d=n(313),b=n(314),j=n(315),p=n(56),f=n(77),O=n(93),h=n(90),v=n(88),g=n(49),m=n(1);function x(e){var t=e.title,n=e.block,o=void 0===n?{}:n,l=e.rightActions,x=e.notificationBanner,y=Object(f.e)(),k=y.open,w=y.toggleSidebar,_=Object(v.a)(),S=o?o._id:null,I=o?o.parent:null,N=Object(s.useState)([]),B=Object(c.a)(N,2),C=B[0],P=B[1],L=Object(s.useState)([]),E=Object(c.a)(L,2),A=E[0],$=E[1],D=Object(s.useCallback)((function(e){_.query({query:g.e,variables:{_id:e}}).then(function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.blocks?(r=(n.blocks||[]).sort((function(e,t){return t.computed.sort-e.computed.sort})),P(r)):(console.error(n.error),P([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),P([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[_,P]),R=Object(s.useCallback)((function(e,t){_.query({query:g.d,variables:{roots:[e||t],types:["page","person","redirect"],archived:!1}}).then(function(){var e=Object(a.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(r=n.data).error&&r.blocks?$((r.blocks||[]).filter((function(e){return e._id!==t}))):(console.error(r.error),$([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),$([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[_,$]);Object(s.useEffect)((function(){S&&(D(S),R(I,S))}),[S,I,D,R]);var T=Object(m.jsxs)(m.Fragment,{children:[k?null:Object(m.jsx)("button",{onClick:w,className:"text hasIcon",style:{margin:"0"},children:Object(m.jsx)(d.a,{className:"icon"})}),Object(m.jsxs)("div",{style:{flexGrow:"1"},children:[Object(m.jsx)(p.b,{to:"/",children:Object(m.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)(b.a,{style:{verticalAlign:"middle"}})})}),Object(m.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),S&&C.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(h.a,{trigger:function(e){return Object(m.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)(j.a,{style:{verticalAlign:"middle"}})}))},children:Object(m.jsx)("div",{style:{padding:"var(--basis_x2)"},children:C.map((function(e){return Object(m.jsx)(O.a,{block:e,size:"line"},e._id)}))})}),Object(m.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,A.length>0?Object(m.jsx)(h.a,{trigger:function(e){return Object(m.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:Object(m.jsx)("div",{style:{padding:"var(--basis_x2)"},children:A.map((function(e){return Object(m.jsx)(O.a,{block:e,size:"line"},e._id)}))})}):Object(m.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(m.jsxs)("header",{className:u.a.header,children:[Object(m.jsxs)("div",{className:u.a.headerBar,children:[T,l]}),x?Object(m.jsx)("div",{className:u.a.notificationBanner,children:x}):null]})}},136:function(e,t,n){e.exports={app:"App_app__3hbGO",isStartpage:"App_isStartpage__1Q6rs"}},137:function(e,t,n){e.exports={main:"Sidebar_main__1MCX5",open:"Sidebar_open__gnBQb"}},140:function(e,t,n){var r=n(81).negotiateLanguages;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var a=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===a.length?null:e[a[0]]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",a=e.map((function(e){return e[n]})).filter(Boolean);if(0===a.length)return null;var c=r(t,a,{defaultLocale:a[0],strategy:"lookup"});return 0===c.length?null:e.filter((function(e){return e[n]===c[0]}))}e.exports={fluentByObject:a,fluentByArray:c,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=c(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=a(e,t));return"string"!==typeof e&&(e=n),e}}},148:function(e,t,n){"use strict";var r=n(18),a=n(11),c=n.n(a),o=n(0),i=n(88),s=n(49);t.a=function(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){return new Promise((function(n){e.query({query:s.d,variables:t}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.errors,a=t.data,!(Array.isArray(r)&&r.length>0)){e.next=5;break}throw r;case 5:if(!Array.isArray(a.blocks)){e.next=9;break}n(a.blocks),e.next=10;break;case 9:throw new Error("Unknown error while loading blocks.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}},151:function(e,t,n){"use strict";var r=n(0),a=n(88);t.a=function(){var e=Object(a.a)();return Object(r.useCallback)((function(t){return new Promise((function(n,r){e.mutate(t).then((function(e){var t=e.data;"string"===typeof t.error?r(t.error):n(t)})).catch(r)}))}),[e])}},152:function(e,t,n){"use strict";var r=n(8),a=n(5),c=n(0),o=n(309),i=n(319),s=n(307),l=n(1);t.a=function(e){var t=e.trigger,n=e.children,u=void 0===n?function(){}:n,d=e.onToogle,b=void 0===d?function(){}:d,j=e.setOpenBlockMenuRef,p=Object(c.useRef)(null),f=Object(c.useState)(!1),O=Object(a.a)(f,2),h=O[0],v=O[1],g=Object(c.useCallback)((function(e){v(e)}),[v]);Object(c.useEffect)((function(){j&&(j.current=g)}),[g,j]);var m=function(){b(!1),v(!1)},x=h?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(l.jsxs)(l.Fragment,{children:[t({ref:p,"aria-describedby":x,onClick:function(){v((function(e){return b(!e),!e}))},style:{pointerEvents:h?"none":"all"}},{isOpen:h}),Object(l.jsxs)(o.a,{children:[Object(l.jsx)("div",{onClick:m,style:{display:h?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(l.jsx)(i.a,{id:x,open:h,anchorEl:p.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(l.jsx)(s.a,Object(r.a)(Object(r.a)({},t),{},{children:Object(l.jsx)("div",{children:u&&"function"===typeof u?u({open:h,style:{transformOrigin:"top left"},closePopover:m}):null})}))}})]})]})}},153:function(e,t,n){"use strict";var r=n(8),a=n(5),c=n(0),o=n(202),i=n(90),s=n(179),l=n.n(s),u=n(180),d=n(1),b={_:"??",en:"English",de:"Deutsch",es:"Espa\xf1ol",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano",nl:"Nederlands",da:"Dansk",sv:"Svenska",nb:"Norsk bokm\xe5l",fi:"Suomi",mt:"Malti",pl:"J\u0119zyk polski",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",tr:"T\xfcrk\xe7e",ar:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629",el:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",ro:"limba rom\xe2n\u0103",sl:"sloven\u0161\u010dina"},j=Object.entries(b).map((function(e){var t=Object(a.a)(e,2);return{code:t[0],nativeName:t[1]}})),p=Object.keys(b);t.a=function(e){var t=e.defaultValue,n=e.onChange,s=e.options,f=void 0===s?p:s;null!==t&&void 0!==t&&""!==t&&!1!==b.hasOwnProperty(t)||(t="_");var O=Object(c.useState)(t),h=Object(a.a)(O,2),v=h[0],g=h[1],m=Object(c.useCallback)((function(e){g(e),"_"===e&&(e=null),n&&n(e)}),[g,n]);return Object(d.jsx)(i.a,{trigger:function(e,t){var n=t.isOpen;return Object(d.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"default hasIcon",style:{margin:"0",flexShrink:"0"},children:[Object(d.jsx)("span",{style:{width:"100%",textAlign:"start"},children:"_"===v?Object(d.jsx)(l.a,{path:u.d,className:"icon"}):v.toUpperCase()}),Object(d.jsx)("span",{style:{marginLeft:"var(--basis)",lineHeight:"1",verticalAlign:"text-top"},children:n?"\u25b4":"\u25be"})]}))},paperProps:{sx:{maxHeight:"300px"}},children:function(e){var t=e.close;return Object(d.jsx)("div",{style:{padding:"var(--basis_x2) 0"},children:j.filter((function(e){var t=e.code;return f.includes(t)})).map((function(e){var n=e.code,r=e.nativeName;return Object(d.jsx)(o.a,{onClick:function(){m(n),t()},className:"roundMenuItem",selected:n===v,children:"_"===n?r:"".concat(n.toUpperCase()," \u2014 ").concat(r)},n)}))})}})}},160:function(e,t,n){"use strict";var r=n(18),a=n(11),c=n.n(a),o=n(0),i=n(32),s=n(88),l=n(49),u=n(109);t.a=function(){var e=Object(i.c)().getString,t=Object(s.a)(),n=Object(u.b)(),a=n.enqueueSnackbar,d=n.closeSnackbar,b=Object(o.useCallback)((function(n){return new Promise((function(o){var i=null;if(n&&""!==n){var s=new Promise((function(s){t.query({query:l.c,variables:{_id:n}}).then(function(){var t=Object(r.a)(c.a.mark((function t(n){var r,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.data,s("got-data"),null!==i&&d(i),"string"!==typeof r.error&&r.block?(l=r.block,o(l)):"no_edit_permission"===r.error?a(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):a(""+r.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),s("got-error"),null!==i&&d(i),a("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),s]).then((function(t){"show-loading"===t&&(i=a(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else o({type:"text"})}))}),[a,d,t,e]);return b}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(18),a=n(11),c=n.n(a),o=n(0),i=n(88),s=n(49);function l(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(a){t&&""!==t?e.query({query:s.a,variables:{_id:t,roles:n}}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("blockMatchesRoles")?a(n.blockMatchesRoles):a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):a(!1)}))}),[e]);return t}},162:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(147),a=n(32),c=n(1);function o(e){var t=e.errorName,n="Unknown Error",o="",i="";return"no_access"===t?(n="You don't have access to this page!",o=Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"If you are not logged in:"}),"You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.",Object(c.jsx)("br",{}),Object(c.jsx)("h2",{children:"If you are logged in:"}),"You propably don't have access to this page."]}),i=Object(c.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(c.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(c.jsx)(r.a,{className:"icon"}),Object(c.jsx)("span",{children:Object(c.jsx)(a.b,{id:"login"})})]})})):"not_found"===t&&(n="We could not find the requested URL\u2026",o="The URL you requested does currently not exist. Did you type the URL correctly?",i=Object(c.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(c.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(c.jsx)(r.a,{className:"icon"}),Object(c.jsx)("span",{children:Object(c.jsx)(a.b,{id:"login"})})]})})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:n}),Object(c.jsx)("p",{children:o}),i,Object(c.jsx)("br",{})," ",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("p",{children:["Please contact ",Object(c.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:"thomas.rosen@volteuropa.org"})," if you think this is a bug.",Object(c.jsx)("br",{}),"Go to ",Object(c.jsx)("a",{href:"https://volteuropa.org",children:"volteuropa.org"})," for information about the Pan-European Political Movement."]})]})}},193:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},218:function(e,t,n){},301:function(e,t,n){var r={"./de.ftl":[329,8],"./en.ftl":[330,9],"./es.ftl":[331,10],"./fr.ftl":[332,11],"./it.ftl":[333,12],"./nl.ftl":[334,13]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=301,e.exports=a},302:function(e,t,n){"use strict";n.r(t);var r=n(17),a=n(5),c=n(0),o=n.n(c),i=n(183),s=(n(218),n(66)),l=n.n(s),u=n(136),d=n.n(u),b=n(14),j=n(77),p=n(111),f=n(8),O=n(22),h=n(18),v=n(11),g=n.n(v),m=n(56),x=n(41),y=n(32),k=n(160),w=n(148),_=n(106),S=n(161),I=n(162),N=n(128),B=n(93),C=n(153),P=n(40),L=n.n(P),E=n(384),A=n(84),$=n(1);var D=function(){var e=Object(c.useRef)(!1),t=Object(y.c)(),n=t.getString,r=t.translateBlock,o=t.userLocales,i=Object(_.a)().loggedIn,s=Object(k.a)(),l=Object(w.a)(),u=Object(b.h)().id,d=void 0===u?"":u,j=Object(c.useState)({type:"page",properties:{},content:[]}),v=Object(a.a)(j,2),P=v[0],D=v[1],R=Object(c.useState)([]),T=Object(a.a)(R,2),q=T[0],M=T[1],U=Object(c.useState)([]),V=Object(a.a)(U,2),H=V[0],F=V[1],z=Object(c.useState)(P.properties.locale||o||["en"]),W=Object(a.a)(z,2),G=W[0],J=W[1],X=Object(c.useCallback)((function(e){J([e])}),[J]),Y=Object(c.useState)(null),K=Object(a.a)(Y,2),Q=K[0],Z=K[1],ee=Object(S.a)();if(Object(c.useEffect)((function(){ee(d,["viewer","owner"]).then((function(e){Z(e)})).catch((function(e){console.error(e),Z(!1)}))}),[d,ee,Z]),Object(c.useEffect)((function(){Q&&!1===e.current&&"string"===typeof d&&""!==d&&d!==P._id&&(e.current=!0,s(d).then(function(){var t=Object(h.a)(g.a.mark((function t(n){var r,a,c,o,i,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n,!(Array.isArray(n.content)&&n.content.length>0)){t.next=11;break}if(a=Object(O.a)(n.content),c=n.content.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),o=[],!(c.length>0)){t.next=9;break}return t.next=8,l({ids:c});case 8:o=t.sent;case 9:a=a.map((function(e){return e.hasOwnProperty("block")||(e.block=o.find((function(t){return t._id===e.blockId}))),e})),r=Object(f.a)(Object(f.a)({},r),{},{content:a});case 11:i=(r.content||[]).map((function(e){return e.block})),s=Object(O.a)(new Set([n].concat(Object(O.a)(i)).flatMap((function(e){return[e.properties.locale].concat(Object(O.a)((e.properties.translations||[]).filter((function(e){return e.text&&e.text.length>0})).map((function(e){return e.locale}))))})).filter(Boolean))),F(s),D(r),M(i),e.current=!1;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[Q,d,P,P._id,s,D,l,M,F]),!1===Q)return Object($.jsxs)("div",{className:L.a.viewer,children:[Object($.jsx)(N.a,{block:null,title:"Error",rightActions:null}),Object($.jsx)("div",{className:"basis_x1 ".concat(L.a.app," ").concat(L.a.spine_aligned),dir:"auto",children:Object($.jsx)("main",{className:"".concat(L.a.contentWrapper),children:Object($.jsx)(I.a,{errorName:"no_access"})})})]});var te=P.type||null,ne=r(P,G,n("placeholder_main_headline")),re=Object(x.getImageUrl)(P.properties.coverphoto),ae=Object(x.getImageUrl)(P.properties.icon),ce=Object($.jsx)($.Fragment,{children:Object($.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[i&&!!P._id&&Object($.jsx)(m.b,{to:"/".concat(P._id,"/edit"),style:{marginRight:"var(--basis_x2)"},children:Object($.jsxs)("button",{className:"text hasIcon",children:[Object($.jsx)(E.a,{className:"icon"}),Object($.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object($.jsx)(y.a,{id:"edit_block"})})]})}),H.length>1&&Object($.jsx)(C.a,{onChange:X,defaultValue:G[0]||o[0]||"en",options:H})]})}),oe={__html:Object(A.a)(ne)},ie="";return"string"===typeof re&&re.length>0&&(ie="".concat(window.domains.backend,"download_url?f=jpg&w=1000&h=1000&url=").concat(encodeURIComponent(re))),Object($.jsxs)("div",{className:L.a.viewer,children:[Object($.jsxs)(p.a,{children:[Object($.jsx)("title",{children:ne}),Object($.jsx)("meta",{name:"title",content:ne}),Object($.jsx)("meta",{name:"og:title",content:ne}),Object($.jsx)("meta",{name:"twitter:title",content:ne}),Object($.jsx)("meta",{name:"description",content:""}),Object($.jsx)("meta",{property:"og:description",content:""}),Object($.jsx)("meta",{name:"twitter:description",content:""}),Object($.jsx)("meta",{property:"og:image",content:ie}),Object($.jsx)("meta",{name:"twitter:image",content:ie}),Object($.jsx)("meta",{property:"twitter:card",content:"summary"})]}),Object($.jsx)(N.a,{block:P,title:Object($.jsx)("span",{dir:"auto",dangerouslySetInnerHTML:oe}),rightActions:ce}),Object($.jsxs)("div",{className:"basis_x1 ".concat(L.a.app," ").concat(L.a.spine_aligned),dir:"auto",children:["page"!==te&&"person"!==te&&"redirect"!==te||""===re?null:Object($.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=1400&h=400&url=").concat(encodeURIComponent(re),")")},className:L.a.coverphoto}),Object($.jsxs)("main",{className:"".concat(L.a.contentWrapper),children:["page"!==te&&"person"!==te&&"redirect"!==te||""===ae?null:Object($.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=400&h=400&url=").concat(encodeURIComponent(ae),")")},className:"".concat(L.a.icon," ").concat(""===re?L.a.coverphotoIsNotSet:L.a.coverphotoIsSet)}),""!==ne?Object($.jsx)("h1",{dir:"auto",dangerouslySetInnerHTML:oe,style:{whiteSpace:"pre-wrap"}}):null,Object($.jsx)("div",{className:L.a.items,children:q.filter((function(e){return!!e})).filter((function(e){return!1!==e.properties.active})).map((function(e){return Object($.jsx)(B.a,{block:e,locales:G},e._id)}))})]})]})]})},R=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(4)]).then(n.bind(null,476))}));var T=function(){var e=Object(b.f)("/"),t=Object(b.e)(),n=Object(c.useState)({}),r=Object(a.a)(n,2),o=r[0],i=r[1];Object(c.useEffect)((function(){var e=t.pathname.match(/^\/([^=/]*)(?:=?)([^=/]*)(.*)/),n=e[1],r=e[2],a=e[3];!r&&n&&(r=n),""!==r&&"/edit"!==a&&"/view"!==a&&(a="/view");var c="/".concat(r).concat(a);o.pathname!==c&&i({pathname:c})}),[t,o,i]);var s="VoltLink",l="VoltLink is an information-hub about Volt Europa.";return Object($.jsx)($.Fragment,{children:Object($.jsx)("div",{className:"".concat(d.a.app," ").concat(e?d.a.isStartpage:""),children:Object($.jsxs)(j.d,{children:[e?null:Object($.jsx)(j.b,{}),Object($.jsx)(j.a,{children:Object($.jsxs)(b.c,{location:o,children:[Object($.jsx)(b.a,{path:"/:id/view",element:Object($.jsx)(D,{})}),Object($.jsx)(b.a,{path:"/:id/edit",element:Object($.jsx)(c.Suspense,{children:Object($.jsx)(R,{})})}),Object($.jsx)(b.a,{path:"/",element:Object($.jsxs)($.Fragment,{children:[Object($.jsxs)(p.a,{children:[Object($.jsx)("title",{children:s}),Object($.jsx)("meta",{name:"title",content:s}),Object($.jsx)("meta",{name:"og:title",content:s}),Object($.jsx)("meta",{name:"twitter:title",content:s}),Object($.jsx)("meta",{name:"description",content:l}),Object($.jsx)("meta",{name:"og:description",content:l}),Object($.jsx)("meta",{name:"twitter:description",content:l})]}),Object($.jsx)(j.c,{})]})})]})})]})})})},q=(n(297),n(13)),M=n(86),U=n(105),V=n(81),H={de:"Deutsch",en:"English",nl:"Dutch",es:"Espa\xf1ol",fr:"Fran\xe7ais",it:"Italiano"},F=Object.keys(H),z="en";function W(e){return G.apply(this,arguments)}function G(){return(G=Object(h.a)(g.a.mark((function e(t){var r,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(301)("./"+t+".ftl");case 2:return r=e.sent,e.next=5,fetch(r.default);case 5:return a=e.sent,e.next=8,a.text();case 8:return c=e.sent,e.abrupt("return",Object(q.a)({},t,new U.b(c)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return X.apply(this,arguments)}function X(){return(X=Object(h.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(W));case 2:return n=e.sent,a=n.reduce((function(e,t){return Object.assign(e,t)})),e.abrupt("return",g.a.mark((function e(){var n,c,o,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(r.a)(t),e.prev=1,n.s();case 3:if((c=n.n()).done){e.next=11;break}return o=c.value,(i=new U.a(o)).addResource(a[o]),e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){var t=e.userLocales,n=e.children,r=e.onLocaleChange,o=Object(c.useState)(function(){var e=new U.a("");return e.addResource(new U.b("")),new M.c([e])}()),i=Object(a.a)(o,2),s=i[0],l=i[1];return Object(c.useEffect)((function(){function e(){return(e=Object(h.a)(g.a.mark((function e(){var n,a,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(V.negotiateLanguages)(t,F,{defaultLocale:z}),r&&r(n),e.next=4,J(n);case 4:a=e.sent,(c=new M.c(a())).userLocales=t,c.defaultLocale=z,c.supportedLocales=F,l(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,r]),s?Object($.jsx)(M.a,{l10n:s,children:n}):Object($.jsx)("div",{children:"Loading texts\u2026"})}var K=n(387),Q=n(197),Z=n(394),ee=n(109),te=n(389),ne=n(390),re=n(388);window.process={},window.env="prod",window.domains={frontend:"https://volt.link/",backend:"https://api.volt.link/"};var ae=new te.a({uri:window.domains.backend+"graphql/v1/",cache:new ne.a,credentials:"include",defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});function ce(){var e=Object(c.useState)(navigator.languages),t=Object(a.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(null),u=Object(a.a)(s,2),d=u[0],b=u[1];Object(c.useEffect)((function(){if(window.umami){var e=navigator.languages;if(e||Array.isArray(e)){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,c=(a=a.toLowerCase()).split("-")[0];c!==a&&window.umami.trackEvent("L: "+c),window.umami.trackEvent("L: "+a)}}catch(o){n.e(o)}finally{n.f()}}}}),[]);var j=Object(c.useCallback)((function(e){i([e.target.dataset.locale])}),[i]),p=Object(c.useCallback)((function(e){b(e.length>0?e[0]:"")}),[b]),f=Object(K.a)("(prefers-color-scheme: dark)"),O=o.a.useMemo((function(){return Object(Q.a)({palette:{mode:f?"dark":"light"}})}),[f]);return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("div",{id:"react-notification",style:{zIndex:"10000"}},"react-notification"),Object($.jsx)(Y,{userLocales:n,onLocaleChange:p,children:Object($.jsx)(re.a,{client:ae,children:Object($.jsx)(Z.a,{theme:O,children:Object($.jsx)(ee.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{minWidth:"unset"},classes:{variantSuccess:"".concat(l.a.snackbar," ").concat(l.a.success),variantError:"".concat(l.a.snackbar," ").concat(l.a.error),variantWarning:"".concat(l.a.snackbar," ").concat(l.a.warning),variantInfo:"".concat(l.a.snackbar," ").concat(l.a.info)},domRoot:document.getElementById("react-notification"),children:Object($.jsx)(m.a,{children:Object($.jsx)(T,{locales:H,currentLocale:d,onLanguageChange:j})})})})})},"AppLocalizationProvider")]})}var oe=document.getElementById("root");Object(i.createRoot)(oe).render(Object($.jsx)(ce,{}))},32:function(e,t,n){"use strict";n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n(22),a=n(17),c=n(8),o=n(0),i=n.n(o),s=n(86),l=n(81),u=n(51),d=n(140),b=n.n(d),j=n(1),p=function(e){return Object(j.jsx)(s.b,Object(c.a)(Object(c.a)({},e),{},{elems:Object(c.a)({br:Object(j.jsx)("br",{})},e.elems),children:Object(j.jsx)(i.a.Fragment,{children:e.children})}),e.id)};function f(e){return function(t){var n=i.a.useContext(u.a);return i.a.createElement(e,Object(c.a)({fluentByObject:function(e,t){if(t||(t=null),e){var r,c=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return c.includes(e)})),i=Object(l.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),s=Object(a.a)(i);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(e[u])return e[u]}}catch(d){s.e(d)}finally{s.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||" ")}},t))}}function O(e,t,n){var a=(e||{}).properties,c=void 0===a?{}:a,o=c.locale||"en",i=c.text||n||"";t&&Array.isArray(t)||(t=[o]);var s=c.translations||[];if(Array.isArray(s)){s=[{locale:o,text:i}].concat(Object(r.a)(s));var l=b.a.fluentByArray(s,t,"locale");l.length>0&&(i=l[0].text)}return i}function h(){var e=i.a.useContext(u.a);return Object(c.a)(Object(c.a)({},e),{},{getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return b.a.fluentByAny(t,e.userLocales,n)},translateBlock:O})}},40:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",items:"Viewer_items__2FgjF",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",type_p:"Viewer_type_p__O5DZS",viewer:"Viewer_viewer__JHrvB"}},41:function(e,t){function n(e){if(e.startsWith("#")&&(e=e.substring(1)),3===e.length)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);else if(6!==e.length)throw new Error("Invalid hex color: "+e);for(var t=[],n=0;n<=2;n++)t[n]=parseInt(e.substr(2*n,2),16);return t}function r(e){return function(e){var t="string"===typeof e?n(e):e;return.2126*t[0]+.7152*t[1]+.0722*t[2]}(e)>=165?"000":"fff"}function a(e){var t;return t=function(e){var t,n;return(t=document.createElement("canvas")).height=1,t.width=1,(n=t.getContext("2d")).fillStyle=e,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}(e),"#"+[0,1,2].map((function(e){return("0"+t[e].toString(16)).slice(-2)})).join("")}e.exports={getImageUrl:function(e){return"object"!==typeof e||null===e||Array.isArray(e)||"url"!==e.type?"":e.url||""},getBlockColor:function(e){var t={color:null,colorRGB:null,contrastingColor:null,contrastingColorRGB:null};if(e.hasOwnProperty("properties")&&e.properties.hasOwnProperty("color")&&e.properties.color){var c=e.properties.color;if(["purple","red","green","blue","yellow"].includes(c))t.color="var(--".concat(c,")"),t.colorRGB="var(--".concat(c,"-rgb)"),t.contrastingColor="var(--on-".concat(c,")"),t.contrastingColorRGB="var(--on-".concat(c,"-rgb)");else{if(c.startsWith("#"))4!==c.length&&7!==c.length&&(c=null);else{var o=a(c);c="#000000"===o&&"black"!==c?null:o}if(c){t.color=c;var i=n(c);t.colorRGB=i.join(", "),t.contrastingColor="#"+r(c),t.contrastingColorRGB=n(t.contrastingColor)}}}return t}}},45:function(e,t,n){e.exports={icon:"ViewerLine_icon__DvsyX",square:"ViewerLine_square__3knjg",round:"ViewerLine_round__1pnCx",title:"ViewerLine_title__35XNW"}},49:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return h}));var r,a,c,o,i,s,l,u=n(30),d=n(48),b=Object(d.a)(r||(r=Object(u.a)(["\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),j=Object(d.a)(a||(a=Object(u.a)(["\n  query getBlocks ($ids: [ObjectID], $types: [String], $archived: Boolean, $roots: [ObjectID]) {\n    blocks (ids: $ids, types: $types, archived: $archived, roots: $roots) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),p=Object(d.a)(c||(c=Object(u.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n      userroles\n    }\n  }\n"]))),f=(Object(d.a)(o||(o=Object(u.a)(["\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),Object(d.a)(i||(i=Object(u.a)(["\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed {\n        sort\n      }\n    }\n  }\n"])))),O=Object(d.a)(s||(s=Object(u.a)(["\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"]))),h=Object(d.a)(l||(l=Object(u.a)(["\n  query checkPath ($path: String!) {\n    checkPath (path: $path) {\n      isOkay\n      errors\n    }\n  }\n"])))},66:function(e,t,n){e.exports={snackbar:"Snackbar_snackbar__119_w",default:"Snackbar_default__31-eU",success:"Snackbar_success__zvTW8",error:"Snackbar_error__3XeD6",warning:"Snackbar_warning__2CBXt",info:"Snackbar_info__EuVSN"}},77:function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return v}));var r=n(13),a=n(5),c=n(0),o=n(393),i=n(14),s=function(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),r=n[0],o=n[1];return Object(c.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&o(t.matches);var n=function(){return o(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r,e]),r},l=n(137),u=n.n(l),d=n(1),b=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(7)]).then(n.bind(null,481))})),j=Object(c.createContext)({});function p(){return Object(c.useContext)(j)}function f(e){var t=e.children,n=Object(c.useState)(!1),r=Object(a.a)(n,2),o=r[0],s=r[1],l=!Object(i.f)("/")&&o,u=Object(c.useCallback)((function(){s((function(e){return!e}))}),[s]);return Object(d.jsx)(j.Provider,{value:{open:l,setOpen:s,toggleSidebar:u},children:t})}function O(){var e=p(),t=e.open,n=e.toggleSidebar,a="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),i=s("(min-width: 960px)");return t?Object(d.jsx)(o.a,{variant:i?"permanent":"temporary",anchor:"left",open:t,onOpen:n,onClose:n,disableBackdropTransition:!a,disableDiscovery:a,sx:Object(r.a)({width:320,flexShrink:0},"& .MuiDrawer-paper",{width:320,boxSizing:"border-box",backgroundColor:"var(--background-contrast)",color:"var(--on-background)",border:"none"}),PaperProps:{sx:{background:"var(--background-contrast)",color:"var(--on-background)"}},children:Object(d.jsx)(c.Suspense,{children:Object(d.jsx)(h,{})})}):null}function h(){return Object(d.jsx)(c.Suspense,{children:Object(d.jsx)(b,{})})}function v(e){var t=e.children,n=p().open;return Object(d.jsx)("main",{className:"".concat(u.a.main," ").concat(n?u.a.open:""),style:{"--sidebarWidth":"320px"},children:t})}},84:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(8),a=n(189),c=n.n(a),o=n(190),i=n.n(o),s=n(191),l=n.n(s),u=n(192);function d(e){var t=c()(Object(r.a)({html:!1,xhtmlOut:!1,linkify:!0,typographer:!0,breaks:!1},e));return t.use(i.a),t.use(l.a),t}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(e=e||"").replace(/\(TM\)/gi,"\u2122").replace(/\(SM\)/gi,"\u2120").replace(/\(C\)/gi,"\xa9").replace(/\(R\)/gi,"\xae");var n=d(t);return e=n.renderInline(e),e=u.a.parse(e,{folder:"svg",ext:".svg",base:"/public/twemoji/assets/"})}},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(8),a=n(20),c=n(324),o=n(321),i=n(310),s=n(202),l=n(311),u=n(322),d=n(312),b=n(32),j=n(152),p=n(1),f=["closePopover","open"],O=["sx"];function h(e){var t=e.trigger,n=e.children,h=e.onToogle,v=e.paperProps,g=void 0===v?{}:v;return Object(p.jsx)(j.a,{trigger:t,onToogle:h,children:function(e){var t=e.closePopover,j=e.open,h=Object(a.a)(e,f),v=g||{},m=v.sx,x=void 0===m?{}:m,y=Object(a.a)(v,O);return Object(p.jsx)(c.a,Object(r.a)(Object(r.a)(Object(r.a)({},h),{},{sx:Object(r.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},x),elevation:8},y),{},{children:Object(p.jsx)(o.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:Object(p.jsxs)("div",{children:["function"===typeof n?n({isOpen:j,close:t}):n,Object(p.jsx)(i.a,{style:{opacity:.2,marginBottom:"8px"}}),Object(p.jsxs)(s.a,{className:"roundMenuItem",onClick:t,children:[Object(p.jsx)(l.a,{children:Object(p.jsx)(d.a,{})}),Object(p.jsx)(u.a,{children:Object(p.jsx)(b.a,{id:"block_menu_close_menu"})})]})]})})}))}})}},93:function(e,t,n){"use strict";var r=n(18),a=n(8),c=n(20),o=n(11),i=n.n(o),s=n(0),l=n(17),u=n(44),d=n(104),b=n.n(d),j=n(1);function p(e,t){var n,r={},a=Object(l.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;e.hasType(c)&&(r[c]="application/json"===c?JSON.parse(e.getData(c)):e.getData(c))}}catch(o){a.e(o)}finally{a.f()}return{data:r,transmat:e}}function f(e){var t=e.onTransmit,n=e.onReceive,a=e.checkEntry,c=e.draggable,o=e.style,d=e.className,f=e.children,O=e.mimetypes,h=void 0===O?["application/json"]:O,v=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e=Object(u.addListeners)(v.current,"transmit",function(){var e=Object(r.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new u.Transmat(n),"function"!==typeof t){e.next=6;break}return e.next=4,t(r);case 4:"object"!==typeof(a=e.sent)||null===a||Array.isArray(a.data)||"object"!==typeof a.data||null===a.data||r.setData(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=Object(u.addListeners)(v.current,"receive",(function(e){var t=new u.Transmat(e),r=p(t,h),c=!1;"function"===typeof a&&(c=a(r)),t.accept()&&(c&&"function"===typeof n&&n(r),e.preventDefault())})),o=new u.TransmatObserver((function(e){var t,n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,c=p(new u.Transmat(r.event),h),o=!1;"function"===typeof a&&(o=a(c)),o&&(r.target.classList.toggle(b.a.drag_over,r.isTarget),r.target.classList.toggle(b.a.drag_active,r.isActive))}}catch(i){n.e(i)}finally{n.f()}}));return o.observe(v.current),function(){e(),c(),o.disconnect()}}),[t,n,a,h]),Object(j.jsx)("div",{ref:v,style:o,className:d,draggable:c?"true":"false",tabIndex:"0",children:f})}var O=n(5),h=n(84),v=n(32),g=n(41);var m=function(e){var t=e.block,n=e.style,r=e.locales,c=Object(s.useState)({__html:""}),o=Object(O.a)(c,2),i=o[0],l=o[1],u=(0,Object(v.c)().translateBlock)(t,r,"");Object(s.useEffect)((function(){var e=Object(h.a)(u);l({__html:e})}),[u,l]);var d={dir:"auto",style:Object(a.a)({whiteSpace:"pre-wrap"},n)},b=Object(g.getBlockColor)(t).color;b&&(d.style.color=b);var p="body";t.properties.hasOwnProperty("text_style")&&(p=t.properties.text_style);var f=null;switch(p){case"h1":f=Object(j.jsx)("h1",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"h2":f=Object(j.jsx)("h2",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"h3":f=Object(j.jsx)("h3",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"caption":f=Object(j.jsx)("caption",Object(a.a)({dangerouslySetInnerHTML:i},d));break;default:f=Object(j.jsx)("p",Object(a.a)({dangerouslySetInnerHTML:i},d))}return f};var x=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=e.locales,o=Object(s.useState)({__html:""}),i=Object(O.a)(o,2),l=i[0],u=i[1],d=Object(v.c)(),b=d.getString,p=(0,d.translateBlock)(t,c,b("placeholder_main_headline"));Object(s.useEffect)((function(){var e=Object(h.a)(p,{linkify:!1});u({__html:e})}),[p,u]);var f="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(f=t.properties.action.url);var m=Object(g.getBlockColor)(t),x=m.color,y=m.contrastingColor,k={};x&&(k["--button-background"]=x,k["--button-color"]=y);var w=r.hasOwnProperty("click");return!1===w&&""!==f?Object(j.jsx)("a",{href:f,target:"_blank",rel:"noreferrer",children:Object(j.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},k)})}):!0===w&&"function"===typeof r.click?Object(j.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},k),onClick:r.click}):Object(j.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,disabled:"disabled",className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},k)})};function y(e){var t=e.block,n=Object(g.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(j.jsx)("hr",{style:r})}var k=n(379),w=n(380);var _=function(e){var t=e.block,n=t.properties.text||"",r=Boolean(t.properties.checked),a={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(j.jsxs)("p",{dir:"auto",children:[r?Object(j.jsx)(k.a,{style:a}):Object(j.jsx)(w.a,{style:a}),n]})};var S=n(381),I=n(382),N=n(383),B=n(56),C=n(45),P=n.n(C);var L=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=e.locales,o=Object(v.c)(),i=o.getString,l=o.translateBlock,u=o.userLocales,d=function(e){var t=e.block,n=void 0===t?null:t,r=Object(s.useState)(null),a=Object(O.a)(r,2),c=a[0],o=a[1],i=Object(s.useState)(null),l=Object(O.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){var e=null,t=null;if(null!==n){var r=n._id,a=(n.properties||{}).trigger||{},c=a.type,i=(n.properties||{}).action||{},s=i.type;"path"===c||"click"===c?"open_url"===s&&"string"===typeof i.url&&i.url.length>0?(e=i.url||"",t=null):"render_block"===s&&"string"===typeof a.path&&a.path.length>0?"string"===typeof i.blockId&&i.blockId.length>0?(e="".concat(window.domains.frontend).concat(a.path,"=").concat(i.blockId),t="/".concat(a.path,"=").concat(i.blockId)):(e="".concat(window.domains.frontend).concat(a.path,"=").concat(r),t="/".concat(a.path,"=").concat(r)):(e="/".concat(r,"/view"),t="/".concat(r)):(e="".concat(window.domains.frontend).concat(r,"/view"),t="/".concat(r))}o(e),d(t)}),[n,o,d]),{link:c,path:u}}({block:t}),b=d.link,p=d.path,f=l(t,c||u,"");if(""===f){var h=(t.properties||{}).trigger||{},m=h.type;f="path"===m?"/"+h.path:"redirect"===t.type?"click"===m?h.blockId:"cron"===m?h.cron:"block_change"===m?h.blockId:Object.keys(h).length>0?JSON.stringify(h):i("placeholder_main_headline"):i("placeholder_main_headline")}var x=!1,y=Object(g.getImageUrl)(t.properties.icon);y||(x=!0,y=Object(g.getImageUrl)(t.properties.coverphoto));var k=null;if(""===y)switch(t.type){case"person":k=Object(j.jsx)(S.a,{className:P.a.icon});break;case"redirect":k=Object(j.jsx)(I.a,{className:P.a.icon});break;default:k=Object(j.jsx)(N.a,{className:P.a.icon})}else k=Object(j.jsx)("div",{className:"".concat(P.a.icon," ").concat(x?P.a.square:P.a.round),style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=40&h=40&url=").concat(encodeURIComponent(y),")")},alt:f});var w=null,_=p||b;r.hasOwnProperty("link")?"string"===typeof r.link&&(_=r.link):r.hasOwnProperty("click")&&"function"===typeof r.click&&(w=r.click);var C=Object(g.getBlockColor)(t),L=C.color,E=void 0===L?"inherit":L,A=C.colorRGB,$=void 0===A?"--on-background-rgb":A;if("string"===typeof _&&_.length>0)return _.includes(":")?Object(j.jsx)("a",{href:_,target:"_blank",rel:"noreferrer",title:f,className:"clickable_card ".concat(P.a.root),style:{display:"block",cursor:"pointer",color:E,"--on-background-rgb":$},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[k,Object(j.jsx)("span",{dir:"auto",className:P.a.title,children:f})]})}):Object(j.jsx)(B.b,{to:_,title:f,className:"clickable_card ".concat(P.a.root),style:{display:"block",cursor:"pointer",color:E,"--on-background-rgb":$},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[k,Object(j.jsx)("span",{dir:"auto",className:P.a.title,children:f})]})});var D={};return"function"===typeof w&&(D.onClick=w),Object(j.jsx)("div",Object(a.a)(Object(a.a)({},D),{},{title:f,className:"clickable_card ".concat(P.a.root),style:{cursor:"function"===typeof w?"pointer":"auto",color:E,"--on-background-rgb":$},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[k,Object(j.jsx)("span",{dir:"auto",className:P.a.title,children:f})]})}))},E=n(193),A=n.n(E),$=n(124),D=n(151),R=n(106),T=["block","actions","size","dragable"];function q(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&q(e[n],t);return e}t.a=function(e){var t=e.block,n=void 0===t?{}:t,o=e.actions,l=void 0===o?{}:o,u=(e.size,e.dragable),d=void 0!==u&&u,b=Object(c.a)(e,T),p=null,O=Object(R.a)().userroles,h=function(e){var t=e.keys,n=void 0===t?[]:t,r=Object(s.useRef)(new Set);return Object(s.useEffect)((function(){function e(e){var t=e.key.toLowerCase();n.includes(t)&&r.current.add(t)}function t(e){var t=e.key.toLowerCase();r.current.delete(t)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[n]),{getPressedKeys:function(){return r.current}}}({keys:["shift"]}).getPressedKeys;switch(n.type||null){case"text":p=Object(j.jsx)(m,Object(a.a)({block:n,actions:l},b),n._id);break;case"button":p=Object(j.jsx)(x,Object(a.a)({block:n,actions:l},b),n._id);break;case"divider":p=Object(j.jsx)(y,Object(a.a)({block:n,actions:l},b),n._id);break;case"checkbox":p=Object(j.jsx)(_,Object(a.a)({block:n,actions:l},b),n._id);break;case"page":case"person":case"redirect":p=Object(j.jsx)(L,Object(a.a)({block:n,actions:l},b),n._id);break;default:p=JSON.stringify(n)}var v=Object(D.a)(),g=Object(s.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){var r,a,c,o,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,"object"!==typeof(a=((void 0===r?{}:r)||{})["application/json"])||null===a){e.next=23;break}if(c=q(c=a,"__typename"),o=n.computed.roles||[],s=c.computed.roles||[],c._id===n._id||!(O.includes("admin")||(o.includes("editor")||o.includes("owner"))&&(s.includes("editor")||s.includes("owner")))){e.next=23;break}return l=h(),u=!1,e.prev=10,e.next=13,v({mutation:$.b,variables:{movingBlockId:c._id,newParentId:n._id,newIndex:0}});case 13:if(!l.has("shift")){e.next=16;break}return e.next=16,v({mutation:$.d,variables:{_id:c._id,key:"active",value:!1}});case 16:u=!0,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.error(e.t0);case 22:u&&console.log("TODO reload sidebar");case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),[v,n,h,O]),k=Object(s.useCallback)((function(e){var t=e.data,n=((void 0===t?{}:t)||{})["application/json"],r=!1;if("object"===typeof n&&null!==n&&n.hasOwnProperty("computed")&&n.computed.hasOwnProperty("roles")){var a=n.computed.roles||[];(O.includes("admin")||a.includes("editor")||a.includes("owner"))&&(r=!0)}return r}),[O]);return Object(j.jsx)(f,{draggable:d,className:A.a.root,onTransmit:function(){return{data:{"text/plain":n.properties.text||"","application/json":n}}},onReceive:g,checkEntry:k,children:p},n._id)}}},[[302,2,3]]]);
//# sourceMappingURL=main.e01b1bc6.chunk.js.map