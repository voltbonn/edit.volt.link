(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[10],{243:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(25),a=n(39),c=n(7),o=n(22),i=n.n(o),s=n(0),l=n(253),u=n.n(l),b=n(424),j=n(425),d=n(426),p=n(77),h=n(66),f=n(237),O=n(231),v=n(414),x=n(230),m=n(4);function g(e){var t=e.title,n=e.block,o=void 0===n?{}:n,l=e.rightActions,g=e.notificationBanner,_=Object(h.e)(),y=_.open,w=_.toggleSidebar,k=Object(v.a)(),N=o?o._id:null,S=o?o.parent:null,I=Object(s.useState)([]),C=Object(c.a)(I,2),P=C[0],U=C[1],R=Object(s.useState)([]),V=Object(c.a)(R,2),q=V[0],H=V[1],D=Object(s.useCallback)((function(e){k.query({query:x.e,variables:{_id:e}}).then(function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.blocks?(r=(n.blocks||[]).sort((function(e,t){return t.computed.sort-e.computed.sort})),U(r)):(console.error(n.error),U([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),U([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[k,U]),E=Object(s.useCallback)((function(e,t){k.query({query:x.d,variables:{roots:[e||t],types:["page","person","redirect"],archived:!1}}).then(function(){var e=Object(a.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(r=n.data).error&&r.blocks?H((r.blocks||[]).filter((function(e){return e._id!==t}))):(console.error(r.error),H([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),H([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[k,H]);Object(s.useEffect)((function(){N&&(D(N),E(S,N))}),[N,S,D,E]);var F=Object(m.jsxs)(m.Fragment,{children:[y?null:Object(m.jsx)("button",{onClick:w,className:"text hasIcon",style:{margin:"0"},children:Object(m.jsx)(b.a,{className:"icon"})}),Object(m.jsxs)("div",{style:{flexGrow:"1"},children:[Object(m.jsx)(p.b,{to:"/",children:Object(m.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)(j.a,{style:{verticalAlign:"middle"}})})}),Object(m.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),N&&P.length>0?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.a,{trigger:function(e){return Object(m.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)(d.a,{style:{verticalAlign:"middle"}})}))},children:Object(m.jsx)("div",{style:{padding:"var(--basis_x2)"},children:P.map((function(e){return Object(m.jsx)(f.a,{block:e,size:"line"},e._id)}))})}),Object(m.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,q.length>0?Object(m.jsx)(O.a,{trigger:function(e){return Object(m.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(m.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:Object(m.jsx)("div",{style:{padding:"var(--basis_x2)"},children:q.map((function(e){return Object(m.jsx)(f.a,{block:e,size:"line"},e._id)}))})}):Object(m.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(m.jsxs)("header",{className:u.a.header,children:[Object(m.jsxs)("div",{className:u.a.headerBar,children:[F,l]}),g?Object(m.jsx)("div",{className:u.a.notificationBanner,children:g}):null]})}},245:function(e,t,n){"use strict";var r=n(25),a=n(7),c=n(0),o=n(478),i=n(231),s=n(262),l=n.n(s),u=n(263),b=n(4),j={_:"??",en:"English",de:"Deutsch",es:"Espa\xf1ol",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano",nl:"Nederlands",da:"Dansk",sv:"Svenska",nb:"Norsk bokm\xe5l",fi:"Suomi",mt:"Malti",pl:"J\u0119zyk polski",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",tr:"T\xfcrk\xe7e",ar:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629",el:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",ro:"limba rom\xe2n\u0103",sl:"sloven\u0161\u010dina"},d=Object.entries(j).map((function(e){var t=Object(a.a)(e,2);return{code:t[0],nativeName:t[1]}})),p=Object.keys(j);t.a=function(e){var t=e.defaultValue,n=e.onChange,s=e.options,h=void 0===s?p:s;null!==t&&void 0!==t&&""!==t&&!1!==j.hasOwnProperty(t)||(t="_");var f=Object(c.useState)(t),O=Object(a.a)(f,2),v=O[0],x=O[1],m=Object(c.useCallback)((function(e){x(e),"_"===e&&(e=null),n&&n(e)}),[x,n]);return Object(b.jsx)(i.a,{trigger:function(e,t){var n=t.isOpen;return Object(b.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"default hasIcon",style:{margin:"0",flexShrink:"0"},children:[Object(b.jsx)("span",{style:{width:"100%",textAlign:"start"},children:"_"===v?Object(b.jsx)(l.a,{path:u.a,className:"icon"}):v.toUpperCase()}),Object(b.jsx)("span",{style:{marginLeft:"var(--basis)",lineHeight:"1",verticalAlign:"text-top"},children:n?"\u25b4":"\u25be"})]}))},paperProps:{sx:{maxHeight:"300px"}},children:function(e){var t=e.close;return Object(b.jsx)("div",{style:{padding:"var(--basis_x2) 0"},children:d.filter((function(e){var t=e.code;return h.includes(t)})).map((function(e){var n=e.code,r=e.nativeName;return Object(b.jsx)(o.a,{onClick:function(){m(n),t()},className:"roundMenuItem",selected:n===v,children:"_"===n?r:"".concat(n.toUpperCase()," \u2014 ").concat(r)},n)}))})}})}},250:function(e,t,n){"use strict";var r=n(39),a=n(22),c=n.n(a),o=n(0),i=n(226),s=n(414),l=n(230),u=n(103);t.a=function(){var e=Object(i.c)().getString,t=Object(s.a)(),n=Object(u.b)(),a=n.enqueueSnackbar,b=n.closeSnackbar,j=Object(o.useCallback)((function(n){return new Promise((function(o){var i=null;if(n&&""!==n){var s=new Promise((function(s){t.query({query:l.c,variables:{_id:n}}).then(function(){var t=Object(r.a)(c.a.mark((function t(n){var r,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.data,s("got-data"),null!==i&&b(i),"string"!==typeof r.error&&r.block?(l=r.block,o(l)):"no_edit_permission"===r.error?a(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):a(""+r.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),s("got-error"),null!==i&&b(i),a("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),s]).then((function(t){"show-loading"===t&&(i=a(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else o({type:"text"})}))}),[a,b,t,e]);return j}},251:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(39),a=n(22),c=n.n(a),o=n(0),i=n(414),s=n(230);function l(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(a){t&&""!==t?e.query({query:s.a,variables:{_id:t,roles:n}}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("blockMatchesRoles")?a(n.blockMatchesRoles):a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):a(!1)}))}),[e]);return t}},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(415),a=n(226),c=n(4);function o(e){var t=e.errorName,n="Unknown Error",o="",i="";return"no_access"===t?(n="You don't have access to this page!",o=Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"If you are not logged in:"}),"You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.",Object(c.jsx)("br",{}),Object(c.jsx)("h2",{children:"If you are logged in:"}),"You propably don't have access to this page."]}),i=Object(c.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(c.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(c.jsx)(r.a,{className:"icon"}),Object(c.jsx)("span",{children:Object(c.jsx)(a.b,{id:"login"})})]})})):"not_found"===t&&(n="We could not find the requested URL\u2026",o="The URL you requested does currently not exist. Did you type the URL correctly?",i=Object(c.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(c.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(c.jsx)(r.a,{className:"icon"}),Object(c.jsx)("span",{children:Object(c.jsx)(a.b,{id:"login"})})]})})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:n}),Object(c.jsx)("p",{children:o}),i,Object(c.jsx)("br",{})," ",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("p",{children:["Please contact ",Object(c.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:"thomas.rosen@volteuropa.org"})," if you think this is a bug.",Object(c.jsx)("br",{}),"Go to ",Object(c.jsx)("a",{href:"https://volteuropa.org",children:"volteuropa.org"})," for information about the Pan-European Political Movement."]})]})}},253:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},372:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",items:"Viewer_items__2FgjF",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",type_p:"Viewer_type_p__O5DZS",viewer:"Viewer_viewer__JHrvB"}},413:function(e,t,n){"use strict";n.r(t);var r=n(25),a=n(24),c=n(39),o=n(7),i=n(22),s=n.n(i),l=n(0),u=n(10),b=n(77),j=n(105),d=n(229),p=n(226),h=n(250),f=n(239),O=n(232),v=n(251),x=n(252),m=n(243),g=n(237),_=n(245),y=n(372),w=n.n(y),k=n(427),N=n(234),S=n(4);t.default=function(){var e=Object(l.useRef)(!1),t=Object(p.c)(),n=t.getString,i=t.translateBlock,y=t.userLocales,I=Object(O.a)().loggedIn,C=Object(h.a)(),P=Object(f.a)(),U=Object(u.h)().id,R=void 0===U?"":U,V=Object(l.useState)({type:"page",properties:{},content:[]}),q=Object(o.a)(V,2),H=q[0],D=q[1],E=Object(l.useState)([]),F=Object(o.a)(E,2),A=F[0],B=F[1],M=Object(l.useState)([]),L=Object(o.a)(M,2),W=L[0],J=L[1],T=Object(l.useState)(H.properties.locale||y||["en"]),Y=Object(o.a)(T,2),z=Y[0],G=Y[1],Z=Object(l.useCallback)((function(e){G([e])}),[G]),K=Object(l.useState)(null),Q=Object(o.a)(K,2),X=Q[0],$=Q[1],ee=Object(v.a)();if(Object(l.useEffect)((function(){ee(R,["viewer","owner"]).then((function(e){$(e)})).catch((function(e){console.error(e),$(!1)}))}),[R,ee,$]),Object(l.useEffect)((function(){X&&!1===e.current&&"string"===typeof R&&""!==R&&R!==H._id&&(e.current=!0,C(R).then(function(){var t=Object(c.a)(s.a.mark((function t(n){var c,o,i,l,u,b;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n,!(Array.isArray(n.content)&&n.content.length>0)){t.next=11;break}if(o=Object(a.a)(n.content),i=n.content.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),l=[],!(i.length>0)){t.next=9;break}return t.next=8,P({ids:i});case 8:l=t.sent;case 9:o=o.map((function(e){return e.hasOwnProperty("block")||(e.block=l.find((function(t){return t._id===e.blockId}))),e})),c=Object(r.a)(Object(r.a)({},c),{},{content:o});case 11:u=(c.content||[]).map((function(e){return e.block})),b=Object(a.a)(new Set([n].concat(Object(a.a)(u)).flatMap((function(e){return[e.properties.locale].concat(Object(a.a)((e.properties.translations||[]).filter((function(e){return e.text&&e.text.length>0})).map((function(e){return e.locale}))))})).filter(Boolean))),J(b),D(c),B(u),e.current=!1;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[X,R,H,H._id,C,D,P,B,J]),!1===X)return Object(S.jsxs)("div",{className:w.a.viewer,children:[Object(S.jsx)(m.a,{block:null,title:"Error",rightActions:null}),Object(S.jsx)("div",{className:"basis_x1 ".concat(w.a.app," ").concat(w.a.spine_aligned),dir:"auto",children:Object(S.jsx)("main",{className:"".concat(w.a.contentWrapper),children:Object(S.jsx)(x.a,{errorName:"no_access"})})})]});var te=H.type||null,ne=i(H,z,n("placeholder_main_headline")),re=Object(d.getImageUrl)(H.properties.coverphoto),ae=Object(d.getImageUrl)(H.properties.icon),ce=Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[I&&Object(S.jsx)(b.b,{to:"/".concat(H._id,"/edit"),style:{marginRight:"var(--basis_x2)"},children:Object(S.jsxs)("button",{className:"text hasIcon",children:[Object(S.jsx)(k.a,{className:"icon"}),Object(S.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(S.jsx)(p.a,{id:"edit_block"})})]})}),W.length>1&&Object(S.jsx)(_.a,{onChange:Z,defaultValue:z[0]||y[0]||"en",options:W})]})}),oe={__html:Object(N.a)(ne)};return Object(S.jsxs)("div",{className:w.a.viewer,children:[Object(S.jsx)(j.a,{children:Object(S.jsx)("title",{children:ne})}),Object(S.jsx)(m.a,{block:H,title:Object(S.jsx)("span",{dir:"auto",dangerouslySetInnerHTML:oe}),rightActions:ce}),Object(S.jsxs)("div",{className:"basis_x1 ".concat(w.a.app," ").concat(w.a.spine_aligned),dir:"auto",children:["page"!==te&&"person"!==te&&"redirect"!==te||""===re?null:Object(S.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=1400&h=400&url=").concat(encodeURIComponent(re),")")},className:w.a.coverphoto}),Object(S.jsxs)("main",{className:"".concat(w.a.contentWrapper),children:["page"!==te&&"person"!==te&&"redirect"!==te||""===ae?null:Object(S.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=400&h=400&url=").concat(encodeURIComponent(ae),")")},className:"".concat(w.a.icon," ").concat(""===re?w.a.coverphotoIsNotSet:w.a.coverphotoIsSet)}),""!==ne?Object(S.jsx)("h1",{dir:"auto",dangerouslySetInnerHTML:oe,style:{whiteSpace:"pre-wrap"}}):null,Object(S.jsx)("div",{className:w.a.items,children:A.filter((function(e){return!!e})).filter((function(e){return!1!==e.properties.active})).map((function(e){return Object(S.jsx)(g.a,{block:e,locales:z},e._id)}))})]})]})]})}}}]);
//# sourceMappingURL=10.a7ae8256.chunk.js.map