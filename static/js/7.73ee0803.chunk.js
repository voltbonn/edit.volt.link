(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[7,2],{226:function(e,t,n){"use strict";n.d(t,"d",(function(){return O})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h}));var r=n(24),a=n(14),c=n(25),o=n(0),i=n.n(o),l=n(83),s=n(102),u=n(45),d=n(249),b=n.n(d),j=n(4),p=function(e){return Object(j.jsx)(l.b,Object(c.a)(Object(c.a)({},e),{},{elems:Object(c.a)({br:Object(j.jsx)("br",{})},e.elems),children:Object(j.jsx)(i.a.Fragment,{children:e.children})}),e.id)};function O(e){return function(t){var n=i.a.useContext(u.a);return i.a.createElement(e,Object(c.a)({fluentByObject:function(e,t){if(t||(t=null),e){var r,c=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return c.includes(e)})),i=Object(s.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),l=Object(a.a)(i);try{for(l.s();!(r=l.n()).done;){var u=r.value;if(e[u])return e[u]}}catch(d){l.e(d)}finally{l.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||" ")}},t))}}function f(e,t,n){var a=(e||{}).properties,c=void 0===a?{}:a,o=c.locale||"en",i=c.text||n||"";t&&Array.isArray(t)||(t=[o]);var l=c.translations||[];if(Array.isArray(l)){l=[{locale:o,text:i}].concat(Object(r.a)(l));var s=b.a.fluentByArray(l,t,"locale");s.length>0&&(i=s[0].text)}return i}function h(){var e=i.a.useContext(u.a);return Object(c.a)(Object(c.a)({},e),{},{getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return b.a.fluentByAny(t,e.userLocales,n)},translateBlock:f})}},229:function(e,t){function n(e){if(e.startsWith("#")&&(e=e.substring(1)),3===e.length)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);else if(6!==e.length)throw new Error("Invalid hex color: "+e);for(var t=[],n=0;n<=2;n++)t[n]=parseInt(e.substr(2*n,2),16);return t}function r(e){return function(e){var t="string"===typeof e?n(e):e;return.2126*t[0]+.7152*t[1]+.0722*t[2]}(e)>=165?"000":"fff"}function a(e){var t;return t=function(e){var t,n;return(t=document.createElement("canvas")).height=1,t.width=1,(n=t.getContext("2d")).fillStyle=e,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}(e),"#"+[0,1,2].map((function(e){return("0"+t[e].toString(16)).slice(-2)})).join("")}e.exports={getImageUrl:function(e){return"object"!==typeof e||null===e||Array.isArray(e)||"url"!==e.type?"":e.url||""},getBlockColor:function(e){var t={color:null,colorRGB:null,contrastingColor:null,contrastingColorRGB:null};if(e.hasOwnProperty("properties")&&e.properties.hasOwnProperty("color")&&e.properties.color){var c=e.properties.color;if(["purple","red","green","blue","yellow"].includes(c))t.color="var(--".concat(c,")"),t.colorRGB="var(--".concat(c,"-rgb)"),t.contrastingColor="var(--on-".concat(c,")"),t.contrastingColorRGB="var(--on-".concat(c,"-rgb)");else{if(c.startsWith("#"))4!==c.length&&7!==c.length&&(c=null);else{var o=a(c);c="#000000"===o&&"black"!==c?null:o}if(c){t.color=c;var i=n(c);t.colorRGB=i.join(", "),t.contrastingColor="#"+r(c),t.contrastingColorRGB=n(t.contrastingColor)}}}return t}}},230:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return j})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return O})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h}));var r,a,c,o,i,l,s,u=n(238),d=n(469),b=Object(d.a)(r||(r=Object(u.a)(["\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),j=Object(d.a)(a||(a=Object(u.a)(["\n  query getBlocks ($ids: [ObjectID], $types: [String], $archived: Boolean, $roots: [ObjectID]) {\n    blocks (ids: $ids, types: $types, archived: $archived, roots: $roots) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),p=Object(d.a)(c||(c=Object(u.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n      userroles\n    }\n  }\n"]))),O=(Object(d.a)(o||(o=Object(u.a)(["\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),Object(d.a)(i||(i=Object(u.a)(["\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed {\n        sort\n      }\n    }\n  }\n"])))),f=Object(d.a)(l||(l=Object(u.a)(["\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"]))),h=Object(d.a)(s||(s=Object(u.a)(["\n  query checkPath ($path: String!) {\n    checkPath (path: $path) {\n      isOkay\n      errors\n    }\n  }\n"])))},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(39),a=n(25),c=n(7),o=n(22),i=n.n(o),l=n(0),s=n(414),u=n(230),d={userroles:[]};function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(l.useRef)(!1);Object(l.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]);var n=Object(l.useState)(d),o=Object(c.a)(n,2),b=o[0],j=o[1],p=Object(l.useState)(!1),O=Object(c.a)(p,2),f=O[0],h=O[1],v=Object(s.a)();return Object(l.useEffect)((function(){!0!==e&&window.hasOwnProperty("user")?(j(Object(a.a)(Object(a.a)({},window.user),{},{userroles:window.user.userroles||[]})),h(window.user.logged_in)):v.query({query:u.f}).then(function(){var e=Object(r.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data,!0===t.current&&(r.hasOwnProperty("self")&&null!==r.self?(window.user=r.self,j(Object(a.a)(Object(a.a)({},r.self),{},{userroles:r.self.userroles||[]})),h(r.self.logged_in)):(j(d),h(!1)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),!0===t.current&&(j(d),h(!1))}))}),[e,j,h,v]),Object(a.a)(Object(a.a)({},b),{},{loggedIn:f})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(25),a=n(18),c=n(224),o=n(473),i=n(421),l=n(478),s=n(422),u=n(474),d=n(423),b=n(226),j=n(241),p=n(4),O=["closePopover","open"],f=["sx"];function h(e){var t=e.trigger,n=e.children,h=e.onToogle,v=e.paperProps,g=void 0===v?{}:v;return Object(p.jsx)(j.a,{trigger:t,onToogle:h,children:function(e){var t=e.closePopover,j=e.open,h=Object(a.a)(e,O),v=g||{},x=v.sx,m=void 0===x?{}:x,_=Object(a.a)(v,f);return Object(p.jsx)(c.a,Object(r.a)(Object(r.a)(Object(r.a)({},h),{},{sx:Object(r.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},m),elevation:8},_),{},{children:Object(p.jsx)(o.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:Object(p.jsxs)("div",{children:["function"===typeof n?n({isOpen:j,close:t}):n,Object(p.jsx)(i.a,{style:{opacity:.2,marginBottom:"8px"}}),Object(p.jsxs)(l.a,{className:"roundMenuItem",onClick:t,children:[Object(p.jsx)(s.a,{children:Object(p.jsx)(d.a,{})}),Object(p.jsx)(u.a,{children:Object(p.jsx)(b.a,{id:"block_menu_close_menu"})})]})]})})}))}})}},233:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"b",(function(){return p}));var r,a,c,o,i,l=n(238),s=n(469),u=Object(s.a)(r||(r=Object(l.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),d=Object(s.a)(a||(a=Object(l.a)(["\n  mutation saveProperty ($_id: ObjectID!, $key: String!, $value: JSON) {\n    saveProperty (_id: $_id, key: $key, value: $value)\n  }\n"]))),b=Object(s.a)(c||(c=Object(l.a)(["\n  mutation archiveBlock ($_id: ObjectID!) {\n    archiveBlock (_id: $_id)\n  }\n"]))),j=Object(s.a)(o||(o=Object(l.a)(["\n  mutation unarchiveBlock ($_id: ObjectID!) {\n    unarchiveBlock (_id: $_id)\n  }\n"]))),p=Object(s.a)(i||(i=Object(l.a)(["\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n"])))},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(25),a=n(277),c=n.n(a),o=n(286),i=n.n(o),l=n(287),s=n.n(l),u=n(288);function d(e){var t=c()(Object(r.a)({html:!1,xhtmlOut:!1,linkify:!0,typographer:!0,breaks:!1},e));return t.use(i.a),t.use(s.a),t}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(e=e||"").replace(/\(TM\)/gi,"\u2122").replace(/\(SM\)/gi,"\u2120").replace(/\(C\)/gi,"\xa9").replace(/\(R\)/gi,"\xae");var n=d(t);return e=n.renderInline(e),e=u.a.parse(e,{folder:"svg",ext:".svg",base:"/public/twemoji/assets/"})}},236:function(e,t,n){"use strict";var r=n(39),a=n(25),c=n(22),o=n.n(c),i=n(0),l=n(226),s=n(414),u=n(233),d=n(103);function b(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&b(e[n],t);return e}t.a=function(){var e=Object(l.c)().getString,t=Object(s.a)(),n=Object(d.b)(),c=n.enqueueSnackbar,j=n.closeSnackbar,p=Object(i.useCallback)((function(n){return new Promise((function(i){var l=null,s=Object(a.a)({},n);(s=b(s,"__typename")).hasOwnProperty("content")&&Array.isArray(s.content)&&(s.content=s.content.map((function(e){return{blockId:e.blockId}})));var d=new Promise((function(d){t.mutate({mutation:u.c,variables:{block:s}}).then(function(){var t=Object(r.a)(o.a.mark((function t(r){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=r.data,d("got-data"),null!==l&&j(l),"string"===typeof s.error?"no_edit_permission"===s.error?c(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):c(""+s.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(i(Object(a.a)(Object(a.a)({},n),{},{_id:s.saveBlock})),c(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(r.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(n),d("got-error"),null!==l&&j(l),c(e("path_editor_status_error_while_saving",{error:n.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),d]).then((function(t){"show-loading"===t&&(l=c(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}))}),[c,j,t,e]);return p}},237:function(e,t,n){"use strict";var r=n(39),a=n(25),c=n(18),o=n(22),i=n.n(o),l=n(0),s=n(14),u=n(268),d=n(255),b=n.n(d),j=n(4);function p(e,t){var n,r={},a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;e.hasType(c)&&(r[c]="application/json"===c?JSON.parse(e.getData(c)):e.getData(c))}}catch(o){a.e(o)}finally{a.f()}return{data:r,transmat:e}}function O(e){var t=e.onTransmit,n=e.onReceive,a=e.checkEntry,c=e.draggable,o=e.style,d=e.className,O=e.children,f=e.mimetypes,h=void 0===f?["application/json"]:f,v=Object(l.useRef)(null);return Object(l.useEffect)((function(){var e=Object(u.addListeners)(v.current,"transmit",function(){var e=Object(r.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new u.Transmat(n),"function"!==typeof t){e.next=6;break}return e.next=4,t(r);case 4:"object"!==typeof(a=e.sent)||null===a||Array.isArray(a.data)||"object"!==typeof a.data||null===a.data||r.setData(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=Object(u.addListeners)(v.current,"receive",(function(e){var t=new u.Transmat(e),r=p(t,h),c=!1;"function"===typeof a&&(c=a(r)),t.accept()&&(c&&"function"===typeof n&&n(r),e.preventDefault())})),o=new u.TransmatObserver((function(e){var t,n=Object(s.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,c=p(new u.Transmat(r.event),h),o=!1;"function"===typeof a&&(o=a(c)),o&&(r.target.classList.toggle(b.a.drag_over,r.isTarget),r.target.classList.toggle(b.a.drag_active,r.isActive))}}catch(i){n.e(i)}finally{n.f()}}));return o.observe(v.current),function(){e(),c(),o.disconnect()}}),[t,n,a,h]),Object(j.jsx)("div",{ref:v,style:o,className:d,draggable:c?"true":"false",tabIndex:"0",children:O})}var f=n(7),h=n(234),v=n(226),g=n(229);var x=function(e){var t=e.block,n=e.style,r=e.locales,c=Object(l.useState)({__html:""}),o=Object(f.a)(c,2),i=o[0],s=o[1],u=(0,Object(v.c)().translateBlock)(t,r,"");Object(l.useEffect)((function(){var e=Object(h.a)(u);s({__html:e})}),[u,s]);var d={dir:"auto",style:Object(a.a)({whiteSpace:"pre-wrap"},n)},b=Object(g.getBlockColor)(t).color;b&&(d.style.color=b);var p="body";t.properties.hasOwnProperty("text_style")&&(p=t.properties.text_style);var O=null;switch(p){case"h1":O=Object(j.jsx)("h1",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"h2":O=Object(j.jsx)("h2",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"h3":O=Object(j.jsx)("h3",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"caption":O=Object(j.jsx)("caption",Object(a.a)({dangerouslySetInnerHTML:i},d));break;default:O=Object(j.jsx)("p",Object(a.a)({dangerouslySetInnerHTML:i},d))}return O};var m=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=e.locales,o=Object(l.useState)({__html:""}),i=Object(f.a)(o,2),s=i[0],u=i[1],d=Object(v.c)(),b=d.getString,p=(0,d.translateBlock)(t,c,b("placeholder_main_headline"));Object(l.useEffect)((function(){var e=Object(h.a)(p,{linkify:!1});u({__html:e})}),[p,u]);var O="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(O=t.properties.action.url);var x=Object(g.getBlockColor)(t),m=x.color,_=x.contrastingColor,y={};m&&(y["--button-background"]=m,y["--button-color"]=_);var k=r.hasOwnProperty("click");return!1===k&&""!==O?Object(j.jsx)("a",{href:O,target:"_blank",rel:"noreferrer",children:Object(j.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:s,className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},y)})}):!0===k&&"function"===typeof r.click?Object(j.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:s,className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},y),onClick:r.click}):Object(j.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:s,disabled:"disabled",className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},y)})};function _(e){var t=e.block,n=Object(g.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(j.jsx)("hr",{style:r})}var y=n(416),k=n(417);var w=function(e){var t=e.block,n=t.properties.text||"",r=Boolean(t.properties.checked),a={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(j.jsxs)("p",{dir:"auto",children:[r?Object(j.jsx)(y.a,{style:a}):Object(j.jsx)(k.a,{style:a}),n]})};var C=n(418),I=n(419),N=n(420),S=n(77),F=n(259),B=n.n(F);var P=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=e.locales,o=Object(v.c)(),i=o.getString,s=o.translateBlock,u=o.userLocales,d=function(e){var t=e.block,n=void 0===t?null:t,r=Object(l.useState)(null),a=Object(f.a)(r,2),c=a[0],o=a[1],i=Object(l.useState)(null),s=Object(f.a)(i,2),u=s[0],d=s[1];return Object(l.useEffect)((function(){var e=null,t=null;if(null!==n){var r=n._id,a=(n.properties||{}).trigger||{},c=a.type,i=(n.properties||{}).action||{},l=i.type;"path"===c||"click"===c?"open_url"===l&&"string"===typeof i.url&&i.url.length>0?(e=i.url||"",t=null):"render_block"===l&&"string"===typeof a.path&&a.path.length>0?"string"===typeof i.blockId&&i.blockId.length>0?(e="".concat(window.domains.frontend).concat(a.path,"=").concat(i.blockId),t="/".concat(a.path,"=").concat(i.blockId)):(e="".concat(window.domains.frontend).concat(a.path,"=").concat(r),t="/".concat(a.path,"=").concat(r)):(e="/".concat(r,"/view"),t="/".concat(r)):(e="".concat(window.domains.frontend).concat(r,"/view"),t="/".concat(r))}o(e),d(t)}),[n,o,d]),{link:c,path:u}}({block:t}),b=d.link,p=d.path,O=s(t,c||u,"");if(""===O){var h=(t.properties||{}).trigger||{},x=h.type;O="path"===x?"/"+h.path:"redirect"===t.type?"click"===x?h.blockId:"cron"===x?h.cron:"block_change"===x?h.blockId:Object.keys(h).length>0?JSON.stringify(h):i("placeholder_main_headline"):i("placeholder_main_headline")}var m=!1,_=Object(g.getImageUrl)(t.properties.icon);_||(m=!0,_=Object(g.getImageUrl)(t.properties.coverphoto));var y=null;if(""===_)switch(t.type){case"person":y=Object(j.jsx)(C.a,{className:B.a.icon});break;case"redirect":y=Object(j.jsx)(I.a,{className:B.a.icon});break;default:y=Object(j.jsx)(N.a,{className:B.a.icon})}else y=Object(j.jsx)("div",{className:"".concat(B.a.icon," ").concat(m?B.a.square:B.a.round),style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=40&h=40&url=").concat(encodeURIComponent(_),")")},alt:O});var k=null,w=p||b;r.hasOwnProperty("link")?"string"===typeof r.link&&(w=r.link):r.hasOwnProperty("click")&&"function"===typeof r.click&&(k=r.click);var F=Object(g.getBlockColor)(t),P=F.color,E=void 0===P?"inherit":P,R=F.colorRGB,T=void 0===R?"--on-background-rgb":R;if("string"===typeof w&&w.length>0)return w.includes(":")?Object(j.jsx)("a",{href:w,target:"_blank",rel:"noreferrer",title:O,className:"clickable_card ".concat(B.a.root),style:{display:"block",cursor:"pointer",color:E,"--on-background-rgb":T},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[y,Object(j.jsx)("span",{dir:"auto",className:B.a.title,children:O})]})}):Object(j.jsx)(S.b,{to:w,title:O,className:"clickable_card ".concat(B.a.root),style:{display:"block",cursor:"pointer",color:E,"--on-background-rgb":T},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[y,Object(j.jsx)("span",{dir:"auto",className:B.a.title,children:O})]})});var A={};return"function"===typeof k&&(A.onClick=k),Object(j.jsx)("div",Object(a.a)(Object(a.a)({},A),{},{title:O,className:"clickable_card ".concat(B.a.root),style:{cursor:"function"===typeof k?"pointer":"auto",color:E,"--on-background-rgb":T},children:Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[y,Object(j.jsx)("span",{dir:"auto",className:B.a.title,children:O})]})}))},E=n(260),R=n.n(E),T=n(233),A=n(240),D=n(231),L=["block","actions","size","dragable"];function M(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&M(e[n],t);return e}t.a=function(e){var t=e.block,n=void 0===t?{}:t,o=e.actions,s=void 0===o?{}:o,u=(e.size,e.dragable),d=void 0!==u&&u,b=Object(c.a)(e,L),p=null,f=Object(D.a)().userroles,h=function(e){var t=e.keys,n=void 0===t?[]:t,r=Object(l.useRef)(new Set);return Object(l.useEffect)((function(){function e(e){var t=e.key.toLowerCase();n.includes(t)&&r.current.add(t)}function t(e){var t=e.key.toLowerCase();r.current.delete(t)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[n]),{getPressedKeys:function(){return r.current}}}({keys:["shift"]}).getPressedKeys;switch(n.type||null){case"text":p=Object(j.jsx)(x,Object(a.a)({block:n,actions:s},b),n._id);break;case"button":p=Object(j.jsx)(m,Object(a.a)({block:n,actions:s},b),n._id);break;case"divider":p=Object(j.jsx)(_,Object(a.a)({block:n,actions:s},b),n._id);break;case"checkbox":p=Object(j.jsx)(w,Object(a.a)({block:n,actions:s},b),n._id);break;case"page":case"person":case"redirect":p=Object(j.jsx)(P,Object(a.a)({block:n,actions:s},b),n._id);break;default:p=JSON.stringify(n)}var v=Object(A.a)(),g=Object(l.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){var r,a,c,o,l,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,"object"!==typeof(a=((void 0===r?{}:r)||{})["application/json"])||null===a){e.next=23;break}if(c=M(c=a,"__typename"),o=n.computed.roles||[],l=c.computed.roles||[],c._id===n._id||!(f.includes("admin")||(o.includes("editor")||o.includes("owner"))&&(l.includes("editor")||l.includes("owner")))){e.next=23;break}return s=h(),u=!1,e.prev=10,e.next=13,v({mutation:T.b,variables:{movingBlockId:c._id,newParentId:n._id,newIndex:0}});case 13:if(!s.has("shift")){e.next=16;break}return e.next=16,v({mutation:T.d,variables:{_id:c._id,key:"active",value:!1}});case 16:u=!0,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.error(e.t0);case 22:u&&console.log("TODO reload sidebar");case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),[v,n,h,f]),y=Object(l.useCallback)((function(e){var t=e.data,n=((void 0===t?{}:t)||{})["application/json"],r=!1;if("object"===typeof n&&null!==n&&n.hasOwnProperty("computed")&&n.computed.hasOwnProperty("roles")){var a=n.computed.roles||[];(f.includes("admin")||a.includes("editor")||a.includes("owner"))&&(r=!0)}return r}),[f]);return Object(j.jsx)(O,{draggable:d,className:R.a.root,onTransmit:function(){return{data:{"text/plain":n.properties.text||"","application/json":n}}},onReceive:g,checkEntry:y,children:p},n._id)}},239:function(e,t,n){"use strict";var r=n(39),a=n(22),c=n.n(a),o=n(0),i=n(414),l=n(230);t.a=function(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){return new Promise((function(n){e.query({query:l.d,variables:t}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.errors,a=t.data,!(Array.isArray(r)&&r.length>0)){e.next=5;break}throw r;case 5:if(!Array.isArray(a.blocks)){e.next=9;break}n(a.blocks),e.next=10;break;case 9:throw new Error("Unknown error while loading blocks.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}},240:function(e,t,n){"use strict";var r=n(0),a=n(414);t.a=function(){var e=Object(a.a)();return Object(r.useCallback)((function(t){return new Promise((function(n,r){e.mutate(t).then((function(e){var t=e.data;"string"===typeof t.error?r(t.error):n(t)})).catch(r)}))}),[e])}},241:function(e,t,n){"use strict";var r=n(25),a=n(7),c=n(0),o=n(213),i=n(467),l=n(210),s=n(4);t.a=function(e){var t=e.trigger,n=e.children,u=void 0===n?function(){}:n,d=e.onToogle,b=void 0===d?function(){}:d,j=e.setOpenBlockMenuRef,p=Object(c.useRef)(null),O=Object(c.useState)(!1),f=Object(a.a)(O,2),h=f[0],v=f[1],g=Object(c.useCallback)((function(e){v(e)}),[v]);Object(c.useEffect)((function(){j&&(j.current=g)}),[g,j]);var x=function(){b(!1),v(!1)},m=h?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(s.jsxs)(s.Fragment,{children:[t({ref:p,"aria-describedby":m,onClick:function(){v((function(e){return b(!e),!e}))},style:{pointerEvents:h?"none":"all"}},{isOpen:h}),Object(s.jsxs)(o.a,{children:[Object(s.jsx)("div",{onClick:x,style:{display:h?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(s.jsx)(i.a,{id:m,open:h,anchorEl:p.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(s.jsx)(l.a,Object(r.a)(Object(r.a)({},t),{},{children:Object(s.jsx)("div",{children:u&&"function"===typeof u?u({open:h,style:{transformOrigin:"top left"},closePopover:x}):null})}))}})]})]})}},242:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return m}));var r=n(478),a=n(422),c=n(474),o=n(430),i=n(431),l=n(432),s=n(433),u=n(416),d=n(434),b=n(435),j=n(419),p=n(231),O=n(232),f=n(226),h=n(4),v={button:Object(h.jsx)(o.a,{}),text:Object(h.jsx)(i.a,{}),code:Object(h.jsx)(l.a,{}),divider:Object(h.jsx)(s.a,{}),checkbox:Object(h.jsx)(u.a,{}),page:Object(h.jsx)(d.a,{}),person:Object(h.jsx)(b.a,{}),redirect:Object(h.jsx)(j.a,{})},g=["page","redirect"];function x(e){var t=e.createBlock,n=e.types,o=e.close,i=void 0===o?null:o;return n&&Array.isArray(n)||(n=g),Object(h.jsx)(h.Fragment,{children:n.map((function(e){return Object(h.jsxs)(r.a,{className:"roundMenuItem",onClick:function(){return t({type:e,close:i})},children:[Object(h.jsx)(a.a,{children:v[e]}),Object(h.jsx)(c.a,{children:Object(h.jsx)(f.a,{id:"block_menu_type_label_"+e})})]},e)}))})}function m(e){var t=e.trigger,n=e.createBlock,r=e.types;return Object(p.a)().loggedIn?Object(h.jsx)(O.a,{trigger:t,children:function(e){var t=e.close;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{marginTop:"8px"}}),Object(h.jsx)(x,{createBlock:n,types:r,close:t})]})}}):null}},243:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(25),a=n(39),c=n(7),o=n(22),i=n.n(o),l=n(0),s=n(253),u=n.n(s),d=n(424),b=n(425),j=n(426),p=n(77),O=n(66),f=n(237),h=n(232),v=n(414),g=n(230),x=n(4);function m(e){var t=e.title,n=e.block,o=void 0===n?{}:n,s=e.rightActions,m=e.notificationBanner,_=Object(O.e)(),y=_.open,k=_.toggleSidebar,w=Object(v.a)(),C=o?o._id:null,I=o?o.parent:null,N=Object(l.useState)([]),S=Object(c.a)(N,2),F=S[0],B=S[1],P=Object(l.useState)([]),E=Object(c.a)(P,2),R=E[0],T=E[1],A=Object(l.useCallback)((function(e){w.query({query:g.e,variables:{_id:e}}).then(function(){var e=Object(a.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.blocks?(r=(n.blocks||[]).sort((function(e,t){return t.computed.sort-e.computed.sort})),B(r)):(console.error(n.error),B([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),B([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[w,B]),D=Object(l.useCallback)((function(e,t){w.query({query:g.d,variables:{roots:[e||t],types:["page","person","redirect"],archived:!1}}).then(function(){var e=Object(a.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(r=n.data).error&&r.blocks?T((r.blocks||[]).filter((function(e){return e._id!==t}))):(console.error(r.error),T([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(a.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),T([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[w,T]);Object(l.useEffect)((function(){C&&(A(C),D(I,C))}),[C,I,A,D]);var L=Object(x.jsxs)(x.Fragment,{children:[y?null:Object(x.jsx)("button",{onClick:k,className:"text hasIcon",style:{margin:"0"},children:Object(x.jsx)(d.a,{className:"icon"})}),Object(x.jsxs)("div",{style:{flexGrow:"1"},children:[Object(x.jsx)(p.b,{to:"/",children:Object(x.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(x.jsx)(b.a,{style:{verticalAlign:"middle"}})})}),Object(x.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),C&&F.length>0?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.a,{trigger:function(e){return Object(x.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(x.jsx)(j.a,{style:{verticalAlign:"middle"}})}))},children:Object(x.jsx)("div",{style:{padding:"var(--basis_x2)"},children:F.map((function(e){return Object(x.jsx)(f.a,{block:e,size:"line"},e._id)}))})}),Object(x.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,R.length>0?Object(x.jsx)(h.a,{trigger:function(e){return Object(x.jsx)("button",Object(r.a)(Object(r.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(x.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:Object(x.jsx)("div",{style:{padding:"var(--basis_x2)"},children:R.map((function(e){return Object(x.jsx)(f.a,{block:e,size:"line"},e._id)}))})}):Object(x.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(x.jsxs)("header",{className:u.a.header,children:[Object(x.jsxs)("div",{className:u.a.headerBar,children:[L,s]}),m?Object(x.jsx)("div",{className:u.a.notificationBanner,children:m}):null]})}},245:function(e,t,n){"use strict";var r=n(25),a=n(7),c=n(0),o=n(478),i=n(232),l=n(262),s=n.n(l),u=n(263),d=n(4),b={_:"??",en:"English",de:"Deutsch",es:"Espa\xf1ol",pt:"Portugu\xeas",fr:"Fran\xe7ais",it:"Italiano",nl:"Nederlands",da:"Dansk",sv:"Svenska",nb:"Norsk bokm\xe5l",fi:"Suomi",mt:"Malti",pl:"J\u0119zyk polski",ru:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",bg:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a",tr:"T\xfcrk\xe7e",ar:"\u0627\u064e\u0644\u0652\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629",el:"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",ro:"limba rom\xe2n\u0103",sl:"sloven\u0161\u010dina"},j=Object.entries(b).map((function(e){var t=Object(a.a)(e,2);return{code:t[0],nativeName:t[1]}})),p=Object.keys(b);t.a=function(e){var t=e.defaultValue,n=e.onChange,l=e.options,O=void 0===l?p:l;null!==t&&void 0!==t&&""!==t&&!1!==b.hasOwnProperty(t)||(t="_");var f=Object(c.useState)(t),h=Object(a.a)(f,2),v=h[0],g=h[1],x=Object(c.useCallback)((function(e){g(e),"_"===e&&(e=null),n&&n(e)}),[g,n]);return Object(d.jsx)(i.a,{trigger:function(e,t){var n=t.isOpen;return Object(d.jsxs)("button",Object(r.a)(Object(r.a)({},e),{},{className:"default hasIcon",style:{margin:"0",flexShrink:"0"},children:[Object(d.jsx)("span",{style:{width:"100%",textAlign:"start"},children:"_"===v?Object(d.jsx)(s.a,{path:u.d,className:"icon"}):v.toUpperCase()}),Object(d.jsx)("span",{style:{marginLeft:"var(--basis)",lineHeight:"1",verticalAlign:"text-top"},children:n?"\u25b4":"\u25be"})]}))},paperProps:{sx:{maxHeight:"300px"}},children:function(e){var t=e.close;return Object(d.jsx)("div",{style:{padding:"var(--basis_x2) 0"},children:j.filter((function(e){var t=e.code;return O.includes(t)})).map((function(e){var n=e.code,r=e.nativeName;return Object(d.jsx)(o.a,{onClick:function(){x(n),t()},className:"roundMenuItem",selected:n===v,children:"_"===n?r:"".concat(n.toUpperCase()," \u2014 ").concat(r)},n)}))})}})}},246:function(e,t,n){"use strict";var r=n(0),a=n(414),c=n(233);t.a=function(){var e=Object(a.a)();return Object(r.useCallback)((function(t){var n=t._id,r=t.archive;return e.mutate({mutation:r?c.a:c.e,variables:{_id:n}})}),[e])}},247:function(e,t,n){"use strict";var r=n(39),a=n(7),c=n(22),o=n.n(c),i=n(0),l=n(10),s=n(77),u=n(422),d=n(478),b=n(421),j=n(474),p=n(471),O=n(430),f=n(431),h=n(433),v=n(434),g=n(419),x=n(436),m=n(437),_=n(438),y=n(439),k=n(440),w=n(441),C=n(442),I=n(443),N=n(444),S=n(427),F=n(445),B=n(226),P=n(229),E=n(246),R=n(231),T=n(232),A=n(25),D=n(475),L=n(479),M=n(428),V=n(423),G=n(4);function W(e){var t=e.disabled,n=void 0!==t&&t,r=e.parentMenuIsOpen,c=void 0===r||r,o=e.label,l=void 0===o?"":o,s=e.triggerProps,j=void 0===s?{}:s,p=e.header,O=void 0===p?null:p,f=e.MenuListProps,h=void 0===f?{}:f,v=e.position,g=void 0===v?"right":v,x=e.onOpen,m=void 0===x?function(){}:x,_=e.children,y=Object(i.useRef)(null),k=Object(i.useState)(!1),w=Object(a.a)(k,2),C=w[0],I=w[1],N=C&&c,S=Object(i.useCallback)((function(){if(!0!==n){var e=!N;I(e),!0===e&&m()}}),[I,N,m,n]),F=Object(i.useCallback)((function(){I(!1)}),[I]);return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(d.a,Object(A.a)(Object(A.a)({},j),{},{disabled:n,ref:y,onClick:S,className:"roundMenuItem",style:Object(A.a)({display:"flex",justifyContent:"space-between"},j.style),children:[Object(G.jsx)("div",{style:{display:"flex"},children:l}),Object(G.jsx)(M.a,{style:{marginRight:"-10px"}})]})),Object(G.jsx)(D.a,{style:{pointerEvents:"none"},anchorEl:y.current,anchorOrigin:{vertical:"top",horizontal:"right"===g?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"===g?"left":"right"},open:N,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:F,sx:{marginTop:"-8px"},MenuListProps:Object(A.a)(Object(A.a)({},h),{},{sx:Object(A.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},h.sx)}),children:Object(G.jsxs)("div",{style:{pointerEvents:"auto"},children:[null!==O?Object(G.jsx)(L.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"0",padding:"4px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:O}):null,_,Object(G.jsx)(b.a,{style:{opacity:.2}}),Object(G.jsxs)(d.a,{className:"roundMenuItem",style:{marginTop:"8px"},onClick:F,children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(V.a,{})}),Object(G.jsx)(B.a,{id:"block_menu_close_menu"})]})]})})]})}var H=n(242),$=n(233),z=n(240),q={button:Object(G.jsx)(O.a,{}),text:Object(G.jsx)(f.a,{}),divider:Object(G.jsx)(h.a,{}),page:Object(G.jsx)(v.a,{}),redirect:Object(G.jsx)(g.a,{})},U=["button","text","divider","page","redirect"],J={default:"var(--on-background)",yellow:"var(--yellow)",green:"var(--green)",red:"var(--red)",blue:"var(--blue)"},Z=Object.keys(J);function K(e){if(J.hasOwnProperty(e))return J[e];var t=Object(P.getBlockColor)({properties:{color:e}}).color;return t||e}t.a=Object(B.d)((function(e){var t=e.block,n=void 0===t?{}:t,c=e.getString,O=e.trigger,f=e.onToogle,h=e.setProperty,v=e.setType,g=e.typeOptions,A=void 0===g?U:g,D=(e.onRemoveRow,e.addRowBefore,e.onArchivedToggle),L=void 0===D?null:D,M=e.onReloadContext,V=void 0===M?null:M,J=Object(R.a)(),Y=J.loggedIn,X=J.userroles,Q=n._id,ee=void 0===Q?"":Q,te=n.type,ne=void 0===te?"":te,re=n.properties,ae=void 0===re?{}:re,ce=n.computed,oe=void 0===ce?{}:ce,ie=ae.active,le=void 0===ie||ie,se=ae.text_style,ue=void 0===se?null:se,de=ae.color,be=void 0===de?null:de,je=(null===oe?{}:oe).roles,pe=void 0===je?[]:je,Oe=Y&&(X.includes("admin")||pe.includes("owner")||pe.includes("editor")),fe=Object(i.useState)(!0===ae.archived),he=Object(a.a)(fe,2),ve=he[0],ge=he[1],xe=Object(E.a)(),me=Object(z.a)(),_e=Object(l.g)(),ye=Object(i.useCallback)(function(){var e=Object(r.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t){e.next=11;break}return e.next=4,me({mutation:$.c,variables:{block:t}});case 4:if(n=e.sent,null===(r=n.saveBlock)){e.next=11;break}return e.next=9,me({mutation:$.b,variables:{movingBlockId:r,newParentId:ee,newIndex:0}});case 9:"function"===typeof V&&V(),_e("/".concat(r,"/edit"));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),[me,ee,V,_e]),ke=Object(i.useCallback)((function(){var e=!ve;xe({_id:n._id,archive:e}).then((function(){ge(e),"function"===typeof L&&L(e),"function"===typeof V&&V()})).catch(console.error)}),[xe,ge,ve,n,L,V]),we=Object(i.useCallback)((function(){"function"===typeof h&&h("active",!le)}),[le,h]),Ce=n.metadata||{},Ie=Object(P.getBlockColor)(n).color;return Ie||(Ie="transparent"),Object(G.jsx)(T.a,{trigger:O,onToogle:f,children:function(e){var t=e.open;return Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{style:{height:"8px"}}),Oe&&"function"===typeof v&&Array.isArray(A)&&A.length>0&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(W,{disabled:"person"===ne,parentMenuIsOpen:t,label:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(x.a,{})}),Object(G.jsx)(B.a,{id:"block_menu_choose_type_label"})]}),header:Object(G.jsx)(B.a,{id:"block_menu_choose_type_label"}),children:A.map((function(e){return Object(G.jsxs)(d.a,{selected:e===ne,onClick:function(){return v(e)},className:"roundMenuItem",children:[Object(G.jsx)(u.a,{children:q[e]}),c("block_menu_type_label_".concat(e),e)]},e)}))}),Object(G.jsx)(b.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),Oe&&"function"===typeof h&&Object(G.jsxs)(W,{parentMenuIsOpen:t,label:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(m.a,{style:{color:K(be)}})}),Object(G.jsx)(B.a,{id:"block_menu_choose_color_label"})]}),header:Object(G.jsx)(B.a,{id:"block_menu_choose_color_label"}),children:[Z.map((function(e){return Object(G.jsxs)(d.a,{selected:"default"===e?null===be:be===e,onClick:function(){return h("color","default"===e?null:e)},className:"roundMenuItem",children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(_.a,{style:{color:K(e)}})}),e]},e)})),Object(G.jsxs)(d.a,{className:"roundMenuItem",selected:null!==be&&!Z.includes(be),children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(_.a,{style:{color:Ie}})}),Object(G.jsx)("input",{type:"text",placeholder:"#FFFFFF",defaultValue:be,onBlur:function(e){return h("color",e.target.value)},style:{width:"160px",margin:"0 calc(-1 * var(--basis)) 0 0"}},Z.includes(be)?be:"custom")]})]}),Oe&&"function"===typeof h&&"text"===ne&&Object(G.jsx)(W,{parentMenuIsOpen:t,label:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(y.a,{})}),Object(G.jsx)(B.a,{id:"block_menu_choose_text_style_label"})]}),header:Object(G.jsx)(B.a,{id:"block_menu_choose_text_style_label"}),children:["h2","h3","body"].map((function(e){return Object(G.jsx)(d.a,{selected:"body"===e?null===ue:ue===e,onClick:function(){return h("text_style","body"===e?null:e)},className:"roundMenuItem",children:c("block_menu_text_style_label_".concat(e),e)},e)}))}),Oe&&"function"===typeof h&&Object(G.jsx)(b.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),Oe&&Object(G.jsx)(W,{parentMenuIsOpen:t,label:Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(k.a,{})}),Object(G.jsx)(B.a,{id:"block_menu_create_child_block"})]}),children:Object(G.jsx)(H.a,{createBlock:ye})}),Oe&&"function"===typeof h&&Object(G.jsxs)(d.a,{className:"roundMenuItem",onClick:we,children:[Object(G.jsx)(u.a,{children:le?Object(G.jsx)(w.a,{}):Object(G.jsx)(C.a,{})}),Object(G.jsx)(j.a,{primary:Object(G.jsx)("span",{children:le?Object(G.jsx)(B.a,{id:"block_menu_hide"}):Object(G.jsx)(B.a,{id:"block_menu_show"})}),secondary:Object(G.jsx)("span",{style:{whiteSpace:"normal"},children:Object(G.jsx)(B.a,{id:"block_menu_hide_show_description"})})})]}),Oe&&"function"===typeof L&&Object(G.jsxs)(d.a,{className:"roundMenuItem",onClick:ke,children:[Object(G.jsx)(u.a,{children:!0===ve?Object(G.jsx)(I.a,{}):Object(G.jsx)(N.a,{})}),!0===ve?Object(G.jsx)(B.a,{id:"block_menu_unarchive"}):Object(G.jsx)(B.a,{id:"block_menu_archive"})]}),Oe&&Object(G.jsx)(b.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),"string"===typeof ee&&""!==ee&&Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)(d.a,{component:s.b,to:"/".concat(ee,"/view"),className:"roundMenuItem",style:{marginTop:"8px"},children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(S.a,{})}),Object(G.jsx)(B.a,{id:"view_block"})]}),Oe&&Object(G.jsxs)(d.a,{component:s.b,to:"/".concat(ee,"/edit"),className:"roundMenuItem",children:[Object(G.jsx)(u.a,{children:Object(G.jsx)(F.a,{})}),Object(G.jsx)(B.a,{id:"edit_block"})]}),Object(G.jsx)(b.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}})]}),Object(G.jsx)(p.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(G.jsx)(j.a,{primary:Object(G.jsx)("span",{children:Object(G.jsx)(B.a,{id:"block_menu_info_modified"})}),secondary:Object(G.jsx)("span",{children:(Ce.modified||"").replace(/[TZ]/g," ")})})}),Object(G.jsx)(p.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(G.jsx)(j.a,{primary:Object(G.jsx)("span",{children:Object(G.jsx)(B.a,{id:"block_menu_info_id"})}),secondary:Object(G.jsx)("span",{children:ee})})})]})}})}))},249:function(e,t,n){var r=n(102).negotiateLanguages;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var a=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===a.length?null:e[a[0]]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",a=e.map((function(e){return e[n]})).filter(Boolean);if(0===a.length)return null;var c=r(t,a,{defaultLocale:a[0],strategy:"lookup"});return 0===c.length?null:e.filter((function(e){return e[n]===c[0]}))}e.exports={fluentByObject:a,fluentByArray:c,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=c(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=a(e,t));return"string"!==typeof e&&(e=n),e}}},250:function(e,t,n){"use strict";var r=n(39),a=n(22),c=n.n(a),o=n(0),i=n(226),l=n(414),s=n(230),u=n(103);t.a=function(){var e=Object(i.c)().getString,t=Object(l.a)(),n=Object(u.b)(),a=n.enqueueSnackbar,d=n.closeSnackbar,b=Object(o.useCallback)((function(n){return new Promise((function(o){var i=null;if(n&&""!==n){var l=new Promise((function(l){t.query({query:s.c,variables:{_id:n}}).then(function(){var t=Object(r.a)(c.a.mark((function t(n){var r,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.data,l("got-data"),null!==i&&d(i),"string"!==typeof r.error&&r.block?(s=r.block,o(s)):"no_edit_permission"===r.error?a(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):a(""+r.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),l("got-error"),null!==i&&d(i),a("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),l]).then((function(t){"show-loading"===t&&(i=a(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else o({type:"text"})}))}),[a,d,t,e]);return b}},251:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(39),a=n(22),c=n.n(a),o=n(0),i=n(414),l=n(230);function s(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(a){t&&""!==t?e.query({query:l.a,variables:{_id:t,roles:n}}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("blockMatchesRoles")?a(n.blockMatchesRoles):a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),a(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):a(!1)}))}),[e]);return t}},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(415),a=n(226),c=n(4);function o(e){var t=e.errorName,n="Unknown Error",o="",i="";return"no_access"===t?(n="You don't have access to this page!",o=Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h2",{children:"If you are not logged in:"}),"You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.",Object(c.jsx)("br",{}),Object(c.jsx)("h2",{children:"If you are logged in:"}),"You propably don't have access to this page."]}),i=Object(c.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(c.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(c.jsx)(r.a,{className:"icon"}),Object(c.jsx)("span",{children:Object(c.jsx)(a.b,{id:"login"})})]})})):"not_found"===t&&(n="We could not find the requested URL\u2026",o="The URL you requested does currently not exist. Did you type the URL correctly?",i=Object(c.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(c.jsxs)("button",{className:"text hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(c.jsx)(r.a,{className:"icon"}),Object(c.jsx)("span",{children:Object(c.jsx)(a.b,{id:"login"})})]})})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("h1",{children:n}),Object(c.jsx)("p",{children:o}),i,Object(c.jsx)("br",{})," ",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("p",{children:["Please contact ",Object(c.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:"thomas.rosen@volteuropa.org"})," if you think this is a bug.",Object(c.jsx)("br",{}),"Go to ",Object(c.jsx)("a",{href:"https://volteuropa.org",children:"volteuropa.org"})," for information about the Pan-European Political Movement."]})]})}},253:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},255:function(e,t,n){e.exports={drag_over:"DataTransmat_drag_over__3XVzh",drag_active:"DataTransmat_drag_active__2nwCM"}},259:function(e,t,n){e.exports={icon:"ViewerLine_icon__DvsyX",square:"ViewerLine_square__3knjg",round:"ViewerLine_round__1pnCx",title:"ViewerLine_title__35XNW"}},260:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},373:function(e,t,n){e.exports={app:"Editor_app__3WzMm",spine_aligned:"Editor_spine_aligned__1h8Ra",contentWrapper:"Editor_contentWrapper__1cY6-",editor:"Editor_editor__2hX0g",loadingContent:"Editor_loadingContent__2fqdK",editor_form_row:"Editor_editor_form_row__17Pul"}},374:function(e,t,n){e.exports={app:"PageEditor_app__26Zo3",spine_aligned:"PageEditor_spine_aligned__2i6Wu",contentWrapper:"PageEditor_contentWrapper__WlUIr",editor:"PageEditor_editor__U1pPN",type_redirect:"PageEditor_type_redirect__2KPht",loadingContent:"PageEditor_loadingContent__1YK7g",editor_form_row:"PageEditor_editor_form_row__j4vjp"}},375:function(e,t,n){e.exports={dialog:"SharingEditor_dialog__22jfY",backdrop:"SharingEditor_backdrop__1Gra9",inputWrapper:"SharingEditor_inputWrapper__1UyBD",input:"SharingEditor_input__brkXK",actions:"SharingEditor_actions__2zz6x"}},377:function(e,t,n){e.exports={rebuild_textarea:"HtmlInput_rebuild_textarea__ZfRzZ",show_placeholder:"HtmlInput_show_placeholder__hM8g2"}},378:function(e,t,n){e.exports={dialog:"TranslationEditor_dialog__YL0sv",backdrop:"TranslationEditor_backdrop__hfIzh",inputWrapper:"TranslationEditor_inputWrapper__3aVMH",input:"TranslationEditor_input__3U2bK",actions:"TranslationEditor_actions__3dTaz"}},379:function(e,t,n){e.exports={input_with_local:"InputWithLocal_input_with_local__3qqYa"}},380:function(e,t,n){e.exports={row:"Repeater_row__1ODoF",middleActions:"Repeater_middleActions__3nRoT",trigger:"Repeater_trigger__1VtG5",content:"Repeater_content__110R9",form:"Repeater_form__2N6kw",item:"Repeater_item__2OI78",inlineRowButton:"Repeater_inlineRowButton__uqk8Y",dragHandleButton:"Repeater_dragHandleButton__2eLww",addRowButton:"Repeater_addRowButton__3huSP"}},383:function(e,t,n){e.exports={error:"FancyInput_error__2DFWE"}},384:function(e,t,n){e.exports={dialog:"PermissionsEditor_dialog__2rpyk",backdrop:"PermissionsEditor_backdrop__1dRPN",inputWrapper:"PermissionsEditor_inputWrapper__4DGsr",input:"PermissionsEditor_input__1HyOC",actions:"PermissionsEditor_actions__k4oBn",permissionRow:"PermissionsEditor_permissionRow__2HaWO",menuButton:"PermissionsEditor_menuButton__2jIMI",ownerInfo:"PermissionsEditor_ownerInfo__EEKXP"}},385:function(e,t,n){e.exports={main_headline:"PropertiesEditor_main_headline__3wy7R",propertiesFrame:"PropertiesEditor_propertiesFrame__1uBEz",properties_row:"PropertiesEditor_properties_row__2tX7M"}},386:function(e,t,n){e.exports={coverphoto:"CoverphotoPicker_coverphoto__1mWB4",root:"CoverphotoPicker_root__3T8t9",coverphotoIsNotSet:"CoverphotoPicker_coverphotoIsNotSet__1O3-S",button_wrapper:"CoverphotoPicker_button_wrapper__2oEjh",coverphotoIsSet:"CoverphotoPicker_coverphotoIsSet__2o24A",iconIsSet:"CoverphotoPicker_iconIsSet__D_4uA",changeCoverphotoButton:"CoverphotoPicker_changeCoverphotoButton__2GnZD"}},387:function(e,t,n){e.exports={root:"IconPicker_root__2okyv",iconIsSet:"IconPicker_iconIsSet__SnQwA",coverphotoIsSet:"IconPicker_coverphotoIsSet__3m9Dw",icon:"IconPicker_icon__JWgfX",iconWrapper:"IconPicker_iconWrapper__1zo6g",sizing_pixel:"IconPicker_sizing_pixel__3TeE0",iconIsNotSet:"IconPicker_iconIsNotSet__1T0Zd",changeIconButton:"IconPicker_changeIconButton__TxsdG"}},388:function(e,t,n){e.exports={block:"InlineEditorBlock_block__14-zd",block_input:"InlineEditorBlock_block_input__2I1iu",form_deactivated:"InlineEditorBlock_form_deactivated__2oktp",form_active:"InlineEditorBlock_form_active__hi5HC",reorderHandle:"InlineEditorBlock_reorderHandle__2_s23"}},389:function(e,t,n){e.exports={row:"ContentEditor_row__JonRI",form:"ContentEditor_form__wtoB9",item:"ContentEditor_item__3U0XE",inlineRowButton:"ContentEditor_inlineRowButton__2pw6r",dragHandleButton:"ContentEditor_dragHandleButton__1Y_RP"}},468:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n(0),c=n.n(a),o=n(10),i=n(373),l=n.n(i),s=n(250),u=n(251),d=n(243),b=n(252),j=n(25),p=n(236),O=n(105),f=n(455),h=n(456),v=n(457),g=n(262),x=n.n(g),m=n(263),_=n(374),y=n.n(_),k=n(226),w=n(247),C=n(220),I=n(446),N=n(447),S=n(448),F=n(375),B=n.n(F),P=n(18),E=n(14),R=n(376),T=n(377),A=n.n(T),D=n(4),L=["type","defaultValue","children","className","onChange","onBlur","onError","linebreaks","style","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeFromNextInput"];function M(e,t){if(e.normalize(),!window.getSelection)return 0;var n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0):null;if(!r)return 0;var a=r.cloneRange();a.selectNodeContents(e),a.setEnd(r.endContainer,r.endOffset);var c=a.cloneContents(),o=0;return c.childNodes.length>0&&("first"===t?o=3===c.childNodes[0].nodeType?c.childNodes[0].length:0:"last"===t&&(o=3===c.childNodes[c.childNodes.length-1].nodeType?c.childNodes[c.childNodes.length-1].length:c.childNodes.length>1&&3===c.childNodes[c.childNodes.length-2].nodeType?c.childNodes[c.childNodes.length-2].length:0)),a.detach(),o}function V(e){var t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),a=e.offsetHeight-n-r,c=Object(R.a)(e),o=Object(R.b)(e);o.top=o.top-c.top,o.left=o.left-c.left;var i=o.top<o.height,l=a-o.top<o.height,s=function(e){if(e.normalize(),!window.getSelection)return 0;var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(!n)return 0;var r=n.cloneRange();r.selectNodeContents(e),r.setEnd(n.endContainer,n.endOffset);var a,c=r.cloneContents(),o=0,i=Object(E.a)(c.childNodes);try{for(i.s();!(a=i.n()).done;){var l=a.value;3===l.nodeType?o+=l.textContent.length:1===l.nodeType&&"BR"===l.nodeName&&(o+=1)}}catch(s){i.e(s)}finally{i.f()}return r.detach(),o}(e),u=e.innerText.length||0;u<0&&(u=0);var d=u-s;return{inFirstLine:i,inLastLine:l,left:o.left,top:o.top,height:o.height,positionFromLineStart:M(e,i?"first":"last"),positionFromStart:s,positionFromEnd:d}}var G=function(e){var t=e.type,n=void 0===t?"text":t,c=e.defaultValue,o=void 0===c?"":c,i=(e.children,e.className),l=e.onChange,s=e.onBlur,u=(e.onError,e.linebreaks),d=e.style,b=e.placeholder,j=void 0===b?"":b,p=e.onInputRef,O=e.onGoToPrevInput,f=e.onGoToNextInput,h=e.onSplitText,v=e.onMergeToPrevInput,g=e.onMergeFromNextInput,x=(Object(P.a)(e,L),Object(a.useRef)(null)),m=Object(a.useRef)(""),_=m.current,y=Object(a.useState)({__html:""}),k=Object(r.a)(y,2),w=k[0],C=k[1],I=Object(a.useCallback)((function(e){var t=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(e);if(m.current=e,w.__html!==t)return C({__html:t})}),[w,C]);Object(a.useEffect)((function(){_!==o&&I(o)}),[_,o,I]);var N=Object(a.useCallback)((function(e){var t=e.target.innerHTML||"";t=(t=!1===u?t.replace(/<\/? ?br ?\/?>/g," "):t.replace(/<\/? ?br ?\/?>/g,"\n")).trim(),m.current=t,l&&l(t)}),[l,u]),S=Object(a.useCallback)((function(){s&&s(_)}),[s,_]),F=Object(a.useCallback)((function(e){if("Enter"===e.key&&!0===e.shiftKey)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if("Tab"===e.key)document.execCommand("insertText",!1,"\t"),e.preventDefault();else if("ArrowUp"===e.key){if(O){var t=V(x.current);t.inFirstLine&&(O({caret:t}),e.preventDefault())}}else if("ArrowLeft"===e.key){if(O){var r=V(x.current);r.inFirstLine&&r.positionFromStart<=0&&(r.positionFromLineStart=-1,O({caret:r}),e.preventDefault())}}else if("ArrowDown"===e.key){if(f){var a=V(x.current);a.inLastLine&&(f({caret:a}),e.preventDefault())}}else if("ArrowRight"===e.key){if(f){var c=V(x.current);c.inLastLine&&c.positionFromEnd<=1&&(c.positionFromLineStart=0,f({caret:c}),e.preventDefault())}}else if("Enter"===e.key){if("code"===n)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if(h){var o=V(x.current),i=x.current.innerText,l=i.slice(0,o.positionFromStart),s=i.slice(o.positionFromStart);h({texts:[l,s]}),e.preventDefault()}}else if("Backspace"===e.key){if(v){var d=V(x.current);0===d.positionFromStart&&d.inFirstLine&&(v({caret:d,text:x.current.innerText}),e.preventDefault())}}else if("Delete"===e.key&&g){var b=V(x.current);0===b.positionFromEnd&&b.inLastLine&&(g({caret:b,text:x.current.innerText}),e.preventDefault())}}),[x,u,O,f,h,v,g,n]);Object(a.useEffect)((function(){p&&p(x)}),[p,x]);var B=Object(a.useCallback)((function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");!1===u&&(t=t.replace(/\n/g," ")),document.execCommand("insertText",!1,t)}),[u]);return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{ref:x,onKeyDown:F,onInput:N,onBlur:S,onPaste:B,className:"".concat(A.a.rebuild_textarea," ").concat(0===_.length?A.a.show_placeholder:""," ").concat(i),contentEditable:!0,dangerouslySetInnerHTML:w,style:d,placeholder:j})})};function W(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.info("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.info("Fallback: Copying text command was "+n)}catch(r){console.error("Fallback: Oops, unable to copy",r)}document.body.removeChild(t)}(e)}var H=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,c=e.open,o=void 0!==c&&c,i=e.onChange,l=e.onClose,s=Object(a.useState)(""),u=Object(r.a)(s,2),d=u[0],b=u[1];Object(a.useEffect)((function(){var e=((n.properties||{}).trigger||{}).path||"";b(e)}),[n,b]);var p=Object(a.useCallback)((function(e){var t=Object(j.a)({},n.properties||{});""===e?(t.hasOwnProperty("trigger")&&delete t.trigger,t.hasOwnProperty("action")&&delete t.action):(t.trigger={type:"path",path:e},t.action={type:"render_block"}),b(e),i(t)}),[n,i,b]);return o?Object(D.jsx)(C.a,{open:o,onClose:l,hideBackdrop:!0,children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:B.a.backdrop,onClick:l}),Object(D.jsxs)("div",{className:B.a.dialog,children:[Object(D.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Share the link"}),Object(D.jsxs)("div",{className:B.a.inputWrapper,children:[Object(D.jsx)("span",{style:{paddingRight:"var(--basis)"},children:"volt.link/"}),Object(D.jsx)(G,{defaultValue:d,onBlur:p,linebreak:!1,className:B.a.input,style:{margin:"0"}})]}),Object(D.jsx)("hr",{style:{opacity:.2}}),Object(D.jsxs)("div",{className:B.a.actions,children:[""!==d?Object(D.jsxs)("div",{children:[Object(D.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://qrcode.volt.link/?c=volt.link/".concat(d),e.target="_blank",e.rel="noreferrer",e.click()},style:{marginInlineStart:"0"},children:[Object(D.jsx)(I.a,{className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",children:Object(D.jsx)(k.a,{id:"sharing_qrcode"})})]}),Object(D.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(d),e.target="_blank",e.rel="noreferrer",e.click()},children:[Object(D.jsx)(N.a,{className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",children:Object(D.jsx)(k.a,{id:"sharing_statistics"})})]}),Object(D.jsxs)("button",{className:"text hasIcon",onClick:function(){W("https://volt.link/".concat(d))},children:[Object(D.jsx)(S.a,{className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",children:Object(D.jsx)(k.a,{id:"sharing_copy_url"})})]})]}):Object(D.jsx)("div",{}),Object(D.jsx)("button",{onClick:l,className:"green",style:{marginInlineEnd:"0"},children:Object(D.jsx)(k.a,{id:"dialog_done"})})]})]})]})}):null},$=n(12),z=n(24),q=n(39),U=n(22),J=n.n(U),Z=n(378),K=n.n(Z),Y=n(379),X=n.n(Y),Q=n(245),ee=["reorderHandle","actionButton","locale","defaultValue","children","style","onChange","onBlur","className","dataset"];var te=function(e){e.reorderHandle,e.actionButton;var t=e.locale,n=e.defaultValue,c=e.children,o=e.style,i=e.onChange,l=e.onBlur,s=e.className,u=e.dataset,d=void 0===u?{}:u,b=(Object(P.a)(e,ee),Object(a.useState)(t)),j=Object(r.a)(b,2),p=j[0],O=j[1],f=Object(a.useState)(n),h=Object(r.a)(f,2),v=h[0],g=h[1],x=Object(a.useCallback)((function(){l&&l({value:{locale:p,text:v},dataset:d})}),[l,p,v,d]),m=Object(a.useCallback)((function(e){O(e);var t={value:{locale:e,text:v},dataset:d};i&&i(t),l&&l(t)}),[O,i,v,d,l]),_=Object(a.useCallback)((function(e){var t=e;e&&e.target&&e.target.value&&(t=e.target.value),g(t),i&&i({value:{locale:p,text:t},dataset:d})}),[g,i,p,d]);return Object(D.jsxs)("div",{className:X.a.input_with_local+" "+s,style:o,children:[Object(D.jsx)(Q.a,{onChange:m,defaultValue:t}),c?c({onChange:_,onBlur:x,defaultValue:n,style:{flexGrow:"1"}}):null]})},ne=n(237),re=n(291),ae=n(472),ce=n(380),oe=n.n(ce),ie=n(290),le=n.n(ie);function se(e){var t=e.subDefaultValue,n=e.index,r=e.render,c=e.handleRowChange,o=e.isReorderable,i=e.handleAddRow,l=e.handleRemoveRow,s=e.showReorderControls,u=e.reorderLabel,d=e.showActionButton,b=e.hasOnlyOneRow,p=e.addRowByIndex;return Object(D.jsx)(re.b,{draggableId:t.tmp_id,index:n,isDragDisabled:!0!==o,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(e){return Object(a.createElement)("div",Object(j.a)(Object(j.a)({ref:e.innerRef},e.draggableProps),{},{key:t.tmp_id,className:oe.a.row}),Object(D.jsxs)("div",{className:oe.a.form,children:[!0===o&&!0===s?Object(D.jsx)("button",Object(j.a)(Object(j.a)({"aria-label":u,className:"text ".concat(oe.a.inlineRowButton," ").concat(oe.a.dragHandleButton)},e.dragHandleProps),{},{children:Object(D.jsx)(le.a,{})})):null,r({key:t.tmp_id,defaultValue:t,className:oe.a.item,dataset:{"data-index":n,"data-id":t.tmp_id},onChange:c,onRemoveRow:function(){return l(n)},addRowBefore:function(e){return p(n,0,e)},addRowAfter:function(e){return p(n,1,e)},reorderHandle:Object(D.jsx)("button",Object(j.a)(Object(j.a)({"aria-label":u,className:"text ".concat(oe.a.inlineRowButton," ").concat(oe.a.dragHandleButton)},e.dragHandleProps),{},{children:Object(D.jsx)(le.a,{})})),actionButton:b?Object(D.jsx)("button",{className:"green ".concat(oe.a.inlineRowButton),onClick:i,children:"+"}):Object(D.jsx)("button",{className:"red ".concat(oe.a.inlineRowButton),"data-index":n,onClick:l,children:"\u2013"})}),!0===d?b?Object(D.jsx)("button",{className:"green ".concat(oe.a.inlineRowButton),onClick:i,children:"+"}):Object(D.jsx)("button",{className:"red ".concat(oe.a.inlineRowButton),"data-index":n,onClick:l,children:"\u2013"}):null]}))}},t.tmp_id)}function ue(e){var t=e;return"object"===typeof e&&(e.target&&(e=e.target),e.dataset&&e.dataset.index&&(t=parseInt(e.dataset.index),isNaN(t)&&(t=null))),t}var de=function(e){var t=e.defaultValue,n=e.addDefaultValue,c=e.addButtonText,o=e.hideAddButton,i=void 0!==o&&o,l=e.reorderLabel,s=void 0===l?"Reorder":l,u=e.render,d=e.style,b=e.onChange,p=e.prependNewItems,O=e.showReorderControls,f=void 0!==O&&O,h=e.showActionButton,v=void 0===h||h,g=e.isReorderable,x=void 0!==g&&g;c||(c="Add Row");var m=Object(a.useState)([]),_=Object(r.a)(m,2),y=_[0],k=_[1],w=Object(a.useCallback)((function(){var e={};if("function"===typeof n){var t=n();"object"===typeof t&&null!==t&&("string"===typeof(e=t).tmp_id&&""!==e.tmp_id||(e.tmp_id=Object(ae.a)()))}return e}),[n]);Object(a.useEffect)((function(){var e=t;Array.isArray(t)&&0!==t.length||(e=[w()]),e=e.map((function(e){return e.tmp_id?e:Object(j.a)(Object(j.a)({},e),{},{tmp_id:Object(ae.a)()})})),k(e)}),[t,w,k]);var C=Object(a.useCallback)((function(e){var t=ue(e),n=Object(z.a)(y);n.splice(t,1);var r=b(n);Array.isArray(r)&&(n=r),k(n)}),[y,k,b]),I=Object(a.useCallback)((function(e){var t=e.dataset.index||e.dataset["data-index"],n=e.dataset.id||e.dataset["data-id"],r=e.value,a=Object(z.a)(y);"object"!==typeof r||null===r||Array.isArray(r)?a[t]={tmp_id:n,value:r}:"object"===typeof r&&(a[t]=Object(j.a)({tmp_id:n},r)),k(a),b(a)}),[y,k,b]),N=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;n="object"===typeof n?Object(j.a)(Object(j.a)({},w()),n):n||w();var r=null;null!==e&&e>=0&&(r=Object(z.a)(y)).splice(e+t,0,n),k(r),b(r)}),[y,w,k,b]),S=Object(a.useCallback)((function(e){var t=w(),n=ue(e),r=null;null!==n&&n>=0?(r=Object(z.a)(y)).splice(n,0,t):r=!0===p?[t].concat(Object(z.a)(y)):[].concat(Object(z.a)(y),[t]),k(r),b(r)}),[y,w,k,b,p]),F=1===y.length,B=Object(D.jsx)("div",{style:{textAlign:"right"},children:Object(D.jsx)("button",{className:"green ".concat(oe.a.addRowButton),onClick:S,children:c})});return Object(D.jsxs)("div",{style:d,children:[!1===i&&!F&&p?Object(D.jsx)("div",{style:{marginBottom:"var(--basis)"},children:B}):null,Object(D.jsx)(re.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var a=Array.from(e),c=a.splice(t,1),o=Object(r.a)(c,1)[0];return a.splice(n,0,o),a}(y,e.source.index,e.destination.index);k(t),b(t)}},children:Object(D.jsx)(re.c,{droppableId:"list",isDropDisabled:!0!==x,children:function(e){return Object(D.jsxs)("div",Object(j.a)(Object(j.a)({ref:e.innerRef},e.droppableProps),{},{children:[y.filter((function(e){return e.tmp_id})).map((function(e,t){return Object(D.jsx)(se,{subDefaultValue:e,index:t,render:u,handleRowChange:I,isReorderable:x,handleAddRow:S,handleRemoveRow:C,showReorderControls:f,reorderLabel:s,showActionButton:v,hasOnlyOneRow:F,addRowByIndex:N},e.tmp_id)})),e.placeholder]}))}})}),!1!==i||F||p?null:B]})},be=n(239),je=["defaultValue"],pe=["onChange"];function Oe(e){var t=e.onSaveProperty,n=e.block,r=e.isFirst,c=function(){return{locale:null,text:""}},o=n.properties.translations||[];0===o.length&&(o=[c]);var i=Object(a.useCallback)((function(e){e=e.map((function(e){return{locale:e.locale||null,text:e.text||""}})),t("translations",e)}),[t]),l=Object(a.useCallback)((function(e){t("locale",e)}),[t]),s=Object(j.a)({},n);return!0===r&&"page"===s.type&&(s.type="text",s.properties.text_style="h1"),Object(D.jsxs)("div",{style:{width:"100%"},children:[Object(D.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",marginBottom:"var(--basis)",gap:"var(--basis)"},children:[Object(D.jsx)(Q.a,{onChange:l,defaultValue:n.properties.locale||null}),Object(D.jsx)(ne.a,{block:s,style:{margin:"0",minHeight:"30px"},actions:{click:!1}})]}),Object(D.jsx)(de,{onChange:i,defaultValue:o,addDefaultValue:c,addButtonText:"+",render:function(e){var t=e.defaultValue,n=Object(P.a)(e,je),r=n.onChange,a=Object(P.a)(n,pe),c=t.locale,o=t.text;return Object(D.jsx)(te,Object(j.a)(Object(j.a)({onBlur:r,locale:c,defaultValue:o,style:{marginBottom:"var(--basis)"}},a),{},{children:function(e){return Object(D.jsx)(G,Object(j.a)(Object(j.a)({},e),{},{style:Object(j.a)(Object(j.a)({},e.style),{},{margin:"0"})}))}}))}})]})}var fe=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,c=e.open,o=void 0!==c&&c,i=e.onSaveProperty,l=e.onClose,s=Object(a.useState)([]),u=Object(r.a)(s,2),d=u[0],b=u[1],O=Object(be.a)();Object(a.useEffect)((function(){function e(){return(e=Object(q.a)(J.a.mark((function e(){var t,r,a;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(z.a)(n.content.filter((function(e){return e.hasOwnProperty("blockId")&&e.hasOwnProperty("block")})).map((function(e){return e.blockId||e.block._id}))),r=[],!(t.length>0)){e.next=6;break}return e.next=5,O({ids:t});case 5:r=e.sent;case 6:return a=t.map((function(e){var t=r.find((function(t){return t._id===e}));return t&&"divider"!==t.type&&t.properties.text?t:null})).filter(Boolean),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===d.length?function(){return e.apply(this,arguments)}().then((function(e){var t=[n].concat(Object(z.a)(e));b(t)})):JSON.stringify(n)!==JSON.stringify(d[0])&&b([n].concat(Object(z.a)(d.slice(1))))}),[n,O,b,d]);var f=Object(p.a)(),h=Object(a.useCallback)((function(e,t,n){var r=Object(j.a)(Object(j.a)({},e),{},{properties:Object(j.a)(Object(j.a)({},e.properties),{},Object($.a)({},t,n))});f(r).then((function(e){var t=r._id,n=d.findIndex((function(e){return e._id===t})),a=[].concat(Object(z.a)(d.slice(0,n)),[r],Object(z.a)(d.slice(n+1)));b(a)}))}),[f,d,b]);return o?Object(D.jsx)(C.a,{open:o,onClose:l,hideBackdrop:!0,style:{zIndex:"1000"},children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:K.a.backdrop,onClick:l}),Object(D.jsxs)("div",{className:K.a.dialog,children:[Object(D.jsxs)("div",{className:K.a.actions,children:[Object(D.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:Object(D.jsx)(k.a,{id:"translate_dialog_title"})}),Object(D.jsx)("button",{onClick:l,className:"green",style:{marginInlineEnd:"0"},children:Object(D.jsx)(k.a,{id:"dialog_done"})})]}),Object(D.jsx)("p",{children:Object(D.jsx)(k.a,{id:"translate_dialog_description"})}),Object(D.jsx)("hr",{style:{opacity:.2}}),d.flatMap((function(e,t){return[Object(D.jsx)("hr",{style:{opacity:0}},"hr-"+t),Object(D.jsx)("div",{style:{margin:"var(--basis_x4) 0"},children:Object(D.jsx)(Oe,{onSaveProperty:e._id===n._id?i:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h.apply(void 0,[e].concat(n))},block:e,isFirst:0===t})},"div-"+t)]})),Object(D.jsx)("hr",{style:{opacity:.2}}),Object(D.jsxs)("div",{className:K.a.actions,children:[Object(D.jsx)("div",{}),Object(D.jsx)("button",{onClick:l,className:"green",style:{marginInlineEnd:"0"},children:Object(D.jsx)(k.a,{id:"dialog_done"})})]})]})]})}):null},he=n(475),ve=n(478),ge=n(422),xe=n(474),me=n(421),_e=n(442),ye=n(449),ke=n(450),we=n(451),Ce=n(423),Ie=n(452),Ne=n(231),Se=n(383),Fe=n.n(Se),Be=["children","className","style"];var Pe=function(e){var t=e.children,n=e.className,c=e.style,o=(Object(P.a)(e,Be),Object(a.useState)("")),i=Object(r.a)(o,2),l=i[0],s=i[1];return Object(D.jsxs)("div",{className:n,style:c,children:[t({setError:s}),l?Object(D.jsx)("div",{className:Fe.a.error,children:l.split("\n").map((function(e){return Object(D.jsx)("p",{children:e},e)}))}):null]})},Ee=["multiple","onChange","onError"],Re=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Te=/((?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?))/gi;var Ae=function(e){var t=e.multiple,n=void 0!==t&&t,r=e.onChange,c=e.onError,o=Object(P.a)(e,Ee),i=Object(a.useCallback)((function(e){if(r||c){var t=e.target.value||"",a=!1,o="";if(""!==t)if(!0===n){var i=t.match(Te);i?(t=i,a=!0):o="Invalid email(s) format"}else t.match(Re)?a=!0:o="invalid_email";r&&r(a?t:!0===n?[]:""),c&&c(o)}}),[n,r,c]);return Object(D.jsx)("input",Object(j.a)({type:"email",onChange:i},o))},De=n(384),Le=n.n(De);function Me(e){var t=e.role;return Object(D.jsx)(k.a,{id:"role_"+t})}function Ve(e){var t=e.role,n=e.trigger,a=e.changeRole,o=e.removePermission,i=c.a.useState(null),l=Object(r.a)(i,2),s=l[0],u=l[1],d=Boolean(s),b=function(){u(null)};return Object(D.jsxs)(D.Fragment,{children:[n({onClick:function(e){u(e.currentTarget)}}),Object(D.jsxs)(he.a,{anchorEl:s,open:d,onClose:b,MenuListProps:{style:{maxWidth:"100%",background:"var(--background-contrast)",color:"var(--on-background)"}},children:[Object(D.jsxs)(ve.a,{disabled:"viewer"===t,onClick:function(){return a("viewer")},className:"roundMenuItem",children:[Object(D.jsx)(ge.a,{children:Object(D.jsx)(_e.a,{})}),Object(D.jsx)(xe.a,{children:Object(D.jsx)(Me,{role:"viewer"})})]}),Object(D.jsxs)(ve.a,{disabled:"editor"===t,onClick:function(){return a("editor")},className:"roundMenuItem",children:[Object(D.jsx)(ge.a,{children:Object(D.jsx)(ye.a,{})}),Object(D.jsx)(xe.a,{children:Object(D.jsx)(Me,{role:"editor"})})]}),Object(D.jsxs)(ve.a,{disabled:"no_access"===t,onClick:function(){return a("no_access")},className:"roundMenuItem",children:[Object(D.jsx)(ge.a,{children:Object(D.jsx)(ke.a,{})}),Object(D.jsx)(xe.a,{children:Object(D.jsx)(Me,{role:"no_access"})})]}),"function"===typeof o?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(me.a,{style:{opacity:.2}}),Object(D.jsxs)(ve.a,{onClick:o,className:"roundMenuItem",children:[Object(D.jsx)(ge.a,{children:Object(D.jsx)(we.a,{})}),Object(D.jsx)(xe.a,{children:"Remove"})]})]}):null,Object(D.jsx)(me.a,{style:{opacity:.2}}),Object(D.jsxs)(ve.a,{onClick:b,className:"roundMenuItem",children:[Object(D.jsx)(ge.a,{children:Object(D.jsx)(Ce.a,{})}),Object(D.jsx)(xe.a,{children:"Close"})]})]})]})}function Ge(e){var t=e.filter((function(e){return"owner"===e.role})).sort((function(e,t){return e.email.localeCompare(t.email)})),n=e.filter((function(e){return"@volteuropa.org"===e.email||"@public"===e.email})).sort((function(e,t){return e.email.localeCompare(t.email)})),r=e.filter((function(e){return"owner"!==e.role&&"@volteuropa.org"!==e.email&&"@public"!==e.email})).sort((function(e,t){return e.email.localeCompare(t.email)}));return[].concat(Object(z.a)(t),Object(z.a)(n),Object(z.a)(r))}var We=function(e){var t=e.defaultPermissions,n=e.open,c=void 0!==n&&n,o=e.onChange,i=e.onClose,l=Object(k.c)().getString,s=Object(Ne.a)(),u="";s&&s.user&&s.user.email&&(u=s.user.email);var d=Object(a.useState)(0),b=Object(r.a)(d,2),p=b[0],O=b[1],f=Object(a.useState)([]),h=Object(r.a)(f,2),v=h[0],g=h[1],x=Object(a.useState)([]),m=Object(r.a)(x,2),_=m[0],y=m[1],w=Object(a.useState)("editor"),I=Object(r.a)(w,2),N=I[0],S=I[1],F=Object(a.useCallback)((function(e){var t;(t=e||[],e=Object(z.a)(t).map((function(e){var t=Object(j.a)({},e);return t.tmp_id=Object(ae.a)(),t})),""!==u)&&(0===e.filter((function(e){return"owner"===e.role})).length&&e.unshift({tmp_id:Object(ae.a)(),email:u,role:"owner"}));g(e)}),[u,g]);Object(a.useEffect)((function(){var e=t["/"];Array.isArray(e)?F(e):F([])}),[F,t]);var B=Object(a.useCallback)((function(e){var t=v.filter((function(t){return t.email!==e}));"@volteuropa.org"===e&&(t=t.filter((function(e){return"@public"!==e.email}))),0===t.filter((function(e){return"owner"===e.role})).length&&(t=t.filter((function(e){return e.email!==u}))).unshift({tmp_id:Object(ae.a)(),email:u,role:"owner"}),g(t),o({"/":t})}),[v,u,g,o]),P=Object(a.useCallback)((function(e,t){var n=v.map((function(n){return n.email===e?Object(j.a)(Object(j.a)({},n),{},{role:t}):n}));g(n),o({"/":n})}),[v,g,o]),R=Object(a.useCallback)((function(e,t){e.includes("@public")&&e.push("@volteuropa.org");var n,r=v.filter((function(t){return!e.includes(t.email)})),a=Object(E.a)(e);try{for(a.s();!(n=a.n()).done;){var c=n.value;r.unshift({tmp_id:Object(ae.a)(),email:c,role:t})}}catch(i){a.e(i)}finally{a.f()}0===r.filter((function(e){return"owner"===e.role})).length&&(r=r.filter((function(e){return e.email!==u}))).unshift({tmp_id:Object(ae.a)(),email:u,role:"owner"}),g(r),o({"/":r})}),[v,u,g,o]),T=Object(a.useCallback)((function(){R(_,N),y([]),O((function(e){return e+1}))}),[_,N,R]);if(!c)return null;var A=0===v.filter((function(e){return"@volteuropa.org"===e.email})).length,L=0===v.filter((function(e){return"@public"===e.email})).length;return Object(D.jsx)(C.a,{open:c,onClose:i,hideBackdrop:!0,children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:Le.a.backdrop,onClick:i}),Object(D.jsxs)("div",{className:Le.a.dialog,children:[Object(D.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:Object(D.jsx)(k.a,{id:"permissions_dialog_title"})}),Object(D.jsx)("p",{children:Object(D.jsx)(k.a,{id:"permissions_dialog_description"})}),Object(D.jsxs)("div",{className:Le.a.inputWrapper,children:[Object(D.jsx)(Pe,{className:Le.a.input,children:function(e){var t=e.setError;return Object(D.jsx)(Ae,{multiple:!0,onError:t,defaultValue:"",onChange:y,"aria-label":l("path_editor_permissions_edit_label"),placeholder:l("path_editor_permissions_edit_placeholder"),style:{flexGrow:"1",margin:"var(--basis) 0",width:"calc(100% - var(--basis_x2))"}})}}),Object(D.jsx)(Ve,{role:N,changeRole:S,trigger:function(e){return Object(D.jsxs)("button",Object(j.a)(Object(j.a)({className:Le.a.menuButton},e),{},{children:[Object(D.jsx)(Me,{role:N})," ",Object(D.jsx)(Ie.a,{})]}))}})]},p),_.length>0&&_[0].length>0?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("hr",{}),Object(D.jsxs)("div",{className:Le.a.actions,children:[Object(D.jsx)("div",{}),Object(D.jsx)("button",{onClick:T,className:"green",style:{margin:"0"},children:_.length>1?"Add People":"Add Person"})]})]}):Object(D.jsxs)(D.Fragment,{children:[A||L?Object(D.jsxs)("div",{style:{marginTop:"var(--basis_x2)"},children:["Make visible for\u2026",A?Object(D.jsx)("button",{onClick:function(){return R(["@volteuropa.org"],"viewer")},children:"Volt Europa"}):null,L?Object(D.jsx)("button",{onClick:function(){return R(["@public"],"viewer")},children:"Public"}):null]}):null,0===v.length?null:Object(D.jsx)("hr",{style:{opacity:.2}}),Ge(v).map((function(e){return Object(D.jsxs)("div",{className:Le.a.permissionRow,children:["@public"===e.email?Object(D.jsx)("strong",{children:"Public"}):"@volteuropa.org"===e.email?Object(D.jsx)("strong",{children:"Volt Europa"}):Object(D.jsx)("span",{children:e.email}),"owner"===e.role?Object(D.jsx)("strong",{className:"type_button ".concat(Le.a.ownerInfo),children:Object(D.jsx)(Me,{role:e.role})}):Object(D.jsx)(Ve,{role:e.role,removePermission:function(){return B(e.email)},changeRole:function(t){return P(e.email,t)},trigger:function(t){return Object(D.jsxs)("button",Object(j.a)(Object(j.a)({className:Le.a.menuButton},t),{},{children:[Object(D.jsx)(Me,{role:e.role})," ",Object(D.jsx)(Ie.a,{})]}))}})]},e.tmp_id)})),Object(D.jsx)("hr",{style:{opacity:.2}}),Object(D.jsxs)("div",{className:Le.a.actions,children:[Object(D.jsx)("div",{}),Object(D.jsx)("button",{onClick:i,className:"green",style:{margin:"0"},children:Object(D.jsx)(k.a,{id:"dialog_done"})})]})]})]})]})})},He=n(385),$e=n.n(He),ze=n(416),qe=n(417);var Ue=function(e){var t=e.defaultValue,n=void 0===t?"":t,c=e.onChange,o=e.onBlur,i=e.style,l=e.className,s=e.disabled,u=void 0!==s&&s,d=Object(a.useState)(Boolean(n)),b=Object(r.a)(d,2),p=b[0],O=b[1],f=Object(a.useCallback)((function(){c&&c(p),o&&o(p)}),[c,o,p]),h=Object(a.useCallback)((function(){!0!==u&&(f(),O(!0))}),[u,f,O]),v=Object(a.useCallback)((function(){!0!==u&&(f(),O(!1))}),[u,f,O]);return Object(D.jsx)("div",{style:Object(j.a)({display:"inline-block",padding:"var(--basis)",cursor:!0===u?"default":"pointer",verticalAlign:"middle"},i),className:l,children:p?Object(D.jsx)(ze.a,{onClick:v}):Object(D.jsx)(qe.a,{onClick:h})})},Je=n(386),Ze=n.n(Je),Ke=n(241),Ye=n(224),Xe=n(453);var Qe=function(e){var t=e.ariaLabel,n=e.items,c=e.defaultValue,o=e.onChange,i=e.style,l=e.className,s=Object(a.useState)(),u=Object(r.a)(s,2),d=u[0],b=u[1];Object(a.useEffect)((function(){return b(c)}),[c,b]);var p=Object(a.useCallback)((function(e){var t=e.target.dataset.value;b(t),o&&o(t)}),[b,o]);return Object(D.jsx)("div",{"aria-label":t,className:"buttonRow "+(l||""),style:Object(j.a)({display:"inline-block"},i),children:n.map((function(e){var t=e.value,n=e.title,r=e.icon||null;return Object(D.jsx)("button",{className:"default ".concat(d===t?"choosen":""," ").concat(r?"hasIcon":""),onClick:p,"data-value":t,children:Object(D.jsxs)("span",{style:{pointerEvents:"none"},children:[r||null,n?Object(D.jsx)("span",{style:{verticalAlign:"middle"},children:n}):null]})},t+"_"+n)}))})},et=/^([\+-\.0-9A-Z\u017F\u212A]+:(?:\/\/)?)[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+(?:\.[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+)+[!#-;=\?-\[\]_a-z~\xC0-\xFF\u017F\u1E9E\u212A\u212B]+$/gi,tt=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,nt=/^(?:(?![\/:])[\s\S])+@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/gi;var rt=function(e){var t=e.defaultValue,n=void 0===t?"":t,c=e.onChange,o=e.onBlur,i=e.onError,l=e.placeholder,s=void 0===l?"https://":l,u=e.style,d=e.className,b=Object(a.useState)(n),j=Object(r.a)(b,2),p=j[0],O=j[1],f=Object(a.useCallback)((function(e){var t=e.target.value||"",n="";if(""!==t){var r=t.split(":"),a=r.shift(),o=r.join(":");"tel"===a||("mailto"===a||t.match(nt)?o.match(tt)||(n="invalid_mailto_url"):t.match(et)||(n="invalid_url"))}c&&c(t),i&&i(n),O(t)}),[c,i]),h=Object(a.useCallback)((function(){o&&o(p)}),[o,p]);return Object(D.jsx)("input",{type:"url",onChange:f,onBlur:h,defaultValue:n,placeholder:s,style:u,className:d})},at=n.p+"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png",ct=n.p+"static/media/Aktion.89c1bcdf.png",ot=n.p+"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png",it=n.p+"static/media/Welcome-to-Volt.39e04eca.png",lt=n.p+"static/media/portugal.682fc2e3.jpg",st=["closePopover"];var ut=Object(k.d)((function(e){var t=e.getString,n=e.coverphotoValue,r=e.iconValue,a=e.onChange,c=e.className,o=void 0===c?"":c,i=e.style,l=void 0===i?{}:i,s=function(e){a({type:"url",url:e})},u=new RegExp("^(?:[a-z]+:)?//","i"),d="",b=!1,p=!1;return"object"!==typeof n||null===n||Array.isArray(n)||"url"===n.type&&"string"===typeof n.url&&u.test(n.url)&&(b=!0,d=n.url||""),"object"!==typeof r||null===r||Array.isArray(r)||"url"===r.type&&"string"===typeof r.url&&u.test(r.url)&&(p=!0),Object(D.jsx)("div",{className:"\n      ".concat(Ze.a.root,"\n      ").concat(b?Ze.a.coverphotoIsSet:Ze.a.coverphotoIsNotSet,"\n      ").concat(p?Ze.a.iconIsSet:Ze.a.iconIsNotSet,"\n      ").concat(o,"\n    "),style:l,children:Object(D.jsx)(Ke.a,{trigger:function(e){return Object(D.jsx)("div",{className:Ze.a.coverphoto,style:{backgroundImage:b?"url(".concat(window.domains.backend,"download_url?f=jpg&w=1400&h=400&url=").concat(encodeURIComponent(n.url),")"):""},children:Object(D.jsx)("div",{className:Ze.a.button_wrapper,children:Object(D.jsxs)("button",Object(j.a)(Object(j.a)({},e),{},{className:"text hasIcon ".concat(Ze.a.changeCoverphotoButton),children:[Object(D.jsx)(Xe.a,{className:"icon"}),Object(D.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Set Coverphoto"})]}))})})},children:function(e){var n=e.closePopover,r=Object(P.a)(e,st);return Object(D.jsxs)(Ye.a,Object(j.a)(Object(j.a)({},r),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(D.jsx)("h3",{style:{marginTop:"0"},children:Object(D.jsx)(k.a,{id:"path_editor_coverphoto_label"})}),Object(D.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(D.jsx)(k.a,{id:"path_editor_coverphoto_info"})}),Object(D.jsx)(Pe,{children:function(e){var t=e.setError;return Object(D.jsx)(rt,{onError:t,onChange:s,defaultValue:d,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(D.jsx)(Qe,{onChange:s,ariaLabel:t("path_editor_coverphoto_label"),defaultValue:d,items:[{value:"",title:t("path_editor_no_coverphoto")}].concat(Object(z.a)([{value:"https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg",icon:ot},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg",icon:it},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg",icon:at},{value:"https://assets.volteuropa.org/2021-11/portugal.jpg",icon:lt},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg",icon:ct}].map((function(e){var t=e.value,n=void 0===t?"":t,r=e.icon,a=void 0===r?"":r;return{value:n,icon:Object(D.jsx)("img",{alt:"",src:a,className:"icon image"})}}))))}),Object(D.jsx)("hr",{}),Object(D.jsx)("button",{className:"text",onClick:n,style:{margin:0},children:"Close"})]}))}})})})),dt=n(387),bt=n.n(dt),jt=n(438),pt=["closePopover"];var Ot=Object(k.d)((function(e){var t=e.coverphotoValue,n=e.iconValue,r=e.onChange,a=e.className,c=e.style,o=function(e){r({type:"url",url:e})},i=new RegExp("^(?:[a-z]+:)?//","i"),l="",s=!1,u=!1;return"object"!==typeof t||null===t||Array.isArray(t)||"url"===t.type&&"string"===typeof t.url&&i.test(t.url)&&(s=!0),"object"!==typeof n||null===n||Array.isArray(n)||"url"===n.type&&"string"===typeof n.url&&i.test(n.url)&&(u=!0,l=n.url||""),Object(D.jsx)("div",{className:"\n      ".concat(bt.a.root,"\n      ").concat(u?bt.a.iconIsSet:bt.a.iconIsNotSet,"\n      ").concat(s?bt.a.coverphotoIsSet:bt.a.coverphotoIsNotSet,"\n      ").concat(a,"\n    "),style:c,children:Object(D.jsx)(Ke.a,{trigger:function(e){return Object(D.jsxs)("div",{className:bt.a.iconWrapper,children:[Object(D.jsx)("div",{className:"".concat(bt.a.icon," ").concat(u?"":bt.a.no_image),style:{backgroundImage:u?"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=400&h=400&url=").concat(encodeURIComponent(l),")"):""}}),Object(D.jsxs)("button",Object(j.a)(Object(j.a)({},e),{},{className:"text hasIcon ".concat(bt.a.changeIconButton),children:[Object(D.jsx)(jt.a,{className:"icon"}),Object(D.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:"Set Icon"})]}))]})},children:function(e){var t=e.closePopover,n=Object(P.a)(e,pt);return Object(D.jsxs)(Ye.a,Object(j.a)(Object(j.a)({},n),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(D.jsx)("h3",{style:{marginTop:"0"},children:Object(D.jsx)(k.a,{id:"path_editor_icon_label"})}),Object(D.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(D.jsx)(k.a,{id:"path_editor_icon_info"})}),Object(D.jsx)(Pe,{children:function(e){var t=e.setError;return Object(D.jsx)(rt,{onError:t,onBlur:o,defaultValue:l,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(D.jsx)("hr",{}),Object(D.jsx)("button",{className:"text",onClick:t,style:{margin:0},children:"Close"})]}))}})})})),ft=n(414),ht=n(230);var vt=["defaultValue","onChange","onBlur","onSubmit","onError","allowExisting","placeholder"];var gt=function(e){var t=e.defaultValue,n=void 0===t?"":t,c=e.onChange,o=e.onBlur,i=(e.onSubmit,e.onError),l=(e.allowExisting,e.placeholder),s=void 0===l?"de-bonn":l,u=Object(P.a)(e,vt),d=Object(a.useRef)(!1);Object(a.useEffect)((function(){return d.current=!0,function(){d.current=!1}}),[]);var b=function(){var e=Object(ft.a)(),t=Object(a.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(n){e.query({query:ht.b,variables:{path:t}}).then(function(){var e=Object(q.a)(J.a.mark((function e(t){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.data).hasOwnProperty("checkPath")?n(r.checkPath):n(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(q.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n(null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}(),p=Object(a.useState)(n),O=Object(r.a)(p,2),f=O[0],h=O[1],v=Object(a.useCallback)(function(){var e=Object(q.a)(J.a.mark((function e(t){var n,r,a,o,l;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t.toLowerCase(),h(t),n=!0,r="",""===t){e.next=15;break}return e.next=7,b(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0={};case 10:a=e.t0,o=a.isOkay,l=a.errors,n=o,r=l.join("\n");case 15:n&&c&&c(t),i&&i(r);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[h,b,c,i]),g=Object(a.useCallback)((function(){o&&o(f)}),[o,f]);return Object(D.jsx)(G,Object(j.a)({onChange:v,onBlur:g,defaultValue:n,placeholder:s,linebreaks:!1},u))};var xt=function(e){var t=e.defaultValue,n=e.className,c=e.style,o=e.onChange,i=Object(k.c)().getString,l=Object(a.useState)({}),s=Object(r.a)(l,2),u=s[0],d=s[1];Object(a.useEffect)((function(){t.type="path",d(t)}),[t,d]);var b=Object(a.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(j.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(u)&&(d(r),o&&o(r))}}),[u,d,o]),p=u.type||"",O=null;return"click"===p?O=null:"path"===p&&(O=Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(Pe,{style:{flexGrow:"1"},children:function(e){var t=e.setError;return Object(D.jsx)(gt,{onError:t,placeholder:i("trigger_input_path_placeholder"),defaultValue:u.path,onBlur:function(e){return b("path",e)},style:{flexGrow:"1",margin:"0",minWidth:"300px"}})}})})),Object(D.jsx)("div",{className:n,style:Object(j.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},c),children:O})};var mt=function(e){var t=e.defaultValue,n=e.className,c=e.style,o=e.onChange,i=Object(k.c)().getString,l=Object(a.useState)({}),s=Object(r.a)(l,2),u=s[0],d=s[1];Object(a.useEffect)((function(){t.type="open_url",d(t)}),[t,d]);var b=Object(a.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(j.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(u)&&(d(r),o&&o(r))}}),[u,d,o]),p=u.type||"",O=null;return"open_url"===p||"send_payload"===p?O=Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(Pe,{style:{flexGrow:"1",margin:"0",minWidth:"300px"},children:function(e){var t=e.setError;return Object(D.jsx)(rt,{onError:t,onBlur:function(e){return b("url",e)},defaultValue:u.url,placeholder:i("action_input_url_placeholder"),type:"text",style:{flexGrow:1,margin:"0",width:"100%"}})}})}):"render_block"!==p&&"run_block"!==p||(O=Object(D.jsx)(G,{placeholder:"blockId",defaultValue:u.blockId,onBlur:function(e){return b("blockId",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"}})),Object(D.jsx)("div",{className:n,style:Object(j.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},c),children:O})};var _t=Object(k.d)((function(e){var t=e.getString,n=e.type,c=e.defaultProperties,o=void 0===c?{}:c,i=e.onChange,l=Object(a.useState)({}),s=Object(r.a)(l,2),u=s[0],d=s[1],b=Object(a.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={text:"string",coverphoto:"string",icon:"string",imprint:"string",privacy_policy:"string",tags:"string",checked:"boolean",trigger:"object",action:"object",pronouns:"string"},a=Object(j.a)({},u);if(r.hasOwnProperty(e))switch(r[e]){case"array":t.length>0?a[e]=t:a.hasOwnProperty(e)&&delete a[e];break;case"string":""!==t?a[e]=t:a.hasOwnProperty(e)&&delete a[e];break;case"boolean":!0===t?a[e]=!0:a.hasOwnProperty(e)&&delete a[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?a[e]=t:a.hasOwnProperty(e)&&delete a[e];break;default:a[e]=t}JSON.stringify(a)!==JSON.stringify(u)&&(d(a),!1===n&&i&&i(a))}),[u,d,i]),p=Object(a.useCallback)((function(){i&&i(u)}),[u,i]);Object(a.useEffect)((function(){d(Object(j.a)(Object(j.a)({},o),{},{text:o.text||""}))}),[o,d]);var O=null;return"checkbox"===n?O=Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:$e.a.properties_row,children:[Object(D.jsx)("h3",{children:Object(D.jsx)(k.a,{id:"properties_editor_checked_label"})}),Object(D.jsx)(Ue,{onChange:function(e){return b("checked",e)},defaultValue:Boolean(u.checked),style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"button"===n?O=Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:$e.a.properties_row,children:[Object(D.jsx)("h3",{children:Object(D.jsx)(k.a,{id:"properties_editor_action_label"})}),Object(D.jsx)(mt,{onChange:function(e){return b("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"page"===n||"person"===n?O=Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:$e.a.properties_row,children:[Object(D.jsx)("h3",{children:Object(D.jsx)(k.a,{id:"properties_editor_trigger_path_label"})}),Object(D.jsx)(xt,{onChange:function(e){return b("trigger",e)},defaultValue:u.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"redirect"===n&&(O=Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:$e.a.properties_row,children:[Object(D.jsx)("h3",{children:Object(D.jsx)(k.a,{id:"properties_editor_trigger_path_label"})}),Object(D.jsx)(xt,{onChange:function(e){return b("trigger",e)},defaultValue:u.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]}),Object(D.jsxs)("div",{className:$e.a.properties_row,children:[Object(D.jsx)("h3",{children:Object(D.jsx)(k.a,{id:"properties_editor_action_url_label"})}),Object(D.jsx)(mt,{onChange:function(e){return b("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})]})),Object(D.jsxs)(D.Fragment,{children:["page"===n||"person"===n||"redirect"===n?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ut,{coverphotoValue:u.coverphoto,iconValue:u.icon,onChange:function(e){return b("coverphoto",e)}}),Object(D.jsx)(Ot,{iconValue:u.icon,coverphotoValue:u.coverphoto,onChange:function(e){return b("icon",e)}})]}):null,Object(D.jsx)("div",{className:$e.a.main_headline,style:{paddingLeft:"calc(8 * var(--basis))"},children:Object(D.jsx)(G,{defaultValue:u.text,onChange:function(e){return b("text",e,!0)},onBlur:p,placeholder:t("placeholder_main_headline"),style:{padding:"var(--basis) var(--basis_x2)"},linebreaks:!0,className:"type_h1"})}),Object(D.jsx)("div",{className:$e.a.propertiesFrame,style:null===O?{display:"none"}:null,children:O})]})})),yt=n(440),kt=n(476),wt=n(229);var Ct=Object(k.d)((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.onInputRef),l=e.onGoToPrevInput,s=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=(e.onAddRowAfter,c.properties||{}),O=Object(a.useState)(""),f=Object(r.a)(O,2),h=f[0],v=f[1];Object(a.useEffect)((function(){v(p.text||"")}),[p.text,v]);var g=Object(a.useCallback)((function(){o&&o(Object(j.a)(Object(j.a)({},c),{},{properties:Object(j.a)(Object(j.a)({},c.properties),{},{text:h})}))}),[o,c,h]),x="type_text";p.hasOwnProperty("text_style")&&(x="type_"+p.text_style);var m=Object(wt.getBlockColor)(c).color,_={};return m&&(_.color=m),Object(D.jsx)(G,{defaultValue:h,onChange:v,onBlur:g,placeholder:t("placeholder_text"),style:Object(j.a)({margin:"0",backgroundColor:"transparent"},_),linebreaks:!0,className:"hide_border ".concat(x),onInputRef:i,onGoToPrevInput:l,onGoToNextInput:s,onMergeToPrevInput:function(){return d(c)},onMergeFromNextInput:function(){return b(c)},onSplitText:u})}));var It=Object(k.d)((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,l=e.onGoToPrevInput,s=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=c.properties||{},O=Object(a.useState)(p.text||""),f=Object(r.a)(O,2),h=f[0],v=f[1],g=p.action,x=void 0===g?{}:g,m=Object(a.useState)(x.url||""),_=Object(r.a)(m,2),y=_[0],k=_[1],w=Object(a.useCallback)((function(){if(o){var e=Object(j.a)(Object(j.a)({},c),{},{properties:Object(j.a)(Object(j.a)({},c.properties),{},{text:h})});""===y?(e.properties.hasOwnProperty("trigger")&&delete e.properties.trigger,e.properties.hasOwnProperty("action")&&delete e.properties.action):(e.properties.trigger={type:"click"},e.properties.action={type:"open_url",url:y}),o(e)}}),[o,c,h,y]),C=Object(wt.getBlockColor)(c),I=C.color,N=C.colorRGB,S=C.contrastingColor,F={};return I&&(F["--on-background-rgb"]=N,F["--button-background"]=I,F["--button-color"]=S),Object(D.jsxs)("div",{style:Object(j.a)({margin:"0 0 var(--basis) 0",cursor:"auto"},F),className:"clickable_card active",children:[Object(D.jsx)(G,{defaultValue:h,onChange:v,onBlur:w,placeholder:t("placeholder_button"),style:Object(j.a)({margin:"0"},F),linebreaks:!0,className:"hide_border type_button default",onInputRef:i,onGoToPrevInput:l,onGoToNextInput:s,onMergeToPrevInput:function(){return d(c)},onMergeFromNextInput:function(){return b(c)},onSplitText:u}),Object(D.jsx)(Pe,{children:function(e){var n=e.setError;return Object(D.jsx)(rt,{onError:n,onChange:k,onBlur:w,type:"text",defaultValue:y,placeholder:t("action_input_url_placeholder"),style:{margin:"var(--basis) 0 0 0",width:"100%"}})}})]})})),Nt=n(419),St=n(454);var Ft=Object(k.d)((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,c=e.onChange,o=e.onInputRef,i=e.onGoToPrevInput,l=e.onGoToNextInput,s=e.onSplitText,u=e.onMergeToPrevInput,d=e.onMergeFromNextInput,b=e.style,p=void 0===b?{}:b,O=r.properties||{},f=O.trigger,h=void 0===f?{}:f,v=O.action,g=void 0===v?{}:v,x=Object(a.useRef)(O.text||""),m=x.current,_=Object(a.useRef)(h.path||""),y=_.current,k=function(e){return _.current=e},w=Object(a.useRef)(g.url||""),C=w.current,I=function(e){return w.current=e},N=Object(a.useCallback)((function(){if(c){var e=x.current,t=_.current,n=w.current,a=Object(j.a)(Object(j.a)({},r),{},{properties:Object(j.a)(Object(j.a)({},r.properties),{},{text:e})});""===t?a.properties.hasOwnProperty("trigger")&&delete a.properties.trigger:a.properties.trigger={type:"path",path:t},""===n?a.properties.hasOwnProperty("action")&&delete a.properties.action:a.properties.action={type:"open_url",url:n},c(a)}}),[c,r]),S=Object(wt.getBlockColor)(r),F=S.color,B=void 0===F?"inherit":F,P=S.colorRGB,E=void 0===P?"--on-background-rgb":P;return Object(D.jsxs)("div",{style:Object(j.a)(Object(j.a)({},p),{},{margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":E}),className:"clickable_card active",children:[Object(D.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",color:B},children:[Object(D.jsx)(Nt.a,{style:{margin:"var(--basis)"}}),Object(D.jsx)(G,{defaultValue:m,onChange:function(e){return x.current=e},onBlur:N,placeholder:t("placeholder_headline_main"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:B},linebreaks:!0,className:"hide_border type_text",onInputRef:o,onGoToPrevInput:i,onGoToNextInput:l,onMergeToPrevInput:function(){return u(r)},onMergeFromNextInput:function(){return d(r)},onSplitText:s})]}),Object(D.jsxs)("div",{style:{paddingInlineStart:"var(--basis_x8)",width:"100%",display:"flex",alignItems:"center"},children:["volt.link/",Object(D.jsx)(Pe,{style:{width:"100%",marginInlineStart:"var(--basis)"},children:function(e){var n=e.setError;return Object(D.jsx)(gt,{onError:n,onChange:k,onBlur:N,defaultValue:y,placeholder:t("trigger_input_path_placeholder"),style:{margin:"var(--basis) 0",width:"100%"}})}})]}),Object(D.jsxs)("div",{style:{paddingInlineStart:"var(--basis_x8)",width:"100%",display:"flex",alignItems:"center"},children:[Object(D.jsx)(St.a,{style:{flexShrink:0,margin:"0 var(--basis) 0 0"}}),Object(D.jsx)(Pe,{style:{width:"100%"},children:function(e){var n=e.setError;return Object(D.jsx)(rt,{onError:n,onChange:I,onBlur:N,type:"text",defaultValue:C,placeholder:t("path_editor_item_link_label"),style:{margin:"var(--basis) 0",width:"100%"}})}})]})]})}));function Bt(e){var t=e.block,n=Object(wt.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(D.jsx)("hr",{style:r})}var Pt=Object(k.d)((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,l=e.onGoToPrevInput,s=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=c.properties||{},O=Object(a.useState)(p.text||""),f=Object(r.a)(O,2),h=f[0],v=f[1],g=Object(a.useRef)(Boolean(p.checked)),x=Object(a.useCallback)((function(){o&&o(Object(j.a)(Object(j.a)({},c),{},{properties:Object(j.a)(Object(j.a)({},c.properties),{},{text:h,checked:g.current})}))}),[o,c,h]),m=Object(a.useCallback)((function(e){g.current=e,x()}),[x]);return Object(D.jsxs)("div",{style:{display:"flex"},children:[Object(D.jsx)(Ue,{checked:g.current,onChange:m}),Object(D.jsx)(G,{defaultValue:h,onChange:v,onBlur:x,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:l,onGoToNextInput:s,onMergeToPrevInput:function(){return d(c)},onMergeFromNextInput:function(){return b(c)},onSplitText:u})]})})),Et=n(418);var Rt=Object(k.d)((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,l=e.onGoToPrevInput,s=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=c.properties||{},O=Object(a.useState)(p.text||""),f=Object(r.a)(O,2),h=f[0],v=f[1],g=Object(a.useCallback)((function(){o&&o(Object(j.a)(Object(j.a)({},c),{},{properties:Object(j.a)(Object(j.a)({},c.properties),{},{text:h})}))}),[o,c,h]),x=Object(wt.getBlockColor)(c),m=x.color,_=void 0===m?"inherit":m,y=x.colorRGB,k=void 0===y?"--on-background-rgb":y;return Object(D.jsxs)("div",{style:{display:"flex",margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":k,color:_},className:"clickable_card active",children:[Object(D.jsx)(Et.a,{style:{margin:"var(--basis)"}}),Object(D.jsx)(G,{defaultValue:h,onChange:v,onBlur:g,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:_},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:l,onGoToNextInput:s,onMergeToPrevInput:function(){return d(c)},onMergeFromNextInput:function(){return b(c)},onSplitText:u})]})})),Tt=n(420);var At=Object(k.d)((function(e){var t=e.getString,n=e.block,c=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,l=e.onGoToPrevInput,s=e.onGoToNextInput,u=e.onSplitText,d=e.onMergeToPrevInput,b=e.onMergeFromNextInput,p=c.properties||{},O=Object(a.useState)(p.text||""),f=Object(r.a)(O,2),h=f[0],v=f[1],g=Object(a.useCallback)((function(){o&&o(Object(j.a)(Object(j.a)({},c),{},{properties:Object(j.a)(Object(j.a)({},c.properties),{},{text:h})}))}),[o,c,h]),x=Object(wt.getBlockColor)(c),m=x.color,_=void 0===m?"inherit":m,y=x.colorRGB,k=void 0===y?"--on-background-rgb":y;return Object(D.jsxs)("div",{style:{display:"flex",margin:"0 0 var(--basis) 0",cursor:"auto","--on-background-rgb":k,color:_},className:"clickable_card active",children:[Object(D.jsx)(Tt.a,{style:{margin:"var(--basis)"}}),Object(D.jsx)(G,{defaultValue:h,onChange:v,onBlur:g,placeholder:t("placeholder_headline_main"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent",color:_},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:l,onGoToNextInput:s,onMergeToPrevInput:function(){return d(c)},onMergeFromNextInput:function(){return b(c)},onSplitText:u})]})})),Dt=n(388),Lt=n.n(Dt),Mt=["type"];function Vt(e){var t=e.type,n=void 0===t?"text":t,r=Object(P.a)(e,Mt),a=null;switch(n){case"button":a=Object(D.jsx)(It,Object(j.a)({},r));break;case"redirect":a=Object(D.jsx)(Ft,Object(j.a)({},r));break;case"divider":a=Object(D.jsx)(Bt,Object(j.a)({},r));break;case"checkbox":a=Object(D.jsx)(Pt,Object(j.a)({},r));break;case"person":a=Object(D.jsx)(Rt,Object(j.a)({},r));break;case"page":a=Object(D.jsx)(At,Object(j.a)({},r));break;default:a=Object(D.jsx)(Ct,Object(j.a)({},r))}return a}var Gt=Object(k.d)((function(e){e.fluentByObject,e.getString;var t=e.contentConfig,n=void 0===t?{}:t,c=e.className,o=e.onChange,i=e.reorderHandle,l=e.onRemoveRow,s=(e.actionButton,e.dataset),u=void 0===s?{}:s,d=e.addRowBefore,b=e.addRowAfter,O=(e.permissions,e.onInputRef),f=e.onGoToPrevInput,h=e.onGoToNextInput,v=e.onSplitText,g=e.onMergeToPrevInput,x=e.onMergeFromNextInput,m=e.onRemoveSelf,_=Object(p.a)(),y=Object(a.useState)(Object(j.a)(Object(j.a)({},n.block||{type:"text"}),{},{_id:n.blockId||null})),k=Object(r.a)(y,2),C=k[0],I=k[1],N=C.properties||{},S="boolean"!==typeof N.active||N.active;Object(a.useEffect)((function(){n.block&&I(n.block)}),[n.block]);var F=Object(a.useCallback)((function(e){_(e).then((function(e){I(e),C._id&&C._id===e._id||o({blockId:e._id,block:e})}))}),[C,o,_]),B=Object(a.useCallback)((function(e){var t=Object(j.a)(Object(j.a)({},C),{},{type:e});F(t)}),[C,F]),P=Object(a.useCallback)((function(e,t){if("string"===typeof e){var n=Object(j.a)({},C.properties);if(null===t?delete n[e]:n[e]=t,n!==C.properties){var r=Object(j.a)(Object(j.a)({},C),{},{properties:n});F(r)}}}),[C,F]),E=Object(a.useCallback)((function(e){JSON.stringify(e)!==JSON.stringify(C)&&_(e).then((function(e){I(e),C._id&&C._id===e._id||o({blockId:e._id,block:e})}))}),[_,C,o]),R=Object(a.useCallback)((function(e,t){_(e).then((function(e){t&&t(e)})).catch(console.error)}),[_]),T=Object(a.useCallback)((function(e){"function"===typeof m&&m()}),[m]);return Object(D.jsxs)("div",Object(j.a)(Object(j.a)({className:"".concat(Lt.a.block," ").concat(c)},u),{},{children:[Object(D.jsx)(w.a,{block:C,setType:B,setProperty:P,onRemoveRow:l,addRowBefore:d,addRowAfter:b,onArchivedToggle:T,trigger:function(e){return Object(D.jsx)("div",Object(j.a)(Object(j.a)({},e),{},{className:Lt.a.reorderHandle,children:i}))}}),Object(D.jsx)("div",{className:"".concat(Lt.a.block_input," ").concat(S?Lt.a.form_active:Lt.a.form_deactivated),children:Object(D.jsx)(Vt,{type:C.type,block:C,onChange:E,onSaveBlock:R,onInputRef:O,onGoToPrevInput:f,onGoToNextInput:h,onSplitText:v,onMergeToPrevInput:g,onMergeFromNextInput:x,onAddRowAfter:b})})]}))})),Wt=n(246),Ht=n(242),$t=n(389),zt=n.n($t);function qt(e){return Object(z.a)(e).map((function(e){var t=Object(j.a)({},e);return t.tmp_id=Object(ae.a)(),t}))}function Ut(e){e.normalize();var t=e.childNodes;return t.length>0?t[0]:e}function Jt(e){e.normalize();var t=Object(z.a)(e.childNodes).reverse();if(t.length>0){var n=e;if(3===t[0].nodeType){var r,a=Object(E.a)(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(3===c.nodeType)n=c;else if(1===c.nodeType)break}}catch(u){a.e(u)}finally{a.f()}}else if(t.length>1&&3===t[1].nodeType){var o,i=t.slice(1),l=Object(E.a)(i);try{for(l.s();!(o=l.n()).done;){var s=o.value;if(3===s.nodeType)n=s;else if(1===s.nodeType)break}}catch(u){l.e(u)}finally{l.f()}}return n}return e}function Zt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.focus(),window.getSelection){var r=3===t.nodeType?t.length:t.innerText.length;(-1===n||n>r)&&(n=r);var a=document.createRange();a.setStart(t,0),a.setEnd(t,n),a.collapse(!1);var c=window.getSelection();c.removeAllRanges(),c.addRange(a)}}var Kt=function(e){var t=e.parentId,n=e.defaultValue,c=void 0===n?[]:n,o=e.onChange,i=Object(a.useRef)([]),l=i.current,s=Object(a.useRef)({}),u=s.current,d=Object(a.useState)(0),b=Object(r.a)(d,2),O=b[0],f=b[1],h=Object(be.a)(),v=Object(p.a)(),g=Object(Wt.a)(),x=Object(a.useState)(null),m=Object(r.a)(x,2),_=m[0],y=m[1];Object(a.useEffect)((function(){if("object"===typeof _&&null!==_&&u.hasOwnProperty(_.tmp_id)){var e=u[_.tmp_id];if("object"===typeof e&&null!==e){if(!0===_.inFirstLine){var t=Ut(e.current);Zt(e.current,t,_.positionFromLineStart)}else if(!0===_.inLastLine){var n=Jt(e.current);Zt(e.current,n,_.positionFromLineStart)}y(null)}}}),[_,y,u]),Object(a.useEffect)((function(){function e(){return(e=Object(q.a)(J.a.mark((function e(){var t,n,r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(z.a)(qt(c)),n=t.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),r=[],!(n.length>0)){e.next=7;break}return e.next=6,h({ids:n});case 6:r=e.sent;case 7:t=t.map((function(e){return e.hasOwnProperty("block")||(e.block=r.find((function(t){return t._id===e.blockId}))),e})),i.current=t,f((function(e){return e+1}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===l.length&&c.length>0&&function(){e.apply(this,arguments)}()}),[l,c,h,i,f]);var w=Object(a.useCallback)((function(e,t){var n=Object(j.a)({},s.current);n.hasOwnProperty(e.tmp_id)&&n[e.tmp_id]===t||(n[e.tmp_id]=t,s.current=n)}),[s]),C=Object(a.useCallback)((function(e,t){for(var n=t.caret,r=e.index,a=null,c=l.length-1;c>=0;c--){var o=l[c].tmp_id;if(c<r&&u[o]&&u[o].current){a=u[o];break}}if(a){var i=Jt(a.current);Zt(a.current,i,n.positionFromLineStart)}}),[l,u]),I=Object(a.useCallback)((function(e,t){for(var n=t.caret,r=e.index,a=null,c=0;c<l.length;c++){var o=l[c].tmp_id;if(c>r&&u[o]&&u[o].current){a=u[o];break}}if(a){var i=Ut(a.current);Zt(a.current,i,n.positionFromLineStart)}}),[l,u]),N=Object(a.useCallback)((function(){for(var e=null,t=l.length-1;t>=0;t--){var n=l[t].tmp_id;if(u[n]&&u[n].current){e=u[n];break}}if(e){var r=Jt(e.current);Zt(e.current,r,-1)}}),[l,u]),S=Object(a.useCallback)((function(e,t){var n=Object(z.a)(l);for(var r in n){var a=n[r];if(a.tmp_id===e.tmp_id){n[r]=Object(j.a)(Object(j.a)({},a),t);break}}return i.current=n,o(n),new Promise((function(e){e(n)}))}),[l,i,o]),F=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=(n="object"===typeof n?Object(j.a)({tmp_id:Object(ae.a)()},n):n||{tmp_id:Object(ae.a)()}).block||null;null===r||"number"!==typeof e||isNaN(e)||v(r).then((function(r){n.block=r,n.blockId=r._id;var a=Object(z.a)(l);a.splice(e+t,0,n),i.current=a,o(a)})).catch(console.error)}),[l,i,v,o]),B=Object(a.useCallback)((function(e){var n=e.type,r=e.close,a={type:n};"string"===typeof t&&t.length>0&&(a.parent=t),F(0,0,{block:a}),"function"===typeof r&&r()}),[F,t]),P=Object(a.useCallback)((function(e){var t=e.index,n=Object(z.a)(l);if(t>0){var r=t-1,a=n[r],c=a.tmp_id,u=n[t].block,d=n[r].block,b=Object(j.a)(Object(j.a)({},d),{},{properties:Object(j.a)(Object(j.a)({},d.properties),{},{text:d.properties.text+u.properties.text})}),p=s.current[c].current.textContent.length;v(b).then((function(e){var n=Object(ae.a)();S({index:r,tmp_id:c},Object(j.a)(Object(j.a)({},a),{},{tmp_id:n,blockId:e._id,block:e})).then((function(e){var r=e[t].block;e.splice(t,1),g({_id:r._id,archive:!0}).then((function(){i.current=e,y({tmp_id:n,positionFromLineStart:p,inFirstLine:!1,inLastLine:!0}),o(e)}))}))})).catch(console.error)}}),[l,s,v,S,g,i,y,o]),E=Object(a.useCallback)((function(e){var t=e.index,n=e.tmp_id,r=Object(z.a)(l);if(t<r.length-1){var a=t+1,c=r[t],u=r[t].block,d=r[a].block,b=Object(j.a)(Object(j.a)({},u),{},{properties:Object(j.a)(Object(j.a)({},u.properties),{},{text:u.properties.text+d.properties.text})}),p=s.current[n].current.textContent.length;v(b).then((function(t){var n=Object(ae.a)();S(e,Object(j.a)(Object(j.a)({},c),{},{tmp_id:n,blockId:t._id,block:t})).then((function(e){var t=e[a].block;e.splice(a,1),g({_id:t._id,archive:!0}).then((function(){i.current=e,y({tmp_id:n,positionFromLineStart:p,inFirstLine:!1,inLastLine:!0}),o(e)}))}))})).catch(console.error)}}),[l,s,v,S,g,i,y,o]),R=Object(a.useCallback)((function(e,t){var n=t.texts,r=e.index,a=e.tmp_id,c=Object(z.a)(l),s=c.find((function(e){return e.tmp_id===a})).block||{},u=Object(j.a)(Object(j.a)({},s),{},{properties:Object(j.a)(Object(j.a)({},s.properties),{},{text:n[0]})}),d=Object(j.a)(Object(j.a)({},s),{},{properties:Object(j.a)(Object(j.a)({},s.properties),{},{text:n[1]})});delete d._id,v(u).then((function(e){v(d).then((function(t){c[r]=Object(j.a)(Object(j.a)({},c[r]),{},{tmp_id:Object(ae.a)(),blockId:e._id,block:e});var n={tmp_id:Object(ae.a)(),blockId:t._id,block:t};c.splice(r+1,0,n),i.current=c,o(c),y({tmp_id:n.tmp_id,positionFromLineStart:0,inFirstLine:!0,inLastLine:!1})})).catch(console.error)})).catch(console.error)}),[l,v,i,o,y]),T=Object(a.useCallback)((function(e){var t=e.index,n=Object(z.a)(l);n.splice(t,1),i.current=n,o(n)}),[l,o]),A=l.filter(Boolean).filter((function(e){return e.tmp_id}));return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{style:{position:"relative",width:"1000px",maxWidth:"100%",margin:"var(--basis_x8) auto 0 auto"},children:[Object(D.jsx)("div",{children:Object(D.jsx)(Ht.b,{types:["button","text","divider","page","redirect"],createBlock:B,trigger:function(e){return Object(D.jsx)("button",Object(j.a)(Object(j.a)({},e),{},{className:"text hasIcon",style:{margin:"0 0 var(--basis_x2) 0"},children:Object(D.jsxs)("span",{style:{pointerEvents:"none"},children:[Object(D.jsx)(yt.a,{className:"icon"}),Object(D.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:Object(D.jsx)(k.a,{id:"add_content_before"})})]})}))}})}),Object(D.jsx)(re.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var a=Array.from(e),c=a.splice(t,1),o=Object(r.a)(c,1)[0];return a.splice(n,0,o),a}(l,e.source.index,e.destination.index);i.current=t,o(t)}},children:Object(D.jsx)(re.c,{droppableId:"list",isDropDisabled:!1,children:function(e){return Object(D.jsxs)("div",Object(j.a)(Object(j.a)({ref:e.innerRef},e.droppableProps),{},{className:"inputBorder",style:{"--input-box-shadow":"inset var(--basis_x8) 0 0 0 var(--background), inset var(--basis_x8) 0 0 var(--basis_x0_2) var(--on-background-contrast), inset 0 0 0 var(--basis_x0_2) var(--on-background-contrast)",boxShadow:"var(--input-box-shadow)",paddingTop:A.length>0?"var(--basis)":"",paddingRight:"var(--basis)"},children:[A.map((function(e,t){var n=e.tmp_id,r={index:t,tmp_id:n};return Object(D.jsx)(re.b,{draggableId:n,index:t,isDragDisabled:!1,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(c){return Object(a.createElement)("div",Object(j.a)(Object(j.a)({ref:c.innerRef},c.draggableProps),{},{key:n,className:zt.a.row}),Object(D.jsx)("div",{className:zt.a.form,children:Object(D.jsx)(Gt,{className:zt.a.item,dataset:{"data-index":t,"data-id":n},contentConfig:e,reorderHandle:Object(D.jsx)(kt.a,{title:Object(D.jsxs)("div",{style:{textAlign:"center"},children:[Object(D.jsx)("strong",{children:"Drag"})," to move.",Object(D.jsx)("br",{}),Object(D.jsx)("strong",{children:"Click"})," to open menu."]}),children:Object(D.jsx)("button",Object(j.a)(Object(j.a)({className:"text ".concat(zt.a.inlineRowButton," ").concat(zt.a.dragHandleButton)},c.dragHandleProps),{},{children:Object(D.jsx)(le.a,{})}))}),onRemoveSelf:function(){return T(r)},addRowBefore:function(e){return F(t,0,e)},addRowAfter:function(e){return F(t,1,e)},onInputRef:function(e){return w(r,e)},onGoToPrevInput:function(e){return C(r,e)},onGoToNextInput:function(e){return I(r,e)},onSplitText:function(e){return R(r,e)},onChange:function(e){return S(r,e)},onMergeToPrevInput:function(e){return P(r,e)},onMergeFromNextInput:function(e){return E(r,e)}},n)}))}},n)})),e.placeholder]}))}})})]},O),Object(D.jsx)("div",{style:{position:"relative",height:"50vh",cursor:0===A.length?"default":"text"},onClick:0===A.length?null:N})]})};var Yt=function(e){var t=e.block,n=e.onSaveBlock,c=Object(k.c)().getString,o=Object(p.a)(),i=Object(a.useState)(!1),l=Object(r.a)(i,2),s=l[0],u=l[1],b=Object(a.useCallback)((function(){return u(!0)}),[u]),g=Object(a.useCallback)((function(){return u(!1)}),[u]),_=Object(a.useState)(!1),C=Object(r.a)(_,2),I=C[0],N=C[1],S=Object(a.useCallback)((function(){return N(!0)}),[N]),F=Object(a.useCallback)((function(){return N(!1)}),[N]),B=Object(a.useState)(!1),P=Object(r.a)(B,2),E=P[0],R=P[1],T=Object(a.useCallback)((function(){return R(!0)}),[R]),A=Object(a.useCallback)((function(){return R(!1)}),[R]),L=t.type,M=t.properties,V=t.content,G=t.permissions,W=Object(a.useCallback)((function(e){if(e!==t.type){var r=Object(j.a)(Object(j.a)({},t),{},{type:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),$=Object(a.useCallback)((function(e){if(e!==t.properties){var r=Object(j.a)(Object(j.a)({},t),{},{properties:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),z=Object(a.useCallback)((function(e,t){if("string"===typeof e){var n=Object(j.a)({},M);null===t?delete n[e]:n[e]=t,$(n)}}),[M,$]),q=Object(a.useCallback)((function(e){if(e!==t.content){var r=Object(j.a)(Object(j.a)({},t),{},{content:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),U=Object(a.useCallback)((function(e){if(e!==t.permissions){var r=Object(j.a)(Object(j.a)({},t),{},{permissions:e});o(r).then((function(e){n(e)}))}}),[t,o,n]),J=Object(a.useCallback)((function(){o(t).then((function(e){e._id!==t._id&&n(e)}))}),[o,t,n]),Z=m.c;if(t&&t.computed&&t.computed.inherited_block_permissions&&Array.isArray(t.computed.inherited_block_permissions)){var K=t.computed.inherited_block_permissions.reduce((function(e,t){return e[t.email]=t.role,e}),{});"viewer"===K["@public"]||"editor"===K["@public"]||"owner"===K["@public"]?Z=m.b:"viewer"!==K["@volteuropa.org"]&&"editor"!==K["@volteuropa.org"]&&"owner"!==K["@volteuropa.org"]||(Z=m.a)}var Y=Object(D.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[s?Object(D.jsx)(H,{defaultBlock:t,open:s,onClose:g,onChange:$}):null,Object(D.jsxs)("button",{className:"text hasIcon",onClick:b,children:[Object(D.jsx)(f.a,{className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(D.jsx)(k.a,{id:"path_editor_share"})})]}),"divider"!==L?Object(D.jsxs)(D.Fragment,{children:[I?Object(D.jsx)(fe,{defaultBlock:t,open:I,onClose:F,onSaveProperty:z}):null,Object(D.jsxs)("button",{className:"text hasIcon",onClick:S,children:[Object(D.jsx)(x.a,{path:m.d,className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(D.jsx)(k.a,{id:"path_editor_translate"})})]})]}):null,E?Object(D.jsx)(We,{defaultPermissions:G,open:E,onClose:A,onChange:U}):null,Object(D.jsxs)("button",{className:"text hasIcon",onClick:T,children:[Object(D.jsx)(x.a,{path:Z,className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(D.jsx)(k.a,{id:"path_editor_permissions"})})]}),Object(D.jsxs)("button",{className:"text hasIcon",onClick:J,children:[Object(D.jsx)(h.a,{className:"icon"}),Object(D.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(D.jsx)(k.a,{id:"path_editor_publish"})})]}),Object(D.jsx)(w.a,{block:t,setType:W,setProperty:z,typeOptions:["page","redirect"],trigger:function(e){return Object(D.jsx)("button",Object(j.a)(Object(j.a)({},e),{},{className:"default hasIcon",children:Object(D.jsx)(v.a,{className:"icon"})}))}})]}),X=t.properties.text||c("placeholder_main_headline");return Object(D.jsxs)("div",{className:"hasHeader ".concat(y.a.editor," ").concat("string"===typeof L&&""!==L?y.a["type_"+L]:""),children:[Object(D.jsx)(O.a,{children:Object(D.jsxs)("title",{children:["\u270d\ufe0f ",X]})}),Object(D.jsx)(d.a,{block:t,title:X,rightActions:Y}),Object(D.jsx)(_t,{type:L,defaultProperties:M,onChange:$}),Object(D.jsx)(Kt,{parentId:t._id||null,onChange:q,defaultValue:V})]},t._id)};t.default=function(){var e=Object(s.a)(),t=Object(a.useRef)(!1),n=Object(o.h)().id,c=void 0===n?"":n,i=Object(a.useState)({type:"page",properties:{},content:[]}),j=Object(r.a)(i,2),p=j[0],O=j[1],f=Object(a.useCallback)((function(e){O(e)}),[O]),h=Object(a.useState)(null),v=Object(r.a)(h,2),g=v[0],x=v[1],m=Object(u.a)();return Object(a.useEffect)((function(){m(c,["editor","owner"]).then((function(e){x(e)})).catch((function(e){console.error(e),x(!1)}))}),[c,m,x]),Object(a.useEffect)((function(){!g||"string"!==typeof c||""===c||t.current&&c===p._id||e(c).then((function(e){t.current=!0,f(e)}))}),[g,c,p,e,f]),!1===g?Object(D.jsxs)("div",{className:l.a.editor,children:[Object(D.jsx)(d.a,{block:null,title:"Error",rightActions:null}),Object(D.jsx)("div",{className:"basis_x1 ".concat(l.a.app," ").concat(l.a.spine_aligned),dir:"auto",children:Object(D.jsx)("main",{className:"".concat(l.a.contentWrapper),children:Object(D.jsx)(b.a,{errorName:"no_access"})})})]}):!0===g?Object(D.jsx)(Yt,{block:p,onSaveBlock:f}):null}}}]);
//# sourceMappingURL=7.73ee0803.chunk.js.map