{"version":3,"sources":["components/Header.js","components/edit/LocaleSelect.js","hooks/useLoadBlock.js","hooks/useBlockMatchesRoles.js","components/ErrorPages.js","components/Header.module.css","pages/Viewer.module.css","pages/Viewer.js"],"names":["Header","title","block","rightActions","notificationBanner","useSidebarContext","open","toggleSidebar","apollo_client","useApolloClient","blockId","_id","parentId","parent","useState","parentBlocks","setParentBlocks","siblingBlocks","setSiblingBlocks","loadParentBlocks","useCallback","query","getParentBlocks_Query","variables","then","a","data","error","blocks","parentBlocksSorted","sort","b","computed","console","catch","loadSiblingBlocks","getBlocks_Query","roots","types","archived","filter","useEffect","leftActions","onClick","className","style","margin","flexGrow","to","verticalAlign","opacity","length","trigger","triggerProps","padding","map","size","fontWeight","classes","header","headerBar","locales","_","en","de","es","pt","fr","it","nl","da","sv","nb","fi","mt","pl","ru","bg","tr","ar","el","ro","sl","localesArray","Object","entries","code","nativeName","defaultOptions","keys","LocaleSelect","defaultValue","onChange","options","undefined","hasOwnProperty","changedLocale","setChangedLocale","handleLocaleChange","newLocale","isOpen","flexShrink","width","textAlign","path","mdiTranslate","toUpperCase","marginLeft","lineHeight","paperProps","sx","maxHeight","close","includes","selected","useLoadBlock","getString","useLocalization","useSnackbar","enqueueSnackbar","closeSnackbar","handleLoadBlock","Promise","final_resolve","snackbarKey","loadingDataPromise","resolve","getBlock_Query","loadedBlock","variant","preventDuplicate","autoHideDuration","message","race","setTimeout","response","persist","type","useBlockMatchesRoles","handleLoadRoles","roles","blockMatchesRoles_Query","blockMatchesRoles","ErrorPage","errorName","description","buttons","href","window","domains","backend","encodeURIComponent","location","toString","id","module","exports","Viewer","loadingTheBlock","useRef","translateBlock","userLocales","loggedIn","useUser","loadBlock","loadBlocks","useLoadBlocks","useParams","properties","content","setBlock","contentBlocks","setContentBlocks","possibleLocales","setPossibleLocales","locale","setLocales","canView","setCanView","matchesRoles","current","newLoadedBlock","Array","isArray","newContentConfigs","ids2load","contentConfig","loadedContentBlocks","ids","find","newPossibleLocales","Set","flatMap","thisBlock","translations","t","text","Boolean","viewer","app","spine_aligned","dir","contentWrapper","coverphoto_url","getImageUrl","coverphoto","icon_url","icon","rightHeaderActions","whiteSpace","marginRight","titleWithRenderedMarkdown","__html","renderInlineMarkdown","metadata_image_url","name","property","dangerouslySetInnerHTML","backgroundImage","imageFormat","coverphotoIsNotSet","coverphotoIsSet","items","active","contentBlock"],"mappings":"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","file":"static/js/10.f72137bb.chunk.js","sourcesContent":["import { useState, useCallback, useEffect } from 'react'\n\nimport classes from './Header.module.css'\n\nimport {\n  Menu as MenuIcon,\n  MoreHoriz as MoreHorizIcon,\n  Home as HomeIcon,\n} from '@mui/icons-material'\n\nimport { Link } from 'react-router-dom'\n\nimport { useSidebarContext } from './Sidebar.js'\nimport ViewerAuto from './view/ViewerAuto.js'\nimport PopoverMenu from './PopoverMenu.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlocks_Query, getParentBlocks_Query } from '../graphql/queries'\n\nexport default function Header({ title, block = {}, rightActions, notificationBanner }) {\n  const { open, toggleSidebar } = useSidebarContext()\n  const apollo_client = useApolloClient()\n\n  const blockId = block ? block._id : null\n  const parentId = block ? block.parent : null\n\n  const [parentBlocks, setParentBlocks] = useState([])\n  const [siblingBlocks, setSiblingBlocks] = useState([])\n\n  const loadParentBlocks = useCallback(blockId => {\n    apollo_client.query({\n      query: getParentBlocks_Query,\n      variables: {\n        _id: blockId,\n      },\n    })\n      .then(async ({ data }) => {\n        if (typeof data.error === 'string' || !data.blocks) {\n          console.error(data.error)\n          setParentBlocks([])\n        }else{\n          const parentBlocksSorted = (data.blocks || [])\n            .sort((a, b) => b.computed.sort - a.computed.sort)\n\n          setParentBlocks(parentBlocksSorted)\n        }\n      })\n      .catch(async error => {\n        console.error('error', error)\n        setParentBlocks([])\n      })\n  }, [apollo_client, setParentBlocks])\n\n  const loadSiblingBlocks = useCallback((parentId, blockId) => {\n    apollo_client.query({\n      query: getBlocks_Query,\n      variables: {\n        roots: [parentId || blockId],\n        types: ['page', 'person', 'redirect'],\n        archived: false,\n      },\n    })\n      .then(async ({ data }) => {\n        if (typeof data.error === 'string' || !data.blocks) {\n          console.error(data.error)\n          setSiblingBlocks([])\n        }else{\n          setSiblingBlocks(\n            (data.blocks || [])\n              .filter(block => block._id !== blockId)\n          )\n        }\n      })\n      .catch(async error => {\n        console.error('error', error)\n        setSiblingBlocks([])\n      })\n  }, [apollo_client, setSiblingBlocks])\n\n  useEffect(() => {\n    if (blockId) {\n      loadParentBlocks(blockId)\n      loadSiblingBlocks(parentId, blockId)\n    }\n  }, [blockId, parentId, loadParentBlocks, loadSiblingBlocks])\n\n  const leftActions = <>\n    {\n      !open\n      ? <button onClick={toggleSidebar} className=\"text hasIcon\" style={{ margin: '0' }}>\n          <MenuIcon className=\"icon\" />\n        </button>\n      : null\n    }\n\n    <div style={{ flexGrow: '1' }}>\n      <Link to=\"/\">\n        <button className=\"text\" style={{ margin: 'calc(-2 * var(--basis))' }}>\n          <HomeIcon style={{ verticalAlign: 'middle' }} />\n        </button>\n      </Link>\n      <span style={{ margin: 'var(--basis_x2)', opacity: 'var(--alpha)' }}>/</span>\n\n    {\n      blockId\n      && parentBlocks.length > 0\n        ? <>\n          <PopoverMenu\n            trigger={triggerProps => (\n              <button {...triggerProps} className=\"text\" style={{ margin: 'calc(-2 * var(--basis))' }}>\n                <MoreHorizIcon style={{ verticalAlign: 'middle' }} />\n              </button>\n            )}\n          >\n            <div style={{\n              padding: 'var(--basis_x2)',\n            }}>\n              {\n                parentBlocks\n                .map((block) => {\n                  return <ViewerAuto\n                    key={block._id}\n                    block={block}\n                    size=\"line\"\n                  />\n                })\n              }\n            </div>\n          </PopoverMenu>\n          <span style={{ margin: 'var(--basis_x2)', opacity: 'var(--alpha)' }}>/</span>\n        </>\n        : null\n    }\n\n    {\n      siblingBlocks.length > 0\n        ? <PopoverMenu\n            trigger={triggerProps => (\n              <button {...triggerProps} className=\"text\" style={{ margin: 'calc(-2 * var(--basis))' }}>\n                <span style={{ fontWeight: 'bold' }}>\n                  {title}\n                </span>\n              </button>\n            )}\n          >\n            <div style={{\n              padding: 'var(--basis_x2)',\n            }}>\n              {\n                siblingBlocks\n                .map((block) => {\n                  return <ViewerAuto\n                    key={block._id}\n                    block={block}\n                    size=\"line\"\n                  />\n                })\n              }\n            </div>\n          </PopoverMenu>\n        : <span style={{ fontWeight: 'bold' }}>\n            {title}\n          </span>\n    }\n    </div>\n  </>\n\n  return <header className={classes.header}>\n    <div className={classes.headerBar}>\n      {leftActions}\n      {rightActions}\n    </div>\n    {\n      !!notificationBanner\n        ? <div className={classes.notificationBanner}>{notificationBanner}</div>\n        : null\n    }\n  </header>\n}\n","import { useState, useCallback } from 'react'\n\nimport {\n  MenuItem,\n} from '@mui/material'\n\nimport PopoverMenu from '../PopoverMenu.js'\n\nimport MdiIcon from '@mdi/react'\nimport {\n  mdiTranslate,\n} from '@mdi/js'\n\nconst locales = {\n  _: '??',\n  en: 'English',\n  de: 'Deutsch',\n  es: 'Español',\n  pt: 'Português',\n  fr: 'Français',\n  it: 'Italiano',\n  nl: 'Nederlands', // Dutch\n  da: 'Dansk', // Danish\n  sv: 'Svenska', // Swedish\n  nb: 'Norsk bokmål', // Norwegian\n  fi: 'Suomi', // Finish\n  mt: 'Malti', // Maltese\n  pl: 'Język polski', // Polish\n  ru: 'русский язык', // Russian\n  bg: 'български език', // Bulgarian\n  tr: 'Türkçe',\n  ar: 'اَلْعَرَبِيَّة', // Arabic\n  el: 'ελληνικά', // Greek\n  ro: 'limba română', // Romanian\n  sl: 'slovenščina', // Slovenian\n  // uk: 'украї́нська мо́ва', // Ukrainian\n  // cy: 'Cymraeg', // Welsh\n}\n\nconst localesArray = Object.entries(locales)\n.map(([code, nativeName]) => ({code, nativeName}))\n\nconst defaultOptions = Object.keys(locales)\n\nfunction LocaleSelect({\n  defaultValue,\n  onChange,\n  options = defaultOptions,\n}) {\n  if (\n    defaultValue === null\n    || defaultValue === undefined\n    || defaultValue === ''\n    || locales.hasOwnProperty(defaultValue) === false\n  ) {\n    defaultValue = '_'\n  }\n\n  const [changedLocale, setChangedLocale] = useState(defaultValue)\n\n  const handleLocaleChange = useCallback(newLocale => {\n    setChangedLocale(newLocale)\n    \n    if (newLocale === '_') {\n      newLocale = null\n    }\n\n    if (onChange) {\n      onChange(newLocale)\n    }\n  }, [ setChangedLocale, onChange ])\n  \n  return (\n    <PopoverMenu\n      trigger={(triggerProps, { isOpen }) => (\n        <button\n          {...triggerProps}\n          className=\"default hasIcon\"\n          style={{\n            margin: '0',\n            flexShrink: '0',\n          }}\n        >\n          <span style={{ width: '100%', textAlign: 'start' }}>\n          {\n            changedLocale === '_'\n            ? <MdiIcon\n              path={mdiTranslate}\n              className=\"icon\"\n            />\n            : changedLocale.toUpperCase()\n          }\n          </span>\n          <span style={{\n            marginLeft: 'var(--basis)',\n            lineHeight: '1',\n            verticalAlign: 'text-top',\n          }}>\n            { isOpen ? '▴' : '▾' }\n          </span>\n        </button>\n      )}\n      paperProps={{\n        sx: {\n          maxHeight: '300px',\n        }\n      }}\n    >\n      {({ close }) => (\n        <div style={{\n          padding: 'var(--basis_x2) 0',\n        }}>\n          {\n            localesArray\n            .filter(({ code }) => options.includes(code))\n            .map(({ code, nativeName }) => (\n              <MenuItem\n                key={code}\n                onClick={() => {\n                  handleLocaleChange(code)\n                  close()\n                }}\n                className=\"roundMenuItem\"\n                selected={code === changedLocale}\n              >\n                {code === '_' ? nativeName : `${code.toUpperCase()} — ${nativeName}`}\n              </MenuItem>\n            ))\n          }\n        </div>\n      )}\n    </PopoverMenu>    \n  )\n}\n\nexport default LocaleSelect\n","import { useCallback } from 'react'\n\nimport { useLocalization } from '../fluent/Localized.js'\n\nimport { useApolloClient } from '@apollo/client'\nimport { getBlock_Query } from '../graphql/queries'\n\nimport { useSnackbar } from 'notistack'\n\nfunction useLoadBlock() {\n  const { getString } = useLocalization()\n\n  const apollo_client = useApolloClient()\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar()\n\n  const handleLoadBlock = useCallback(_id => {\n    return new Promise(final_resolve => {\n    let snackbarKey = null\n\n    if (!_id || _id === '') {\n      final_resolve({\n        type: 'text',\n      })\n    } else {\n      const loadingDataPromise = new Promise(resolve => {\n        apollo_client.query({\n          query: getBlock_Query,\n          variables: {\n            _id,\n          },\n        })\n          .then(async ({ data }) => {\n            resolve('got-data')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            if (typeof data.error === 'string' || !data.block) {\n              if (data.error === 'no_edit_permission') {\n                enqueueSnackbar(getString('path_editor_edit_permission_error'), {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              } else {\n                enqueueSnackbar('' + data.error, {\n                  variant: 'error',\n                  preventDuplicate: true,\n                  autoHideDuration: 5000,\n                })\n              }\n            }else{\n              const loadedBlock = data.block\n              final_resolve(loadedBlock)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve('got-error')\n\n            if (snackbarKey !== null) {\n              closeSnackbar(snackbarKey)\n            }\n\n            enqueueSnackbar('[could not load data] '+error.message, {\n              variant: 'error',\n              preventDuplicate: true,\n              autoHideDuration: 2000,\n            })\n          })\n      })\n\n      // Show a loading-info-snackbar if loading the data takes too long.\n      Promise.race([\n        new Promise(resolve => {\n          setTimeout(() => {\n            resolve('show-loading')\n          }, 300)\n        }),\n        loadingDataPromise,\n      ])\n        .then(response => {\n          if (response === 'show-loading') {\n            snackbarKey = enqueueSnackbar(getString('path_editor_status_started_loading'), {\n              persist: true,\n              preventDuplicate: true,\n            })\n          }\n        })\n        .catch(error => console.error)\n    }\n    })\n  }, [\n    enqueueSnackbar,\n    closeSnackbar,\n    apollo_client,\n    getString,\n  ])\n\n  return handleLoadBlock\n}\n\nexport default useLoadBlock\n","import { useCallback } from 'react'\n\nimport { useApolloClient } from '@apollo/client'\nimport { blockMatchesRoles_Query } from '../graphql/queries'\n\nexport default function useBlockMatchesRoles() {\n  const apollo_client = useApolloClient()\n\n  const handleLoadRoles = useCallback((_id, roles = []) => {\n    return new Promise(resolve => {\n      if (!_id || _id === '') {\n        resolve(false)\n      } else {\n        apollo_client.query({\n          query: blockMatchesRoles_Query,\n          variables: {\n            _id,\n            roles,\n          },\n        })\n          .then(async ({ data }) => {\n            if (data.hasOwnProperty('blockMatchesRoles')) {\n              resolve(data.blockMatchesRoles)\n            }else{\n              resolve(false)\n            }\n          })\n          .catch(async error => {\n            console.error('error', error)\n            resolve(false)\n          })\n      }\n    })\n  }, [ apollo_client ])\n\n  return handleLoadRoles\n}\n","\nimport {\n  Login as LoginIcon,\n} from '@mui/icons-material'\n\nimport Localized from '../fluent/Localized.js'\n\nexport default function LoginScreen () {\n  return <>\n    <h1>Login to view content</h1>\n    <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n      <button className=\"text hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n        <LoginIcon className=\"icon\" />\n        <span>\n          <Localized id=\"login\" />\n        </span>\n      </button>\n    </a>\n  </>\n}\n\nexport function ErrorPage ({ errorName }) {\n  let title = 'Unknown Error'\n  let description = ''\n  let buttons = ''\n\n  if (errorName === 'no_access') {\n    title = `You don't have access to this page!`\n    \n    description = <>\n      <h2>If you are not logged in:</h2>\n      You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.<br/>\n\n      <h2>If you are logged in:</h2>\n        You propably don't have access to this page.\n    </>\n\n    buttons = <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n      <button className=\"text hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n        <LoginIcon className=\"icon\" />\n        <span>\n          <Localized id=\"login\" />\n        </span>\n      </button>\n    </a>\n  } else if (errorName === 'not_found') {\n    title = 'We could not find the requested URL…'\n    description = \"The URL you requested does currently not exist. Did you type the URL correctly?\"\n\n    buttons = <a href={`${window.domains.backend}login?redirect_to=${encodeURIComponent(window.location.toString())}`}>\n      <button className=\"text hasIcon\" style={{ margin: 'var(--basis_x4) 0 0 0' }}>\n        <LoginIcon className=\"icon\" />\n        <span>\n          <Localized id=\"login\" />\n        </span>\n      </button>\n    </a>\n  }\n\n  \n  return <>\n    <h1>{title}</h1>\n    <p>{description}</p>\n    {buttons}\n\n    <br/> {/* Spacing */}\n    <br/>\n    <br/>\n    <br/>\n\n    <p>\n      Please contact <a href=\"mailto:thomas.rosen@volteuropa.org\">thomas.rosen@volteuropa.org</a> if you think this is a bug.<br/>\n      Go to <a href=\"https://volteuropa.org\">volteuropa.org</a> for information about the Pan-European Political Movement.\n    </p>\n  </>\n\n  // <hr/>\n  // <p>\n  //   <a href=\"https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_client_errors\">HTTP Error Code</a>: {errorCode}\n  // </p>\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3mObx\",\"headerBar\":\"Header_headerBar__2YU41\",\"notificationBanner\":\"Header_notificationBanner__104SP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"Viewer_app__1_jMF\",\"spine_aligned\":\"Viewer_spine_aligned__2mJuq\",\"items\":\"Viewer_items__2FgjF\",\"coverphoto\":\"Viewer_coverphoto__16R-U\",\"icon\":\"Viewer_icon__219E5\",\"coverphotoIsSet\":\"Viewer_coverphotoIsSet__26PSP\",\"contentWrapper\":\"Viewer_contentWrapper__1HLN8\",\"type_p\":\"Viewer_type_p__O5DZS\",\"viewer\":\"Viewer_viewer__JHrvB\"};","import React, { useRef, useState, useEffect, useCallback } from 'react'\n\nimport {\n  useParams,\n  Link,\n} from 'react-router-dom'\n\nimport { Helmet } from 'react-helmet'\n\nimport { getImageUrl } from '../functions.js'\n\nimport { Localized, useLocalization } from '../fluent/Localized.js'\nimport useLoadBlock from '../hooks/useLoadBlock.js'\nimport useLoadBlocks from '../hooks/useLoadBlocks.js'\nimport useUser from '../hooks/useUser.js'\nimport useBlockMatchesRoles from '../hooks/useBlockMatchesRoles.js'\n\nimport { ErrorPage } from '../components/ErrorPages.js'\nimport Header from '../components/Header.js'\nimport ViewerAuto from '../components/view/ViewerAuto.js'\n\nimport LocaleSelect from '../components/edit/LocaleSelect.js'\n\nimport classes from './Viewer.module.css'\n\nimport {\n  EditSharp as EditIcon,\n} from '@mui/icons-material'\n\nimport { renderInlineMarkdown } from '../markdown.js'\n\nfunction Viewer () {\n  const loadingTheBlock = useRef(false)\n  const { getString, translateBlock, userLocales } = useLocalization()\n\n  const { loggedIn } = useUser()\n\n  const loadBlock = useLoadBlock()\n  const loadBlocks = useLoadBlocks()\n\n  let { id = '' } = useParams()\n\n  const [block, setBlock] = useState({\n    type: 'page',\n    properties: {},\n    content: [],\n  })\n  const [contentBlocks, setContentBlocks] = useState([])\n\n  const [possibleLocales, setPossibleLocales] = useState([])\n  const [locales, setLocales] = useState(block.properties.locale || userLocales || ['en'])\n  const handleLocaleChange = useCallback((newLocale) => {\n    setLocales([newLocale])\n  }, [ setLocales ])\n\n  const [canView, setCanView] = useState(null)\n  const blockMatchesRoles = useBlockMatchesRoles()\n  useEffect(() => {\n    blockMatchesRoles(id, ['viewer', 'owner'])\n      .then(matchesRoles => {\n        setCanView(matchesRoles)\n      })\n      .catch(error => {\n        console.error(error)\n        setCanView(false)\n      })\n  }, [ id, blockMatchesRoles, setCanView ])\n\n  useEffect(() => {\n    if (\n      canView\n      && loadingTheBlock.current === false\n      && typeof id === 'string'\n      && id !== ''\n      && id !== block._id\n    ) {\n      loadingTheBlock.current = true\n      loadBlock(id)\n        .then(async loadedBlock => {\n\n          let newLoadedBlock = loadedBlock\n\n          if (\n            Array.isArray(loadedBlock.content)\n            && loadedBlock.content.length > 0\n          ) {\n            let newContentConfigs = [...loadedBlock.content]\n\n            const ids2load = loadedBlock.content\n              .filter(contentConfig => !contentConfig.hasOwnProperty('block'))\n              .map(contentConfig => contentConfig.blockId)\n\n            let loadedContentBlocks = []\n            if (ids2load.length > 0) {\n              loadedContentBlocks = await loadBlocks({ ids: ids2load })\n            }\n          \n            newContentConfigs = newContentConfigs\n              .map(contentConfig => {\n                if (!contentConfig.hasOwnProperty('block')) {\n                  contentConfig.block = loadedContentBlocks.find(block => block._id === contentConfig.blockId)\n                }\n                return contentConfig\n              })\n\n            newLoadedBlock = {\n              ...newLoadedBlock,\n              content: newContentConfigs,\n            }\n          }\n\n          const blocks = (newLoadedBlock.content || [])\n          .map(contentConfig => contentConfig.block)\n\n          const newPossibleLocales = [...new Set(\n            [\n              loadedBlock,\n              ...blocks,\n            ]\n            .flatMap(thisBlock => [\n              thisBlock.properties.locale,\n              ...(thisBlock.properties.translations || [])\n                .filter(t => t.text && t.text.length > 0)\n                .map(t => t.locale),\n            ])\n            .filter(Boolean)\n          )]\n          setPossibleLocales(newPossibleLocales)\n\n          setBlock(newLoadedBlock)\n          setContentBlocks(blocks)\n          loadingTheBlock.current = false\n        })\n    }\n  }, [\n    canView,\n    id,\n    block,\n    block._id,\n    loadBlock,\n    setBlock,\n    loadBlocks,\n    setContentBlocks,\n    setPossibleLocales\n  ])\n\n  if (canView === false) {\n    return <div className={classes.viewer}>\n      <Header\n        block={null}\n        title=\"Error\"\n        rightActions={null}\n      />\n      <div className={`basis_x1 ${classes.app} ${classes.spine_aligned}`} dir=\"auto\">\n        <main className={`${classes.contentWrapper}`}>\n          <ErrorPage errorName=\"no_access\" />\n        </main>\n      </div>\n    </div>\n  } else {\n  const type = block.type || null\n\n  const title = translateBlock(block, locales, getString('placeholder_main_headline'))\n  const coverphoto_url = getImageUrl(block.properties.coverphoto)\n  const icon_url = getImageUrl(block.properties.icon)\n\n  // const pronouns = block.properties.pronouns || ''\n  \n  const rightHeaderActions = <>\n    <div className=\"buttonRow\" style={{ whiteSpace: 'nowrap' }}>\n      {\n        (loggedIn && !!block._id)\n        && <Link to={`/${block._id}/edit`} style={{ marginRight: 'var(--basis_x2)' }}>\n            <button className=\"text hasIcon\">\n              <EditIcon className=\"icon\" />\n              <span className=\"hideOnSmallScreen\" style={{verticalAlign: 'middle'}}><Localized id=\"edit_block\" /></span>\n            </button>\n          </Link>\n      }\n\n      {\n        possibleLocales.length > 1\n        && <LocaleSelect\n          onChange={handleLocaleChange}\n          defaultValue={locales[0] || userLocales[0] || 'en'}\n          options={possibleLocales}\n        />\n      }\n    </div>\n  </>\n\n  const titleWithRenderedMarkdown = {\n    __html: renderInlineMarkdown(title)\n  }\n\n  let metadata_image_url = ''\n  if (typeof coverphoto_url === 'string' && coverphoto_url.length > 0) {\n    metadata_image_url = `${window.domains.backend}download_url?f=jpg&w=1000&h=1000&url=${encodeURIComponent(coverphoto_url)}`\n  }\n\n  return <div className={classes.viewer}>\n    <Helmet>\n      <title>{title}</title>\n      <meta name=\"title\" content={title} />\n      <meta name=\"og:title\" content={title} />\n      <meta name=\"twitter:title\" content={title} />\n\n      <meta name=\"description\" content=\"\" />\n      <meta property=\"og:description\" content=\"\" />\n      <meta name=\"twitter:description\" content=\"\" />\n\n      <meta property=\"og:image\" content={metadata_image_url} />\n      <meta name=\"twitter:image\" content={metadata_image_url} />\n\n      <meta property=\"twitter:card\" content=\"summary\" />\n    </Helmet>\n\n    <Header\n      block={block}\n      title={\n        <span\n          dir=\"auto\"\n          dangerouslySetInnerHTML={titleWithRenderedMarkdown}\n        />\n      }\n      rightActions={rightHeaderActions}\n    />\n\n    <div className={`basis_x1 ${classes.app} ${classes.spine_aligned}`} dir=\"auto\">\n      {\n      (type === 'page' || type === 'person' || type === 'redirect')\n      && coverphoto_url !== ''\n          ? <div style={{ backgroundImage: `url(${window.domains.backend}download_url?f=${window.imageFormat || 'jpg'}&w=1400&h=400&url=${encodeURIComponent(coverphoto_url)})` }} className={classes.coverphoto}></div>\n          : null\n      }\n      <main className={`${classes.contentWrapper}`}>\n        {\n          (type === 'page' || type === 'person' || type === 'redirect')\n          && icon_url !== ''\n            ? <div\n                style={{\n                  backgroundImage: `url(${window.domains.backend}download_url?f=${window.imageFormat || 'jpg'}&w=400&h=400&url=${encodeURIComponent(icon_url)})`\n                }}\n                className={`${classes.icon} ${coverphoto_url === '' ? classes.coverphotoIsNotSet : classes.coverphotoIsSet}`}\n              ></div>\n            : null\n        }\n        {\n          title !== ''\n          ? <h1\n              dir=\"auto\"\n              dangerouslySetInnerHTML={titleWithRenderedMarkdown}\n              style={{\n                whiteSpace: 'pre-wrap',\n              }}\n            />\n          : null\n        }\n        { /* type === 'person' && pronouns !== '' ? <p dir=\"auto\"><strong style={{\n          padding: 'var(--basis)',\n          margin: 'var(--basis_x0_5) calc(-1 * var(--basis))',\n          display: 'inline-block',\n          backgroundColor: 'rgba(var(--on-background-rgb), var(--alpha-less))',\n        }}>{pronouns}</strong></p> : null */ }\n        <div className={classes.items}>\n          {\n            contentBlocks\n            .filter(block => !!block)\n            .filter(block => block.properties.active !== false)\n            .map(contentBlock => <ViewerAuto key={contentBlock._id} block={contentBlock} locales={locales} />)\n          }\n        </div>\n      </main>\n    </div>\n  </div>\n  }\n}\n\nexport default Viewer\n"],"sourceRoot":""}