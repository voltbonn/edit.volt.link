(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[0],{100:function(e,t,n){e.exports={row:"ContentEditor_row__JonRI",form:"ContentEditor_form__wtoB9",item:"ContentEditor_item__3U0XE",inlineRowButton:"ContentEditor_inlineRowButton__2pw6r",dragHandleButton:"ContentEditor_dragHandleButton__1Y_RP"}},111:function(e,t,n){e.exports={icon:"ViewerPageLine_icon__GiwAD",title:"ViewerPageLine_title__3zDUr"}},129:function(e,t,n){e.exports={content:"SidebarContent_content__RAi8X",header:"SidebarContent_header__1pYRG",headerBar:"SidebarContent_headerBar__2xkje"}},132:function(e,t,n){e.exports={blockRow:"BlockTree_blockRow__80Vim",blockRowActions:"BlockTree_blockRowActions__GDOGf"}},133:function(e,t,n){e.exports={icon:"ViewerPersonCard_icon__3fe_H",name:"ViewerPersonCard_name__3Ddq3"}},134:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},145:function(e,t,n){e.exports={app:"App_app__3hbGO",isStartpage:"App_isStartpage__1Q6rs"}},152:function(e,t,n){e.exports={main:"Sidebar_main__1MCX5",open:"Sidebar_open__gnBQb"}},153:function(e,t,n){e.exports={input:"Shortcode_input__Av6rm",hideSubmitButton:"Shortcode_hideSubmitButton__mbXgB"}},155:function(e,t,n){e.exports={rebuild_textarea:"HtmlInput_rebuild_textarea__ZfRzZ",show_placeholder:"HtmlInput_show_placeholder__hM8g2"}},168:function(e,t,n){var r=n(87).negotiateLanguages;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var c=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===c.length?null:e[c[0]]}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",c=e.map((function(e){return e[n]})).filter(Boolean);if(0===c.length)return null;var a=r(t,c,{defaultLocale:c[0],strategy:"lookup"});return 0===a.length?null:e.filter((function(e){return e[n]===a[0]}))}e.exports={fluentByObject:c,fluentByArray:a,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=a(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=c(e,t));return"string"!==typeof e&&(e=n),e}}},171:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},172:function(e,t,n){e.exports={error:"FancyInput_error__2DFWE"}},173:function(e,t,n){e.exports={editor:"Editor_editor__2hX0g",loadingContent:"Editor_loadingContent__2fqdK",editor_form_row:"Editor_editor_form_row__17Pul"}},200:function(e,t,n){},216:function(e,t,n){var r={"./de.ftl":[225,3],"./en.ftl":[226,4],"./fr.ftl":[227,5]};function c(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(r)},c.id=216,e.exports=c},217:function(e,t,n){"use strict";n.r(t);var r,c,a,o,i,s,l,u=n(21),b=n(5),d=n(1),j=n.n(d),p=n(35),O=n.n(p),h=(n(200),n(78)),f=n.n(h),x=n(145),v=n.n(x),g=n(20),m=n(4),_=n(11),k=n.n(_),y=n(22),w=n(278),C=n(43),N=n(338),F=Object(N.a)(r||(r=Object(C.a)(["\n  query getBlock ($_id: ID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        created\n      }\n    }\n  }\n"]))),I=Object(N.a)(c||(c=Object(C.a)(["\n  query getBlocks ($ids: [ID], $types: [String]) {\n    blocks (ids: $ids, types: $types) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        created\n      }\n    }\n  }\n"]))),S=(Object(N.a)(a||(a=Object(C.a)(["\n  query getBlockBySlug ($slug: ID!) {\n    blockBySlug (slug: $slug) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        created\n      }\n      permissions {\n        email\n        role\n      }\n    }\n  }\n"]))),Object(N.a)(o||(o=Object(C.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n    }\n  }\n"])))),B=Object(N.a)(i||(i=Object(C.a)(["\n  query getSiblingBlocks ($_id: ID!, $types: [String]) {\n    siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),P=Object(N.a)(s||(s=Object(C.a)(["\n  query getParentBlocks ($_id: ID!) {\n    parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed\n    }\n  }\n"]))),E=Object(N.a)(l||(l=Object(C.a)(["\n  query blockMatchesRoles ($_id: ID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"])));function D(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(d.useState)({}),n=Object(b.a)(t,2),r=n[0],c=n[1],a=Object(d.useState)(!1),o=Object(b.a)(a,2),i=o[0],s=o[1],l=Object(w.a)();return Object(d.useEffect)((function(){l.query({query:S}).then(function(){var e=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("self")?(c(n.self),s(n.self.logged_in)):(c({}),s(!1));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),c({}),s(!1)}))}),[e,c,s,l]),Object(m.a)(Object(m.a)({},r),{},{loggedIn:i})}var T,R,A=n(13),L=n(341),V=function(e){var t=Object(d.useState)(!1),n=Object(b.a)(t,2),r=n[0],c=n[1];return Object(d.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&c(t.matches);var n=function(){return c(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r,e]),r},M=n(129),G=n.n(M),z=n(350),W=n(283),H=n(345),U=n(282),q=n(344),$=n(285),J=n(286),Z=n(287),X=n(310),K=n(311),Q=n(312),Y=n(297),ee=n(313),te=n(314),ne=n(315),re=n(316),ce=n(96),ae=n(87),oe=n(59),ie=n(168),se=n.n(ie),le=n(0),ue=function(e){return Object(le.jsx)(ce.b,Object(m.a)(Object(m.a)({},e),{},{elems:Object(m.a)({br:Object(le.jsx)("br",{})},e.elems),children:Object(le.jsx)(j.a.Fragment,{children:e.children})}),e.id)};function be(e){return function(t){var n=j.a.useContext(oe.a);return j.a.createElement(e,Object(m.a)({fluentByObject:function(e,t){if(t||(t=null),e){var r,c=n.supportedLocales||[],a=Object.keys(e).filter((function(e){return c.includes(e)})),o=Object(ae.negotiateLanguages)(n.userLocales,a,{defaultLocale:n.defaultLocale}),i=Object(u.a)(o);try{for(i.s();!(r=i.n()).done;){var s=r.value;if(e[s])return e[s]}}catch(l){i.e(l)}finally{i.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||" ")}},t))}}function de(){var e=j.a.useContext(oe.a);return Object(m.a)(Object(m.a)({},e),{},{getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return se.a.fluentByAny(t,e.userLocales,n)}})}var je=Object(N.a)(T||(T=Object(C.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),pe=Object(N.a)(R||(R=Object(C.a)(["\n  mutation deleteBlock ($_id: ID!) {\n    deleteBlock (_id: $_id)\n  }\n"]))),Oe=n(92);var he=function(){var e=de().getString,t=Object(w.a)(),n=Object(Oe.b)(),r=n.enqueueSnackbar,c=n.closeSnackbar;return Object(d.useCallback)((function(n){return new Promise((function(a){var o=null;"object"===typeof(n=Object(m.a)({},n))&&null!==n&&n.hasOwnProperty("__typename")&&delete n.__typename;var i=new Promise((function(i){t.mutate({mutation:je,variables:{block:n}}).then(function(){var t=Object(y.a)(k.a.mark((function t(s){var l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=s.data,i("got-data"),null!==o&&c(o),"string"===typeof l.error?"no_edit_permission"===l.error?r(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):r(""+l.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(a(Object(m.a)(Object(m.a)({},n),{},{_id:l.saveBlock})),r(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(y.a)(k.a.mark((function t(n){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(n),i("got-error"),null!==o&&c(o),r(e("path_editor_status_error_while_saving",{error:n.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=r(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}))}),[r,c,t,e])},fe=n(36),xe=n(349),ve=n(284),ge=n(279),me=n(334),_e=n(280);var ke=function(e){var t=e.trigger,n=e.children,r=void 0===n?function(){}:n,c=Object(d.useRef)(null),a=Object(d.useState)(!1),o=Object(b.a)(a,2),i=o[0],s=o[1],l=function(){s(!1)},u=i?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(le.jsxs)(le.Fragment,{children:[t({ref:c,"aria-describedby":u,onClick:function(){s((function(e){return!e}))},style:{pointerEvents:i?"none":"all"}}),Object(le.jsxs)(ge.a,{children:[Object(le.jsx)("div",{onClick:l,style:{display:i?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(le.jsx)(me.a,{id:u,open:i,anchorEl:c.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}},{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,tether:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(le.jsx)(_e.a,Object(m.a)(Object(m.a)({},t),{},{children:Object(le.jsx)("div",{children:r&&"function"===typeof r?r({open:i,style:{transformOrigin:"top left"},closePopover:l}):null})}))}})]})]})},ye=["closePopover"];function we(e){var t=e.trigger,n=e.children;return Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(ke,{trigger:t,children:function(e){var t=e.closePopover,r=Object(fe.a)(e,ye);return Object(le.jsx)(xe.a,Object(m.a)(Object(m.a)({},r),{},{sx:{maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(le.jsxs)(q.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:[n,Object(le.jsx)(U.a,{style:{opacity:.2}}),Object(le.jsxs)(z.a,{style:{marginTop:"8px"},onClick:t,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(ve.a,{})}),Object(le.jsx)(H.a,{children:Object(le.jsx)(ue,{id:"block_menu_close_menu"})})]})]})}))}})})}var Ce={page:Object(le.jsx)($.a,{}),person:Object(le.jsx)(J.a,{}),action:Object(le.jsx)(Z.a,{})},Ne=["page","action"];function Fe(e){var t=e.createBlock;return Object(le.jsx)(le.Fragment,{children:Ne.map((function(e){return Object(le.jsxs)(z.a,{onClick:function(){return t({type:e})},children:[Object(le.jsx)(W.a,{children:Ce[e]}),Object(le.jsx)(H.a,{children:Object(le.jsx)(ue,{id:"create_new_"+e})})]},e)}))})}function Ie(e){var t=e.trigger,n=e.createBlock;return D().loggedIn?Object(le.jsxs)(we,{trigger:t,children:[Object(le.jsx)("div",{style:{marginTop:"8px"}}),Object(le.jsx)(Fe,{createBlock:n})]}):null}var Se=n(132),Be=n.n(Se),Pe=n(352),Ee=n(307),De=n(308),Te=n(309),Re=n(340),Ae=n(351),Le=n(342),Ve=n(291),Me=n(292),Ge=n(293),ze=n(294),We=n(295),He=n(296),Ue=n(298),qe=n(299),$e=n(300),Je=n(301),Ze=n(302),Xe=n(303),Ke=n(346),Qe=n(288);function Ye(e){var t=e.parentMenuIsOpen,n=void 0===t||t,r=e.label,c=void 0===r?"":r,a=e.triggerProps,o=void 0===a?{}:a,i=e.MenuListProps,s=void 0===i?{}:i,l=e.position,u=void 0===l?"right":l,j=e.onOpen,p=void 0===j?function(){}:j,O=e.children,h=Object(d.useRef)(null),f=Object(d.useState)(!1),x=Object(b.a)(f,2),v=x[0],g=x[1],_=v&&n,k=Object(d.useCallback)((function(){var e=!_;g(e),!0===e&&p()}),[g,_,p]),y=Object(d.useCallback)((function(){g(!1)}),[g]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(z.a,Object(m.a)(Object(m.a)({},o),{},{ref:h,onClick:k,style:Object(m.a)({display:"flex",justifyContent:"space-between"},o.style),children:[Object(le.jsx)("div",{style:{display:"flex"},children:c}),Object(le.jsx)(Qe.a,{style:{marginRight:"-10px"}})]})),Object(le.jsx)(Ke.a,{style:{pointerEvents:"none"},anchorEl:h.current,anchorOrigin:{vertical:"top",horizontal:"right"===u?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"===u?"left":"right"},open:_,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:y,sx:{marginTop:"-8px"},MenuListProps:Object(m.a)(Object(m.a)({},s),{},{sx:Object(m.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},s.sx)}),children:Object(le.jsxs)("div",{style:{pointerEvents:"auto"},children:[O,Object(le.jsx)(U.a,{style:{opacity:.2}}),Object(le.jsxs)(z.a,{style:{marginTop:"8px"},onClick:y,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(ve.a,{})}),Object(le.jsx)(ue,{id:"block_menu_close_menu"})]})]})})]})}var et=["closePopover","open"];var tt=be((function(e){var t=e.block,n=void 0===t?{}:t,r=e.getString,c=e.trigger,a=e.setType,o=e.createBlock,i=e.toggle_active,s=void 0===i?null:i,l=e.active,u=void 0===l?null:l,b=e.onRemoveRow,j=void 0===b?null:b,p=(e.addRowBefore,Object(g.g)()),O=n._id,h=void 0===O?"":O,f=n.type,x=void 0===f?"":f,v=Object(d.useCallback)((function(){p("/view/".concat(h))}),[h,p]),_=Object(d.useCallback)((function(){p("/edit/".concat(h))}),[h,p]),k=Object(d.useCallback)((function(e){o(Object(m.a)(Object(m.a)({},e),{},{parent:h}))}),[o,h]),y=he(),w=Object(d.useCallback)((function(e){y(Object(m.a)(Object(m.a)({},n),{},{parent:e}))}),[y,n]),C=n.metadata||{};return Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(ke,{trigger:c,children:function(e){var t=e.closePopover,n=e.open,c=Object(fe.a)(e,et);return Object(le.jsx)(xe.a,Object(m.a)(Object(m.a)({},c),{},{sx:{maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(le.jsxs)(q.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%"},children:["function"===typeof a?Object(le.jsxs)(Ye,{parentMenuIsOpen:n,label:Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Ve.a,{})}),Object(le.jsx)(ue,{id:"block_menu_choose_type_label"})]}),MenuListProps:{style:{marginTop:"-8px"}},children:[Object(le.jsx)(Ae.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-8px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:Object(le.jsx)(ue,{id:"block_menu_choose_type_label"})}),Object(le.jsx)("div",{style:{height:"4px"}}),[{value:"page",icon:Object(le.jsx)($.a,{}),label:r("block_menu_type_label_page")},{value:"person",icon:Object(le.jsx)(J.a,{}),label:r("block_menu_type_label_person")},{value:"button",icon:Object(le.jsx)(Me.a,{}),label:r("block_menu_type_label_button")},{value:"headline",icon:Object(le.jsx)(Ge.a,{}),label:r("block_menu_type_label_headline")},{value:"text",icon:Object(le.jsx)(ze.a,{}),label:r("block_menu_type_label_text")},{value:"divider",icon:Object(le.jsx)(We.a,{}),label:r("block_menu_type_label_divider")},{value:"checkbox",icon:Object(le.jsx)(He.a,{}),label:r("block_menu_type_label_checkbox")},{value:"action",icon:Object(le.jsx)(Z.a,{}),label:r("block_menu_type_label_action")}].map((function(e){return Object(le.jsxs)(z.a,{selected:e.value===x,onClick:function(){return a(e.value)},children:[Object(le.jsx)(W.a,{children:e.icon}),e.label]},e.value)}))]}):null,"function"===typeof o?Object(le.jsx)(Ye,{parentMenuIsOpen:n,label:Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Y.a,{})}),Object(le.jsx)(ue,{id:"block_menu_create_child_block"})]}),children:Object(le.jsx)(Fe,{createBlock:k})}):null,Object(le.jsxs)(Ye,{parentMenuIsOpen:n,label:Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Ue.a,{})}),Object(le.jsx)(ue,{id:"block_menu_change_parent"})]}),MenuListProps:{style:{marginTop:"-8px"}},children:[Object(le.jsx)(Ae.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-8px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:Object(le.jsx)(ue,{id:"block_menu_change_parent"})}),Object(le.jsx)("div",{style:{height:"8px"}}),Object(le.jsxs)(z.a,{onClick:function(e){return w(null)},children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(qe.a,{})}),Object(le.jsx)(ue,{id:"block_menu_change_parent_none"})]}),Object(le.jsx)(U.a,{style:{opacity:.2}}),Object(le.jsx)("div",{style:{padding:"0 var(--basis_x2)",marginBottom:"8px"},children:Object(le.jsx)(Pt,{onClick:function(e){return w(e._id)},blockMenu:!1,types:["page","person"],filterBlockIds:[h]})})]}),"boolean"===typeof u&&s?Object(le.jsxs)(z.a,{onClick:s,children:[Object(le.jsx)(W.a,{children:u?Object(le.jsx)($e.a,{}):Object(le.jsx)(Je.a,{})}),u?Object(le.jsx)(ue,{id:"block_menu_hide"}):Object(le.jsx)(ue,{id:"block_menu_show"})]}):null,"string"===typeof h&&""!==h?Object(le.jsxs)("div",{children:["function"===typeof a||"boolean"===typeof u&&s||j||"function"===typeof o?Object(le.jsx)(U.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}):null,Object(le.jsxs)(z.a,{style:{marginTop:"8px"},onClick:v,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Ze.a,{})}),Object(le.jsx)(ue,{id:"view_block"})]}),Object(le.jsxs)(z.a,{onClick:_,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Xe.a,{})}),Object(le.jsx)(ue,{id:"edit_block"})]})]}):null,Object(le.jsx)(U.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),Object(le.jsxs)(z.a,{onClick:t,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(ve.a,{})}),Object(le.jsx)(ue,{id:"block_menu_close_menu"})]}),Object(le.jsx)(U.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),Object(le.jsx)(Le.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(le.jsx)(H.a,{primary:Object(le.jsx)(ue,{id:"block_menu_info_created"}),secondary:(C.created||"").replace(/[TZ]/g," ")})}),Object(le.jsx)(Le.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(le.jsx)(H.a,{primary:Object(le.jsx)(ue,{id:"block_menu_info_modified"}),secondary:(C.modified||"").replace(/[TZ]/g," ")})})]})}))}})})}));var nt=function(e){var t=e.block;return Object(le.jsx)("h2",{dir:"auto",children:t.properties.text||""})};var rt=function(e){var t=e.block,n=Object(d.useState)({__html:""}),r=Object(b.a)(n,2),c=r[0],a=r[1];return Object(d.useEffect)((function(){var e=t.properties.text||"";e=e.replace(/\n/g,"<br>"),a({__html:e})}),[t,a]),Object(le.jsx)("p",{dir:"auto",dangerouslySetInnerHTML:c,style:{"white-space":"pre-wrap"}})};var ct=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(c=t.properties.action.url);var a=t.properties.text||"",o=r.hasOwnProperty("click");return!1===o&&""!==c?Object(le.jsx)("a",{href:c,children:Object(le.jsx)("button",{dir:"auto",style:{margin:"0"},children:a})}):!0===o?Object(le.jsx)("button",{dir:"auto",disabled:"disabled",style:{margin:"0"},onClick:r.onclick,children:a}):Object(le.jsx)("button",{dir:"auto",disabled:"disabled",style:{margin:"0"},children:a})};function at(){return Object(le.jsx)("hr",{})}var ot=n(304);var it=function(e){var t=e.block,n=t.properties.text||"",r=Boolean(t.properties.checked),c={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(le.jsxs)("p",{dir:"auto",children:[r?Object(le.jsx)(He.a,{style:c}):Object(le.jsx)(ot.a,{style:c}),n]})},st=n(305),lt=n(111),ut=n.n(lt);var bt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=de().getString,a=Object(g.g)(),o=t._id,i=Object(d.useCallback)((function(){a("/view/".concat(o))}),[a,o]),s=t.properties.icon||"",l=t.properties.text||c("placeholder_main_headline");return Object(le.jsx)("div",{onClick:r.hasOwnProperty("click")?r.click:i,className:"clickable_card ".concat(ut.a.root),children:Object(le.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[""===s?Object(le.jsx)(st.a,{className:ut.a.icon}):Object(le.jsx)("div",{className:ut.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(s),")")},alt:l}),Object(le.jsx)("span",{dir:"auto",className:ut.a.title,children:l})]})})},dt=n(97),jt=n.n(dt);var pt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=de().getString,a=Object(g.g)(),o=t._id,i=Object(d.useCallback)((function(){a("/view/".concat(o))}),[a,o]),s=t.properties.coverphoto||"",l=t.properties.icon||"",u=t.properties.text||c("placeholder_main_headline"),b=t.properties.description||"";return Object(le.jsxs)("div",{onClick:r.hasOwnProperty("click")?r.click:i,className:"clickable_card ".concat(jt.a.root),children:[""===s?null:Object(le.jsx)("div",{className:jt.a.coverphoto,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(s),")")},alt:u}),Object(le.jsxs)("div",{children:[""===l?Object(le.jsx)(st.a,{className:jt.a.icon}):Object(le.jsx)("div",{className:jt.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(l),")")},alt:u}),Object(le.jsx)("span",{dir:"auto",className:jt.a.title,children:u}),""!==b?Object(le.jsx)("p",{dir:"auto",children:b}):null]})]})},Ot=n(306),ht=n(133),ft=n.n(ht);var xt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=Object(g.g)(),a=t._id,o=Object(d.useCallback)((function(){c("/view/".concat(a))}),[c,a]),i=t.properties.icon||"",s=t.properties.text||"";return Object(le.jsxs)("div",{onClick:r.hasOwnProperty("click")?r.click:o,className:"clickable_card",style:{display:"flex",alignItems:"center"},children:[""===i?Object(le.jsx)(Ot.a,{className:ft.a.icon}):Object(le.jsx)("div",{className:ft.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(i),")")},alt:s}),Object(le.jsx)("span",{className:ft.a.name,dir:"auto",children:s})]})},vt=n(71),gt=n.n(vt),mt=n(72),_t=n(49),kt=n.n(_t);var yt=function(e){var t=e.block,n=void 0===t?{}:t,r=e.actions,c=void 0===r?{}:r,a=Object(g.g)(),o=n._id,i=Object(d.useCallback)((function(){a("/view/".concat(o))}),[a,o]),s=n.properties.text||"",l=n.properties.description||"",u=null,b=(n.properties||{}).trigger||{},j=b.type;u="path"===j?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.e,size:1,className:kt.a.icon}),Object(le.jsxs)("p",{children:["volt.link/",b.path]})]}):"click"===j?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.d,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:b.blockId})]}):"cron"===j?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.h,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:b.cron})]}):"block_change"===j?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.g,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:b.blockId})]}):Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Z.a,{className:kt.a.icon}),Object(le.jsx)("p",{children:Object.keys(b).length>0?JSON.stringify(b):null})]});var p=null,O=(n.properties||{}).action||{},h=O.type;return p="open_url"===h?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.i,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:O.url})]}):"render_block"===h?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.a,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:O.blockId})]}):"run_block"===h?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.c,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:O.blockId})]}):"send_payload"===h?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.b,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:O.blockId})]}):Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(gt.a,{path:mt.f,size:1,className:kt.a.icon}),Object(le.jsx)("p",{children:Object.keys(O).length>0?JSON.stringify(O):null})]}),Object(le.jsx)("div",{onClick:c.hasOwnProperty("click")?c.click:i,className:"clickable_card ".concat(kt.a.root),children:Object(le.jsxs)("div",{children:[""!==s?Object(le.jsx)("div",{dir:"auto",className:kt.a.title,children:s}):null,""!==l?Object(le.jsx)("p",{dir:"auto",children:l}):null,null!==u?Object(le.jsx)("div",{className:kt.a.iconLine,children:u}):null,null!==p?Object(le.jsx)("div",{className:kt.a.iconLine,children:p}):null]})})},wt=n(171),Ct=n.n(wt),Nt=["block","actions","size","style"];var Ft=function(e){var t=e.block,n=void 0===t?{}:t,r=e.actions,c=void 0===r?{}:r,a=e.size,o=void 0===a?"card":a,i=e.style,s=Object(fe.a)(e,Nt),l=null;switch(n.type||null){case"headline":l=Object(le.jsx)(nt,Object(m.a)({block:n,actions:c},s),n._id);break;case"text":l=Object(le.jsx)(rt,Object(m.a)({block:n,actions:c},s),n._id);break;case"button":l=Object(le.jsx)(ct,Object(m.a)({block:n,actions:c},s),n._id);break;case"divider":l=Object(le.jsx)(at,Object(m.a)({block:n,actions:c},s),n._id);break;case"checkbox":l=Object(le.jsx)(it,Object(m.a)({block:n,actions:c},s),n._id);break;case"page":switch(o){case"line":l=Object(le.jsx)(bt,Object(m.a)({block:n,actions:c},s),n._id);break;default:l=Object(le.jsx)(pt,Object(m.a)({block:n,actions:c},s),n._id)}break;case"person":l=Object(le.jsx)(xt,Object(m.a)({block:n,actions:c},s),n._id);break;case"action":l=Object(le.jsx)(yt,Object(m.a)({block:n,actions:c},s),n._id);break;default:l=JSON.stringify(n)}return Object(le.jsx)("div",{className:Ct.a.root,style:i,children:l},n._id)},It=function(e){return!!e&&Array.isArray(e)&&e.length>0};function St(e){var t=e.levels,n=e.level,r=e.createBlock,c=e.onClick,a=e.blockMenu,o=e.filterBlockIds;return It(n)?n.filter((function(e){return!o||0===o.length||!o.includes(e._id)})).map((function(e){return Object(le.jsx)(Bt,{block:e,levels:t,createBlock:r,onClick:c,blockMenu:a,filterBlockIds:o},e._id)})):null}function Bt(e){var t=e.block,n=e.levels,r=e.createBlock,c=e.onClick,a=e.blockMenu,o=e.filterBlockIds,i=Object(d.useState)(!1),s=Object(b.a)(i,2),l=s[0],u=s[1],j=Object(d.useCallback)((function(){u((function(e){return!e}))}),[u]),p={click:function(){c(t)}},O=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ft,{size:"line",block:t,actions:p,style:{flexGrow:"1",width:"100%"}}),!0===a?Object(le.jsx)("div",{className:Be.a.blockRowActions,children:Object(le.jsx)(tt,{block:t,createBlock:r,trigger:function(e){return Object(le.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{className:"text hasIcon",style:{margin:"0 0 0 var(--basis_x2)",padding:"var(--basis) 0",flexShrink:"0"},children:Object(le.jsx)(Ee.a,{className:"icon"})}))}})}):null]}),h=n[t._id];return It(h)?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("div",{style:{display:"flex",minHeight:"calc(6 * var(--basis))"},children:[Object(le.jsx)("button",{className:"text hasIcon",style:{background:"transparent",margin:"0 calc(-0.8 * var(--basis)) 0 calc(-7 * var(--basis))",padding:"0",flexShrink:"0"},onClick:j,children:l?Object(le.jsx)(De.a,{className:"icon"}):Object(le.jsx)(Te.a,{className:"icon"})}),Object(le.jsx)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",width:"100%"},className:Be.a.blockRow,children:O},t._id)]}),Object(le.jsx)("div",{style:{marginLeft:"calc(6 * var(--basis))"},children:Object(le.jsx)(Pe.a,{in:l,timeout:"auto",children:Object(le.jsx)(St,{levels:n,level:h,createBlock:r,onClick:c,blockMenu:a,filterBlockIds:o})})})]}):Object(le.jsx)("div",{style:{display:"flex",alignItems:"center",flexDirection:"row",marginLeft:"calc(-2.5 * var(--basis))",minHeight:"calc(6 * var(--basis))"},className:Be.a.blockRow,children:O},t._id)}function Pt(e){var t=e.createBlock,n=void 0===t?function(){}:t,r=e.onClick,c=void 0===r?function(){}:r,a=e.blockMenu,o=void 0!==a&&a,i=e.onGetRefetch,s=void 0===i?function(){}:i,l=e.types,u=void 0===l?["page","person","action"]:l,b=e.filterBlockIds,j=void 0===b?[]:b,p=Object(Re.a)(I,{variables:{types:u}}),O=p.data,h=p.refetch;Object(d.useEffect)((function(){h()}),[u,h]),Object(d.useEffect)((function(){s(h)}),[s,h]);var f=(null===O||void 0===O?void 0:O.blocks)||[],x=f.reduce((function(e,t){var n=t.parent||"_root";return e[n]||(e[n]=[]),e[n].push(t),e}),{}),v=Object.keys(x).sort((function(e,t){return e.localeCompare(t)}));return Object(le.jsx)("div",{style:{marginLeft:"calc(5 * var(--basis))"},children:f.length>0?Object(le.jsx)(St,{levels:x,level:x[v[0]],createBlock:n,onClick:c,blockMenu:o,filterBlockIds:j}):null})}var Et={page:Object(le.jsx)($.a,{}),person:Object(le.jsx)(J.a,{}),action:Object(le.jsx)(Z.a,{})};function Dt(){var e=D().loggedIn,t=Lt().toggleSidebar,n=Object(g.f)("/"),r=Object(d.useRef)(null),c=r.current,a=Object(d.useState)({page:!0,person:!0,action:!0}),o=Object(b.a)(a,2),i=o[0],s=o[1],l=Object.entries(i).filter((function(e){return!0===Object(b.a)(e,2)[1]})).map((function(e){return Object(b.a)(e,1)[0]})),u=he(),j=Object(g.g)(),p=Object(d.useCallback)((function(e){u(e).then((function(e){j("/edit/".concat(e._id))})).catch((function(e){console.error(e)}))}),[u,j]),O=Object(d.useCallback)((function(e){var t=Object(m.a)({},i);t[e]=!t[e],s(t),c()}),[i,s,c]),h=Object(d.useCallback)((function(e){j("/view/".concat(e._id))}),[j]);return Object(le.jsxs)("div",{className:G.a.content,children:[Object(le.jsx)("header",{className:G.a.header,children:Object(le.jsxs)("div",{className:G.a.headerBar,children:[n?Object(le.jsx)("div",{}):Object(le.jsx)("button",{onClick:t,className:"text hasIcon",style:{margin:"0"},children:Object(le.jsx)(X.a,{className:"icon"})}),Object(le.jsxs)("div",{children:[Object(le.jsx)("button",{className:"text hasIcon",onClick:function(){return c()},children:Object(le.jsx)(K.a,{className:"icon"})}),Object(le.jsxs)(we,{trigger:function(e){return Object(le.jsx)("button",Object(m.a)(Object(m.a)({className:"text hasIcon"},e),{},{children:Object(le.jsx)(Q.a,{className:"icon"})}))},children:[Object(le.jsx)("div",{style:{marginTop:"8px"}}),Object.keys(i).map((function(e){return Object(le.jsxs)(z.a,{onClick:function(){return O(e)},selected:l.includes(e),children:[Object(le.jsx)(W.a,{children:Et[e]}),Object(le.jsx)(H.a,{children:Object(le.jsx)(ue,{id:"block_menu_type_label_plural_"+e})})]},e)}))]}),Object(le.jsx)(Ie,{trigger:function(e){return Object(le.jsx)("button",Object(m.a)(Object(m.a)({className:"white hasIcon"},e),{},{children:Object(le.jsx)(Y.a,{className:"icon"})}))},createBlock:p})]})]})}),Object(le.jsx)(Pt,{onClick:h,createBlock:p,blockMenu:!0,onGetRefetch:function(e){r.current=e},types:l}),Object(le.jsx)("br",{}),Object(le.jsx)(U.a,{style:{opacity:.2}}),Object(le.jsx)("br",{}),Object(le.jsxs)(q.a,{style:{maxWidth:"100%"},children:[e?Object(le.jsx)("a",{href:"".concat(window.domains.backend,"logout?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(le.jsxs)(z.a,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(ee.a,{})}),Object(le.jsx)(H.a,{primary:Object(le.jsx)(ue,{id:"logout"})})]})}):Object(le.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(le.jsxs)(z.a,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(te.a,{})}),Object(le.jsx)(H.a,{primary:Object(le.jsx)(ue,{id:"login"})})]})}),Object(le.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:Object(le.jsxs)(z.a,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(ne.a,{})}),Object(le.jsx)(H.a,{primary:Object(le.jsx)(ue,{id:"contact"})})]})}),Object(le.jsx)("a",{href:"https://github.com/voltbonn/edit.volt.link",target:"_blank",rel:"noopener noreferrer",children:Object(le.jsxs)(z.a,{children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(re.a,{})}),Object(le.jsx)(H.a,{primary:Object(le.jsx)(ue,{id:"source_code"})})]})})]})]})}var Tt=n(152),Rt=n.n(Tt),At=Object(d.createContext)({});function Lt(){return Object(d.useContext)(At)}function Vt(e){var t=e.children,n=Object(d.useState)(!1),r=Object(b.a)(n,2),c=r[0],a=r[1],o=!Object(g.f)("/")&&c,i=Object(d.useCallback)((function(){a((function(e){return!e}))}),[a]);return Object(le.jsx)(At.Provider,{value:{open:o,setOpen:a,toggleSidebar:i},children:t})}function Mt(){var e=Lt(),t=e.open,n=e.toggleSidebar,r="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),c=V("(min-width: 960px)");return t?Object(le.jsx)(L.a,{variant:c?"permanent":"temporary",anchor:"left",open:t,onOpen:n,onClose:n,disableBackdropTransition:!r,disableDiscovery:r,sx:Object(A.a)({width:320,flexShrink:0},"& .MuiDrawer-paper",{width:320,boxSizing:"border-box",backgroundColor:"var(--background-contrast)",color:"var(--on-background)",border:"none"}),PaperProps:{sx:{background:"var(--background-contrast)",color:"var(--on-background)"}},children:Object(le.jsx)(Dt,{})}):null}function Gt(e){var t=e.children,n=Lt().open;return Object(le.jsx)("main",{className:"".concat(Rt.a.main," ").concat(n?Rt.a.open:""),style:{"--sidebarWidth":"320px"},children:t})}var zt=n(153),Wt=n.n(zt);var Ht=n(134),Ut=n.n(Ht),qt=n(317),$t=n(318),Jt=n(319),Zt=n(41);function Xt(e){var t=e.title,n=e.block,r=void 0===n?{}:n,c=e.rightActions,a=e.notificationBanner,o=Lt(),i=o.open,s=o.toggleSidebar,l=Object(w.a)(),u=r?r._id:null,j=Object(d.useState)([]),p=Object(b.a)(j,2),O=p[0],h=p[1],f=Object(d.useState)([]),x=Object(b.a)(f,2),v=x[0],g=x[1],_=Object(d.useCallback)((function(e){l.query({query:P,variables:{_id:e}}).then(function(){var e=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.parentBlocks?h(n.parentBlocks||[]):(console.error(n.error),h([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),h([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[l,h]),C=Object(d.useCallback)((function(e){l.query({query:B,variables:{_id:e,types:["page","person","action"]}}).then(function(){var t=Object(y.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"string"!==typeof(r=n.data).error&&r.siblingBlocks?g((r.siblingBlocks||[]).filter((function(t){return t._id!==e}))):(console.error(r.error),g([]));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),g([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[l,g]);Object(d.useEffect)((function(){u&&(_(u),C(u))}),[u,_,C]);var N=Object(le.jsxs)(le.Fragment,{children:[i?null:Object(le.jsx)("button",{onClick:s,className:"text hasIcon",style:{margin:"0"},children:Object(le.jsx)(qt.a,{className:"icon"})}),Object(le.jsxs)("div",{style:{flexGrow:"1"},children:[Object(le.jsx)(Zt.b,{to:"/",children:Object(le.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(le.jsx)($t.a,{style:{verticalAlign:"middle"}})})}),Object(le.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),u&&O.length>0?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(we,{trigger:function(e){return Object(le.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(le.jsx)(Jt.a,{style:{verticalAlign:"middle"}})}))},children:O.map((function(e){return Object(le.jsx)(Ft,{block:e,size:"line",style:{margin:"var(--basis_x4) var(--basis_x2)"}},e._id)}))}),Object(le.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,v.length>0?Object(le.jsx)(we,{trigger:function(e){return Object(le.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(le.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:v.map((function(e){return Object(le.jsx)(Ft,{block:e,size:"line",style:{margin:"var(--basis_x4) var(--basis_x2)"}},e._id)}))}):Object(le.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(le.jsxs)("header",{className:Ut.a.header,children:[Object(le.jsxs)("div",{className:Ut.a.headerBar,children:[N,c]}),a?Object(le.jsx)("div",{className:Ut.a.notificationBanner,children:a}):null]})}var Kt=/^([\+-\.0-9A-Z\u017F\u212A]+:(?:\/\/)?)[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+(?:\.[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+)+[!#-;=\?-\[\]_a-z~\xC0-\xFF\u017F\u1E9E\u212A\u212B]+$/gi,Qt=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Yt=/^(?:(?![\/:])[\s\S])+@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/gi;var en=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,c=e.onBlur,a=e.onError,o=e.placeholder,i=void 0===o?"https://":o,s=e.style,l=e.className,u=Object(d.useState)(n),j=Object(b.a)(u,2),p=j[0],O=j[1],h=Object(d.useCallback)((function(e){var t=e.target.value||"",n="";if(""!==t){var c=t.split(":"),o=c.shift(),i=c.join(":");"tel"===o||("mailto"===o||t.match(Yt)?i.match(Qt)||(n="invalid_mailto_url"):t.match(Kt)||(n="invalid_url"))}r&&r(t),a&&a(n),O(t)}),[r,a]),f=Object(d.useCallback)((function(){c&&c(p)}),[c,p]);return Object(le.jsx)("input",{type:"url",onChange:h,onBlur:f,defaultValue:n,placeholder:i,style:s,className:l})},tn=n(172),nn=n.n(tn),rn=["children","className","style"];var cn=function(e){var t=e.children,n=e.className,r=e.style,c=(Object(fe.a)(e,rn),Object(d.useState)("")),a=Object(b.a)(c,2),o=a[0],i=a[1];return Object(le.jsxs)("div",{className:n,style:r,children:[t({setError:i}),o?Object(le.jsx)("div",{className:nn.a.error,children:Object(le.jsx)(ue,{id:"error_"+o})}):null]})};var an=be((function(e){var t,n,r=e.getString,c=e.rightHeaderActions,a=Object(g.g)(),o=Object(d.useState)(""),i=Object(b.a)(o,2),s=i[0],l=i[1],u=Object(d.useState)(!1),j=Object(b.a)(u,2),p=j[0],O=j[1],h=Object(d.useState)(""),f=Object(b.a)(h,2),x=f[0],v=f[1];t=["Enter"],n=function(){p&&_()},Object(d.useEffect)((function(){function e(e){t.includes(e.key)&&n(e)}return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[t,n]);var m=Object(d.useCallback)((function(e){l(e),O(""!==e)}),[l,O]),_=Object(d.useCallback)((function(){if(p){var e={use_as:"redirect",redirect:s};fetch("".concat(window.domains.backend,"set_redirect"),{mode:"cors",credentials:"include",method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"===typeof t.error?(console.error(t.error),v(t.error)):"string"===typeof t.code?a("/edit/".concat(t.code)):v("Undefined Error. Please contact thomas.rosen@volteuropa.org");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error(t),v(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[p,s,a]);return Object(le.jsxs)("div",{children:[Object(le.jsx)(Xt,{title:Object(le.jsx)(ue,{id:"create_shortcode_headline"}),rightActions:c||null}),Object(le.jsx)("p",{children:Object(le.jsx)(ue,{id:"create_shortcode_info"})}),Object(le.jsxs)("div",{className:"".concat(Wt.a.input," ").concat(!0===p?"":Wt.a.hideSubmitButton),children:[Object(le.jsx)(cn,{style:{flexGrow:"1",display:"flex",flexDirection:"column"},children:function(e){var t=e.setError;return Object(le.jsx)(en,{onError:t,placeholder:r("create_shortcode_url_placeholder"),onChange:m})}}),!0===p?Object(le.jsx)("button",{className:"green",onClick:_,children:Object(le.jsx)(ue,{id:"create_shortcode_url_submit"})}):null]}),""!==x?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h3",{className:"red",children:Object(le.jsx)(ue,{id:"headline_errors"})}),Object(le.jsx)("p",{children:x})]}):null]})}));var on=function(){var e=de().getString,t=Object(w.a)(),n=Object(Oe.b)(),r=n.enqueueSnackbar,c=n.closeSnackbar;return Object(d.useCallback)((function(n){return new Promise((function(a){var o=null;if(n&&""!==n){var i=new Promise((function(i){t.query({query:F,variables:{_id:n}}).then(function(){var t=Object(y.a)(k.a.mark((function t(n){var s,l;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=n.data,i("got-data"),null!==o&&c(o),"string"!==typeof s.error&&s.block?(l=s.block,a(l)):"no_edit_permission"===s.error?r(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):r(""+s.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),i("got-error"),null!==o&&c(o),r("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=r(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else a({type:"text"})}))}),[r,c,t,e])};function sn(){var e=Object(w.a)();return Object(d.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r){t&&""!==t?e.query({query:E,variables:{_id:t,roles:n}}).then(function(){var e=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("blockMatchesRoles")?r(n.blockMatchesRoles):r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):r(!1)}))}),[e])}var ln=n(326),un=n(327),bn=n(328),dn=n(173),jn=n.n(dn),pn=n(339),On=n(320),hn=n(321),fn=n(322),xn=n(98),vn=n.n(xn),gn=n(154),mn=n(155),_n=n.n(mn),kn=["type","defaultValue","children","className","onChange","onBlur","onError","linebreaks","style","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeFromNextInput"];function yn(e,t){if(e.normalize(),!window.getSelection)return 0;var n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0):null;if(!r)return 0;var c=r.cloneRange();c.selectNodeContents(e),c.setEnd(r.endContainer,r.endOffset);var a=c.cloneContents(),o=0;return a.childNodes.length>0&&("first"===t?o=3===a.childNodes[0].nodeType?a.childNodes[0].length:0:"last"===t&&(o=3===a.childNodes[a.childNodes.length-1].nodeType?a.childNodes[a.childNodes.length-1].length:a.childNodes.length>1&&3===a.childNodes[a.childNodes.length-2].nodeType?a.childNodes[a.childNodes.length-2].length:0)),c.detach(),o}function wn(e){var t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),r=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),c=e.offsetHeight-n-r,a=Object(gn.a)(e),o=Object(gn.b)(e);o.top=o.top-a.top,o.left=o.left-a.left;var i=o.top<o.height,s=c-o.top<o.height,l=function(e){if(e.normalize(),!window.getSelection)return 0;var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(!n)return 0;var r=n.cloneRange();r.selectNodeContents(e),r.setEnd(n.endContainer,n.endOffset);var c,a=r.cloneContents(),o=0,i=Object(u.a)(a.childNodes);try{for(i.s();!(c=i.n()).done;){var s=c.value;3===s.nodeType?o+=s.textContent.length:1===s.nodeType&&"BR"===s.nodeName&&(o+=1)}}catch(l){i.e(l)}finally{i.f()}return r.detach(),o}(e),b=e.innerText.length||0;b<0&&(b=0);var d=b-l;return{inFirstLine:i,inLastLine:s,left:o.left,top:o.top,height:o.height,positionFromLineStart:yn(e,i?"first":"last"),positionFromStart:l,positionFromEnd:d}}var Cn=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,c=void 0===r?"":r,a=(e.children,e.className),o=e.onChange,i=e.onBlur,s=(e.onError,e.linebreaks),l=e.style,u=e.placeholder,j=void 0===u?"":u,p=e.onInputRef,O=e.onGoToPrevInput,h=e.onGoToNextInput,f=e.onSplitText,x=e.onMergeToPrevInput,v=e.onMergeFromNextInput,g=(Object(fe.a)(e,kn),Object(d.useRef)(null)),m=Object(d.useState)(""),_=Object(b.a)(m,2),k=_[0],y=_[1],w=Object(d.useState)({__html:""}),C=Object(b.a)(w,2),N=C[0],F=C[1],I=Object(d.useCallback)((function(e){var t=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(e);if(N.__html!==t)return F({__html:t});y(e)}),[N,y,F]);Object(d.useEffect)((function(){k!==c&&I(c)}),[k,c,I]);var S=Object(d.useCallback)((function(e){var t=e.target.innerHTML||"";t=(t=!1===s?t.replace(/<\/? ?br ?\/?>/g," "):t.replace(/<\/? ?br ?\/?>/g,"\n")).trim(),y(t),o&&o(t)}),[o,y,s]),B=Object(d.useCallback)((function(){i&&i(k)}),[i,k]),P=Object(d.useCallback)((function(e){if("Enter"===e.key&&!0===e.shiftKey)!1!==s&&document.execCommand("insertLineBreak"),e.preventDefault();else if("Tab"===e.key)document.execCommand("insertText",!1,"\t"),e.preventDefault();else if("ArrowUp"===e.key){if(O){var t=wn(g.current);t.inFirstLine&&(O({caret:t}),e.preventDefault())}}else if("ArrowLeft"===e.key){if(O){var r=wn(g.current);r.inFirstLine&&r.positionFromStart<=0&&(r.positionFromLineStart=-1,O({caret:r}),e.preventDefault())}}else if("ArrowDown"===e.key){if(h){var c=wn(g.current);c.inLastLine&&(h({caret:c}),e.preventDefault())}}else if("ArrowRight"===e.key){if(h){var a=wn(g.current);a.inLastLine&&a.positionFromEnd<=1&&(a.positionFromLineStart=0,h({caret:a}),e.preventDefault())}}else if("Enter"===e.key){if("code"===n)!1!==s&&document.execCommand("insertLineBreak"),e.preventDefault();else if(f){var o=wn(g.current),i=g.current.innerText,l=i.slice(0,o.positionFromStart),u=i.slice(o.positionFromStart);f({texts:[l,u]}),e.preventDefault()}}else if("Backspace"===e.key){if(x){var b=wn(g.current);0===b.positionFromStart&&b.inFirstLine&&(x({caret:b,text:g.current.innerText}),e.preventDefault())}}else if("Delete"===e.key&&v){var d=wn(g.current);0===d.positionFromEnd&&d.inLastLine&&(v({caret:d,text:g.current.innerText}),e.preventDefault())}}),[g,s,O,h,f,x,v,n]);Object(d.useEffect)((function(){p&&p(g)}),[p,g]);var E=Object(d.useCallback)((function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");!1===s&&(t=t.replace(/\n/g," ")),document.execCommand("insertText",!1,t)}),[s]);return Object(le.jsx)(le.Fragment,{children:Object(le.jsx)("div",{ref:g,onKeyDown:P,onInput:S,onBlur:B,onPaste:E,className:"".concat(_n.a.rebuild_textarea," ").concat(0===k.length?_n.a.show_placeholder:""," ").concat(a),contentEditable:!0,dangerouslySetInnerHTML:N,style:l,placeholder:j})})};function Nn(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.info("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.info("Fallback: Copying text command was "+n)}catch(r){console.error("Fallback: Oops, unable to copy",r)}document.body.removeChild(t)}(e)}var Fn=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,r=e.open,c=void 0!==r&&r,a=e.onChange,o=e.onClose,i=Object(d.useState)(""),s=Object(b.a)(i,2),l=s[0],u=s[1];Object(d.useEffect)((function(){var e=((n.properties||{}).trigger||{}).path||"";u(e)}),[n,u]);var j=Object(d.useCallback)((function(e){var t=Object(m.a)({},n.properties||{});""===e?(t.hasOwnProperty("trigger")&&delete t.trigger,t.hasOwnProperty("action")&&delete t.action):(t.trigger={type:"path",path:e},t.action={type:"render_block"}),u(e),a(t)}),[n,a,u]);return c?Object(le.jsx)(pn.a,{open:c,onClose:o,hideBackdrop:!0,children:Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("div",{className:vn.a.backdrop,onClick:o}),Object(le.jsxs)("div",{className:vn.a.dialog,children:[Object(le.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Share the link"}),Object(le.jsxs)("div",{className:vn.a.inputWrapper,children:[Object(le.jsx)("span",{style:{paddingRight:"var(--basis)"},children:"volt.link/"}),Object(le.jsx)(Cn,{defaultValue:l,onBlur:j,linebreak:!1,className:vn.a.input,style:{margin:"0"}})]}),Object(le.jsx)("hr",{style:{opacity:.2}}),Object(le.jsxs)("div",{className:vn.a.actions,children:[""!==l?Object(le.jsxs)("div",{children:[Object(le.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://qrcode.volt.link/?c=volt.link/".concat(l),e.target="_blank",e.rel="noreferrer",e.click()},style:{marginInlineStart:"0"},children:[Object(le.jsx)(On.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",children:Object(le.jsx)(ue,{id:"sharing_qrcode"})})]}),Object(le.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(l),e.target="_blank",e.rel="noreferrer",e.click()},children:[Object(le.jsx)(hn.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",children:Object(le.jsx)(ue,{id:"sharing_statistics"})})]}),Object(le.jsxs)("button",{className:"text hasIcon",onClick:function(){Nn("https://volt.link/".concat(l))},children:[Object(le.jsx)(fn.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",children:Object(le.jsx)(ue,{id:"sharing_copy_url"})})]})]}):Object(le.jsx)("div",{}),Object(le.jsx)("button",{onClick:o,className:"green",style:{marginInlineEnd:"0"},children:"Done"})]})]})]})}):null},In=n(24),Sn=n(323),Bn=n(324),Pn=n(325),En=n(343),Dn=["multiple","onChange","onError"],Tn=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Rn=/((?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?))/gi;var An=function(e){var t=e.multiple,n=void 0!==t&&t,r=e.onChange,c=e.onError,a=Object(fe.a)(e,Dn),o=Object(d.useCallback)((function(e){if(r||c){var t=e.target.value||"",a=!1,o="";if(""!==t)if(!0===n){var i=t.match(Rn);i?(t=i,a=!0):o="Invalid email(s) format"}else t.match(Tn)?a=!0:o="invalid_email";r&&r(a?t:!0===n?[]:""),c&&c(o)}}),[n,r,c]);return Object(le.jsx)("input",Object(m.a)({type:"email",onChange:o},a))},Ln=n(57),Vn=n.n(Ln);function Mn(e){var t=e.role;return Object(le.jsx)(ue,{id:"role-"+t})}function Gn(e){var t=e.role,n=e.trigger,r=e.changeRole,c=e.removePermission,a=j.a.useState(null),o=Object(b.a)(a,2),i=o[0],s=o[1],l=Boolean(i),u=function(){s(null)};return Object(le.jsxs)(le.Fragment,{children:[n({onClick:function(e){s(e.currentTarget)}}),Object(le.jsxs)(Ke.a,{anchorEl:i,open:l,onClose:u,MenuListProps:{style:{maxWidth:"100%"}},children:["editor"===t?Object(le.jsxs)(z.a,{onClick:function(){return r("viewer")},children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Je.a,{})}),Object(le.jsx)(H.a,{children:Object(le.jsx)(Mn,{role:"viewer"})})]}):Object(le.jsxs)(z.a,{onClick:function(){return r("editor")},children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Sn.a,{})}),Object(le.jsx)(H.a,{children:Object(le.jsx)(Mn,{role:"editor"})})]}),"function"===typeof c?Object(le.jsxs)(z.a,{onClick:c,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(Bn.a,{})}),Object(le.jsx)(H.a,{children:"Remove"})]}):null,Object(le.jsx)(U.a,{style:{opacity:.2}}),Object(le.jsxs)(z.a,{onClick:u,children:[Object(le.jsx)(W.a,{children:Object(le.jsx)(ve.a,{})}),Object(le.jsx)(H.a,{children:"Close"})]})]})]})}function zn(e){var t=e.filter((function(e){return"owner"===e.role})).sort((function(e,t){return e.email.localeCompare(t.email)})),n=e.filter((function(e){return"@volteuropa.org"===e.email||"@public"===e.email})).sort((function(e,t){return e.email.localeCompare(t.email)})),r=e.filter((function(e){return"owner"!==e.role&&"@volteuropa.org"!==e.email&&"@public"!==e.email})).sort((function(e,t){return e.email.localeCompare(t.email)}));return[].concat(Object(In.a)(t),Object(In.a)(n),Object(In.a)(r))}var Wn=function(e){var t=e.defaultPermissions,n=e.open,r=void 0!==n&&n,c=e.onChange,a=e.onClose,o=de().getString,i=D().email,s=void 0===i?"":i,l=Object(d.useState)(0),j=Object(b.a)(l,2),p=j[0],O=j[1],h=Object(d.useState)([]),f=Object(b.a)(h,2),x=f[0],v=f[1],g=Object(d.useState)([]),_=Object(b.a)(g,2),k=_[0],y=_[1],w=Object(d.useState)("editor"),C=Object(b.a)(w,2),N=C[0],F=C[1],I=Object(d.useCallback)((function(e){var t;""!==s&&(t=e||[],0===(e=Object(In.a)(t).map((function(e){var t=Object(m.a)({},e);return t.tmp_id=Object(En.a)(),t}))).filter((function(e){return"owner"===e.role})).length&&e.unshift({tmp_id:Object(En.a)(),email:s,role:"owner"}),v(e))}),[s,v]);Object(d.useEffect)((function(){Array.isArray(t)?I(t):I([])}),[I,t]);var S=Object(d.useCallback)((function(e){var t=x.filter((function(t){return t.email!==e}));"@volteuropa.org"===e&&(t=t.filter((function(e){return"@public"!==e.email}))),0===x.filter((function(e){return"owner"===e.role})).length&&t.unshift({tmp_id:Object(En.a)(),email:s,role:"owner"}),v(t),c(t)}),[x,s,v,c]),B=Object(d.useCallback)((function(e,t){var n=x.map((function(n){return n.email===e?Object(m.a)(Object(m.a)({},n),{},{role:t}):n}));v(n),c(n)}),[x,v,c]),P=Object(d.useCallback)((function(e,t){e.includes("@public")&&e.push("@volteuropa.org");var n,r=x.filter((function(t){return!e.includes(t.email)})),a=Object(u.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.unshift({tmp_id:Object(En.a)(),email:o,role:t})}}catch(i){a.e(i)}finally{a.f()}v(r),c(r)}),[x,v,c]),E=Object(d.useCallback)((function(){P(k,N),y([]),O((function(e){return e+1}))}),[k,N,P]);if(!r)return null;var T=0===x.filter((function(e){return"@volteuropa.org"===e.email})).length,R=0===x.filter((function(e){return"@public"===e.email})).length;return Object(le.jsx)(pn.a,{open:r,onClose:a,hideBackdrop:!0,children:Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("div",{className:Vn.a.backdrop,onClick:a}),Object(le.jsx)("div",{className:Vn.a.dialogsWrapper,children:Object(le.jsxs)("div",{className:Vn.a.dialog,children:[Object(le.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Give viewing and editing rights"}),Object(le.jsxs)("p",{children:["Enter @volteuropa.org addresses to give editing rights.",Object(le.jsx)("br",{}),"Groups addresses are not supported."]}),Object(le.jsxs)("div",{className:Vn.a.inputWrapper,children:[Object(le.jsx)(cn,{className:Vn.a.emailInput,children:function(e){var t=e.setError;return Object(le.jsx)(An,{multiple:!0,onError:t,defaultValue:"",onChange:y,"aria-label":o("path_editor_permissions_edit_label"),placeholder:o("path_editor_permissions_edit_placeholder"),style:{flexGrow:"1",margin:"var(--basis) 0",width:"calc(100% - var(--basis_x2))"}})}}),Object(le.jsx)(Gn,{role:N,changeRole:F,trigger:function(e){return Object(le.jsxs)("button",Object(m.a)(Object(m.a)({className:Vn.a.menuButton},e),{},{children:[Object(le.jsx)(Mn,{role:N})," ",Object(le.jsx)(Pn.a,{})]}))}})]},p),k.length>0&&k[0].length>0?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("hr",{}),Object(le.jsx)("div",{className:Vn.a.actions,children:Object(le.jsx)("button",{onClick:E,className:"green",style:{margin:"0"},children:k.length>1?Object(le.jsx)(le.Fragment,{children:"Add People"}):Object(le.jsx)(le.Fragment,{children:"Add Person"})})})]}):Object(le.jsxs)(le.Fragment,{children:[T||R?Object(le.jsxs)("div",{style:{marginTop:"var(--basis_x2)"},children:["Make visible for\u2026",T?Object(le.jsx)("button",{onClick:function(){return P(["@volteuropa.org"],"viewer")},children:"Volt Europa"}):null,R?Object(le.jsx)("button",{onClick:function(){return P(["@public"],"viewer")},children:"Public"}):null]}):null,0===x.length?null:Object(le.jsx)("hr",{style:{opacity:.2}}),zn(x).map((function(e){return Object(le.jsxs)("div",{className:Vn.a.permissionRow,children:["@public"===e.email?Object(le.jsx)("strong",{children:"Public"}):"@volteuropa.org"===e.email?Object(le.jsx)("strong",{children:"Volt Europa"}):Object(le.jsx)("span",{children:e.email}),"owner"===e.role?Object(le.jsx)("strong",{className:"type_button ".concat(Vn.a.ownerInfo),children:Object(le.jsx)(Mn,{role:e.role})}):Object(le.jsx)(Gn,{role:e.role,removePermission:function(){return S(e.email)},changeRole:function(t){return B(e.email,t)},trigger:function(t){return Object(le.jsxs)("button",Object(m.a)(Object(m.a)({className:Vn.a.menuButton},t),{},{children:[Object(le.jsx)(Mn,{role:e.role})," ",Object(le.jsx)(Pn.a,{})]}))}})]},e.tmp_id)})),Object(le.jsx)("hr",{style:{opacity:.2}}),Object(le.jsx)("div",{className:Vn.a.actions,children:Object(le.jsx)("button",{onClick:a,className:"green",style:{margin:"0"},children:"Done"})})]})]})})]})})},Hn=n(73),Un=n.n(Hn);var qn=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,c=e.onBlur,a=e.style,o=e.className,i=e.disabled,s=void 0!==i&&i,l=Object(d.useState)(Boolean(n)),u=Object(b.a)(l,2),j=u[0],p=u[1],O=Object(d.useCallback)((function(){r&&r(j),c&&c(j)}),[r,c,j]),h=Object(d.useCallback)((function(){!0!==s&&(O(),p(!0))}),[s,O,p]),f=Object(d.useCallback)((function(){!0!==s&&(O(),p(!1))}),[s,O,p]);return Object(le.jsx)("div",{style:Object(m.a)({display:"inline-block",padding:"var(--basis)",cursor:!0===s?"default":"pointer",verticalAlign:"middle"},a),className:o,children:j?Object(le.jsx)(He.a,{onClick:f}):Object(le.jsx)(ot.a,{onClick:h})})},$n=n(79),Jn=n.n($n);var Zn=function(e){var t=e.ariaLabel,n=e.items,r=e.defaultValue,c=e.onChange,a=e.style,o=e.className,i=Object(d.useState)(),s=Object(b.a)(i,2),l=s[0],u=s[1];Object(d.useEffect)((function(){return u(r)}),[r,u]);var j=Object(d.useCallback)((function(e){var t=e.target.dataset.value;u(t),c&&c(t)}),[u,c]);return Object(le.jsx)("div",{"aria-label":t,className:"buttonRow "+(o||""),style:Object(m.a)({display:"inline-block"},a),children:n.map((function(e){var t=e.value,n=e.title,r=e.icon||null;return Object(le.jsx)("button",{className:"".concat(l===t?"choosen":""," ").concat(r?"hasIcon":""),onClick:j,"data-value":t,children:Object(le.jsxs)("span",{style:{pointerEvents:"none"},children:[r||null,n?Object(le.jsx)("span",{style:{verticalAlign:"middle"},children:n}):null]})},t+"_"+n)}))})},Xn=n.p+"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png",Kn=n.p+"static/media/Aktion.89c1bcdf.png",Qn=n.p+"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png",Yn=n.p+"static/media/Welcome-to-Volt.39e04eca.png",er=n.p+"static/media/portugal.682fc2e3.jpg",tr=["closePopover"];var nr=be((function(e){var t=e.getString,n=e.defaultValue,r=e.iconValue,c=e.onChange,a=e.className,o=void 0===a?"":a,i=e.style,s=void 0===i?{}:i,l=new RegExp("^(?:[a-z]+:)?//","i"),u=!1;"string"===typeof n&&n.length>0&&l.test(n)&&(u=!0);var b=!1;return"string"===typeof r&&r.length>0&&l.test(r)&&(b=!0),Object(le.jsx)("div",{className:"\n      ".concat(Jn.a.root,"\n      ").concat(u?Jn.a.coverphotoIsSet:Jn.a.coverphotoIsNotSet,"\n      ").concat(b?Jn.a.iconIsSet:Jn.a.iconIsNotSet,"\n      ").concat(o,"\n    "),style:s,children:Object(le.jsx)(ke,{trigger:function(e){return Object(le.jsx)("div",{className:Jn.a.coverphoto,style:{backgroundImage:u?"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(n),")"):""},children:Object(le.jsx)("div",{className:Jn.a.button_wrapper,children:Object(le.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{className:Jn.a.changeCoverphotoButton,children:"Set Coverphoto"}))})})},children:function(e){var r=e.closePopover,a=Object(fe.a)(e,tr);return Object(le.jsxs)(xe.a,Object(m.a)(Object(m.a)({},a),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(le.jsx)("h3",{style:{marginTop:"0"},children:Object(le.jsx)(ue,{id:"path_editor_coverphoto_label"})}),Object(le.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(le.jsx)(ue,{id:"path_editor_coverphoto_info"})}),Object(le.jsx)(cn,{children:function(e){var t=e.setError;return Object(le.jsx)(en,{onError:t,onChange:c,defaultValue:n,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(le.jsx)(Zn,{onChange:c,ariaLabel:t("path_editor_coverphoto_label"),defaultValue:n||"",items:[{value:"",title:t("path_editor_no_coverphoto")}].concat(Object(In.a)([{value:"https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg",icon:Qn},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg",icon:Yn},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg",icon:Xn},{value:"https://assets.volteuropa.org/2021-11/portugal.jpg",icon:er},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg",icon:Kn}].map((function(e){var t=e.value,n=void 0===t?"":t,r=e.icon,c=void 0===r?"":r;return{value:n,icon:Object(le.jsx)("img",{alt:"",src:c,className:"icon image"})}}))))}),Object(le.jsx)("hr",{}),Object(le.jsx)("button",{onClick:r,style:{margin:0},children:"Close"})]}))}})})})),rr=n(74),cr=n.n(rr),ar=["closePopover"];var or=be((function(e){var t=e.defaultValue,n=e.coverphotoValue,r=e.onChange,c=e.className,a=e.style,o=new RegExp("^(?:[a-z]+:)?//","i"),i=!1;"string"===typeof t&&t.length>0&&o.test(t)&&(i=!0);var s=!1;return"string"===typeof n&&n.length>0&&o.test(n)&&(s=!0),Object(le.jsx)("div",{className:"\n      ".concat(cr.a.root,"\n      ").concat(i?cr.a.iconIsSet:cr.a.iconIsNotSet,"\n      ").concat(s?cr.a.coverphotoIsSet:cr.a.coverphotoIsNotSet,"\n      ").concat(c,"\n    "),style:a,children:Object(le.jsx)(ke,{trigger:function(e){return Object(le.jsxs)("div",{className:cr.a.iconWrapper,children:[Object(le.jsx)("div",{className:"".concat(cr.a.icon," ").concat(i?"":cr.a.no_image),style:{backgroundImage:i?"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(t),")"):""}}),Object(le.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{className:cr.a.changeIconButton,children:"Set Icon"}))]})},children:function(e){var n=e.closePopover,c=Object(fe.a)(e,ar);return Object(le.jsxs)(xe.a,Object(m.a)(Object(m.a)({},c),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(le.jsx)("h3",{style:{marginTop:"0"},children:Object(le.jsx)(ue,{id:"path_editor_icon_label"})}),Object(le.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(le.jsx)(ue,{id:"path_editor_icon_info"})}),Object(le.jsx)(cn,{children:function(e){var n=e.setError;return Object(le.jsx)(en,{onError:n,onBlur:r,defaultValue:t,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(le.jsx)("hr",{}),Object(le.jsx)("button",{onClick:n,style:{margin:0},children:"Close"})]}))}})})}));var ir=function(e){var t=e.defaultValue,n=e.className,r=e.style,c=e.onChange,a=de().getString,o=Object(d.useState)({}),i=Object(b.a)(o,2),s=i[0],l=i[1];Object(d.useEffect)((function(){l(t)}),[t,l]);var u=Object(d.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(m.a)({},s);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(s)&&(l(r),c&&c(r))}}),[s,l,c]),j=s.type||"",p=null;return"click"===j?p=null:"path"===j&&(p=Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(Cn,{placeholder:a("trigger_input_path_placeholder"),defaultValue:s.path,onBlur:function(e){return u("path",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"}})})),Object(le.jsxs)("div",{className:n,style:Object(m.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},r),children:[Object(le.jsxs)("select",{onChange:function(e){return u("type",e.target.value)},defaultValue:s.type||"",style:{margin:"0"},children:[Object(le.jsx)("option",{value:"",children:"No Trigger"}),Object(le.jsx)("option",{value:"path",children:"Path"}),Object(le.jsx)("option",{value:"click",children:"Click"})]},s.type),p]})};var sr=function(e){var t=e.defaultValue,n=e.className,r=e.style,c=e.onChange,a=de().getString,o=Object(d.useState)({}),i=Object(b.a)(o,2),s=i[0],l=i[1];Object(d.useEffect)((function(){l(t)}),[t,l]);var u=Object(d.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(m.a)({},s);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(s)&&(l(r),c&&c(r))}}),[s,l,c]),j=s.type||"",p=null;return"open_url"===j||"send_payload"===j?p=Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(cn,{style:{flexGrow:"1",margin:"0",minWidth:"300px"},children:function(e){var t=e.setError;return Object(le.jsx)(en,{onError:t,onBlur:function(e){return u("url",e)},defaultValue:s.url,placeholder:a("action_input_url_placeholder"),type:"text",style:{flexGrow:1,margin:"0",width:"100%"}})}})}):"render_block"!==j&&"run_block"!==j||(p=Object(le.jsx)(Cn,{placeholder:"blockId",defaultValue:s.blockId,onBlur:function(e){return u("blockId",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"}})),Object(le.jsxs)("div",{className:n,style:Object(m.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},r),children:[Object(le.jsxs)("select",{onChange:function(e){return u("type",e.target.value)},defaultValue:s.type||"",style:{margin:"0"},children:[Object(le.jsx)("option",{value:"",children:"No Action"}),Object(le.jsx)("option",{value:"open_url",children:"Open URL"}),Object(le.jsx)("option",{value:"render_block",children:"Render Block"})]},s.type),p]})};var lr=be((function(e){var t=e.getString,n=e.type,r=e.defaultProperties,c=void 0===r?{}:r,a=e.onChange,o=Object(d.useState)({}),i=Object(b.a)(o,2),s=i[0],l=i[1],u=Object(d.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={text:"string",description:"string",coverphoto:"string",icon:"string",imprint:"string",privacy_policy:"string",tags:"string",checked:"boolean",trigger:"object",action:"object",pronouns:"string"},c=Object(m.a)({},s);if(r.hasOwnProperty(e))switch(r[e]){case"array":t.length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"string":""!==t?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"boolean":!0===t?c[e]=!0:c.hasOwnProperty(e)&&delete c[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;default:c[e]=t}JSON.stringify(c)!==JSON.stringify(s)&&(l(c),!1===n&&a&&a(c))}),[s,l,a]),j=Object(d.useCallback)((function(){a&&a(s)}),[s,a]);Object(d.useEffect)((function(){l(Object(m.a)(Object(m.a)({},c),{},{text:c.text||"",description:c.description||""}))}),[c,l]);var p=null;return"page"===n?p=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_imprint_label"})}),Object(le.jsx)("div",{children:Object(le.jsx)(cn,{children:function(e){var t=e.setError;return Object(le.jsx)(en,{onError:t,onBlur:function(e){return u("imprint",e)},defaultValue:s.imprint,type:"text",style:{margin:"0",width:"100%"}})}})})]}),Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_privacy_policy_label"})}),Object(le.jsx)("div",{children:Object(le.jsx)(cn,{children:function(e){var t=e.setError;return Object(le.jsx)(en,{onError:t,onBlur:function(e){return u("privacy_policy",e)},defaultValue:s.privacy_policy,type:"text",style:{margin:"0",width:"100%"}})}})})]})]}):"person"===n?p=Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_pronouns_label"})}),Object(le.jsx)(Cn,{defaultValue:s.pronouns,onChange:function(e){return u("pronouns",e,!0)},onBlur:j,placeholder:"\u2026",style:{margin:"0",width:"100%"},linebreaks:!1,className:"type_text"})]})}):"checkbox"===n?p=Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_checked_label"})}),Object(le.jsx)(qn,{onChange:function(e){return u("checked",e)},defaultValue:Boolean(s.checked),style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"button"===n?p=Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_action_label"})}),Object(le.jsx)(sr,{onChange:function(e){return u("action",e)},defaultValue:s.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"action"===n&&(p=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_trigger_label"})}),Object(le.jsx)(ir,{onChange:function(e){return u("trigger",e)},defaultValue:s.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]}),Object(le.jsxs)("div",{className:Un.a.properties_row,children:[Object(le.jsx)("h3",{children:Object(le.jsx)(ue,{id:"properties_editor_action_label"})}),Object(le.jsx)(sr,{onChange:function(e){return u("action",e)},defaultValue:s.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})]})),Object(le.jsxs)(le.Fragment,{children:["page"===n||"person"===n?Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(nr,{defaultValue:s.coverphoto,iconValue:s.icon,onChange:function(e){return u("coverphoto",e)}}),Object(le.jsx)(or,{defaultValue:s.icon,coverphotoValue:s.coverphoto,onChange:function(e){return u("icon",e)}})]}):null,Object(le.jsxs)("div",{className:Un.a.main_headline,children:[Object(le.jsx)(Cn,{defaultValue:s.text,onChange:function(e){return u("text",e,!0)},onBlur:j,placeholder:t("placeholder_main_headline"),style:{margin:"0"},linebreaks:!0,className:"type_h1"}),Object(le.jsx)(Cn,{defaultValue:s.description,onChange:function(e){return u("description",e,!0)},onBlur:j,"aria-label":t("path_editor_description_label"),placeholder:t("path_editor_description_placeholder"),style:{margin:"0"},linebreaks:!0,className:"type_text"})]}),Object(le.jsx)("div",{className:Un.a.propertiesFrame,style:null===p?{display:"none"}:null,children:p})]})})),ur=n(353);var br=be((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,c=e.onChange,a=(e.onSaveBlock,e.onInputRef),o=e.onGoToPrevInput,i=e.onGoToNextInput,s=e.onSplitText,l=e.onMergeToPrevInput,u=e.onMergeFromNextInput,j=(e.onAddRowAfter,r.properties||{}),p=Object(d.useState)(""),O=Object(b.a)(p,2),h=O[0],f=O[1];Object(d.useEffect)((function(){f(j.text||"")}),[j.text,f]);var x=Object(d.useCallback)((function(){c&&c(Object(m.a)(Object(m.a)({},r),{},{properties:Object(m.a)(Object(m.a)({},r.properties),{},{text:h})}))}),[c,r,h]);return Object(le.jsx)(Cn,{defaultValue:h,onChange:f,onBlur:x,placeholder:t("placeholder_text"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_text",onInputRef:a,onGoToPrevInput:o,onGoToNextInput:i,onMergeToPrevInput:function(){return l(r)},onMergeFromNextInput:function(){return u(r)},onSplitText:s})}));var dr=be((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,c=e.onChange,a=e.onInputRef,o=e.onGoToPrevInput,i=e.onGoToNextInput,s=e.onSplitText,l=e.onMergeToPrevInput,u=e.onMergeFromNextInput,j=r.properties||{},p=Object(d.useState)(j.text||""),O=Object(b.a)(p,2),h=O[0],f=O[1],x=j.action,v=void 0===x?{}:x,g=Object(d.useState)(v.url||""),_=Object(b.a)(g,2),k=_[0],y=_[1],w=Object(d.useCallback)((function(){if(c){var e=Object(m.a)(Object(m.a)({},r),{},{properties:Object(m.a)(Object(m.a)({},r.properties),{},{text:h})});""===k?(e.properties.hasOwnProperty("trigger")&&delete e.properties.trigger,e.properties.hasOwnProperty("action")&&delete e.properties.action):(e.properties.trigger={type:"click"},e.properties.action={type:"open_url",url:k}),c(e)}}),[c,r,h,k]);return Object(le.jsxs)("div",{style:{padding:"var(--basis) 0"},children:[Object(le.jsx)(Cn,{defaultValue:h,onChange:f,onBlur:w,placeholder:t("placeholder_button"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_button",onInputRef:a,onGoToPrevInput:o,onGoToNextInput:i,onMergeToPrevInput:function(){return l(r)},onMergeFromNextInput:function(){return u(r)},onSplitText:s}),Object(le.jsx)(cn,{children:function(e){var n=e.setError;return Object(le.jsx)(en,{onError:n,onChange:y,onBlur:w,type:"text",defaultValue:k,placeholder:t("path_editor_item_link_label"),style:{margin:"var(--basis) 0",width:"100%"}})}})]})}));var jr=be((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,c=e.onChange,a=(e.onSaveBlock,e.onInputRef),o=e.onGoToPrevInput,i=e.onGoToNextInput,s=e.onSplitText,l=e.onMergeToPrevInput,u=e.onMergeFromNextInput,j=(e.onAddRowAfter,r.properties||{}),p=Object(d.useState)(""),O=Object(b.a)(p,2),h=O[0],f=O[1];Object(d.useEffect)((function(){f(j.text||"")}),[j.text,f]);var x=Object(d.useCallback)((function(){c&&c(Object(m.a)(Object(m.a)({},r),{},{properties:Object(m.a)(Object(m.a)({},r.properties),{},{text:h})}))}),[c,r,h]);return Object(le.jsx)(Cn,{defaultValue:h,onChange:f,onBlur:x,placeholder:t("placeholder_headline"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_h2",onInputRef:a,onGoToPrevInput:o,onGoToNextInput:i,onMergeToPrevInput:function(){return l(r)},onMergeFromNextInput:function(){return u(r)},onSplitText:s})}));function pr(){return Object(le.jsx)("hr",{style:{margin:"calc(3.4 * var(--basis)) 0"}})}var Or=be((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,c=e.onChange,a=e.onInputRef,o=e.onGoToPrevInput,i=e.onGoToNextInput,s=e.onSplitText,l=e.onMergeToPrevInput,u=e.onMergeFromNextInput,j=r.properties||{},p=Object(d.useState)(j.text||""),O=Object(b.a)(p,2),h=O[0],f=O[1],x=Object(d.useRef)(Boolean(j.checked)),v=Object(d.useCallback)((function(){c&&c(Object(m.a)(Object(m.a)({},r),{},{properties:Object(m.a)(Object(m.a)({},r.properties),{},{text:h,checked:x.current})}))}),[c,r,h]),g=Object(d.useCallback)((function(e){x.current=e,v()}),[v]);return Object(le.jsxs)("div",{style:{display:"flex"},children:[Object(le.jsx)(qn,{checked:x.current,onChange:g}),Object(le.jsx)(Cn,{defaultValue:h,onChange:f,onBlur:v,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0"},linebreaks:!0,className:"hide_border type_text",onInputRef:a,onGoToPrevInput:o,onGoToNextInput:i,onMergeToPrevInput:function(){return l(r)},onMergeFromNextInput:function(){return u(r)},onSplitText:s})]})}));var hr=be((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,c=e.onChange,a=e.onInputRef,o=e.onGoToPrevInput,i=e.onGoToNextInput,s=e.onSplitText,l=e.onMergeToPrevInput,u=e.onMergeFromNextInput,j=r.properties||{},p=Object(d.useState)(j.text||""),O=Object(b.a)(p,2),h=O[0],f=O[1],x=Object(d.useCallback)((function(){c&&c(Object(m.a)(Object(m.a)({},r),{},{properties:Object(m.a)(Object(m.a)({},r.properties),{},{text:h})}))}),[c,r,h]);return Object(le.jsxs)("div",{style:{display:"flex"},children:[Object(le.jsx)(Ot.a,{style:{margin:"var(--basis)"}}),Object(le.jsx)(Cn,{defaultValue:h,onChange:f,onBlur:x,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold"},linebreaks:!0,className:"hide_border type_text",onInputRef:a,onGoToPrevInput:o,onGoToNextInput:i,onMergeToPrevInput:function(){return l(r)},onMergeFromNextInput:function(){return u(r)},onSplitText:s})]})})),fr=n(99),xr=n.n(fr),vr=["type"];function gr(e){var t=e.type,n=void 0===t?"text":t,r=Object(fe.a)(e,vr),c=null;switch(n){case"button":c=Object(le.jsx)(dr,Object(m.a)({},r));break;case"headline":c=Object(le.jsx)(jr,Object(m.a)({},r));break;case"divider":c=Object(le.jsx)(pr,Object(m.a)({},r));break;case"checkbox":c=Object(le.jsx)(Or,Object(m.a)({},r));break;case"person":c=Object(le.jsx)(hr,Object(m.a)({},r));break;default:c=Object(le.jsx)(br,Object(m.a)({},r))}return c}var mr=be((function(e){e.fluentByObject,e.getString;var t=e.contentConfig,n=void 0===t?{}:t,r=e.className,c=e.onChange,a=e.reorderHandle,o=e.onRemoveRow,i=(e.actionButton,e.dataset),s=void 0===i?{}:i,l=e.addRowBefore,u=e.addRowAfter,j=(e.permissions,e.onInputRef),p=e.onGoToPrevInput,O=e.onGoToNextInput,h=e.onSplitText,f=e.onMergeToPrevInput,x=e.onMergeFromNextInput,v=he(),g=Object(d.useState)(Object(m.a)(Object(m.a)({},n.block||{type:"text"}),{},{_id:n.blockId||null})),_=Object(b.a)(g,2),k=_[0],y=_[1],w=k.properties||{},C="boolean"!==typeof w.active||w.active;Object(d.useEffect)((function(){n.block&&y(n.block)}),[n.block]);var N=Object(d.useCallback)((function(e){var t=Object(m.a)(Object(m.a)({},k),{},{type:e});v(t).then((function(e){y(e),k._id&&k._id===e._id||c({blockId:e._id,block:e})}))}),[y,k,v,c]),F=Object(d.useCallback)((function(){var e=Object(m.a)(Object(m.a)({},k),{},{properties:Object(m.a)(Object(m.a)({},k.properties),{},{active:!C})});v(e).then((function(e){y(e),k._id&&k._id===e._id||c({blockId:e._id,block:e})}))}),[k,C,v,y,c]),I=Object(d.useCallback)((function(e){JSON.stringify(e)!==JSON.stringify(k)&&v(e).then((function(e){y(e),k._id&&k._id===e._id||c({blockId:e._id,block:e})}))}),[v,k,c]),S=Object(d.useCallback)((function(e,t){v(e).then((function(e){t&&t(e)})).catch(console.error)}),[v]);return Object(le.jsxs)("div",Object(m.a)(Object(m.a)({className:"".concat(xr.a.block," ").concat(r)},s),{},{children:[Object(le.jsx)(tt,{block:k,setType:N,toggle_active:F,active:C,onRemoveRow:o,addRowBefore:l,addRowAfter:u,trigger:function(e){return Object(le.jsx)("div",Object(m.a)(Object(m.a)({},e),{},{className:xr.a.reorderHandle,children:a}))}}),Object(le.jsx)("div",{className:"".concat(xr.a.block_input," ").concat(C?xr.a.form_active:xr.a.form_deactivated),children:Object(le.jsx)(gr,{type:k.type,block:k,onChange:I,onSaveBlock:S,onInputRef:j,onGoToPrevInput:p,onGoToNextInput:O,onSplitText:h,onMergeToPrevInput:f,onMergeFromNextInput:x,onAddRowAfter:u})})]}))}));var _r=function(){var e=Object(w.a)();return Object(d.useCallback)((function(t){return new Promise((function(n){e.query({query:I,variables:t}).then(function(){var e=Object(y.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(r=t.data).error&&r.blocks?n(r.blocks||[]):(console.error(r.error),n([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e])};var kr=function(){var e=Object(w.a)();return Object(d.useCallback)((function(t){var n=t._id;return new Promise((function(t){e.mutate({mutation:pe,variables:{_id:n}}).then(function(){var e=Object(y.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.data,t("got-data");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(y.a)(k.a.mark((function e(n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error(n),t("got-error");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e])},yr=n(135),wr=n(175),Cr=n.n(wr),Nr=n(100),Fr=n.n(Nr);function Ir(e){e.normalize();var t=e.childNodes;return t.length>0?t[0]:e}function Sr(e){e.normalize();var t=Object(In.a)(e.childNodes).reverse();if(t.length>0){var n=e;if(3===t[0].nodeType){var r,c=Object(u.a)(t);try{for(c.s();!(r=c.n()).done;){var a=r.value;if(3===a.nodeType)n=a;else if(1===a.nodeType)break}}catch(b){c.e(b)}finally{c.f()}}else if(t.length>1&&3===t[1].nodeType){var o,i=t.slice(1),s=Object(u.a)(i);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(3===l.nodeType)n=l;else if(1===l.nodeType)break}}catch(b){s.e(b)}finally{s.f()}}return n}return e}function Br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.focus(),window.getSelection){var r=3===t.nodeType?t.length:t.innerText.length;(-1===n||n>r)&&(n=r);var c=document.createRange();c.setStart(t,0),c.setEnd(t,n),c.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(c)}}var Pr=function(e){var t=e.defaultValue,n=void 0===t?[]:t,r=e.onChange,c=Object(d.useRef)([]),a=c.current,o=Object(d.useRef)({}),i=o.current,s=Object(d.useState)(0),l=Object(b.a)(s,2),u=l[0],j=l[1],p=_r(),O=he(),h=kr(),f=Object(d.useState)(null),x=Object(b.a)(f,2),v=x[0],g=x[1];Object(d.useEffect)((function(){if("object"===typeof v&&null!==v&&i.hasOwnProperty(v.tmp_id)){var e=i[v.tmp_id];if("object"===typeof e&&null!==e){if(!0===v.inFirstLine){var t=Ir(e.current);Br(e.current,t,v.positionFromLineStart)}else if(!0===v.inLastLine){var n=Sr(e.current);Br(e.current,n,v.positionFromLineStart)}g(null)}}}),[v,g,i]),Object(d.useEffect)((function(){if(0===a.length&&n.length>0){var e=Object(In.a)((r=n,Object(In.a)(r).map((function(e){var t=Object(m.a)({},e);return t.tmp_id=Object(En.a)(),t})))),t=e.map((function(e){return e.blockId}));p({ids:t}).then((function(t){e=e.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{block:t.find((function(t){return t._id===e.blockId}))})})),c.current=e,j((function(e){return e+1}))}))}var r}),[a,n,p,c,j]);var _=Object(d.useCallback)((function(e,t){var n=Object(m.a)({},o.current);console.log("saveInputRef-newInputRefs",n),n.hasOwnProperty(e.tmp_id)&&n[e.tmp_id]===t||(n[e.tmp_id]=t,o.current=n)}),[o]),k=Object(d.useCallback)((function(e,t){for(var n=t.caret,r=e.index,c=null,o=a.length-1;o>=0;o--){var s=a[o].tmp_id;if(o<r&&i[s]&&i[s].current){c=i[s];break}}if(c){var l=Sr(c.current);Br(c.current,l,n.positionFromLineStart)}}),[a,i]),y=Object(d.useCallback)((function(e,t){for(var n=t.caret,r=e.index,c=null,o=0;o<a.length;o++){var s=a[o].tmp_id;if(o>r&&i[s]&&i[s].current){c=i[s];break}}if(c){var l=Ir(c.current);Br(c.current,l,n.positionFromLineStart)}}),[a,i]),w=Object(d.useCallback)((function(){for(var e=null,t=a.length-1;t>=0;t--){var n=a[t].tmp_id;if(i[n]&&i[n].current){e=i[n];break}}if(e){var r=Sr(e.current);Br(e.current,r,-1)}}),[a,i]),C=Object(d.useCallback)((function(e,t){var n=Object(In.a)(a);for(var o in n){var i=n[o];if(i.tmp_id===e.tmp_id){n[o]=Object(m.a)(Object(m.a)({},i),t);break}}return c.current=n,r(n),new Promise((function(e){e(n)}))}),[a,c,r]),N=Object(d.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n="object"===typeof n?Object(m.a)({tmp_id:Object(En.a)()},n):n||{tmp_id:Object(En.a)()},"number"===typeof e&&!isNaN(e)){var o=Object(In.a)(a);o.splice(e+t,0,n),c.current=o,r(o)}}),[a,c,r]),F=Object(d.useCallback)((function(e){var t=e.index,n=Object(In.a)(a);if(t>0){var i=t-1,s=n[i],l=s.tmp_id,u=n[t].block,b=n[i].block,d=Object(m.a)(Object(m.a)({},b),{},{properties:Object(m.a)(Object(m.a)({},b.properties),{},{text:b.properties.text+u.properties.text})}),j=o.current[l].current.textContent.length;O(d).then((function(e){var n=Object(En.a)();C({index:i,tmp_id:l},Object(m.a)(Object(m.a)({},s),{},{tmp_id:n,blockId:e._id,block:e})).then((function(e){var a=e[t].block;e.splice(t,1),h({_id:a._id}).then((function(){c.current=e,g({tmp_id:n,positionFromLineStart:j,inFirstLine:!1,inLastLine:!0}),r(e)}))}))})).catch(console.error)}}),[a,o,O,C,h,c,g,r]),I=Object(d.useCallback)((function(e){var t=e.index,n=e.tmp_id,i=Object(In.a)(a);if(t<i.length-1){var s=t+1,l=i[t],u=i[t].block,b=i[s].block;console.log("next_block",b);var d=Object(m.a)(Object(m.a)({},u),{},{properties:Object(m.a)(Object(m.a)({},u.properties),{},{text:u.properties.text+b.properties.text})});console.log("new_block",d);var j=o.current[n].current.textContent.length;O(d).then((function(t){var n=Object(En.a)();C(e,Object(m.a)(Object(m.a)({},l),{},{tmp_id:n,blockId:t._id,block:t})).then((function(e){var t=e[s].block;e.splice(s,1),h({_id:t._id}).then((function(){c.current=e,g({tmp_id:n,positionFromLineStart:j,inFirstLine:!1,inLastLine:!0}),r(e)}))}))})).catch(console.error)}}),[a,o,O,C,h,c,g,r]),S=Object(d.useCallback)((function(e,t){var n=t.texts,o=e.index,i=e.tmp_id,s=Object(In.a)(a),l=s.find((function(e){return e.tmp_id===i})).block||{},u=Object(m.a)(Object(m.a)({},l),{},{properties:Object(m.a)(Object(m.a)({},l.properties),{},{text:n[0]})}),b={type:l.type,properties:{text:n[1]}};O(u).then((function(e){O(b).then((function(t){s[o]=Object(m.a)(Object(m.a)({},s[o]),{},{tmp_id:Object(En.a)(),blockId:e._id,block:e});var n={tmp_id:Object(En.a)(),blockId:t._id,block:t};s.splice(o+1,0,n),c.current=s,r(s),g({tmp_id:n.tmp_id,positionFromLineStart:0,inFirstLine:!0,inLastLine:!1})})).catch(console.error)})).catch(console.error)}),[a,O,c,r,g]),B=a.filter(Boolean).filter((function(e){return e.tmp_id}));return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("div",{style:{position:"relative",width:"1000px",maxWidth:"100%",margin:"var(--basis_x8) auto 0 auto"},children:[Object(le.jsx)("div",{children:Object(le.jsx)("button",{onClick:function(){return N(0,0,{})},className:"text hasIcon",style:{margin:"0 0 var(--basis_x2) 0"},children:Object(le.jsxs)("span",{style:{pointerEvents:"none"},children:[Object(le.jsx)(Y.a,{className:"icon"}),Object(le.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:Object(le.jsx)(ue,{id:"add_content_before"})})]})})}),Object(le.jsx)(yr.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var r=Array.from(e),c=r.splice(t,1),a=Object(b.a)(c,1)[0];return r.splice(n,0,a),r}(a,e.source.index,e.destination.index);c.current=t,r(t)}},children:Object(le.jsx)(yr.c,{droppableId:"list",isDropDisabled:!1,children:function(e){return Object(le.jsxs)("div",Object(m.a)(Object(m.a)({ref:e.innerRef},e.droppableProps),{},{className:"inputBorder",children:[B.map((function(e,t){var n=e.tmp_id,r={index:t,tmp_id:n};return Object(le.jsx)(yr.b,{draggableId:n,index:t,isDragDisabled:!1,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(c){return Object(d.createElement)("div",Object(m.a)(Object(m.a)({ref:c.innerRef},c.draggableProps),{},{key:n,className:Fr.a.row}),Object(le.jsx)("div",{className:Fr.a.form,children:Object(le.jsx)(mr,{className:Fr.a.item,dataset:{"data-index":t,"data-id":n},contentConfig:e,reorderHandle:Object(le.jsx)(ur.a,{title:Object(le.jsxs)("div",{style:{textAlign:"center"},children:[Object(le.jsx)("strong",{children:"Drag"})," to move.",Object(le.jsx)("br",{}),Object(le.jsx)("strong",{children:"Click"})," to open menu."]}),children:Object(le.jsx)("button",Object(m.a)(Object(m.a)({className:"text ".concat(Fr.a.inlineRowButton," ").concat(Fr.a.dragHandleButton)},c.dragHandleProps),{},{children:Object(le.jsx)(Cr.a,{})}))}),onRemoveRow:function(){},addRowBefore:function(e){return N(t,0,e)},addRowAfter:function(e){return N(t,1,e)},onInputRef:function(e){return _(r,e)},onGoToPrevInput:function(e){return k(r,e)},onGoToNextInput:function(e){return y(r,e)},onSplitText:function(e){return S(r,e)},onChange:function(e){return C(r,e)},onMergeToPrevInput:function(e){return F(r,e)},onMergeFromNextInput:function(e){return I(r,e)}},n)}))}},n)})),e.placeholder]}))}})})]},u),Object(le.jsx)("div",{style:{position:"relative",height:"50vh",cursor:0===B.length?"default":"text"},onClick:0===B.length?null:w})]})};function Er(){return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h1",{children:"Login to view content"}),Object(le.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(le.jsxs)("button",{className:"hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(le.jsx)(te.a,{className:"icon"}),Object(le.jsx)("span",{children:Object(le.jsx)(ue,{id:"login"})})]})})]})}var Dr=function(){var e=de(),t=e.getString,n=e.fluentByAny,r=he(),c=on(),a=Object(d.useState)(!1),o=Object(b.a)(a,2),i=o[0],s=o[1],l=Object(d.useCallback)((function(){return s(!0)}),[s]),u=Object(d.useCallback)((function(){return s(!1)}),[s]),j=Object(d.useState)(!1),p=Object(b.a)(j,2),O=p[0],h=p[1],f=Object(d.useCallback)((function(){return h(!0)}),[h]),x=Object(d.useCallback)((function(){return h(!1)}),[h]),v=Object(d.useRef)(!1),_=Object(g.h)().id,k=void 0===_?"":_,y=Object(d.useState)({type:"page",properties:{},content:[]}),w=Object(b.a)(y,2),C=w[0],N=w[1],F=C.type,I=C.properties,S=C.content,B=C.permissions,P=Object(d.useState)(null),E=Object(b.a)(P,2),D=E[0],T=E[1],R=sn();Object(d.useEffect)((function(){R(k,["editor","owner"]).then((function(e){T(e)})).catch((function(e){console.error(e),T(!1)}))}),[k,R,T]),Object(d.useEffect)((function(){!D||"string"!==typeof k||""===k||v.current&&k===C._id||c(k).then((function(e){v.current=!0,N(e)}))}),[D,k,C,c,N]);var A=Object(d.useCallback)((function(e){if(e!==C.type){var t=Object(m.a)(Object(m.a)({},C),{},{type:e});r(t).then((function(e){N(e)}))}}),[C,r,N]),L=Object(d.useCallback)((function(e){if(e!==C.properties){var t=Object(m.a)(Object(m.a)({},C),{},{properties:e});r(t).then((function(e){N(e)}))}}),[C,r,N]),V=Object(d.useCallback)((function(e){if(e!==C.content){var t=Object(m.a)(Object(m.a)({},C),{},{content:e});r(t).then((function(e){N(e)}))}}),[C,r,N]),M=Object(d.useCallback)((function(e){if(e!==C.permissions){var t=Object(m.a)(Object(m.a)({},C),{},{permissions:e});r(t).then((function(e){N(e)}))}}),[C,r,N]),G=Object(d.useCallback)((function(){r(C).then((function(e){e._id!==C._id&&N(e)}))}),[r,C,N]);if(!1===D)return Object(le.jsx)(Er,{});if(!0===D){var z=Object(le.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[i?Object(le.jsx)(Fn,{defaultBlock:C,open:i,onClose:u,onChange:L}):null,Object(le.jsxs)("button",{className:"text hasIcon",onClick:l,children:[Object(le.jsx)(ln.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(le.jsx)(ue,{id:"path_editor_share"})})]}),O?Object(le.jsx)(Wn,{defaultPermissions:B,open:O,onClose:x,onChange:M}):null,Object(le.jsxs)("button",{className:"text hasIcon",onClick:f,children:[Object(le.jsx)(un.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(le.jsx)(ue,{id:"path_editor_permissions"})})]}),Object(le.jsxs)("button",{className:"text hasIcon",onClick:G,children:[Object(le.jsx)(bn.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(le.jsx)(ue,{id:"path_editor_publish"})})]}),Object(le.jsx)(tt,{block:C,setType:A,trigger:function(e){return Object(le.jsx)("button",Object(m.a)(Object(m.a)({},e),{},{className:"white hasIcon",children:Object(le.jsx)(Ee.a,{className:"icon"})}))}})]}),W=n(C.properties.text,t("placeholder_main_headline"));return Object(le.jsxs)("div",{className:"hasHeader ".concat(jn.a.editor),children:[Object(le.jsx)(Xt,{block:C,title:W,rightActions:z}),Object(le.jsx)(lr,{type:F,defaultProperties:I,onChange:L}),Object(le.jsx)(Pr,{onChange:V,defaultValue:S})]},C._id)}return null},Tr=n(80),Rr=n.n(Tr);var Ar=function(){var e=Object(d.useRef)(!1),t=D().loggedIn,n=on(),r=_r(),c=Object(g.h)().id,a=void 0===c?"":c,o=Object(d.useState)({type:"page",properties:{},content:[]}),i=Object(b.a)(o,2),s=i[0],l=i[1],u=Object(d.useState)([]),j=Object(b.a)(u,2),p=j[0],O=j[1],h=Object(d.useState)(null),f=Object(b.a)(h,2),x=f[0],v=f[1],m=sn();if(Object(d.useEffect)((function(){m(a,["viewer","owner"]).then((function(e){v(e)})).catch((function(e){console.error(e),v(!1)}))}),[a,m,v]),Object(d.useEffect)((function(){x&&!1===e.current&&"string"===typeof a&&""!==a&&a!==s._id&&(e.current=!0,n(a).then((function(t){l(t);var n=t.content.map((function(e){return e.blockId}));r({ids:n}).then((function(t){var r=Object(In.a)(n).map((function(e){return t.find((function(t){return t._id===e}))}));O(Object(In.a)(r)),e.current=!1}))})))}),[x,a,s._id,n,l,r,O]),!1===x)return Object(le.jsx)(Er,{});if(!0===x){var _=s.type||null,k=s.properties.text||"",y=s.properties.description||"",w=s.properties.coverphoto||"",C=s.properties.icon||"",N=s.properties.pronouns||"",F=Object(le.jsx)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:Object(le.jsx)(Zt.b,{to:"/edit/".concat(s._id),children:Object(le.jsxs)("button",{className:"text hasIcon",children:[Object(le.jsx)(Xe.a,{className:"icon"}),Object(le.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(le.jsx)(ue,{id:"edit_block"})})]})})});return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Xt,{block:s,title:k,rightActions:t?F:null}),Object(le.jsxs)("div",{className:"basis_x1 ".concat(Rr.a.app," ").concat(Rr.a.spine_aligned),dir:"auto",children:["page"!==_&&"person"!==_||""===w?null:Object(le.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(w),")")},className:Rr.a.coverphoto}),Object(le.jsxs)("main",{className:"".concat(Rr.a.contentWrapper),children:["page"!==_&&"person"!==_||""===C?null:Object(le.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?url=").concat(encodeURIComponent(C),")")},className:"".concat(Rr.a.icon," ").concat(""===w?Rr.a.coverphotoIsNotSet:Rr.a.coverphotoIsSet)}),""!==k?Object(le.jsx)("h1",{dir:"auto",children:k}):null,"person"===_&&""!==N?Object(le.jsx)("p",{dir:"auto",children:Object(le.jsx)("strong",{style:{padding:"var(--basis)",margin:"var(--basis_x0_5) calc(-1 * var(--basis))",display:"inline-block",backgroundColor:"rgba(var(--on-background-rgb), var(--alpha-less))"},children:N})}):null,""!==y?Object(le.jsxs)("p",{dir:"auto",children:[y.split(/\n/g).flatMap((function(e){return[e,Object(le.jsx)("br",{},e)]})),Object(le.jsx)("br",{})]}):null,Object(le.jsx)("div",{className:Rr.a.items,children:p.filter((function(e){return!!e})).map((function(e){return Object(le.jsx)(Ft,{block:e},e._id)}))})]})]})]})}return null};var Lr=function(){var e=D().loggedIn,t=Object(g.f)("/"),n=Object(g.e)(),r=Object(d.useState)({}),c=Object(b.a)(r,2),a=c[0],o=c[1];return Object(d.useEffect)((function(){var e=new URLSearchParams(n.search).get("real_path");a.pathname!==e&&("string"===typeof e&&e.length>0?(window.history.replaceState(null,"",n.pathname),o({pathname:e})):o(n))}),[n,a,o]),Object(le.jsx)(le.Fragment,{children:Object(le.jsx)("div",{className:"".concat(v.a.app," ").concat(t?v.a.isStartpage:""),children:Object(le.jsxs)(Vt,{children:[t?null:Object(le.jsx)(Mt,{}),Object(le.jsx)(Gt,{children:e?Object(le.jsxs)(g.c,{location:a,children:[Object(le.jsx)(g.a,{path:"/view/:id",element:Object(le.jsx)(Ar,{})}),Object(le.jsx)(g.a,{path:"/edit/:id",element:Object(le.jsx)(Dr,{})}),Object(le.jsx)(g.a,{path:"/shortcode",element:Object(le.jsx)(an,{})}),Object(le.jsx)(g.a,{path:"/",element:Object(le.jsx)(Dt,{})})]}):Object(le.jsxs)(g.c,{location:a,children:[Object(le.jsx)(g.a,{path:"/view/:id",element:Object(le.jsx)(Ar,{})}),Object(le.jsx)(g.a,{path:"/edit/:id",element:Object(le.jsx)(Er,{})}),Object(le.jsx)(g.a,{path:"/shortcode",element:Object(le.jsx)(Er,{})}),Object(le.jsx)(g.a,{path:"/",element:Object(le.jsx)(Dt,{})})]})})]})})})},Vr=(n(212),n(112)),Mr={de:"Deutsch",en:"English",fr:"Fran\xe7ais"},Gr=Object.keys(Mr),zr="en";function Wr(e){return Hr.apply(this,arguments)}function Hr(){return(Hr=Object(y.a)(k.a.mark((function e(t){var r,c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(216)("./"+t+".ftl");case 2:return r=e.sent,e.next=5,fetch(r.default);case 5:return c=e.sent,e.next=8,c.text();case 8:return a=e.sent,e.abrupt("return",Object(A.a)({},t,new Vr.b(a)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ur(e){return qr.apply(this,arguments)}function qr(){return(qr=Object(y.a)(k.a.mark((function e(t){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(Wr));case 2:return n=e.sent,r=n.reduce((function(e,t){return Object.assign(e,t)})),e.abrupt("return",k.a.mark((function e(){var n,c,a,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(u.a)(t),e.prev=1,n.s();case 3:if((c=n.n()).done){e.next=11;break}return a=c.value,(o=new Vr.a(a)).addResource(r[a]),e.next=9,o;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e){var t=e.userLocales,n=e.children,r=e.onLocaleChange,c=Object(d.useState)(function(){var e=new Vr.a("");return e.addResource(new Vr.b("")),new ce.c([e])}()),a=Object(b.a)(c,2),o=a[0],i=a[1];return Object(d.useEffect)((function(){function e(){return(e=Object(y.a)(k.a.mark((function e(){var n,c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(ae.negotiateLanguages)(t,Gr,{defaultLocale:zr}),r&&r(n),e.next=4,Ur(n);case 4:c=e.sent,(a=new ce.c(c())).userLocales=t,a.defaultLocale=zr,a.supportedLocales=Gr,i(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,r]),o?Object(le.jsx)(ce.a,{l10n:o,children:n}):Object(le.jsx)("div",{children:"Loading texts\u2026"})}var Jr=n(332),Zr=n(177),Xr=n(347),Kr=n(335),Qr=n(337),Yr=n(333);window.domains={backend:"https://api.volt.link/",frontend:"https://beta.volt.link/"};var ec=new Kr.a({uri:window.domains.backend+"graphql/v1/",cache:new Qr.a,credentials:"include",defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}});function tc(){var e=Object(d.useState)(navigator.languages),t=Object(b.a)(e,2),n=t[0],r=t[1],c=Object(d.useState)(null),a=Object(b.a)(c,2),o=a[0],i=a[1];Object(d.useEffect)((function(){if(window.umami){var e=navigator.languages;if(e||Array.isArray(e)){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,c=(r=r.toLowerCase()).split("-")[0];c!==r&&window.umami.trackEvent("L: "+c),window.umami.trackEvent("L: "+r)}}catch(a){n.e(a)}finally{n.f()}}}}),[]);var s=Object(d.useCallback)((function(e){r([e.target.dataset.locale])}),[r]),l=Object(d.useCallback)((function(e){i(e.length>0?e[0]:"")}),[i]),p=Object(Jr.a)("(prefers-color-scheme: dark)"),O=j.a.useMemo((function(){return Object(Zr.a)({palette:{mode:p?"dark":"light"}})}),[p]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("div",{id:"react-notification",style:{zIndex:"10000"}},"react-notification"),Object(le.jsx)($r,{userLocales:n,onLocaleChange:l,children:Object(le.jsx)(Yr.a,{client:ec,children:Object(le.jsx)(Xr.a,{theme:O,children:Object(le.jsx)(Oe.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{minWidth:"unset"},classes:{variantSuccess:"".concat(f.a.snackbar," ").concat(f.a.success),variantError:"".concat(f.a.snackbar," ").concat(f.a.error),variantWarning:"".concat(f.a.snackbar," ").concat(f.a.warning),variantInfo:"".concat(f.a.snackbar," ").concat(f.a.info)},domRoot:document.getElementById("react-notification"),children:Object(le.jsx)(Zt.a,{children:Object(le.jsx)(Lr,{locales:Mr,currentLocale:o,onLanguageChange:s})})})})})},"AppLocalizationProvider")]})}O.a.render(Object(le.jsx)(tc,{}),document.getElementById("root"))},49:function(e,t,n){e.exports={coverphoto:"ViewerActionCard_coverphoto__3octg",icon:"ViewerActionCard_icon__3zy8N",title:"ViewerActionCard_title__1HxR6",iconLine:"ViewerActionCard_iconLine__1TXjK"}},57:function(e,t,n){e.exports={dialogsWrapper:"PermissionsEditor_dialogsWrapper__1xVvi",dialog:"PermissionsEditor_dialog__2rpyk",backdrop:"PermissionsEditor_backdrop__1dRPN",inputWrapper:"PermissionsEditor_inputWrapper__4DGsr",emailInput:"PermissionsEditor_emailInput__1uH8s",permissionRow:"PermissionsEditor_permissionRow__2HaWO",menuButton:"PermissionsEditor_menuButton__2jIMI",ownerInfo:"PermissionsEditor_ownerInfo__EEKXP",actions:"PermissionsEditor_actions__k4oBn"}},73:function(e,t,n){e.exports={main_headline:"PropertiesEditor_main_headline__3wy7R",propertiesFrame:"PropertiesEditor_propertiesFrame__1uBEz",properties_row:"PropertiesEditor_properties_row__2tX7M"}},74:function(e,t,n){e.exports={root:"IconPicker_root__2okyv",iconIsSet:"IconPicker_iconIsSet__SnQwA",coverphotoIsSet:"IconPicker_coverphotoIsSet__3m9Dw",icon:"IconPicker_icon__JWgfX",iconWrapper:"IconPicker_iconWrapper__1zo6g",sizing_pixel:"IconPicker_sizing_pixel__3TeE0",iconIsNotSet:"IconPicker_iconIsNotSet__1T0Zd",changeIconButton:"IconPicker_changeIconButton__TxsdG"}},78:function(e,t,n){e.exports={snackbar:"Snackbar_snackbar__119_w",default:"Snackbar_default__31-eU",success:"Snackbar_success__zvTW8",error:"Snackbar_error__3XeD6",warning:"Snackbar_warning__2CBXt",info:"Snackbar_info__EuVSN"}},79:function(e,t,n){e.exports={coverphoto:"CoverphotoPicker_coverphoto__1mWB4",root:"CoverphotoPicker_root__3T8t9",coverphotoIsNotSet:"CoverphotoPicker_coverphotoIsNotSet__1O3-S",button_wrapper:"CoverphotoPicker_button_wrapper__2oEjh",coverphotoIsSet:"CoverphotoPicker_coverphotoIsSet__2o24A",iconIsSet:"CoverphotoPicker_iconIsSet__D_4uA",changeCoverphotoButton:"CoverphotoPicker_changeCoverphotoButton__2GnZD"}},80:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",items:"Viewer_items__2FgjF"}},97:function(e,t,n){e.exports={coverphoto:"ViewerPageCard_coverphoto__tOV8d",icon:"ViewerPageCard_icon__Vn_YM",title:"ViewerPageCard_title__Lgi9t"}},98:function(e,t,n){e.exports={dialog:"SharingEditor_dialog__22jfY",backdrop:"SharingEditor_backdrop__1Gra9",inputWrapper:"SharingEditor_inputWrapper__1UyBD",input:"SharingEditor_input__brkXK",actions:"SharingEditor_actions__2zz6x"}},99:function(e,t,n){e.exports={block:"InlineEditorBlock_block__14-zd",block_input:"InlineEditorBlock_block_input__2I1iu",form_deactivated:"InlineEditorBlock_form_deactivated__2oktp",form_active:"InlineEditorBlock_form_active__hi5HC",reorderHandle:"InlineEditorBlock_reorderHandle__2_s23"}}},[[217,1,2]]]);
//# sourceMappingURL=main.cc99d2d4.chunk.js.map