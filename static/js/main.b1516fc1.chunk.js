(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[0],{108:function(e,t,n){e.exports={content:"SidebarContent_content__RAi8X",header:"SidebarContent_header__1pYRG",headerBar:"SidebarContent_headerBar__2xkje",scrollContainer:"SidebarContent_scrollContainer__2eS9U"}},111:function(e,t,n){e.exports={icon:"ViewerPageLine_icon__GiwAD",title:"ViewerPageLine_title__3zDUr"}},112:function(e,t,n){e.exports={coverphoto:"ViewerPageCard_coverphoto__tOV8d",icon:"ViewerPageCard_icon__Vn_YM",title:"ViewerPageCard_title__Lgi9t"}},115:function(e,t,n){e.exports={app:"Editor_app__3WzMm",spine_aligned:"Editor_spine_aligned__1h8Ra",contentWrapper:"Editor_contentWrapper__1cY6-",editor:"Editor_editor__2hX0g",loadingContent:"Editor_loadingContent__2fqdK",editor_form_row:"Editor_editor_form_row__17Pul"}},133:function(e,t,n){e.exports={icon:"ViewerPersonCard_icon__3fe_H",name:"ViewerPersonCard_name__3Ddq3"}},134:function(e,t,n){e.exports={header:"Header_header__3mObx",headerBar:"Header_headerBar__2YU41",notificationBanner:"Header_notificationBanner__104SP"}},149:function(e,t,n){e.exports={app:"App_app__3hbGO",isStartpage:"App_isStartpage__1Q6rs"}},156:function(e,t,n){e.exports={blockRow:"BlockTree_blockRow__80Vim",blockRowActions:"BlockTree_blockRowActions__GDOGf"}},157:function(e,t,n){e.exports={main:"Sidebar_main__1MCX5",open:"Sidebar_open__gnBQb"}},159:function(e,t,n){e.exports={rebuild_textarea:"HtmlInput_rebuild_textarea__ZfRzZ",show_placeholder:"HtmlInput_show_placeholder__hM8g2"}},179:function(e,t,n){var r=n(86).negotiateLanguages;function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var c=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===c.length?null:e[c[0]]}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",c=e.map((function(e){return e[n]})).filter(Boolean);if(0===c.length)return null;var a=r(t,c,{defaultLocale:c[0],strategy:"lookup"});return 0===a.length?null:e.filter((function(e){return e[n]===a[0]}))}e.exports={fluentByObject:c,fluentByArray:a,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=a(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=c(e,t));return"string"!==typeof e&&(e=n),e}}},189:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}},190:function(e,t,n){e.exports={error:"FancyInput_error__2DFWE"}},216:function(e,t,n){},295:function(e,t,n){var r={"./de.ftl":[304,3],"./en.ftl":[305,4],"./fr.ftl":[306,5]};function c(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],c=t[0];return n.e(t[1]).then((function(){return n(c)}))}c.keys=function(){return Object.keys(r)},c.id=295,e.exports=c},296:function(e,t,n){"use strict";n.r(t);var r=n(22),c=n(5),a=n(1),o=n.n(a),i=n(36),s=n.n(i),l=(n(216),n(77)),u=n.n(l),b=n(149),j=n.n(b),d=n(19),p=n(12),O=n(417),h=function(e){var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var t=window.matchMedia(e);t.matches!==r&&o(t.matches);var n=function(){return o(t.matches)};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[r,e]),r},f=n(3),x=n(108),v=n.n(x),g=n(426),m=n(361),_=n(421),k=n(360),y=n(420),w=n(363),C=n(364),I=n(365),N=n(385),S=n(386),F=n(387),P=n(378),E=n(388),B=n(389),T=n(390),D=n(391),R=n(392),A=n(393),L=n(10),V=n.n(L),M=n(20),G=n(95),W=n(86),z=n(62),U=n(179),H=n.n(U),q=n(0),$=function(e){return Object(q.jsx)(G.b,Object(f.a)(Object(f.a)({},e),{},{elems:Object(f.a)({br:Object(q.jsx)("br",{})},e.elems),children:Object(q.jsx)(o.a.Fragment,{children:e.children})}),e.id)};function J(e){return function(t){var n=o.a.useContext(z.a);return o.a.createElement(e,Object(f.a)({fluentByObject:function(e,t){if(t||(t=null),e){var c,a=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return a.includes(e)})),i=Object(W.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),s=Object(r.a)(i);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(e[l])return e[l]}}catch(u){s.e(u)}finally{s.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||" ")}},t))}}function Z(){var e=o.a.useContext(z.a);return Object(f.a)(Object(f.a)({},e),{},{getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return H.a.fluentByAny(t,e.userLocales,n)}})}var Y,X,K,Q=n(356),ee=n(41),te=n(415),ne=Object(te.a)(Y||(Y=Object(ee.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),re=Object(te.a)(X||(X=Object(ee.a)(["\n  mutation deleteBlock ($_id: ObjectID!) {\n    deleteBlock (_id: $_id)\n  }\n"]))),ce=(Object(te.a)(K||(K=Object(ee.a)(["\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n"]))),n(91));var ae,oe,ie,se,le,ue,be=function(){var e=Z().getString,t=Object(Q.a)(),n=Object(ce.b)(),r=n.enqueueSnackbar,c=n.closeSnackbar;return Object(a.useCallback)((function(n){return new Promise((function(a){var o=null;"object"===typeof(n=Object(f.a)({},n))&&null!==n&&n.hasOwnProperty("__typename")&&delete n.__typename;var i=new Promise((function(i){t.mutate({mutation:ne,variables:{block:n}}).then(function(){var t=Object(M.a)(V.a.mark((function t(s){var l;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:l=s.data,i("got-data"),null!==o&&c(o),"string"===typeof l.error?"no_edit_permission"===l.error?r(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):r(""+l.error,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3}):(a(Object(f.a)(Object(f.a)({},n),{},{_id:l.saveBlock})),r(e("path_editor_status_saved"),{variant:"success",preventDuplicate:!1,autoHideDuration:2e3}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var t=Object(M.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.error(n),i("got-error"),null!==o&&c(o),r(e("path_editor_status_error_while_saving",{error:n.message}),{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=r(e("path_editor_status_started_saving"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}))}),[r,c,t,e])},je=Object(te.a)(ae||(ae=Object(ee.a)(["\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n    }\n  }\n"]))),de=Object(te.a)(oe||(oe=Object(ee.a)(["\n  query getBlocks ($ids: [ObjectID], $types: [String], $archived: Boolean) {\n    blocks (ids: $ids, types: $types, archived: $archived) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n    }\n  }\n"]))),pe=Object(te.a)(ie||(ie=Object(ee.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n    }\n  }\n"]))),Oe=Object(te.a)(se||(se=Object(ee.a)(["\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),he=Object(te.a)(le||(le=Object(ee.a)(["\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed\n    }\n  }\n"]))),fe=Object(te.a)(ue||(ue=Object(ee.a)(["\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"])));function xe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)({}),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useState)(!1),s=Object(c.a)(i,2),l=s[0],u=s[1],b=Object(Q.a)();return Object(a.useEffect)((function(){b.query({query:pe}).then(function(){var e=Object(M.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("self")?(o(n.self),u(n.self.logged_in)):(o({}),u(!1));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),o({}),u(!1)}))}),[e,o,u,b]),Object(f.a)(Object(f.a)({},r),{},{loggedIn:l})}var ve=n(37),ge=n(425),me=n(362),_e=n(357),ke=n(411),ye=n(358);var we=function(e){var t=e.trigger,n=e.children,r=void 0===n?function(){}:n,o=Object(a.useRef)(null),i=Object(a.useState)(!1),s=Object(c.a)(i,2),l=s[0],u=s[1],b=function(){u(!1)},j=l?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(q.jsxs)(q.Fragment,{children:[t({ref:o,"aria-describedby":j,onClick:function(){u((function(e){return!e}))},style:{pointerEvents:l?"none":"all"}}),Object(q.jsxs)(_e.a,{children:[Object(q.jsx)("div",{onClick:b,style:{display:l?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(q.jsx)(ke.a,{id:j,open:l,anchorEl:o.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}},{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,tether:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(q.jsx)(ye.a,Object(f.a)(Object(f.a)({},t),{},{children:Object(q.jsx)("div",{children:r&&"function"===typeof r?r({open:l,style:{transformOrigin:"top left"},closePopover:b}):null})}))}})]})]})},Ce=["closePopover"];function Ie(e){var t=e.trigger,n=e.children;return Object(q.jsx)(we,{trigger:t,children:function(e){var t=e.closePopover,r=Object(ve.a)(e,Ce);return Object(q.jsx)(ge.a,Object(f.a)(Object(f.a)({},r),{},{sx:{maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(q.jsxs)(y.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:[n,Object(q.jsx)(k.a,{style:{opacity:.2}}),Object(q.jsxs)(g.a,{style:{marginTop:"8px"},onClick:t,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(me.a,{})}),Object(q.jsx)(_.a,{children:Object(q.jsx)($,{id:"block_menu_close_menu"})})]})]})}))}})}var Ne={page:Object(q.jsx)(w.a,{}),person:Object(q.jsx)(C.a,{}),automation:Object(q.jsx)(I.a,{})},Se=["page","automation"];function Fe(e){var t=e.createBlock;return Object(q.jsx)(q.Fragment,{children:Se.map((function(e){return Object(q.jsxs)(g.a,{onClick:function(){return t({type:e})},children:[Object(q.jsx)(m.a,{children:Ne[e]}),Object(q.jsx)(_.a,{children:Object(q.jsx)($,{id:"create_new_"+e})})]},e)}))})}function Pe(e){var t=e.trigger,n=e.createBlock;return xe().loggedIn?Object(q.jsxs)(Ie,{trigger:t,children:[Object(q.jsx)("div",{style:{marginTop:"8px"}}),Object(q.jsx)(Fe,{createBlock:n})]}):null}var Ee=n(183),Be=n(195),Te=n(184),De=n(427),Re=n(418),Ae=n(369),Le=n(370),Ve=n(371),Me=n(372),Ge=n(373),We=n(374),ze=n(375),Ue=n(376),He=n(377),qe=n(379),$e=n(380);var Je=function(){var e=Object(Q.a)();return Object(a.useCallback)((function(t){return new Promise((function(n,r){e.mutate(t).then((function(e){var t=e.data;"string"===typeof t.error?r(t.error):n(t)})).catch(r)}))}),[e])},Ze=n(422),Ye=n(366);function Xe(e){var t=e.parentMenuIsOpen,n=void 0===t||t,r=e.label,o=void 0===r?"":r,i=e.triggerProps,s=void 0===i?{}:i,l=e.MenuListProps,u=void 0===l?{}:l,b=e.position,j=void 0===b?"right":b,d=e.onOpen,p=void 0===d?function(){}:d,O=e.children,h=Object(a.useRef)(null),x=Object(a.useState)(!1),v=Object(c.a)(x,2),_=v[0],y=v[1],w=_&&n,C=Object(a.useCallback)((function(){var e=!w;y(e),!0===e&&p()}),[y,w,p]),I=Object(a.useCallback)((function(){y(!1)}),[y]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)(g.a,Object(f.a)(Object(f.a)({},s),{},{ref:h,onClick:C,style:Object(f.a)({display:"flex",justifyContent:"space-between"},s.style),children:[Object(q.jsx)("div",{style:{display:"flex"},children:o}),Object(q.jsx)(Ye.a,{style:{marginRight:"-10px"}})]})),Object(q.jsx)(Ze.a,{style:{pointerEvents:"none"},anchorEl:h.current,anchorOrigin:{vertical:"top",horizontal:"right"===j?"right":"left"},transformOrigin:{vertical:"top",horizontal:"right"===j?"left":"right"},open:w,autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,onClose:I,sx:{marginTop:"-8px"},MenuListProps:Object(f.a)(Object(f.a)({},u),{},{sx:Object(f.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},u.sx)}),children:Object(q.jsxs)("div",{style:{pointerEvents:"auto"},children:[O,Object(q.jsx)(k.a,{style:{opacity:.2}}),Object(q.jsxs)(g.a,{style:{marginTop:"8px"},onClick:I,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(me.a,{})}),Object(q.jsx)($,{id:"block_menu_close_menu"})]})]})})]})}var Ke=["closePopover","open"];function Qe(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&Qe(e[n],t);return e}var et=J((function(e){var t=e.block,n=void 0===t?{}:t,r=e.getString,o=e.trigger,i=e.setType,s=e.createBlock,l=e.toggle_active,u=void 0===l?null:l,b=e.active,j=void 0===b?null:b,p=e.onRemoveRow,O=void 0===p?null:p,h=(e.addRowBefore,Object(d.g)()),x=n._id,v=void 0===x?"":x,N=n.type,S=void 0===N?"":N,F=Object(a.useState)(!0===n.properties.archived),E=Object(c.a)(F,2),B=E[0],T=E[1],D=Object(a.useCallback)((function(){h("/".concat(v,"/view"))}),[v,h]),R=Object(a.useCallback)((function(){h("/".concat(v,"/edit"))}),[v,h]),A=Je(),L=Object(a.useCallback)((function(){var e=!0!==B,t=Qe(n,"__typename");A({mutation:ne,variables:{block:Object(f.a)(Object(f.a)({},t),{},{properties:Object(f.a)(Object(f.a)({},t.properties),{},{archived:e})})}}).then((function(){T(e)})).catch(console.error)}),[A,n,B,T]),V=n.metadata||{};return Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(we,{trigger:o,children:function(e){var t=e.closePopover,n=e.open,c=Object(ve.a)(e,Ke);return Object(q.jsx)(ge.a,Object(f.a)(Object(f.a)({},c),{},{sx:{maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:Object(q.jsxs)(y.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%"},children:["function"===typeof i?Object(q.jsxs)(Xe,{parentMenuIsOpen:n,label:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(Ae.a,{})}),Object(q.jsx)($,{id:"block_menu_choose_type_label"})]}),MenuListProps:{style:{marginTop:"-8px"}},children:[Object(q.jsx)(De.a,{style:{whiteSpace:"nowrap",lineHeight:"1",margin:"-8px 0 0 0",padding:"12px 16px 12px",backgroundColor:"var(--background-contrast)",color:"var(--on-background)"},children:Object(q.jsx)($,{id:"block_menu_choose_type_label"})}),Object(q.jsx)("div",{style:{height:"4px"}}),[{value:"page",icon:Object(q.jsx)(w.a,{}),label:r("block_menu_type_label_page")},{value:"person",icon:Object(q.jsx)(C.a,{}),label:r("block_menu_type_label_person")},{value:"button",icon:Object(q.jsx)(Le.a,{}),label:r("block_menu_type_label_button")},{value:"headline",icon:Object(q.jsx)(Ve.a,{}),label:r("block_menu_type_label_headline")},{value:"text",icon:Object(q.jsx)(Me.a,{}),label:r("block_menu_type_label_text")},{value:"divider",icon:Object(q.jsx)(Ge.a,{}),label:r("block_menu_type_label_divider")},{value:"checkbox",icon:Object(q.jsx)(We.a,{}),label:r("block_menu_type_label_checkbox")},{value:"automation",icon:Object(q.jsx)(I.a,{}),label:r("block_menu_type_label_automation")}].map((function(e){return Object(q.jsxs)(g.a,{selected:e.value===S,onClick:function(){return i(e.value)},children:[Object(q.jsx)(m.a,{children:e.icon}),e.label]},e.value)}))]}):null,"boolean"===typeof j&&u?Object(q.jsxs)(g.a,{onClick:u,children:[Object(q.jsx)(m.a,{children:j?Object(q.jsx)(ze.a,{}):Object(q.jsx)(Ue.a,{})}),j?Object(q.jsx)($,{id:"block_menu_hide"}):Object(q.jsx)($,{id:"block_menu_show"})]}):null,Object(q.jsxs)(g.a,{onClick:L,children:[Object(q.jsx)(m.a,{children:!0===B?Object(q.jsx)(He.a,{}):Object(q.jsx)(P.a,{})}),!0===B?Object(q.jsx)($,{id:"block_menu_unarchive"}):Object(q.jsx)($,{id:"block_menu_archive"})]}),"string"===typeof v&&""!==v?Object(q.jsxs)("div",{children:["function"===typeof i||"boolean"===typeof j&&u||O||"function"===typeof s?Object(q.jsx)(k.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}):null,Object(q.jsxs)(g.a,{style:{marginTop:"8px"},onClick:D,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(qe.a,{})}),Object(q.jsx)($,{id:"view_block"})]}),Object(q.jsxs)(g.a,{onClick:R,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)($e.a,{})}),Object(q.jsx)($,{id:"edit_block"})]})]}):null,Object(q.jsx)(k.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),Object(q.jsxs)(g.a,{onClick:t,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(me.a,{})}),Object(q.jsx)($,{id:"block_menu_close_menu"})]}),Object(q.jsx)(k.a,{style:{opacity:.2,marginTop:"8px",marginBottom:"8px"}}),Object(q.jsx)(Re.a,{sx:{paddingTop:"0",paddingBottom:"0"},children:Object(q.jsx)(_.a,{primary:Object(q.jsx)($,{id:"block_menu_info_modified"}),secondary:(V.modified||"").replace(/[TZ]/g," ")})})]})}))}})})})),tt=n(185),nt=n.n(tt),rt=n(186),ct=n.n(rt),at=n(187),ot=n.n(at),it=n(188),st=nt()({html:!1,xhtmlOut:!1,linkify:!0,typographer:!0,breaks:!1});function lt(e){return e=(e=e||"").replace(/\(TM\)/gi,"\u2122").replace(/\(SM\)/gi,"\u2120").replace(/\(C\)/gi,"\xa9").replace(/\(R\)/gi,"\xae"),e=st.renderInline(e),e=it.a.parse(e,{folder:"svg",ext:".svg",base:"/public/twemoji/assets/"})}st.use(ct.a),st.use(ot.a);var ut=function(e){var t=e.block,n=Object(a.useState)({__html:""}),r=Object(c.a)(n,2),o=r[0],i=r[1];return Object(a.useEffect)((function(){var e=lt(t.properties.text);i({__html:e})}),[t,i]),Object(q.jsx)("h2",{dir:"auto",dangerouslySetInnerHTML:o,style:{whiteSpace:"pre-wrap"}})};var bt=function(e){var t=e.block,n=Object(a.useState)({__html:""}),r=Object(c.a)(n,2),o=r[0],i=r[1];return Object(a.useEffect)((function(){var e=lt(t.properties.text);i({__html:e})}),[t,i]),Object(q.jsx)("p",{dir:"auto",dangerouslySetInnerHTML:o,style:{whiteSpace:"pre-wrap"}})};var jt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,o=Object(a.useState)({__html:""}),i=Object(c.a)(o,2),s=i[0],l=i[1];Object(a.useEffect)((function(){var e=lt(t.properties.text);l({__html:e})}),[t,l]);var u="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(u=t.properties.action.url);var b=r.hasOwnProperty("click");return!1===b&&""!==u?Object(q.jsx)("a",{href:u,children:Object(q.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:s,className:"default square",style:{margin:"0",whiteSpace:"pre-wrap"}})}):!0===b?Object(q.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:s,disabled:"disabled",className:"default square",style:{margin:"0",whiteSpace:"pre-wrap"},onClick:r.onclick}):Object(q.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:s,disabled:"disabled",className:"default square",style:{margin:"0",whiteSpace:"pre-wrap"}})};function dt(){return Object(q.jsx)("hr",{})}var pt=n(381);var Ot=function(e){var t=e.block,n=t.properties.text||"",r=Boolean(t.properties.checked),c={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(q.jsxs)("p",{dir:"auto",children:[r?Object(q.jsx)(We.a,{style:c}):Object(q.jsx)(pt.a,{style:c}),n]})},ht=n(50),ft=n(382),xt=n(111),vt=n.n(xt);var gt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=Z().getString,o=Object(d.g)(),i=t._id,s=Object(a.useCallback)((function(){o("/".concat(i,"/view"))}),[o,i]),l=Object(ht.getImageUrl)(t.properties.icon);l||(l=Object(ht.getImageUrl)(t.properties.coverphoto));var u=t.properties.text||c("placeholder_main_headline");return Object(q.jsx)("div",{onClick:r.hasOwnProperty("click")?r.click:s,className:"clickable_card ".concat(vt.a.root),children:Object(q.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[""===l?Object(q.jsx)(ft.a,{className:vt.a.icon}):Object(q.jsx)("div",{className:vt.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=40&h=40&url=").concat(encodeURIComponent(l),")")},alt:u}),Object(q.jsx)("span",{dir:"auto",className:vt.a.title,children:u})]})})},mt=n(112),_t=n.n(mt);var kt=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=Z().getString,o=Object(d.g)(),i=t._id,s=Object(a.useCallback)((function(){o("/".concat(i,"/view"))}),[o,i]),l=Object(ht.getImageUrl)(t.properties.coverphoto),u=Object(ht.getImageUrl)(t.properties.icon);u||(u=Object(ht.getImageUrl)(t.properties.coverphoto));var b=t.properties.text||c("placeholder_main_headline");return Object(q.jsxs)("div",{onClick:r.hasOwnProperty("click")?r.click:s,className:"clickable_card",children:[""===l?null:Object(q.jsx)("div",{className:_t.a.coverphoto,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=400&h=400&url=").concat(encodeURIComponent(l),")")},alt:b}),Object(q.jsxs)("div",{className:"type_p",style:{margin:"0"},children:[""===u?Object(q.jsx)(ft.a,{className:_t.a.icon}):Object(q.jsx)("div",{className:_t.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=40&h=40&url=").concat(encodeURIComponent(u),")")},alt:b}),Object(q.jsx)("span",{dir:"auto",className:"".concat(_t.a.title),children:b})]})]})},yt=n(383),wt=n(133),Ct=n.n(wt);var It=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=Object(d.g)(),o=t._id,i=Object(a.useCallback)((function(){c("/".concat(o,"/view"))}),[c,o]),s=Object(ht.getImageUrl)(t.properties.icon),l=t.properties.text||"";return Object(q.jsxs)("div",{onClick:r.hasOwnProperty("click")?r.click:i,className:"clickable_card",style:{display:"flex",alignItems:"center"},children:[""===s?Object(q.jsx)(yt.a,{className:Ct.a.icon}):Object(q.jsx)("div",{className:Ct.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=40&h=40&url=").concat(encodeURIComponent(s),")")},alt:l}),Object(q.jsx)("span",{className:Ct.a.name,dir:"auto",children:l})]})},Nt=n(113),St=n.n(Nt),Ft=n(114),Pt=n(57),Et=n.n(Pt);var Bt=function(e){var t=e.block,n=void 0===t?{}:t,r=e.actions,c=void 0===r?{}:r,o=Object(d.g)(),i=n._id,s=Object(a.useCallback)((function(){o("/".concat(i,"/view"))}),[o,i]),l=Object(ht.getImageUrl)(n.properties.icon),u=n.properties.text||"",b=null,j=(n.properties||{}).trigger||{},p=j.type;return b="path"===p?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(St.a,{path:Ft.b,size:1,className:Et.a.icon}),Object(q.jsxs)("p",{children:["/",j.path]})]}):"click"===p?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(St.a,{path:Ft.a,size:1,className:Et.a.icon}),Object(q.jsx)("p",{children:j.blockId})]}):"cron"===p?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(St.a,{path:Ft.d,size:1,className:Et.a.icon}),Object(q.jsx)("p",{children:j.cron})]}):"block_change"===p?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(St.a,{path:Ft.c,size:1,className:Et.a.icon}),Object(q.jsx)("p",{children:j.blockId})]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(I.a,{className:Et.a.icon}),Object(q.jsx)("p",{children:Object.keys(j).length>0?JSON.stringify(j):null})]}),Object(q.jsx)("div",{onClick:c.hasOwnProperty("click")?c.click:s,className:"clickable_card ".concat(Et.a.root),children:Object(q.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[""===l?Object(q.jsx)(I.a,{className:Et.a.icon}):Object(q.jsx)("div",{className:Et.a.icon,style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=40&h=40&url=").concat(encodeURIComponent(l),")")},alt:u}),Object(q.jsxs)("div",{className:Et.a.content,children:[""!==u?Object(q.jsx)("div",{dir:"auto",className:Et.a.title,children:u}):null,null!==b?Object(q.jsx)("div",{className:Et.a.iconLine,children:b}):null]})]})})},Tt=n(189),Dt=n.n(Tt),Rt=["block","actions","size","style"];var At=function(e){var t=e.block,n=void 0===t?{}:t,r=e.actions,c=void 0===r?{}:r,a=e.size,o=void 0===a?"card":a,i=e.style,s=Object(ve.a)(e,Rt),l=null;switch(n.type||null){case"headline":l=Object(q.jsx)(ut,Object(f.a)({block:n,actions:c},s),n._id);break;case"text":l=Object(q.jsx)(bt,Object(f.a)({block:n,actions:c},s),n._id);break;case"button":l=Object(q.jsx)(jt,Object(f.a)({block:n,actions:c},s),n._id);break;case"divider":l=Object(q.jsx)(dt,Object(f.a)({block:n,actions:c},s),n._id);break;case"checkbox":l=Object(q.jsx)(Ot,Object(f.a)({block:n,actions:c},s),n._id);break;case"page":switch(o){case"line":l=Object(q.jsx)(gt,Object(f.a)({block:n,actions:c},s),n._id);break;default:l=Object(q.jsx)(kt,Object(f.a)({block:n,actions:c},s),n._id)}break;case"person":l=Object(q.jsx)(It,Object(f.a)({block:n,actions:c},s),n._id);break;case"automation":l=Object(q.jsx)(Bt,Object(f.a)({block:n,actions:c},s),n._id);break;default:l=JSON.stringify(n)}return Object(q.jsx)("div",{className:Dt.a.root,style:i,children:l},n._id)},Lt=n(156),Vt=n.n(Lt),Mt=n(384);var Gt=function(){var e=Object(Q.a)();return Object(a.useCallback)((function(t){return new Promise((function(n){e.query({query:de,variables:t}).then(function(){var e=Object(M.a)(V.a.mark((function e(t){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(r=t.data).error&&r.blocks?n(r.blocks||[]):(console.error(r.error),n([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e])},Wt=function(){return Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)};var zt=function(e){var t=e.createBlock,n=e.onClick,r=e.index,c=e.style,a={click:function(){n(o)}},o=e.data[r],i=Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(At,{size:"line",block:o,actions:a,style:{flexGrow:"1",width:"100%"}}),Object(q.jsx)("div",{className:Vt.a.blockRowActions,children:Object(q.jsx)(et,{block:o,createBlock:t,trigger:function(e){return Object(q.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text hasIcon",style:{margin:"0 0 0 var(--basis_x2)",padding:"var(--basis) 0",flexShrink:"0"},children:Object(q.jsx)(Mt.a,{className:"icon"})}))}})})]});return Object(q.jsx)("div",{style:Object(f.a)({display:"flex",alignItems:"center",flexDirection:"row"},c),className:Vt.a.blockRow,children:i},o._id)};var Ut=function(e){var t=e.createBlock,n=void 0===t?function(){}:t,r=e.onClick,i=void 0===r?function(){}:r,s=e.onGetRefetch,l=void 0===s?function(){}:s,u=e.types,b=void 0===u?["page","person","action"]:u,j=e.archived,d=void 0!==j&&j,p=e.scrollContainer,O=void 0===p?window:p,h=o.a.useRef(null),x=o.a.useRef(null),v=o.a.useRef(null),g=Object(a.useState)(40),m=Object(c.a)(g,2),_=m[0],k=m[1],y=Object(a.useState)(0),w=Object(c.a)(y,2),C=w[0],I=w[1],N=Object(a.useState)([]),S=Object(c.a)(N,2),F=S[0],P=S[1],E=o.a.useRef({}),B=function(){var e=Object(a.useState)(Wt()),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=null,t=function(){clearTimeout(e),e=setTimeout((function(){r(Wt())}),150)};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),{height:n}}().height,T=Object(a.useCallback)((function(){if(x.current&&h.current){var e=h.current.getBoundingClientRect(),t=B-e.top,n=x.current.getBoundingClientRect().height;if("number"===typeof n&&!isNaN(n)&&n>40){var r=Math.min(t,n);k(~~r),I(~~Math.max(n-r,0))}}}),[B,x,h,k,I]);Object(Te.useScrollPosition)(T,[T],null,!1,300,O),Object(a.useEffect)((function(){T()}),[T]);var D=Gt(),R=Object(a.useCallback)((function(){0!==F.length&&E.current.archived===d&&E.current.types===b||(E.current.types=b,E.current.archived=d,D({types:b,archived:d}).then(function(){var e=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t),T();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)})))}),[F,D,b,d,P,T]);Object(a.useEffect)((function(){R()}),[R]),Object(a.useEffect)((function(){l(R)}),[l,R]);var A=function(e){return Object(q.jsx)(zt,Object(f.a)({createBlock:n,onClick:i},e))};return Object(q.jsx)("div",{style:{height:_,marginBottom:C},ref:h,children:Object(q.jsx)(Ee.a,{disableWidth:!0,children:function(e){var t=e.height;return Object(q.jsx)(Be.a,{itemData:F,itemCount:F.length,ref:v,innerRef:x,itemSize:40,height:t,width:"100%",style:{overflow:"hidden"},itemKey:function(e,t){return t[e]._id||e},children:A})}})})},Ht={page:Object(q.jsx)(w.a,{}),person:Object(q.jsx)(C.a,{}),automation:Object(q.jsx)(I.a,{})};function qt(){var e=Object(a.useRef)(!1);Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]);var t=Object(a.useState)(!1),n=Object(c.a)(t,2),r=n[0],o=n[1],i=Object(a.useCallback)((function(){e.current&&function(e,t,n){var r;return function(){var c=this,a=arguments,o=function(){r=null,n||e.apply(c,a)},i=n&&!r;clearTimeout(r),r=setTimeout(o,t),i&&e.apply(c,a)}}((function(){e.current&&o(!0)}),10)()}),[o,e]);Object(a.useEffect)((function(){i()}),[i]);var s=xe().loggedIn,l=Yt().toggleSidebar,u=Object(d.f)("/"),b=Object(a.useRef)(null),j=b.current,p=Object(a.useState)({page:!0,person:!0}),O=Object(c.a)(p,2),h=O[0],x=O[1],w=Object.entries(h).filter((function(e){return!0===Object(c.a)(e,2)[1]})).map((function(e){return Object(c.a)(e,1)[0]})),C=Object(a.useState)(!1),I=Object(c.a)(C,2),L=I[0],V=I[1];var M=be(),G=Object(d.g)(),W=Object(a.useCallback)((function(e){M(e).then((function(e){G("/".concat(e._id,"/edit"))})).catch((function(e){console.error(e)}))}),[M,G]),z=Object(a.useCallback)((function(e){var t=Object(f.a)({},h);t[e]=!t[e],x(t),"function"===typeof j&&j()}),[h,x,j]),U=Object(a.useCallback)((function(e){G("/".concat(e._id,"/view"))}),[G]),H=Object(a.useRef)(null);return Object(q.jsx)("div",{ref:H,className:v.a.scrollContainer,children:Object(q.jsxs)("div",{className:v.a.content,children:[Object(q.jsx)("header",{className:v.a.header,children:Object(q.jsxs)("div",{className:v.a.headerBar,children:[u?Object(q.jsx)("h1",{children:"Volt.Link"}):Object(q.jsx)("button",{onClick:l,className:"text hasIcon",style:{margin:"0"},children:Object(q.jsx)(N.a,{className:"icon"})}),Object(q.jsxs)("div",{children:[Object(q.jsx)("button",{className:"text hasIcon",onClick:function(){return j()},children:Object(q.jsx)(S.a,{className:"icon"})}),Object(q.jsxs)(Ie,{trigger:function(e){return Object(q.jsx)("button",Object(f.a)(Object(f.a)({className:"text hasIcon"},e),{},{children:Object(q.jsx)(F.a,{className:"icon"})}))},children:[Object(q.jsx)("div",{style:{marginTop:"8px"}}),Object.keys(h).map((function(e){return Object(q.jsxs)(g.a,{onClick:function(){return z(e)},selected:w.includes(e),children:[Object(q.jsx)(m.a,{children:Ht[e]}),Object(q.jsx)(_.a,{children:Object(q.jsx)($,{id:"block_menu_type_label_plural_"+e})})]},e)})),Object(q.jsx)(k.a,{style:{opacity:.2}}),Object(q.jsxs)(g.a,{onClick:function(){V((function(e){return!e}))},selected:!0===L,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(P.a,{className:"icon"})}),Object(q.jsx)(_.a,{children:Object(q.jsx)($,{id:L?"filter_menu_showing_archiv":"filter_menu_show_archiv"})})]})]}),Object(q.jsx)(Pe,{trigger:function(e){return Object(q.jsx)("button",Object(f.a)(Object(f.a)({className:"default hasIcon"},e),{},{children:Object(q.jsx)(E.a,{className:"icon"})}))},createBlock:W})]})]})}),Object(q.jsxs)(y.a,{style:{maxWidth:"100%"},children:[s?Object(q.jsx)("a",{href:"".concat(window.domains.frontend,"help"),children:Object(q.jsxs)(g.a,{children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(B.a,{})}),Object(q.jsx)(_.a,{primary:Object(q.jsx)($,{id:"help_page"})})]})}):null,s?Object(q.jsx)("a",{href:"".concat(window.domains.backend,"logout?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(q.jsxs)(g.a,{children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(T.a,{})}),Object(q.jsx)(_.a,{primary:Object(q.jsx)($,{id:"logout"})})]})}):Object(q.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(q.jsxs)(g.a,{children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(D.a,{})}),Object(q.jsx)(_.a,{primary:Object(q.jsx)($,{id:"login"})})]})}),Object(q.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:Object(q.jsxs)(g.a,{children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(R.a,{})}),Object(q.jsx)(_.a,{primary:Object(q.jsx)($,{id:"contact"})})]})}),Object(q.jsx)("a",{href:"https://github.com/voltbonn/edit.volt.link",target:"_blank",rel:"noopener noreferrer",children:Object(q.jsxs)(g.a,{children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(A.a,{})}),Object(q.jsx)(_.a,{primary:Object(q.jsx)($,{id:"source_code"})})]})})]}),Object(q.jsx)("br",{}),Object(q.jsx)(k.a,{style:{opacity:.2}}),Object(q.jsx)("br",{}),r?Object(q.jsx)(Ut,{onClick:U,createBlock:W,blockMenu:!0,onGetRefetch:function(e){b.current=e},types:w,archived:L,scrollContainer:H}):null]})})}var $t=n(157),Jt=n.n($t),Zt=Object(a.createContext)({});function Yt(){return Object(a.useContext)(Zt)}function Xt(e){var t=e.children,n=Object(a.useState)(!1),r=Object(c.a)(n,2),o=r[0],i=r[1],s=!Object(d.f)("/")&&o,l=Object(a.useCallback)((function(){i((function(e){return!e}))}),[i]);return Object(q.jsx)(Zt.Provider,{value:{open:s,setOpen:i,toggleSidebar:l},children:t})}function Kt(){var e=Yt(),t=e.open,n=e.toggleSidebar,r="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),c=h("(min-width: 960px)");return t?Object(q.jsx)(O.a,{variant:c?"permanent":"temporary",anchor:"left",open:t,onOpen:n,onClose:n,disableBackdropTransition:!r,disableDiscovery:r,sx:Object(p.a)({width:320,flexShrink:0},"& .MuiDrawer-paper",{width:320,boxSizing:"border-box",backgroundColor:"var(--background-contrast)",color:"var(--on-background)",border:"none"}),PaperProps:{sx:{background:"var(--background-contrast)",color:"var(--on-background)"}},children:Object(q.jsx)(qt,{})}):null}function Qt(e){var t=e.children,n=Yt().open;return Object(q.jsx)("main",{className:"".concat(Jt.a.main," ").concat(n?Jt.a.open:""),style:{"--sidebarWidth":"320px"},children:t})}var en=function(){var e=Z().getString,t=Object(Q.a)(),n=Object(ce.b)(),r=n.enqueueSnackbar,c=n.closeSnackbar;return Object(a.useCallback)((function(n){return new Promise((function(a){var o=null;if(n&&""!==n){var i=new Promise((function(i){t.query({query:je,variables:{_id:n}}).then(function(){var t=Object(M.a)(V.a.mark((function t(n){var s,l;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=n.data,i("got-data"),null!==o&&c(o),"string"!==typeof s.error&&s.block?(l=s.block,a(l)):"no_edit_permission"===s.error?r(e("path_editor_edit_permission_error"),{variant:"error",preventDuplicate:!0,autoHideDuration:5e3}):r(""+s.error,{variant:"error",preventDuplicate:!0,autoHideDuration:5e3});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),i("got-error"),null!==o&&c(o),r("[could not load data] "+t.message,{variant:"error",preventDuplicate:!0,autoHideDuration:2e3});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));Promise.race([new Promise((function(e){setTimeout((function(){e("show-loading")}),300)})),i]).then((function(t){"show-loading"===t&&(o=r(e("path_editor_status_started_loading"),{persist:!0,preventDuplicate:!0}))})).catch((function(e){return console.error}))}else a({type:"text"})}))}),[r,c,t,e])};function tn(){var e=Object(Q.a)();return Object(a.useCallback)((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r){t&&""!==t?e.query({query:fe,variables:{_id:t,roles:n}}).then(function(){var e=Object(M.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data).hasOwnProperty("blockMatchesRoles")?r(n.blockMatchesRoles):r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):r(!1)}))}),[e])}var nn=n(403),rn=n(404),cn=n(405),an=n(115),on=n.n(an),sn=n(134),ln=n.n(sn),un=n(394),bn=n(395),jn=n(396),dn=n(43);function pn(e){var t=e.title,n=e.block,r=void 0===n?{}:n,o=e.rightActions,i=e.notificationBanner,s=Yt(),l=s.open,u=s.toggleSidebar,b=Object(Q.a)(),j=r?r._id:null,d=Object(a.useState)([]),p=Object(c.a)(d,2),O=p[0],h=p[1],x=Object(a.useState)([]),v=Object(c.a)(x,2),g=v[0],m=v[1],_=Object(a.useCallback)((function(e){b.query({query:he,variables:{_id:e}}).then(function(){var e=Object(M.a)(V.a.mark((function e(t){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"string"!==typeof(n=t.data).error&&n.blocks?h(n.blocks||[]):(console.error(n.error),h([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),h([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[b,h]),k=Object(a.useCallback)((function(e){b.query({query:Oe,variables:{_id:e,types:["page","person","action"]}}).then(function(){var t=Object(M.a)(V.a.mark((function t(n){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"string"!==typeof(r=n.data).error&&r.blocks?m((r.blocks||[]).filter((function(t){return t._id!==e}))):(console.error(r.error),m([]));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(function(){var e=Object(M.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),m([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[b,m]);Object(a.useEffect)((function(){j&&(_(j),k(j))}),[j,_,k]);var y=Object(q.jsxs)(q.Fragment,{children:[l?null:Object(q.jsx)("button",{onClick:u,className:"text hasIcon",style:{margin:"0"},children:Object(q.jsx)(un.a,{className:"icon"})}),Object(q.jsxs)("div",{style:{flexGrow:"1"},children:[Object(q.jsx)(dn.b,{to:"/",children:Object(q.jsx)("button",{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(q.jsx)(bn.a,{style:{verticalAlign:"middle"}})})}),Object(q.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"}),j&&O.length>0?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(Ie,{trigger:function(e){return Object(q.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(q.jsx)(jn.a,{style:{verticalAlign:"middle"}})}))},children:O.map((function(e){return Object(q.jsx)(At,{block:e,size:"line",style:{margin:"var(--basis_x4) var(--basis_x2)"}},e._id)}))}),Object(q.jsx)("span",{style:{margin:"var(--basis_x2)",opacity:"var(--alpha)"},children:"/"})]}):null,g.length>0?Object(q.jsx)(Ie,{trigger:function(e){return Object(q.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"text",style:{margin:"calc(-2 * var(--basis))"},children:Object(q.jsx)("span",{style:{fontWeight:"bold"},children:t})}))},children:g.map((function(e){return Object(q.jsx)(At,{block:e,size:"line",style:{margin:"var(--basis_x4) var(--basis_x2)"}},e._id)}))}):Object(q.jsx)("span",{style:{fontWeight:"bold"},children:t})]})]});return Object(q.jsxs)("header",{className:ln.a.header,children:[Object(q.jsxs)("div",{className:ln.a.headerBar,children:[y,o]}),i?Object(q.jsx)("div",{className:ln.a.notificationBanner,children:i}):null]})}var On=n(416),hn=n(397),fn=n(398),xn=n(399),vn=n(96),gn=n.n(vn),mn=n(158),_n=n(159),kn=n.n(_n),yn=["type","defaultValue","children","className","onChange","onBlur","onError","linebreaks","style","placeholder","onInputRef","onGoToPrevInput","onGoToNextInput","onSplitText","onMergeToPrevInput","onMergeFromNextInput"];function wn(e,t){if(e.normalize(),!window.getSelection)return 0;var n=window.getSelection(),r=n.rangeCount>0?n.getRangeAt(0):null;if(!r)return 0;var c=r.cloneRange();c.selectNodeContents(e),c.setEnd(r.endContainer,r.endOffset);var a=c.cloneContents(),o=0;return a.childNodes.length>0&&("first"===t?o=3===a.childNodes[0].nodeType?a.childNodes[0].length:0:"last"===t&&(o=3===a.childNodes[a.childNodes.length-1].nodeType?a.childNodes[a.childNodes.length-1].length:a.childNodes.length>1&&3===a.childNodes[a.childNodes.length-2].nodeType?a.childNodes[a.childNodes.length-2].length:0)),c.detach(),o}function Cn(e){var t=getComputedStyle(e),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),c=parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),a=e.offsetHeight-n-c,o=Object(mn.a)(e),i=Object(mn.b)(e);i.top=i.top-o.top,i.left=i.left-o.left;var s=i.top<i.height,l=a-i.top<i.height,u=function(e){if(e.normalize(),!window.getSelection)return 0;var t=window.getSelection(),n=t.rangeCount>0?t.getRangeAt(0):null;if(!n)return 0;var c=n.cloneRange();c.selectNodeContents(e),c.setEnd(n.endContainer,n.endOffset);var a,o=c.cloneContents(),i=0,s=Object(r.a)(o.childNodes);try{for(s.s();!(a=s.n()).done;){var l=a.value;3===l.nodeType?i+=l.textContent.length:1===l.nodeType&&"BR"===l.nodeName&&(i+=1)}}catch(u){s.e(u)}finally{s.f()}return c.detach(),i}(e),b=e.innerText.length||0;b<0&&(b=0);var j=b-u;return{inFirstLine:s,inLastLine:l,left:i.left,top:i.top,height:i.height,positionFromLineStart:wn(e,s?"first":"last"),positionFromStart:u,positionFromEnd:j}}var In=function(e){var t=e.type,n=void 0===t?"text":t,r=e.defaultValue,o=void 0===r?"":r,i=(e.children,e.className),s=e.onChange,l=e.onBlur,u=(e.onError,e.linebreaks),b=e.style,j=e.placeholder,d=void 0===j?"":j,p=e.onInputRef,O=e.onGoToPrevInput,h=e.onGoToNextInput,f=e.onSplitText,x=e.onMergeToPrevInput,v=e.onMergeFromNextInput,g=(Object(ve.a)(e,yn),Object(a.useRef)(null)),m=Object(a.useState)(""),_=Object(c.a)(m,2),k=_[0],y=_[1],w=Object(a.useState)({__html:""}),C=Object(c.a)(w,2),I=C[0],N=C[1],S=Object(a.useCallback)((function(e){var t=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""}(e);if(I.__html!==t)return N({__html:t});y(e)}),[I,y,N]);Object(a.useEffect)((function(){k!==o&&S(o)}),[k,o,S]);var F=Object(a.useCallback)((function(e){var t=e.target.innerHTML||"";t=(t=!1===u?t.replace(/<\/? ?br ?\/?>/g," "):t.replace(/<\/? ?br ?\/?>/g,"\n")).trim(),y(t),s&&s(t)}),[s,y,u]),P=Object(a.useCallback)((function(){l&&l(k)}),[l,k]),E=Object(a.useCallback)((function(e){if("Enter"===e.key&&!0===e.shiftKey)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if("Tab"===e.key)document.execCommand("insertText",!1,"\t"),e.preventDefault();else if("ArrowUp"===e.key){if(O){var t=Cn(g.current);t.inFirstLine&&(O({caret:t}),e.preventDefault())}}else if("ArrowLeft"===e.key){if(O){var r=Cn(g.current);r.inFirstLine&&r.positionFromStart<=0&&(r.positionFromLineStart=-1,O({caret:r}),e.preventDefault())}}else if("ArrowDown"===e.key){if(h){var c=Cn(g.current);c.inLastLine&&(h({caret:c}),e.preventDefault())}}else if("ArrowRight"===e.key){if(h){var a=Cn(g.current);a.inLastLine&&a.positionFromEnd<=1&&(a.positionFromLineStart=0,h({caret:a}),e.preventDefault())}}else if("Enter"===e.key){if("code"===n)!1!==u&&document.execCommand("insertLineBreak"),e.preventDefault();else if(f){var o=Cn(g.current),i=g.current.innerText,s=i.slice(0,o.positionFromStart),l=i.slice(o.positionFromStart);f({texts:[s,l]}),e.preventDefault()}}else if("Backspace"===e.key){if(x){var b=Cn(g.current);0===b.positionFromStart&&b.inFirstLine&&(x({caret:b,text:g.current.innerText}),e.preventDefault())}}else if("Delete"===e.key&&v){var j=Cn(g.current);0===j.positionFromEnd&&j.inLastLine&&(v({caret:j,text:g.current.innerText}),e.preventDefault())}}),[g,u,O,h,f,x,v,n]);Object(a.useEffect)((function(){p&&p(g)}),[p,g]);var B=Object(a.useCallback)((function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain");!1===u&&(t=t.replace(/\n/g," ")),document.execCommand("insertText",!1,t)}),[u]);return Object(q.jsx)(q.Fragment,{children:Object(q.jsx)("div",{ref:g,onKeyDown:E,onInput:F,onBlur:P,onPaste:B,className:"".concat(kn.a.rebuild_textarea," ").concat(0===k.length?kn.a.show_placeholder:""," ").concat(i),contentEditable:!0,dangerouslySetInnerHTML:I,style:b,placeholder:d})})};function Nn(e){navigator.clipboard?navigator.clipboard.writeText(e).then((function(){console.info("Async: Copying to clipboard was successful!")}),(function(e){console.error("Async: Could not copy text: ",e)})):function(e){var t=document.createElement("textarea");t.value=e,t.style.top="0",t.style.left="0",t.style.position="fixed",document.body.appendChild(t),t.focus(),t.select();try{var n=document.execCommand("copy")?"successful":"unsuccessful";console.info("Fallback: Copying text command was "+n)}catch(r){console.error("Fallback: Oops, unable to copy",r)}document.body.removeChild(t)}(e)}var Sn=function(e){var t=e.defaultBlock,n=void 0===t?{}:t,r=e.open,o=void 0!==r&&r,i=e.onChange,s=e.onClose,l=Object(a.useState)(""),u=Object(c.a)(l,2),b=u[0],j=u[1];Object(a.useEffect)((function(){var e=((n.properties||{}).trigger||{}).path||"";j(e)}),[n,j]);var d=Object(a.useCallback)((function(e){var t=Object(f.a)({},n.properties||{});""===e?(t.hasOwnProperty("trigger")&&delete t.trigger,t.hasOwnProperty("action")&&delete t.action):(t.trigger={type:"path",path:e},t.action={type:"render_block"}),j(e),i(t)}),[n,i,j]);return o?Object(q.jsx)(On.a,{open:o,onClose:s,hideBackdrop:!0,children:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:gn.a.backdrop,onClick:s}),Object(q.jsxs)("div",{className:gn.a.dialog,children:[Object(q.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Share the link"}),Object(q.jsxs)("div",{className:gn.a.inputWrapper,children:[Object(q.jsx)("span",{style:{paddingRight:"var(--basis)"},children:"volt.link/"}),Object(q.jsx)(In,{defaultValue:b,onBlur:d,linebreak:!1,className:gn.a.input,style:{margin:"0"}})]}),Object(q.jsx)("hr",{style:{opacity:.2}}),Object(q.jsxs)("div",{className:gn.a.actions,children:[""!==b?Object(q.jsxs)("div",{children:[Object(q.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://qrcode.volt.link/?c=volt.link/".concat(b),e.target="_blank",e.rel="noreferrer",e.click()},style:{marginInlineStart:"0"},children:[Object(q.jsx)(hn.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",children:Object(q.jsx)($,{id:"sharing_qrcode"})})]}),Object(q.jsxs)("button",{className:"text hasIcon",onClick:function(){var e=document.createElement("a");e.href="https://umami.qiekub.org/share/s0ZHBZbb/volt.link?url=%2F".concat(b),e.target="_blank",e.rel="noreferrer",e.click()},children:[Object(q.jsx)(fn.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",children:Object(q.jsx)($,{id:"sharing_statistics"})})]}),Object(q.jsxs)("button",{className:"text hasIcon",onClick:function(){Nn("https://volt.link/".concat(b))},children:[Object(q.jsx)(xn.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",children:Object(q.jsx)($,{id:"sharing_copy_url"})})]})]}):Object(q.jsx)("div",{}),Object(q.jsx)("button",{onClick:s,className:"green",style:{marginInlineEnd:"0"},children:"Done"})]})]})]})}):null},Fn=n(24),Pn=n(400),En=n(401),Bn=n(402),Tn=n(419),Dn=n(190),Rn=n.n(Dn),An=["children","className","style"];var Ln=function(e){var t=e.children,n=e.className,r=e.style,o=(Object(ve.a)(e,An),Object(a.useState)("")),i=Object(c.a)(o,2),s=i[0],l=i[1];return Object(q.jsxs)("div",{className:n,style:r,children:[t({setError:l}),s?Object(q.jsx)("div",{className:Rn.a.error,children:Object(q.jsx)($,{id:"error_"+s})}):null]})},Vn=["multiple","onChange","onError"],Mn=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,Gn=/((?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?))/gi;var Wn=function(e){var t=e.multiple,n=void 0!==t&&t,r=e.onChange,c=e.onError,o=Object(ve.a)(e,Vn),i=Object(a.useCallback)((function(e){if(r||c){var t=e.target.value||"",a=!1,o="";if(""!==t)if(!0===n){var i=t.match(Gn);i?(t=i,a=!0):o="Invalid email(s) format"}else t.match(Mn)?a=!0:o="invalid_email";r&&r(a?t:!0===n?[]:""),c&&c(o)}}),[n,r,c]);return Object(q.jsx)("input",Object(f.a)({type:"email",onChange:i},o))},zn=n(58),Un=n.n(zn);function Hn(e){var t=e.role;return Object(q.jsx)($,{id:"role-"+t})}function qn(e){var t=e.role,n=e.trigger,r=e.changeRole,a=e.removePermission,i=o.a.useState(null),s=Object(c.a)(i,2),l=s[0],u=s[1],b=Boolean(l),j=function(){u(null)};return Object(q.jsxs)(q.Fragment,{children:[n({onClick:function(e){u(e.currentTarget)}}),Object(q.jsxs)(Ze.a,{anchorEl:l,open:b,onClose:j,MenuListProps:{style:{maxWidth:"100%"}},children:["editor"===t?Object(q.jsxs)(g.a,{onClick:function(){return r("viewer")},children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(Ue.a,{})}),Object(q.jsx)(_.a,{children:Object(q.jsx)(Hn,{role:"viewer"})})]}):Object(q.jsxs)(g.a,{onClick:function(){return r("editor")},children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(Pn.a,{})}),Object(q.jsx)(_.a,{children:Object(q.jsx)(Hn,{role:"editor"})})]}),"function"===typeof a?Object(q.jsxs)(g.a,{onClick:a,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(En.a,{})}),Object(q.jsx)(_.a,{children:"Remove"})]}):null,Object(q.jsx)(k.a,{style:{opacity:.2}}),Object(q.jsxs)(g.a,{onClick:j,children:[Object(q.jsx)(m.a,{children:Object(q.jsx)(me.a,{})}),Object(q.jsx)(_.a,{children:"Close"})]})]})]})}function $n(e){var t=e.filter((function(e){return"owner"===e.role})).sort((function(e,t){return e.email.localeCompare(t.email)})),n=e.filter((function(e){return"@volteuropa.org"===e.email||"@public"===e.email})).sort((function(e,t){return e.email.localeCompare(t.email)})),r=e.filter((function(e){return"owner"!==e.role&&"@volteuropa.org"!==e.email&&"@public"!==e.email})).sort((function(e,t){return e.email.localeCompare(t.email)}));return[].concat(Object(Fn.a)(t),Object(Fn.a)(n),Object(Fn.a)(r))}var Jn=function(e){var t=e.defaultPermissions,n=e.open,o=void 0!==n&&n,i=e.onChange,s=e.onClose,l=Z().getString,u=xe(),b="";u&&u.user&&u.user.email&&(b=u.user.email);var j=Object(a.useState)(0),d=Object(c.a)(j,2),p=d[0],O=d[1],h=Object(a.useState)([]),x=Object(c.a)(h,2),v=x[0],g=x[1],m=Object(a.useState)([]),_=Object(c.a)(m,2),k=_[0],y=_[1],w=Object(a.useState)("editor"),C=Object(c.a)(w,2),I=C[0],N=C[1],S=Object(a.useCallback)((function(e){var t;(t=e||[],e=Object(Fn.a)(t).map((function(e){var t=Object(f.a)({},e);return t.tmp_id=Object(Tn.a)(),t})),""!==b)&&(0===e.filter((function(e){return"owner"===e.role})).length&&e.unshift({tmp_id:Object(Tn.a)(),email:b,role:"owner"}));g(e)}),[b,g]);Object(a.useEffect)((function(){Array.isArray(t)?S(t):S([])}),[S,t]);var F=Object(a.useCallback)((function(e){var t=v.filter((function(t){return t.email!==e}));"@volteuropa.org"===e&&(t=t.filter((function(e){return"@public"!==e.email}))),0===t.filter((function(e){return"owner"===e.role})).length&&(t=t.filter((function(e){return e.email!==b}))).unshift({tmp_id:Object(Tn.a)(),email:b,role:"owner"}),g(t),i(t)}),[v,b,g,i]),P=Object(a.useCallback)((function(e,t){var n=v.map((function(n){return n.email===e?Object(f.a)(Object(f.a)({},n),{},{role:t}):n}));g(n),i(n)}),[v,g,i]),E=Object(a.useCallback)((function(e,t){e.includes("@public")&&e.push("@volteuropa.org");var n,c=v.filter((function(t){return!e.includes(t.email)})),a=Object(r.a)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;c.unshift({tmp_id:Object(Tn.a)(),email:o,role:t})}}catch(s){a.e(s)}finally{a.f()}0===c.filter((function(e){return"owner"===e.role})).length&&(c=c.filter((function(e){return e.email!==b}))).unshift({tmp_id:Object(Tn.a)(),email:b,role:"owner"}),g(c),i(c)}),[v,b,g,i]),B=Object(a.useCallback)((function(){E(k,I),y([]),O((function(e){return e+1}))}),[k,I,E]);if(!o)return null;var T=0===v.filter((function(e){return"@volteuropa.org"===e.email})).length,D=0===v.filter((function(e){return"@public"===e.email})).length;return Object(q.jsx)(On.a,{open:o,onClose:s,hideBackdrop:!0,children:Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{className:Un.a.backdrop,onClick:s}),Object(q.jsx)("div",{className:Un.a.dialogsWrapper,children:Object(q.jsxs)("div",{className:Un.a.dialog,children:[Object(q.jsx)("h1",{style:{margin:"0 0 var(--basis_x4) 0"},children:"Give viewing and editing rights"}),Object(q.jsxs)("p",{children:["Enter @volteuropa.org addresses to give editing rights.",Object(q.jsx)("br",{}),"Groups addresses are not supported."]}),Object(q.jsxs)("div",{className:Un.a.inputWrapper,children:[Object(q.jsx)(Ln,{className:Un.a.emailInput,children:function(e){var t=e.setError;return Object(q.jsx)(Wn,{multiple:!0,onError:t,defaultValue:"",onChange:y,"aria-label":l("path_editor_permissions_edit_label"),placeholder:l("path_editor_permissions_edit_placeholder"),style:{flexGrow:"1",margin:"var(--basis) 0",width:"calc(100% - var(--basis_x2))"}})}}),Object(q.jsx)(qn,{role:I,changeRole:N,trigger:function(e){return Object(q.jsxs)("button",Object(f.a)(Object(f.a)({className:Un.a.menuButton},e),{},{children:[Object(q.jsx)(Hn,{role:I})," ",Object(q.jsx)(Bn.a,{})]}))}})]},p),k.length>0&&k[0].length>0?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("hr",{}),Object(q.jsx)("div",{className:Un.a.actions,children:Object(q.jsx)("button",{onClick:B,className:"green",style:{margin:"0"},children:k.length>1?Object(q.jsx)(q.Fragment,{children:"Add People"}):Object(q.jsx)(q.Fragment,{children:"Add Person"})})})]}):Object(q.jsxs)(q.Fragment,{children:[T||D?Object(q.jsxs)("div",{style:{marginTop:"var(--basis_x2)"},children:["Make visible for\u2026",T?Object(q.jsx)("button",{onClick:function(){return E(["@volteuropa.org"],"viewer")},children:"Volt Europa"}):null,D?Object(q.jsx)("button",{onClick:function(){return E(["@public"],"viewer")},children:"Public"}):null]}):null,0===v.length?null:Object(q.jsx)("hr",{style:{opacity:.2}}),$n(v).map((function(e){return Object(q.jsxs)("div",{className:Un.a.permissionRow,children:["@public"===e.email?Object(q.jsx)("strong",{children:"Public"}):"@volteuropa.org"===e.email?Object(q.jsx)("strong",{children:"Volt Europa"}):Object(q.jsx)("span",{children:e.email}),"owner"===e.role?Object(q.jsx)("strong",{className:"type_button ".concat(Un.a.ownerInfo),children:Object(q.jsx)(Hn,{role:e.role})}):Object(q.jsx)(qn,{role:e.role,removePermission:function(){return F(e.email)},changeRole:function(t){return P(e.email,t)},trigger:function(t){return Object(q.jsxs)("button",Object(f.a)(Object(f.a)({className:Un.a.menuButton},t),{},{children:[Object(q.jsx)(Hn,{role:e.role})," ",Object(q.jsx)(Bn.a,{})]}))}})]},e.tmp_id)})),Object(q.jsx)("hr",{style:{opacity:.2}}),Object(q.jsx)("div",{className:Un.a.actions,children:Object(q.jsx)("button",{onClick:s,className:"green",style:{margin:"0"},children:"Done"})})]})]})})]})})},Zn=n(82),Yn=n.n(Zn);var Xn=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,o=e.onBlur,i=e.style,s=e.className,l=e.disabled,u=void 0!==l&&l,b=Object(a.useState)(Boolean(n)),j=Object(c.a)(b,2),d=j[0],p=j[1],O=Object(a.useCallback)((function(){r&&r(d),o&&o(d)}),[r,o,d]),h=Object(a.useCallback)((function(){!0!==u&&(O(),p(!0))}),[u,O,p]),x=Object(a.useCallback)((function(){!0!==u&&(O(),p(!1))}),[u,O,p]);return Object(q.jsx)("div",{style:Object(f.a)({display:"inline-block",padding:"var(--basis)",cursor:!0===u?"default":"pointer",verticalAlign:"middle"},i),className:s,children:d?Object(q.jsx)(We.a,{onClick:x}):Object(q.jsx)(pt.a,{onClick:h})})},Kn=n(78),Qn=n.n(Kn);var er=function(e){var t=e.ariaLabel,n=e.items,r=e.defaultValue,o=e.onChange,i=e.style,s=e.className,l=Object(a.useState)(),u=Object(c.a)(l,2),b=u[0],j=u[1];Object(a.useEffect)((function(){return j(r)}),[r,j]);var d=Object(a.useCallback)((function(e){var t=e.target.dataset.value;j(t),o&&o(t)}),[j,o]);return Object(q.jsx)("div",{"aria-label":t,className:"buttonRow "+(s||""),style:Object(f.a)({display:"inline-block"},i),children:n.map((function(e){var t=e.value,n=e.title,r=e.icon||null;return Object(q.jsx)("button",{className:"default ".concat(b===t?"choosen":""," ").concat(r?"hasIcon":""),onClick:d,"data-value":t,children:Object(q.jsxs)("span",{style:{pointerEvents:"none"},children:[r||null,n?Object(q.jsx)("span",{style:{verticalAlign:"middle"},children:n}):null]})},t+"_"+n)}))})},tr=/^([\+-\.0-9A-Z\u017F\u212A]+:(?:\/\/)?)[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+(?:\.[\x2D\.0-9A-Z_a-z\xC0-\xFF\u017F\u1E9E\u212A\u212B]+)+[!#-;=\?-\[\]_a-z~\xC0-\xFF\u017F\u1E9E\u212A\u212B]+$/gi,nr=/^(?:(?:(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+(?:\.(?:(?![\t-\r "\(\),\.:-<>@\[-\]\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])[\s\S])+)*)|(?:"(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+"))@(?:(?:\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3})|(?:(?:[\x2D0-9A-Za-z\u017F\u212A]+\.)+[A-Za-z\u017F\u212A]{2,})\.?)$/gi,rr=/^(?:(?![\/:])[\s\S])+@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/gi;var cr=function(e){var t=e.defaultValue,n=void 0===t?"":t,r=e.onChange,o=e.onBlur,i=e.onError,s=e.placeholder,l=void 0===s?"https://":s,u=e.style,b=e.className,j=Object(a.useState)(n),d=Object(c.a)(j,2),p=d[0],O=d[1],h=Object(a.useCallback)((function(e){var t=e.target.value||"",n="";if(""!==t){var c=t.split(":"),a=c.shift(),o=c.join(":");"tel"===a||("mailto"===a||t.match(rr)?o.match(nr)||(n="invalid_mailto_url"):t.match(tr)||(n="invalid_url"))}r&&r(t),i&&i(n),O(t)}),[r,i]),f=Object(a.useCallback)((function(){o&&o(p)}),[o,p]);return Object(q.jsx)("input",{type:"url",onChange:h,onBlur:f,defaultValue:n,placeholder:l,style:u,className:b})},ar=n.p+"static/media/20200912_Plakatschlange_Koeln_Matteo Sant_Unione_011.3f9289d0.png",or=n.p+"static/media/Aktion.89c1bcdf.png",ir=n.p+"static/media/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.6824f6ef.png",sr=n.p+"static/media/Welcome-to-Volt.39e04eca.png",lr=n.p+"static/media/portugal.682fc2e3.jpg",ur=["closePopover"];var br=J((function(e){var t=e.getString,n=e.coverphotoValue,r=e.iconValue,c=e.onChange,a=e.className,o=void 0===a?"":a,i=e.style,s=void 0===i?{}:i,l=function(e){c({type:"url",url:e})},u=new RegExp("^(?:[a-z]+:)?//","i"),b=!1,j=!1;"object"!==typeof n||null===n||Array.isArray(n)||"url"===n.type&&"string"===typeof n.url&&u.test(n.url)&&(b=!0),"object"!==typeof r||null===r||Array.isArray(r)||"url"===r.type&&"string"===typeof r.url&&u.test(r.url)&&(j=!0);var d="";return n&&n.url&&(d=n.url||""),Object(q.jsx)("div",{className:"\n      ".concat(Qn.a.root,"\n      ").concat(b?Qn.a.coverphotoIsSet:Qn.a.coverphotoIsNotSet,"\n      ").concat(j?Qn.a.iconIsSet:Qn.a.iconIsNotSet,"\n      ").concat(o,"\n    "),style:s,children:Object(q.jsx)(we,{trigger:function(e){return Object(q.jsx)("div",{className:Qn.a.coverphoto,style:{backgroundImage:b?"url(".concat(window.domains.backend,"download_url?f=jpg&w=1400&h=400&url=").concat(encodeURIComponent(n.url),")"):""},children:Object(q.jsx)("div",{className:Qn.a.button_wrapper,children:Object(q.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:Qn.a.changeCoverphotoButton,children:"Set Coverphoto"}))})})},children:function(e){var n=e.closePopover,r=Object(ve.a)(e,ur);return Object(q.jsxs)(ge.a,Object(f.a)(Object(f.a)({},r),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(q.jsx)("h3",{style:{marginTop:"0"},children:Object(q.jsx)($,{id:"path_editor_coverphoto_label"})}),Object(q.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(q.jsx)($,{id:"path_editor_coverphoto_info"})}),Object(q.jsx)(Ln,{children:function(e){var t=e.setError;return Object(q.jsx)(cr,{onError:t,onChange:l,defaultValue:d,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(q.jsx)(er,{onChange:l,ariaLabel:t("path_editor_coverphoto_label"),defaultValue:d,items:[{value:"",title:t("path_editor_no_coverphoto")}].concat(Object(Fn.a)([{value:"https://assets.volteuropa.org/styles/scale_2880x/public/inline-images/tYADz4UyUAAcV5WlmWLlkXD9LG8W02U9LbQd8rxzQ2bt99lxwK.jpg",icon:ir},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2020-11/Welcome-to-Volt.jpg",icon:sr},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-07/20200912_Plakatschlange_Ko%CC%88ln_Matteo%20Sant_Unione_011.jpeg",icon:ar},{value:"https://assets.volteuropa.org/2021-11/portugal.jpg",icon:lr},{value:"https://assets.volteuropa.org/styles/scale_1920x/public/2021-05/Aktion.jpeg",icon:or}].map((function(e){var t=e.value,n=void 0===t?"":t,r=e.icon,c=void 0===r?"":r;return{value:n,icon:Object(q.jsx)("img",{alt:"",src:c,className:"icon image"})}}))))}),Object(q.jsx)("hr",{}),Object(q.jsx)("button",{onClick:n,style:{margin:0},children:"Close"})]}))}})})})),jr=n(73),dr=n.n(jr),pr=["closePopover"];var Or=J((function(e){var t=e.coverphotoValue,n=e.iconValue,r=e.onChange,c=e.className,a=e.style,o=function(e){r({type:"url",url:e})},i=new RegExp("^(?:[a-z]+:)?//","i"),s=!1,l=!1;return"object"!==typeof t||null===t||Array.isArray(t)||"url"===t.type&&"string"===typeof t.url&&i.test(t.url)&&(s=!0),"object"!==typeof n||null===n||Array.isArray(n)||"url"===n.type&&"string"===typeof n.url&&i.test(n.url)&&(l=!0),Object(q.jsx)("div",{className:"\n      ".concat(dr.a.root,"\n      ").concat(l?dr.a.iconIsSet:dr.a.iconIsNotSet,"\n      ").concat(s?dr.a.coverphotoIsSet:dr.a.coverphotoIsNotSet,"\n      ").concat(c,"\n    "),style:a,children:Object(q.jsx)(we,{trigger:function(e){return Object(q.jsxs)("div",{className:dr.a.iconWrapper,children:[Object(q.jsx)("div",{className:"".concat(dr.a.icon," ").concat(l?"":dr.a.no_image),style:{backgroundImage:l?"url(".concat(window.domains.backend,"download_url?f=jpg&w=400&h=400&url=").concat(encodeURIComponent(n.url),")"):""}}),Object(q.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:dr.a.changeIconButton,children:"Set Icon"}))]})},children:function(e){var t=e.closePopover,r=Object(ve.a)(e,pr);return Object(q.jsxs)(ge.a,Object(f.a)(Object(f.a)({},r),{},{sx:{maxWidth:"calc(calc(100vw - 32px) - var(--basis_x8))",maxHeight:"calc(calc(100vh - 32px) - var(--basis_x8))",overflow:"auto",padding:"var(--basis_x4)",background:"var(--background-contrast)",color:"var(--on-background)"},elevation:8,children:[Object(q.jsx)("h3",{style:{marginTop:"0"},children:Object(q.jsx)($,{id:"path_editor_icon_label"})}),Object(q.jsx)("em",{className:"body2",style:{display:"block",marginBottom:"var(--basis)"},children:Object(q.jsx)($,{id:"path_editor_icon_info"})}),Object(q.jsx)(Ln,{children:function(e){var t=e.setError;return Object(q.jsx)(cr,{onError:t,onBlur:o,defaultValue:n.url,style:{marginRight:"0",marginLeft:"0",width:"100%"}})}}),Object(q.jsx)("hr",{}),Object(q.jsx)("button",{onClick:t,style:{margin:0},children:"Close"})]}))}})})}));var hr=function(e){var t=e.defaultValue,n=e.className,r=e.style,o=e.onChange,i=Z().getString,s=Object(a.useState)({}),l=Object(c.a)(s,2),u=l[0],b=l[1];Object(a.useEffect)((function(){b(t)}),[t,b]);var j=Object(a.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(f.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(u)&&(b(r),o&&o(r))}}),[u,b,o]),d=u.type||"",p=null;return"click"===d?p=null:"path"===d&&(p=Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(In,{placeholder:i("trigger_input_path_placeholder"),defaultValue:u.path,onBlur:function(e){return j("path",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"}})})),Object(q.jsxs)("div",{className:n,style:Object(f.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},r),children:[Object(q.jsxs)("select",{onChange:function(e){return j("type",e.target.value)},defaultValue:u.type||"",style:{margin:"0"},children:[Object(q.jsx)("option",{value:"",children:"No Trigger"}),Object(q.jsx)("option",{value:"path",children:"Path"}),Object(q.jsx)("option",{value:"click",children:"Click"})]},u.type),p]})};var fr=function(e){var t=e.defaultValue,n=e.className,r=e.style,o=e.onChange,i=Z().getString,s=Object(a.useState)({}),l=Object(c.a)(s,2),u=l[0],b=l[1];Object(a.useEffect)((function(){b(t)}),[t,b]);var j=Object(a.useCallback)((function(e,t){var n={type:"string",path:"string",url:"string",cron:"string",blockId:"string"},r=Object(f.a)({},u);if(n.hasOwnProperty(e)){switch(n[e]){case"array":t.length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"string":""!==t?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;case"boolean":!0===t?r[e]=!0:r.hasOwnProperty(e)&&delete r[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?r[e]=t:r.hasOwnProperty(e)&&delete r[e];break;default:r[e]=t}JSON.stringify(r)!==JSON.stringify(u)&&(b(r),o&&o(r))}}),[u,b,o]),d=u.type||"",p=null;return"open_url"===d||"send_payload"===d?p=Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(Ln,{style:{flexGrow:"1",margin:"0",minWidth:"300px"},children:function(e){var t=e.setError;return Object(q.jsx)(cr,{onError:t,onBlur:function(e){return j("url",e)},defaultValue:u.url,placeholder:i("action_input_url_placeholder"),type:"text",style:{flexGrow:1,margin:"0",width:"100%"}})}})}):"render_block"!==d&&"run_block"!==d||(p=Object(q.jsx)(In,{placeholder:"blockId",defaultValue:u.blockId,onBlur:function(e){return j("blockId",e)},linebreak:!1,style:{flexGrow:"1",margin:"0",minWidth:"300px"}})),Object(q.jsxs)("div",{className:n,style:Object(f.a)({display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"100%",flexWrap:"wrap",gap:"var(--basis)"},r),children:[Object(q.jsxs)("select",{onChange:function(e){return j("type",e.target.value)},defaultValue:u.type||"",style:{margin:"0"},children:[Object(q.jsx)("option",{value:"",children:"No Action"}),Object(q.jsx)("option",{value:"open_url",children:"Open URL"}),Object(q.jsx)("option",{value:"render_block",children:"Render Block"})]},u.type),p]})};var xr=J((function(e){var t=e.getString,n=e.type,r=e.defaultProperties,o=void 0===r?{}:r,i=e.onChange,s=Object(a.useState)({}),l=Object(c.a)(s,2),u=l[0],b=l[1],j=Object(a.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r={text:"string",coverphoto:"string",icon:"string",imprint:"string",privacy_policy:"string",tags:"string",checked:"boolean",trigger:"object",action:"object",pronouns:"string"},c=Object(f.a)({},u);if(r.hasOwnProperty(e))switch(r[e]){case"array":t.length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"string":""!==t?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;case"boolean":!0===t?c[e]=!0:c.hasOwnProperty(e)&&delete c[e];break;case"object":"object"===typeof t&&null!==t&&Object.keys(t).length>0?c[e]=t:c.hasOwnProperty(e)&&delete c[e];break;default:c[e]=t}JSON.stringify(c)!==JSON.stringify(u)&&(b(c),!1===n&&i&&i(c))}),[u,b,i]),d=Object(a.useCallback)((function(){i&&i(u)}),[u,i]);Object(a.useEffect)((function(){b(Object(f.a)(Object(f.a)({},o),{},{text:o.text||""}))}),[o,b]);var p=null;return"checkbox"===n?p=Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:Yn.a.properties_row,children:[Object(q.jsx)("h3",{children:Object(q.jsx)($,{id:"properties_editor_checked_label"})}),Object(q.jsx)(Xn,{onChange:function(e){return j("checked",e)},defaultValue:Boolean(u.checked),style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"button"===n?p=Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:Yn.a.properties_row,children:[Object(q.jsx)("h3",{children:Object(q.jsx)($,{id:"properties_editor_action_label"})}),Object(q.jsx)(fr,{onChange:function(e){return j("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})}):"automation"===n&&(p=Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:Yn.a.properties_row,children:[Object(q.jsx)("h3",{children:Object(q.jsx)($,{id:"properties_editor_trigger_label"})}),Object(q.jsx)(hr,{onChange:function(e){return j("trigger",e)},defaultValue:u.trigger||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]}),Object(q.jsxs)("div",{className:Yn.a.properties_row,children:[Object(q.jsx)("h3",{children:Object(q.jsx)($,{id:"properties_editor_action_label"})}),Object(q.jsx)(fr,{onChange:function(e){return j("action",e)},defaultValue:u.action||{},style:{marginRight:"0",marginLeft:"0",width:"100%"}})]})]})),Object(q.jsxs)(q.Fragment,{children:["page"===n||"person"===n?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(br,{coverphotoValue:u.coverphoto,iconValue:u.icon,onChange:function(e){return j("coverphoto",e)}}),Object(q.jsx)(Or,{iconValue:u.icon,coverphotoValue:u.coverphoto,onChange:function(e){return j("icon",e)}})]}):null,Object(q.jsx)("div",{className:Yn.a.main_headline,children:Object(q.jsx)(In,{defaultValue:u.text,onChange:function(e){return j("text",e,!0)},onBlur:d,placeholder:t("placeholder_main_headline"),style:{margin:"0",padding:"var(--basis) calc(8 * var(--basis))"},linebreaks:!0,className:"type_h1"})}),Object(q.jsx)("div",{className:Yn.a.propertiesFrame,style:null===p?{display:"none"}:null,children:p})]})})),vr=n(428);var gr=J((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.onInputRef),s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,b=e.onMergeToPrevInput,j=e.onMergeFromNextInput,d=(e.onAddRowAfter,r.properties||{}),p=Object(a.useState)(""),O=Object(c.a)(p,2),h=O[0],x=O[1];Object(a.useEffect)((function(){x(d.text||"")}),[d.text,x]);var v=Object(a.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]);return Object(q.jsx)(In,{defaultValue:h,onChange:x,onBlur:v,placeholder:t("placeholder_text"),style:{margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return b(r)},onMergeFromNextInput:function(){return j(r)},onSplitText:u})}));var mr=J((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,b=e.onMergeToPrevInput,j=e.onMergeFromNextInput,d=r.properties||{},p=Object(a.useState)(d.text||""),O=Object(c.a)(p,2),h=O[0],x=O[1],v=d.action,g=void 0===v?{}:v,m=Object(a.useState)(g.url||""),_=Object(c.a)(m,2),k=_[0],y=_[1],w=Object(a.useCallback)((function(){if(o){var e=Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})});""===k?(e.properties.hasOwnProperty("trigger")&&delete e.properties.trigger,e.properties.hasOwnProperty("action")&&delete e.properties.action):(e.properties.trigger={type:"click"},e.properties.action={type:"open_url",url:k}),o(e)}}),[o,r,h,k]);return Object(q.jsxs)("div",{style:{padding:"var(--basis) 0"},children:[Object(q.jsx)(In,{defaultValue:h,onChange:x,onBlur:w,placeholder:t("placeholder_button"),style:{margin:"0"},linebreaks:!0,className:"hide_border type_button default",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return b(r)},onMergeFromNextInput:function(){return j(r)},onSplitText:u}),Object(q.jsx)(Ln,{children:function(e){var n=e.setError;return Object(q.jsx)(cr,{onError:n,onChange:y,onBlur:w,type:"text",defaultValue:k,placeholder:t("path_editor_item_link_label"),style:{margin:"var(--basis) 0",width:"100%"}})}})]})}));var _r=J((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=(e.onSaveBlock,e.onInputRef),s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,b=e.onMergeToPrevInput,j=e.onMergeFromNextInput,d=(e.onAddRowAfter,r.properties||{}),p=Object(a.useState)(""),O=Object(c.a)(p,2),h=O[0],x=O[1];Object(a.useEffect)((function(){x(d.text||"")}),[d.text,x]);var v=Object(a.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]);return Object(q.jsx)(In,{defaultValue:h,onChange:x,onBlur:v,placeholder:t("placeholder_headline"),style:{margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_h2",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return b(r)},onMergeFromNextInput:function(){return j(r)},onSplitText:u})}));function kr(){return Object(q.jsx)("hr",{style:{margin:"calc(3.4 * var(--basis)) 0"}})}var yr=J((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,b=e.onMergeToPrevInput,j=e.onMergeFromNextInput,d=r.properties||{},p=Object(a.useState)(d.text||""),O=Object(c.a)(p,2),h=O[0],x=O[1],v=Object(a.useRef)(Boolean(d.checked)),g=Object(a.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h,checked:v.current})}))}),[o,r,h]),m=Object(a.useCallback)((function(e){v.current=e,g()}),[g]);return Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)(Xn,{checked:v.current,onChange:m}),Object(q.jsx)(In,{defaultValue:h,onChange:x,onBlur:g,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return b(r)},onMergeFromNextInput:function(){return j(r)},onSplitText:u})]})}));var wr=J((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,b=e.onMergeToPrevInput,j=e.onMergeFromNextInput,d=r.properties||{},p=Object(a.useState)(d.text||""),O=Object(c.a)(p,2),h=O[0],x=O[1],v=Object(a.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]);return Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)(yt.a,{style:{margin:"var(--basis)"}}),Object(q.jsx)(In,{defaultValue:h,onChange:x,onBlur:v,placeholder:t("placeholder_text"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return b(r)},onMergeFromNextInput:function(){return j(r)},onSplitText:u})]})}));var Cr=J((function(e){var t=e.getString,n=e.block,r=void 0===n?{}:n,o=e.onChange,i=e.onInputRef,s=e.onGoToPrevInput,l=e.onGoToNextInput,u=e.onSplitText,b=e.onMergeToPrevInput,j=e.onMergeFromNextInput,d=r.properties||{},p=Object(a.useState)(d.text||""),O=Object(c.a)(p,2),h=O[0],x=O[1],v=Object(a.useCallback)((function(){o&&o(Object(f.a)(Object(f.a)({},r),{},{properties:Object(f.a)(Object(f.a)({},r.properties),{},{text:h})}))}),[o,r,h]);return Object(q.jsxs)("div",{style:{display:"flex"},children:[Object(q.jsx)(ft.a,{style:{margin:"var(--basis)"}}),Object(q.jsx)(In,{defaultValue:h,onChange:x,onBlur:v,placeholder:t("placeholder_headline_main"),style:{flexGrow:"1",width:"100%",margin:"0",fontWeight:"bold",backgroundColor:"transparent"},linebreaks:!0,className:"hide_border type_text",onInputRef:i,onGoToPrevInput:s,onGoToNextInput:l,onMergeToPrevInput:function(){return b(r)},onMergeFromNextInput:function(){return j(r)},onSplitText:u})]})})),Ir=n(97),Nr=n.n(Ir),Sr=["type"];function Fr(e){var t=e.type,n=void 0===t?"text":t,r=Object(ve.a)(e,Sr),c=null;switch(n){case"button":c=Object(q.jsx)(mr,Object(f.a)({},r));break;case"headline":c=Object(q.jsx)(_r,Object(f.a)({},r));break;case"divider":c=Object(q.jsx)(kr,Object(f.a)({},r));break;case"checkbox":c=Object(q.jsx)(yr,Object(f.a)({},r));break;case"person":c=Object(q.jsx)(wr,Object(f.a)({},r));break;case"page":c=Object(q.jsx)(Cr,Object(f.a)({},r));break;default:c=Object(q.jsx)(gr,Object(f.a)({},r))}return c}var Pr=J((function(e){e.fluentByObject,e.getString;var t=e.contentConfig,n=void 0===t?{}:t,r=e.className,o=e.onChange,i=e.reorderHandle,s=e.onRemoveRow,l=(e.actionButton,e.dataset),u=void 0===l?{}:l,b=e.addRowBefore,j=e.addRowAfter,d=(e.permissions,e.onInputRef),p=e.onGoToPrevInput,O=e.onGoToNextInput,h=e.onSplitText,x=e.onMergeToPrevInput,v=e.onMergeFromNextInput,g=be(),m=Object(a.useState)(Object(f.a)(Object(f.a)({},n.block||{type:"text"}),{},{_id:n.blockId||null})),_=Object(c.a)(m,2),k=_[0],y=_[1],w=k.properties||{},C="boolean"!==typeof w.active||w.active;Object(a.useEffect)((function(){n.block&&y(n.block)}),[n.block]);var I=Object(a.useCallback)((function(e){var t=Object(f.a)(Object(f.a)({},k),{},{type:e});g(t).then((function(e){y(e),k._id&&k._id===e._id||o({blockId:e._id,block:e})}))}),[y,k,g,o]),N=Object(a.useCallback)((function(){var e=Object(f.a)(Object(f.a)({},k),{},{properties:Object(f.a)(Object(f.a)({},k.properties),{},{active:!C})});g(e).then((function(e){y(e),k._id&&k._id===e._id||o({blockId:e._id,block:e})}))}),[k,C,g,y,o]),S=Object(a.useCallback)((function(e){JSON.stringify(e)!==JSON.stringify(k)&&g(e).then((function(e){y(e),k._id&&k._id===e._id||o({blockId:e._id,block:e})}))}),[g,k,o]),F=Object(a.useCallback)((function(e,t){g(e).then((function(e){t&&t(e)})).catch(console.error)}),[g]);return Object(q.jsxs)("div",Object(f.a)(Object(f.a)({className:"".concat(Nr.a.block," ").concat(r)},u),{},{children:[Object(q.jsx)(et,{block:k,setType:I,toggle_active:N,active:C,onRemoveRow:s,addRowBefore:b,addRowAfter:j,trigger:function(e){return Object(q.jsx)("div",Object(f.a)(Object(f.a)({},e),{},{className:Nr.a.reorderHandle,children:i}))}}),Object(q.jsx)("div",{className:"".concat(Nr.a.block_input," ").concat(C?Nr.a.form_active:Nr.a.form_deactivated),children:Object(q.jsx)(Fr,{type:k.type,block:k,onChange:S,onSaveBlock:F,onInputRef:d,onGoToPrevInput:p,onGoToNextInput:O,onSplitText:h,onMergeToPrevInput:x,onMergeFromNextInput:v,onAddRowAfter:j})})]}))}));var Er=function(){var e=Object(Q.a)();return Object(a.useCallback)((function(t){var n=t._id;return new Promise((function(t){e.mutate({mutation:re,variables:{_id:n}}).then(function(){var e=Object(M.a)(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.data,t("got-data");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(M.a)(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error(n),t("got-error");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e])},Br=n(135),Tr=n(192),Dr=n.n(Tr),Rr=n(98),Ar=n.n(Rr);function Lr(e){return Object(Fn.a)(e).map((function(e){var t=Object(f.a)({},e);return t.tmp_id=Object(Tn.a)(),t}))}function Vr(e){e.normalize();var t=e.childNodes;return t.length>0?t[0]:e}function Mr(e){e.normalize();var t=Object(Fn.a)(e.childNodes).reverse();if(t.length>0){var n=e;if(3===t[0].nodeType){var c,a=Object(r.a)(t);try{for(a.s();!(c=a.n()).done;){var o=c.value;if(3===o.nodeType)n=o;else if(1===o.nodeType)break}}catch(b){a.e(b)}finally{a.f()}}else if(t.length>1&&3===t[1].nodeType){var i,s=t.slice(1),l=Object(r.a)(s);try{for(l.s();!(i=l.n()).done;){var u=i.value;if(3===u.nodeType)n=u;else if(1===u.nodeType)break}}catch(b){l.e(b)}finally{l.f()}}return n}return e}function Gr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.focus(),window.getSelection){var r=3===t.nodeType?t.length:t.innerText.length;(-1===n||n>r)&&(n=r);var c=document.createRange();c.setStart(t,0),c.setEnd(t,n),c.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(c)}}var Wr=function(e){var t=e.defaultValue,n=void 0===t?[]:t,r=e.onChange,o=Object(a.useRef)([]),i=o.current,s=Object(a.useRef)({}),l=s.current,u=Object(a.useState)(0),b=Object(c.a)(u,2),j=b[0],d=b[1],p=Gt(),O=be(),h=Er(),x=Object(a.useState)(null),v=Object(c.a)(x,2),g=v[0],m=v[1];Object(a.useEffect)((function(){if("object"===typeof g&&null!==g&&l.hasOwnProperty(g.tmp_id)){var e=l[g.tmp_id];if("object"===typeof e&&null!==e){if(!0===g.inFirstLine){var t=Vr(e.current);Gr(e.current,t,g.positionFromLineStart)}else if(!0===g.inLastLine){var n=Mr(e.current);Gr(e.current,n,g.positionFromLineStart)}m(null)}}}),[g,m,l]),Object(a.useEffect)((function(){function e(){return(e=Object(M.a)(V.a.mark((function e(){var t,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(Fn.a)(Lr(n)),r=t.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),c=[],!(r.length>0)){e.next=7;break}return e.next=6,p({ids:r});case 6:c=e.sent;case 7:t=t.map((function(e){return e.hasOwnProperty("block")||(e.block=c.find((function(t){return t._id===e.blockId}))),e})),o.current=t,d((function(e){return e+1}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}0===i.length&&n.length>0&&function(){e.apply(this,arguments)}()}),[i,n,p,o,d]);var _=Object(a.useCallback)((function(e,t){var n=Object(f.a)({},s.current);n.hasOwnProperty(e.tmp_id)&&n[e.tmp_id]===t||(n[e.tmp_id]=t,s.current=n)}),[s]),k=Object(a.useCallback)((function(e,t){for(var n=t.caret,r=e.index,c=null,a=i.length-1;a>=0;a--){var o=i[a].tmp_id;if(a<r&&l[o]&&l[o].current){c=l[o];break}}if(c){var s=Mr(c.current);Gr(c.current,s,n.positionFromLineStart)}}),[i,l]),y=Object(a.useCallback)((function(e,t){for(var n=t.caret,r=e.index,c=null,a=0;a<i.length;a++){var o=i[a].tmp_id;if(a>r&&l[o]&&l[o].current){c=l[o];break}}if(c){var s=Vr(c.current);Gr(c.current,s,n.positionFromLineStart)}}),[i,l]),w=Object(a.useCallback)((function(){for(var e=null,t=i.length-1;t>=0;t--){var n=i[t].tmp_id;if(l[n]&&l[n].current){e=l[n];break}}if(e){var r=Mr(e.current);Gr(e.current,r,-1)}}),[i,l]),C=Object(a.useCallback)((function(e,t){var n=Object(Fn.a)(i);for(var c in n){var a=n[c];if(a.tmp_id===e.tmp_id){n[c]=Object(f.a)(Object(f.a)({},a),t);break}}return o.current=n,r(n),new Promise((function(e){e(n)}))}),[i,o,r]),I=Object(a.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(n="object"===typeof n?Object(f.a)({tmp_id:Object(Tn.a)()},n):n||{tmp_id:Object(Tn.a)()},"number"===typeof e&&!isNaN(e)){var c=Object(Fn.a)(i);c.splice(e+t,0,n),o.current=c,r(c)}}),[i,o,r]),N=Object(a.useCallback)((function(e){var t=e.index,n=Object(Fn.a)(i);if(t>0){var c=t-1,a=n[c],l=a.tmp_id,u=n[t].block,b=n[c].block,j=Object(f.a)(Object(f.a)({},b),{},{properties:Object(f.a)(Object(f.a)({},b.properties),{},{text:b.properties.text+u.properties.text})}),d=s.current[l].current.textContent.length;O(j).then((function(e){var n=Object(Tn.a)();C({index:c,tmp_id:l},Object(f.a)(Object(f.a)({},a),{},{tmp_id:n,blockId:e._id,block:e})).then((function(e){var c=e[t].block;e.splice(t,1),h({_id:c._id}).then((function(){o.current=e,m({tmp_id:n,positionFromLineStart:d,inFirstLine:!1,inLastLine:!0}),r(e)}))}))})).catch(console.error)}}),[i,s,O,C,h,o,m,r]),S=Object(a.useCallback)((function(e){var t=e.index,n=e.tmp_id,c=Object(Fn.a)(i);if(t<c.length-1){var a=t+1,l=c[t],u=c[t].block,b=c[a].block,j=Object(f.a)(Object(f.a)({},u),{},{properties:Object(f.a)(Object(f.a)({},u.properties),{},{text:u.properties.text+b.properties.text})}),d=s.current[n].current.textContent.length;O(j).then((function(t){var n=Object(Tn.a)();C(e,Object(f.a)(Object(f.a)({},l),{},{tmp_id:n,blockId:t._id,block:t})).then((function(e){var t=e[a].block;e.splice(a,1),h({_id:t._id}).then((function(){o.current=e,m({tmp_id:n,positionFromLineStart:d,inFirstLine:!1,inLastLine:!0}),r(e)}))}))})).catch(console.error)}}),[i,s,O,C,h,o,m,r]),F=Object(a.useCallback)((function(e,t){var n=t.texts,c=e.index,a=e.tmp_id,s=Object(Fn.a)(i),l=s.find((function(e){return e.tmp_id===a})).block||{},u=Object(f.a)(Object(f.a)({},l),{},{properties:Object(f.a)(Object(f.a)({},l.properties),{},{text:n[0]})}),b={type:l.type,properties:{text:n[1]}};O(u).then((function(e){O(b).then((function(t){s[c]=Object(f.a)(Object(f.a)({},s[c]),{},{tmp_id:Object(Tn.a)(),blockId:e._id,block:e});var n={tmp_id:Object(Tn.a)(),blockId:t._id,block:t};s.splice(c+1,0,n),o.current=s,r(s),m({tmp_id:n.tmp_id,positionFromLineStart:0,inFirstLine:!0,inLastLine:!1})})).catch(console.error)})).catch(console.error)}),[i,O,o,r,m]),P=i.filter(Boolean).filter((function(e){return e.tmp_id}));return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{style:{position:"relative",width:"1000px",maxWidth:"100%",margin:"var(--basis_x8) auto 0 auto"},children:[Object(q.jsx)("div",{children:Object(q.jsx)("button",{onClick:function(){return I(0,0,{type:"text"})},className:"text hasIcon",style:{margin:"0 0 var(--basis_x2) 0"},children:Object(q.jsxs)("span",{style:{pointerEvents:"none"},children:[Object(q.jsx)(E.a,{className:"icon"}),Object(q.jsx)("span",{style:{marginInlineStart:"var(--basis_x2)",verticalAlign:"middle"},children:Object(q.jsx)($,{id:"add_content_before"})})]})})}),Object(q.jsx)(Br.a,{onDragEnd:function(e){if(e.destination&&e.destination.index!==e.source.index){var t=function(e,t,n){var r=Array.from(e),a=r.splice(t,1),o=Object(c.a)(a,1)[0];return r.splice(n,0,o),r}(i,e.source.index,e.destination.index);o.current=t,r(t)}},children:Object(q.jsx)(Br.c,{droppableId:"list",isDropDisabled:!1,children:function(e){return Object(q.jsxs)("div",Object(f.a)(Object(f.a)({ref:e.innerRef},e.droppableProps),{},{className:"inputBorder",children:[P.map((function(e,t){var n=e.tmp_id,r={index:t,tmp_id:n};return Object(q.jsx)(Br.b,{draggableId:n,index:t,isDragDisabled:!1,disableInteractiveElementBlocking:!0,shouldRespectForcePress:!0,children:function(c){return Object(a.createElement)("div",Object(f.a)(Object(f.a)({ref:c.innerRef},c.draggableProps),{},{key:n,className:Ar.a.row}),Object(q.jsx)("div",{className:Ar.a.form,children:Object(q.jsx)(Pr,{className:Ar.a.item,dataset:{"data-index":t,"data-id":n},contentConfig:e,reorderHandle:Object(q.jsx)(vr.a,{title:Object(q.jsxs)("div",{style:{textAlign:"center"},children:[Object(q.jsx)("strong",{children:"Drag"})," to move.",Object(q.jsx)("br",{}),Object(q.jsx)("strong",{children:"Click"})," to open menu."]}),children:Object(q.jsx)("button",Object(f.a)(Object(f.a)({className:"text ".concat(Ar.a.inlineRowButton," ").concat(Ar.a.dragHandleButton)},c.dragHandleProps),{},{children:Object(q.jsx)(Dr.a,{})}))}),onRemoveRow:function(){},addRowBefore:function(e){return I(t,0,e)},addRowAfter:function(e){return I(t,1,e)},onInputRef:function(e){return _(r,e)},onGoToPrevInput:function(e){return k(r,e)},onGoToNextInput:function(e){return y(r,e)},onSplitText:function(e){return F(r,e)},onChange:function(e){return C(r,e)},onMergeToPrevInput:function(e){return N(r,e)},onMergeFromNextInput:function(e){return S(r,e)}},n)}))}},n)})),e.placeholder]}))}})})]},j),Object(q.jsx)("div",{style:{position:"relative",height:"50vh",cursor:0===P.length?"default":"text"},onClick:0===P.length?null:w})]})};function zr(e){var t=e.errorName,n="Unknown Error",r="",c="";return"no_access"===t?(n="You don't have access to this page!",r=Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h2",{children:"If you are not logged in:"}),"You propably need to login with a Volt Europa account to view this page. Contact your local community lead if you are unsure about your Volt Europa account.",Object(q.jsx)("br",{}),Object(q.jsx)("h2",{children:"If you are logged in:"}),"You propably don't have access to this page."]}),c=Object(q.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(q.jsxs)("button",{className:"hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(q.jsx)(D.a,{className:"icon"}),Object(q.jsx)("span",{children:Object(q.jsx)($,{id:"login"})})]})})):"not_found"===t&&(n="We could not find the requested URL\u2026",r="The URL you requested does currently not exist. Did you type the URL correctly?",c=Object(q.jsx)("a",{href:"".concat(window.domains.backend,"login?redirect_to=").concat(encodeURIComponent(window.location.toString())),children:Object(q.jsxs)("button",{className:"hasIcon",style:{margin:"var(--basis_x4) 0 0 0"},children:[Object(q.jsx)(D.a,{className:"icon"}),Object(q.jsx)("span",{children:Object(q.jsx)($,{id:"login"})})]})})),Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("h1",{children:n}),Object(q.jsx)("p",{children:r}),c,Object(q.jsx)("br",{})," ",Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsx)("br",{}),Object(q.jsxs)("p",{children:["Please contact ",Object(q.jsx)("a",{href:"mailto:thomas.rosen@volteuropa.org",children:"thomas.rosen@volteuropa.org"})," if you think this is a bug.",Object(q.jsx)("br",{}),"Go to ",Object(q.jsx)("a",{href:"https://volteuropa.org",children:"volteuropa.org"})," for information about the Pan-European Political Movement."]})]})}var Ur=function(){var e=Z().getString,t=be(),n=en(),r=Object(a.useState)(!1),o=Object(c.a)(r,2),i=o[0],s=o[1],l=Object(a.useCallback)((function(){return s(!0)}),[s]),u=Object(a.useCallback)((function(){return s(!1)}),[s]),b=Object(a.useState)(!1),j=Object(c.a)(b,2),p=j[0],O=j[1],h=Object(a.useCallback)((function(){return O(!0)}),[O]),x=Object(a.useCallback)((function(){return O(!1)}),[O]),v=Object(a.useRef)(!1),g=Object(d.h)().id,m=void 0===g?"":g,_=Object(a.useState)({type:"page",properties:{},content:[]}),k=Object(c.a)(_,2),y=k[0],w=k[1],C=y.type,I=y.properties,N=y.content,S=y.permissions,F=Object(a.useState)(null),P=Object(c.a)(F,2),E=P[0],B=P[1],T=tn();Object(a.useEffect)((function(){T(m,["editor","owner"]).then((function(e){B(e)})).catch((function(e){console.error(e),B(!1)}))}),[m,T,B]),Object(a.useEffect)((function(){!E||"string"!==typeof m||""===m||v.current&&m===y._id||n(m).then((function(e){v.current=!0,w(e)}))}),[E,m,y,n,w]);var D=Object(a.useCallback)((function(e){if(e!==y.type){var n=Object(f.a)(Object(f.a)({},y),{},{type:e});t(n).then((function(e){w(e)}))}}),[y,t,w]),R=Object(a.useCallback)((function(e){if(e!==y.properties){var n=Object(f.a)(Object(f.a)({},y),{},{properties:e});t(n).then((function(e){w(e)}))}}),[y,t,w]),A=Object(a.useCallback)((function(e){if(e!==y.content){var n=Object(f.a)(Object(f.a)({},y),{},{content:e});t(n).then((function(e){w(e)}))}}),[y,t,w]),L=Object(a.useCallback)((function(e){if(e!==y.permissions){var n=Object(f.a)(Object(f.a)({},y),{},{permissions:e});t(n).then((function(e){w(e)}))}}),[y,t,w]),V=Object(a.useCallback)((function(){t(y).then((function(e){e._id!==y._id&&w(e)}))}),[t,y,w]);if(!1===E)return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(pn,{block:null,title:"Error",rightActions:null}),Object(q.jsx)("div",{className:"basis_x1 ".concat(on.a.app," ").concat(on.a.spine_aligned),dir:"auto",children:Object(q.jsx)("main",{className:"".concat(on.a.contentWrapper),children:Object(q.jsx)(zr,{errorName:"no_access"})})})]});if(!0===E){var M=Object(q.jsxs)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:[i?Object(q.jsx)(Sn,{defaultBlock:y,open:i,onClose:u,onChange:R}):null,Object(q.jsxs)("button",{className:"text hasIcon",onClick:l,children:[Object(q.jsx)(nn.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(q.jsx)($,{id:"path_editor_share"})})]}),p?Object(q.jsx)(Jn,{defaultPermissions:S,open:p,onClose:x,onChange:L}):null,Object(q.jsxs)("button",{className:"text hasIcon",onClick:h,children:[Object(q.jsx)(rn.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(q.jsx)($,{id:"path_editor_permissions"})})]}),Object(q.jsxs)("button",{className:"text hasIcon",onClick:V,children:[Object(q.jsx)(cn.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(q.jsx)($,{id:"path_editor_publish"})})]}),Object(q.jsx)(et,{block:y,setType:D,trigger:function(e){return Object(q.jsx)("button",Object(f.a)(Object(f.a)({},e),{},{className:"default hasIcon",children:Object(q.jsx)(Mt.a,{className:"icon"})}))}})]}),G=y.properties.text||e("placeholder_main_headline");return Object(q.jsxs)("div",{className:"hasHeader ".concat(on.a.editor),children:[Object(q.jsx)(pn,{block:y,title:G,rightActions:M}),Object(q.jsx)(xr,{type:C,defaultProperties:I,onChange:R}),Object(q.jsx)(Wr,{onChange:A,defaultValue:N})]},y._id)}return null},Hr=n(59),qr=n.n(Hr);var $r=function(){var e=Object(a.useRef)(!1),t=Z().getString,n=xe().loggedIn,r=en(),i=Gt(),s=Object(d.h)().id,l=void 0===s?"":s,u=Object(a.useState)({type:"page",properties:{},content:[]}),b=Object(c.a)(u,2),j=b[0],p=b[1],O=Object(a.useState)([]),h=Object(c.a)(O,2),x=h[0],v=h[1],g=Object(a.useState)(null),m=Object(c.a)(g,2),_=m[0],k=m[1],y=tn();if(Object(a.useEffect)((function(){y(l,["viewer","owner"]).then((function(e){k(e)})).catch((function(e){console.error(e),k(!1)}))}),[l,y,k]),Object(a.useEffect)((function(){_&&!1===e.current&&"string"===typeof l&&""!==l&&l!==j._id&&(e.current=!0,r(l).then(function(){var t=Object(M.a)(V.a.mark((function t(n){var r,c,a,o,s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n,!(Array.isArray(n.content)&&n.content.length>0)){t.next=11;break}if(c=Object(Fn.a)(n.content),a=n.content.filter((function(e){return!e.hasOwnProperty("block")})).map((function(e){return e.blockId})),o=[],!(a.length>0)){t.next=9;break}return t.next=8,i({ids:a});case 8:o=t.sent;case 9:c=c.map((function(e){return e.hasOwnProperty("block")||(e.block=o.find((function(t){return t._id===e.blockId}))),e})),r=Object(f.a)(Object(f.a)({},r),{},{content:c});case 11:s=(r.content||[]).map((function(e){return e.block})),p(r),v(s),e.current=!1;case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[_,l,j._id,r,p,i,v]),!1===_)return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(pn,{block:null,title:"Error",rightActions:null}),Object(q.jsx)("div",{className:"basis_x1 ".concat(qr.a.app," ").concat(qr.a.spine_aligned),dir:"auto",children:Object(q.jsx)("main",{className:"".concat(qr.a.contentWrapper),children:Object(q.jsx)(zr,{errorName:"no_access"})})})]});var w=j.type||null,C=j.properties.text||t("placeholder_main_headline"),I=Object(ht.getImageUrl)(j.properties.coverphoto),N=Object(ht.getImageUrl)(j.properties.icon),S=Object(q.jsx)("div",{className:"buttonRow",style:{whiteSpace:"nowrap"},children:Object(q.jsx)(dn.b,{to:"/".concat(j._id,"/edit"),children:Object(q.jsxs)("button",{className:"text hasIcon",children:[Object(q.jsx)($e.a,{className:"icon"}),Object(q.jsx)("span",{className:"hideOnSmallScreen",style:{verticalAlign:"middle"},children:Object(q.jsx)($,{id:"edit_block"})})]})})});return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(pn,{block:j,title:C,rightActions:n?S:null}),Object(q.jsxs)("div",{className:"basis_x1 ".concat(qr.a.app," ").concat(qr.a.spine_aligned),dir:"auto",children:["page"!==w&&"person"!==w||""===I?null:Object(q.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=1400&h=400&url=").concat(encodeURIComponent(I),")")},className:qr.a.coverphoto}),Object(q.jsxs)("main",{className:"".concat(qr.a.contentWrapper),children:["page"!==w&&"person"!==w||""===N?null:Object(q.jsx)("div",{style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=jpg&w=400&h=400&url=").concat(encodeURIComponent(N),")")},className:"".concat(qr.a.icon," ").concat(""===I?qr.a.coverphotoIsNotSet:qr.a.coverphotoIsSet)}),""!==C?Object(q.jsx)("h1",{dir:"auto",children:C.split("\n").map((function(e){return Object(q.jsxs)(o.a.Fragment,{children:[e,Object(q.jsx)("br",{})]},e)}))}):null,Object(q.jsx)("div",{className:qr.a.items,children:x.filter((function(e){return!!e})).map((function(e){return Object(q.jsx)(At,{block:e},e._id)}))})]})]})]})};var Jr=function(){var e=Object(d.f)("/"),t=Object(d.e)(),n=Object(a.useState)({}),r=Object(c.a)(n,2),o=r[0],i=r[1];return Object(a.useEffect)((function(){var e=t.pathname.match(/^\/([^=/]*)(?:=?)([^=/]*)(.*)/),n=e[1],r=e[2],c=e[3];!r&&n&&(r=n),""!==r&&"/edit"!==c&&"/view"!==c&&(c="/view");var a="/".concat(r).concat(c);o.pathname!==a&&i({pathname:a})}),[t,o,i]),Object(q.jsx)(q.Fragment,{children:Object(q.jsx)("div",{className:"".concat(j.a.app," ").concat(e?j.a.isStartpage:""),children:Object(q.jsxs)(Xt,{children:[e?null:Object(q.jsx)(Kt,{}),Object(q.jsx)(Qt,{children:Object(q.jsxs)(d.c,{location:o,children:[Object(q.jsx)(d.a,{path:"/:id/view",element:Object(q.jsx)($r,{})}),Object(q.jsx)(d.a,{path:"/:id/edit",element:Object(q.jsx)(Ur,{})}),Object(q.jsx)(d.a,{path:"/",element:Object(q.jsx)(qt,{})})]})})]})})})},Zr=(n(291),n(116)),Yr={de:"Deutsch",en:"English",fr:"Fran\xe7ais"},Xr=Object.keys(Yr),Kr="en";function Qr(e){return ec.apply(this,arguments)}function ec(){return(ec=Object(M.a)(V.a.mark((function e(t){var r,c,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(295)("./"+t+".ftl");case 2:return r=e.sent,e.next=5,fetch(r.default);case 5:return c=e.sent,e.next=8,c.text();case 8:return a=e.sent,e.abrupt("return",Object(p.a)({},t,new Zr.b(a)));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tc(e){return nc.apply(this,arguments)}function nc(){return(nc=Object(M.a)(V.a.mark((function e(t){var n,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(Qr));case 2:return n=e.sent,c=n.reduce((function(e,t){return Object.assign(e,t)})),e.abrupt("return",V.a.mark((function e(){var n,a,o,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(r.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=11;break}return o=a.value,(i=new Zr.a(o)).addResource(c[o]),e.next=9,i;case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rc(e){var t=e.userLocales,n=e.children,r=e.onLocaleChange,o=Object(a.useState)(function(){var e=new Zr.a("");return e.addResource(new Zr.b("")),new G.c([e])}()),i=Object(c.a)(o,2),s=i[0],l=i[1];return Object(a.useEffect)((function(){function e(){return(e=Object(M.a)(V.a.mark((function e(){var n,c,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(W.negotiateLanguages)(t,Xr,{defaultLocale:Kr}),r&&r(n),e.next=4,tc(n);case 4:c=e.sent,(a=new G.c(c())).userLocales=t,a.defaultLocale=Kr,a.supportedLocales=Xr,l(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,r]),s?Object(q.jsx)(G.a,{l10n:s,children:n}):Object(q.jsx)("div",{children:"Loading texts\u2026"})}var cc=n(409),ac=n(194),oc=n(423),ic=n(412),sc=n(414),lc=n(410);window.domains={backend:"https://api.volt.link/",frontend:"https://beta.volt.link/"};var uc=new ic.a({uri:window.domains.backend+"graphql/v1/",cache:new sc.a,credentials:"include",defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}});function bc(){var e=Object(a.useState)(navigator.languages),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(null),l=Object(c.a)(s,2),b=l[0],j=l[1];Object(a.useEffect)((function(){if(window.umami){var e=navigator.languages;if(e||Array.isArray(e)){var t,n=Object(r.a)(e);try{for(n.s();!(t=n.n()).done;){var c=t.value,a=(c=c.toLowerCase()).split("-")[0];a!==c&&window.umami.trackEvent("L: "+a),window.umami.trackEvent("L: "+c)}}catch(o){n.e(o)}finally{n.f()}}}}),[]);var d=Object(a.useCallback)((function(e){i([e.target.dataset.locale])}),[i]),p=Object(a.useCallback)((function(e){j(e.length>0?e[0]:"")}),[j]),O=Object(cc.a)("(prefers-color-scheme: dark)"),h=o.a.useMemo((function(){return Object(ac.a)({palette:{mode:O?"dark":"light"}})}),[O]);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("div",{id:"react-notification",style:{zIndex:"10000"}},"react-notification"),Object(q.jsx)(rc,{userLocales:n,onLocaleChange:p,children:Object(q.jsx)(lc.a,{client:uc,children:Object(q.jsx)(oc.a,{theme:h,children:Object(q.jsx)(ce.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},style:{minWidth:"unset"},classes:{variantSuccess:"".concat(u.a.snackbar," ").concat(u.a.success),variantError:"".concat(u.a.snackbar," ").concat(u.a.error),variantWarning:"".concat(u.a.snackbar," ").concat(u.a.warning),variantInfo:"".concat(u.a.snackbar," ").concat(u.a.info)},domRoot:document.getElementById("react-notification"),children:Object(q.jsx)(dn.a,{children:Object(q.jsx)(Jr,{locales:Yr,currentLocale:b,onLanguageChange:d})})})})})},"AppLocalizationProvider")]})}s.a.render(Object(q.jsx)(bc,{}),document.getElementById("root"))},50:function(e,t){e.exports={getImageUrl:function(e){return"object"!==typeof e||null===e||Array.isArray(e)||"url"!==e.type?"":e.url||""}}},57:function(e,t,n){e.exports={coverphoto:"ViewerAutomationCard_coverphoto__2VxrG",icon:"ViewerAutomationCard_icon__3eqYU",title:"ViewerAutomationCard_title__3sN3b",iconLine:"ViewerAutomationCard_iconLine__2YJ9D"}},58:function(e,t,n){e.exports={dialogsWrapper:"PermissionsEditor_dialogsWrapper__1xVvi",dialog:"PermissionsEditor_dialog__2rpyk",backdrop:"PermissionsEditor_backdrop__1dRPN",inputWrapper:"PermissionsEditor_inputWrapper__4DGsr",emailInput:"PermissionsEditor_emailInput__1uH8s",permissionRow:"PermissionsEditor_permissionRow__2HaWO",menuButton:"PermissionsEditor_menuButton__2jIMI",ownerInfo:"PermissionsEditor_ownerInfo__EEKXP",actions:"PermissionsEditor_actions__k4oBn"}},59:function(e,t,n){e.exports={app:"Viewer_app__1_jMF",spine_aligned:"Viewer_spine_aligned__2mJuq",items:"Viewer_items__2FgjF",coverphoto:"Viewer_coverphoto__16R-U",icon:"Viewer_icon__219E5",coverphotoIsSet:"Viewer_coverphotoIsSet__26PSP",contentWrapper:"Viewer_contentWrapper__1HLN8",type_p:"Viewer_type_p__O5DZS"}},73:function(e,t,n){e.exports={root:"IconPicker_root__2okyv",iconIsSet:"IconPicker_iconIsSet__SnQwA",coverphotoIsSet:"IconPicker_coverphotoIsSet__3m9Dw",icon:"IconPicker_icon__JWgfX",iconWrapper:"IconPicker_iconWrapper__1zo6g",sizing_pixel:"IconPicker_sizing_pixel__3TeE0",iconIsNotSet:"IconPicker_iconIsNotSet__1T0Zd",changeIconButton:"IconPicker_changeIconButton__TxsdG"}},77:function(e,t,n){e.exports={snackbar:"Snackbar_snackbar__119_w",default:"Snackbar_default__31-eU",success:"Snackbar_success__zvTW8",error:"Snackbar_error__3XeD6",warning:"Snackbar_warning__2CBXt",info:"Snackbar_info__EuVSN"}},78:function(e,t,n){e.exports={coverphoto:"CoverphotoPicker_coverphoto__1mWB4",root:"CoverphotoPicker_root__3T8t9",coverphotoIsNotSet:"CoverphotoPicker_coverphotoIsNotSet__1O3-S",button_wrapper:"CoverphotoPicker_button_wrapper__2oEjh",coverphotoIsSet:"CoverphotoPicker_coverphotoIsSet__2o24A",iconIsSet:"CoverphotoPicker_iconIsSet__D_4uA",changeCoverphotoButton:"CoverphotoPicker_changeCoverphotoButton__2GnZD"}},82:function(e,t,n){e.exports={main_headline:"PropertiesEditor_main_headline__3wy7R",propertiesFrame:"PropertiesEditor_propertiesFrame__1uBEz",properties_row:"PropertiesEditor_properties_row__2tX7M"}},96:function(e,t,n){e.exports={dialog:"SharingEditor_dialog__22jfY",backdrop:"SharingEditor_backdrop__1Gra9",inputWrapper:"SharingEditor_inputWrapper__1UyBD",input:"SharingEditor_input__brkXK",actions:"SharingEditor_actions__2zz6x"}},97:function(e,t,n){e.exports={block:"InlineEditorBlock_block__14-zd",block_input:"InlineEditorBlock_block_input__2I1iu",form_deactivated:"InlineEditorBlock_form_deactivated__2oktp",form_active:"InlineEditorBlock_form_active__hi5HC",reorderHandle:"InlineEditorBlock_reorderHandle__2_s23"}},98:function(e,t,n){e.exports={row:"ContentEditor_row__JonRI",form:"ContentEditor_form__wtoB9",item:"ContentEditor_item__3U0XE",inlineRowButton:"ContentEditor_inlineRowButton__2pw6r",dragHandleButton:"ContentEditor_dragHandleButton__1Y_RP"}}},[[296,1,2]]]);
//# sourceMappingURL=main.b1516fc1.chunk.js.map