(this["webpackJsonpedit.volt.link"]=this["webpackJsonpedit.volt.link"]||[]).push([[2],{226:function(e,t,n){"use strict";n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return O}));var r=n(24),a=n(14),c=n(25),o=n(0),i=n.n(o),s=n(83),l=n(102),u=n(45),d=n(249),b=n.n(d),p=n(4),f=function(e){return Object(p.jsx)(s.b,Object(c.a)(Object(c.a)({},e),{},{elems:Object(c.a)({br:Object(p.jsx)("br",{})},e.elems),children:Object(p.jsx)(i.a.Fragment,{children:e.children})}),e.id)};function j(e){return function(t){var n=i.a.useContext(u.a);return i.a.createElement(e,Object(c.a)({fluentByObject:function(e,t){if(t||(t=null),e){var r,c=n.supportedLocales||[],o=Object.keys(e).filter((function(e){return c.includes(e)})),i=Object(l.negotiateLanguages)(n.userLocales,o,{defaultLocale:n.defaultLocale}),s=Object(a.a)(i);try{for(s.s();!(r=s.n()).done;){var u=r.value;if(e[u])return e[u]}}catch(d){s.e(d)}finally{s.f()}return t}return t},getString:function(e,t,r){return n.getString(e,t,r||" ")}},t))}}function v(e,t,n){var a=(e||{}).properties,c=void 0===a?{}:a,o=c.locale||"en",i=c.text||n||"";t&&Array.isArray(t)||(t=[o]);var s=c.translations||[];if(Array.isArray(s)){s=[{locale:o,text:i}].concat(Object(r.a)(s));var l=b.a.fluentByArray(s,t,"locale");l.length>0&&(i=l[0].text)}return i}function O(){var e=i.a.useContext(u.a);return Object(c.a)(Object(c.a)({},e),{},{getString:function(t,n,r){return e.getString(t,n,r||" ")},fluentByAny:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return b.a.fluentByAny(t,e.userLocales,n)},translateBlock:v})}},229:function(e,t){function n(e){if(e.startsWith("#")&&(e=e.substring(1)),3===e.length)e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2);else if(6!==e.length)throw new Error("Invalid hex color: "+e);for(var t=[],n=0;n<=2;n++)t[n]=parseInt(e.substr(2*n,2),16);return t}function r(e){return function(e){var t="string"===typeof e?n(e):e;return.2126*t[0]+.7152*t[1]+.0722*t[2]}(e)>=165?"000":"fff"}function a(e){var t;return t=function(e){var t,n;return(t=document.createElement("canvas")).height=1,t.width=1,(n=t.getContext("2d")).fillStyle=e,n.fillRect(0,0,1,1),n.getImageData(0,0,1,1).data}(e),"#"+[0,1,2].map((function(e){return("0"+t[e].toString(16)).slice(-2)})).join("")}e.exports={getImageUrl:function(e){return"object"!==typeof e||null===e||Array.isArray(e)||"url"!==e.type?"":e.url||""},getBlockColor:function(e){var t={color:null,colorRGB:null,contrastingColor:null,contrastingColorRGB:null};if(e.hasOwnProperty("properties")&&e.properties.hasOwnProperty("color")&&e.properties.color){var c=e.properties.color;if(["purple","red","green","blue","yellow"].includes(c))t.color="var(--".concat(c,")"),t.colorRGB="var(--".concat(c,"-rgb)"),t.contrastingColor="var(--on-".concat(c,")"),t.contrastingColorRGB="var(--on-".concat(c,"-rgb)");else{if(c.startsWith("#"))4!==c.length&&7!==c.length&&(c=null);else{var o=a(c);c="#000000"===o&&"black"!==c?null:o}if(c){t.color=c;var i=n(c);t.colorRGB=i.join(", "),t.contrastingColor="#"+r(c),t.contrastingColorRGB=n(t.contrastingColor)}}}return t}}},230:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return O}));var r,a,c,o,i,s,l,u=n(238),d=n(469),b=Object(d.a)(r||(r=Object(u.a)(["\n  query getBlock ($_id: ObjectID!) {\n    block (_id: $_id) {\n\t\t  _id\n\t\t  type\n\t\t  properties\n\t\t  content {\n        blockId\n        block {\n          _id\n          type\n          properties\n          content {\n            blockId\n          }\n          parent\n          metadata {\n            modified\n            modified_by\n          }\n          permissions\n          computed {\n            roles\n            inherited_block_permissions\n          }\n        }\n      }\n\t\t  parent\n\t\t  metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),p=Object(d.a)(a||(a=Object(u.a)(["\n  query getBlocks ($ids: [ObjectID], $types: [String], $archived: Boolean, $roots: [ObjectID]) {\n    blocks (ids: $ids, types: $types, archived: $archived, roots: $roots) {\n      _id\n      type\n      properties\n      content {\n        blockId\n      }\n      parent\n      metadata {\n        modified\n        modified_by\n      }\n      permissions\n      computed {\n        roles\n        inherited_block_permissions\n      }\n    }\n  }\n"]))),f=Object(d.a)(c||(c=Object(u.a)(["\n  query getSelf {\n    self {\n\t\t  logged_in\n\t\t  user\n\t\t  blockId\n      userroles\n    }\n  }\n"]))),j=(Object(d.a)(o||(o=Object(u.a)(["\n  query getSiblingBlocks ($_id: ObjectID!, $types: [String]) {\n    blocks: siblingBlocks (_id: $_id, types: $types) {\n      _id\n      type\n      properties\n    }\n  }\n"]))),Object(d.a)(i||(i=Object(u.a)(["\n  query getParentBlocks ($_id: ObjectID!) {\n    blocks: parentBlocks (_id: $_id) {\n      _id\n      type\n      properties\n      computed {\n        sort\n      }\n    }\n  }\n"])))),v=Object(d.a)(s||(s=Object(u.a)(["\n  query blockMatchesRoles ($_id: ObjectID!, $roles: [String]) {\n    blockMatchesRoles (_id: $_id, roles: $roles)\n  }\n"]))),O=Object(d.a)(l||(l=Object(u.a)(["\n  query checkPath ($path: String!) {\n    checkPath (path: $path) {\n      isOkay\n      errors\n    }\n  }\n"])))},231:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(39),a=n(25),c=n(7),o=n(22),i=n.n(o),s=n(0),l=n(414),u=n(230),d={userroles:[]};function b(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(s.useRef)(!1);Object(s.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]);var n=Object(s.useState)(d),o=Object(c.a)(n,2),b=o[0],p=o[1],f=Object(s.useState)(!1),j=Object(c.a)(f,2),v=j[0],O=j[1],g=Object(l.a)();return Object(s.useEffect)((function(){!0!==e&&window.hasOwnProperty("user")?(p(Object(a.a)(Object(a.a)({},window.user),{},{userroles:window.user.userroles||[]})),O(window.user.logged_in)):g.query({query:u.f}).then(function(){var e=Object(r.a)(i.a.mark((function e(n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.data,!0===t.current&&(r.hasOwnProperty("self")&&null!==r.self?(window.user=r.self,p(Object(a.a)(Object(a.a)({},r.self),{},{userroles:r.self.userroles||[]})),O(r.self.logged_in)):(p(d),O(!1)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),!0===t.current&&(p(d),O(!1))}))}),[e,p,O,g]),Object(a.a)(Object(a.a)({},b),{},{loggedIn:v})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var r=n(25),a=n(18),c=n(224),o=n(473),i=n(421),s=n(478),l=n(422),u=n(474),d=n(423),b=n(226),p=n(241),f=n(4),j=["closePopover","open"],v=["sx"];function O(e){var t=e.trigger,n=e.children,O=e.onToogle,g=e.paperProps,h=void 0===g?{}:g;return Object(f.jsx)(p.a,{trigger:t,onToogle:O,children:function(e){var t=e.closePopover,p=e.open,O=Object(a.a)(e,j),g=h||{},y=g.sx,k=void 0===y?{}:y,m=Object(a.a)(g,v);return Object(f.jsx)(c.a,Object(r.a)(Object(r.a)(Object(r.a)({},O),{},{sx:Object(r.a)({maxWidth:380,maxHeight:"calc(100vh - 32px)",overflow:"auto",background:"var(--background-contrast)",color:"var(--on-background)"},k),elevation:8},m),{},{children:Object(f.jsx)(o.a,{autoFocus:!0,style:{width:"100%",maxWidth:"100%",marginTop:"-8px"},children:Object(f.jsxs)("div",{children:["function"===typeof n?n({isOpen:p,close:t}):n,Object(f.jsx)(i.a,{style:{opacity:.2,marginBottom:"8px"}}),Object(f.jsxs)(s.a,{className:"roundMenuItem",onClick:t,children:[Object(f.jsx)(l.a,{children:Object(f.jsx)(d.a,{})}),Object(f.jsx)(u.a,{children:Object(f.jsx)(b.a,{id:"block_menu_close_menu"})})]})]})})}))}})}},233:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"b",(function(){return f}));var r,a,c,o,i,s=n(238),l=n(469),u=Object(l.a)(r||(r=Object(s.a)(["\n  mutation saveBlock ($block: InputBlock!) {\n    saveBlock (block: $block)\n  }\n"]))),d=Object(l.a)(a||(a=Object(s.a)(["\n  mutation saveProperty ($_id: ObjectID!, $key: String!, $value: JSON) {\n    saveProperty (_id: $_id, key: $key, value: $value)\n  }\n"]))),b=Object(l.a)(c||(c=Object(s.a)(["\n  mutation archiveBlock ($_id: ObjectID!) {\n    archiveBlock (_id: $_id)\n  }\n"]))),p=Object(l.a)(o||(o=Object(s.a)(["\n  mutation unarchiveBlock ($_id: ObjectID!) {\n    unarchiveBlock (_id: $_id)\n  }\n"]))),f=Object(l.a)(i||(i=Object(s.a)(["\n  mutation moveBlock ($movingBlockId: ObjectID!, $newParentId: ObjectID!, $newIndex: Int!) {\n    moveBlock(movingBlockId: $movingBlockId, newParentId: $newParentId, newIndex: $newIndex)\n  }\n"])))},234:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(25),a=n(277),c=n.n(a),o=n(286),i=n.n(o),s=n(287),l=n.n(s),u=n(288);function d(e){var t=c()(Object(r.a)({html:!1,xhtmlOut:!1,linkify:!0,typographer:!0,breaks:!1},e));return t.use(i.a),t.use(l.a),t}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=(e=e||"").replace(/\(TM\)/gi,"\u2122").replace(/\(SM\)/gi,"\u2120").replace(/\(C\)/gi,"\xa9").replace(/\(R\)/gi,"\xae");var n=d(t);return e=n.renderInline(e),e=u.a.parse(e,{folder:"svg",ext:".svg",base:"/public/twemoji/assets/"})}},237:function(e,t,n){"use strict";var r=n(39),a=n(25),c=n(18),o=n(22),i=n.n(o),s=n(0),l=n(14),u=n(268),d=n(255),b=n.n(d),p=n(4);function f(e,t){var n,r={},a=Object(l.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;e.hasType(c)&&(r[c]="application/json"===c?JSON.parse(e.getData(c)):e.getData(c))}}catch(o){a.e(o)}finally{a.f()}return{data:r,transmat:e}}function j(e){var t=e.onTransmit,n=e.onReceive,a=e.checkEntry,c=e.draggable,o=e.style,d=e.className,j=e.children,v=e.mimetypes,O=void 0===v?["application/json"]:v,g=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e=Object(u.addListeners)(g.current,"transmit",function(){var e=Object(r.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new u.Transmat(n),"function"!==typeof t){e.next=6;break}return e.next=4,t(r);case 4:"object"!==typeof(a=e.sent)||null===a||Array.isArray(a.data)||"object"!==typeof a.data||null===a.data||r.setData(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c=Object(u.addListeners)(g.current,"receive",(function(e){var t=new u.Transmat(e),r=f(t,O),c=!1;"function"===typeof a&&(c=a(r)),t.accept()&&(c&&"function"===typeof n&&n(r),e.preventDefault())})),o=new u.TransmatObserver((function(e){var t,n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,c=f(new u.Transmat(r.event),O),o=!1;"function"===typeof a&&(o=a(c)),o&&(r.target.classList.toggle(b.a.drag_over,r.isTarget),r.target.classList.toggle(b.a.drag_active,r.isActive))}}catch(i){n.e(i)}finally{n.f()}}));return o.observe(g.current),function(){e(),c(),o.disconnect()}}),[t,n,a,O]),Object(p.jsx)("div",{ref:g,style:o,className:d,draggable:c?"true":"false",tabIndex:"0",children:j})}var v=n(7),O=n(234),g=n(226),h=n(229);var y=function(e){var t=e.block,n=e.style,r=e.locales,c=Object(s.useState)({__html:""}),o=Object(v.a)(c,2),i=o[0],l=o[1],u=(0,Object(g.c)().translateBlock)(t,r,"");Object(s.useEffect)((function(){var e=Object(O.a)(u);l({__html:e})}),[u,l]);var d={dir:"auto",style:Object(a.a)({whiteSpace:"pre-wrap"},n)},b=Object(h.getBlockColor)(t).color;b&&(d.style.color=b);var f="body";t.properties.hasOwnProperty("text_style")&&(f=t.properties.text_style);var j=null;switch(f){case"h1":j=Object(p.jsx)("h1",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"h2":j=Object(p.jsx)("h2",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"h3":j=Object(p.jsx)("h3",Object(a.a)({dangerouslySetInnerHTML:i},d));break;case"caption":j=Object(p.jsx)("caption",Object(a.a)({dangerouslySetInnerHTML:i},d));break;default:j=Object(p.jsx)("p",Object(a.a)({dangerouslySetInnerHTML:i},d))}return j};var k=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=e.locales,o=Object(s.useState)({__html:""}),i=Object(v.a)(o,2),l=i[0],u=i[1],d=Object(g.c)(),b=d.getString,f=(0,d.translateBlock)(t,c,b("placeholder_main_headline"));Object(s.useEffect)((function(){var e=Object(O.a)(f,{linkify:!1});u({__html:e})}),[f,u]);var j="";t&&t.properties&&t.properties.trigger&&t.properties.action&&t.properties.action.url&&"click"===t.properties.trigger.type&&"open_url"===t.properties.action.type&&(j=t.properties.action.url);var y=Object(h.getBlockColor)(t),k=y.color,m=y.contrastingColor,x={};k&&(x["--button-background"]=k,x["--button-color"]=m);var w=r.hasOwnProperty("click");return!1===w&&""!==j?Object(p.jsx)("a",{href:j,target:"_blank",rel:"noreferrer",children:Object(p.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},x)})}):!0===w&&"function"===typeof r.click?Object(p.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},x),onClick:r.click}):Object(p.jsx)("button",{dir:"auto",dangerouslySetInnerHTML:l,disabled:"disabled",className:"default square",style:Object(a.a)({margin:"0",whiteSpace:"pre-wrap"},x)})};function m(e){var t=e.block,n=Object(h.getBlockColor)(t).color,r={};return n&&(r["--on-background"]=n),Object(p.jsx)("hr",{style:r})}var x=n(416),w=n(417);var _=function(e){var t=e.block,n=t.properties.text||"",r=Boolean(t.properties.checked),a={verticalAlign:"middle",paddingInlineEnd:"var(--basis)",height:"calc(var(--font-add) + var(--basis))",width:"auto"};return Object(p.jsxs)("p",{dir:"auto",children:[r?Object(p.jsx)(x.a,{style:a}):Object(p.jsx)(w.a,{style:a}),n]})};var I=n(418),B=n(419),S=n(420),$=n(77),C=n(259),L=n.n(C);var P=function(e){var t=e.block,n=e.actions,r=void 0===n?{}:n,c=e.locales,o=Object(g.c)(),i=o.getString,l=o.translateBlock,u=o.userLocales,d=function(e){var t=e.block,n=void 0===t?null:t,r=Object(s.useState)(null),a=Object(v.a)(r,2),c=a[0],o=a[1],i=Object(s.useState)(null),l=Object(v.a)(i,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){var e=null,t=null;if(null!==n){var r=n._id,a=(n.properties||{}).trigger||{},c=a.type,i=(n.properties||{}).action||{},s=i.type;"path"===c||"click"===c?"open_url"===s&&"string"===typeof i.url&&i.url.length>0?(e=i.url||"",t=null):"render_block"===s&&"string"===typeof a.path&&a.path.length>0?"string"===typeof i.blockId&&i.blockId.length>0?(e="".concat(window.domains.frontend).concat(a.path,"=").concat(i.blockId),t="/".concat(a.path,"=").concat(i.blockId)):(e="".concat(window.domains.frontend).concat(a.path,"=").concat(r),t="/".concat(a.path,"=").concat(r)):(e="/".concat(r,"/view"),t="/".concat(r)):(e="".concat(window.domains.frontend).concat(r,"/view"),t="/".concat(r))}o(e),d(t)}),[n,o,d]),{link:c,path:u}}({block:t}),b=d.link,f=d.path,j=l(t,c||u,"");if(""===j){var O=(t.properties||{}).trigger||{},y=O.type;j="path"===y?"/"+O.path:"redirect"===t.type?"click"===y?O.blockId:"cron"===y?O.cron:"block_change"===y?O.blockId:Object.keys(O).length>0?JSON.stringify(O):i("placeholder_main_headline"):i("placeholder_main_headline")}var k=!1,m=Object(h.getImageUrl)(t.properties.icon);m||(k=!0,m=Object(h.getImageUrl)(t.properties.coverphoto));var x=null;if(""===m)switch(t.type){case"person":x=Object(p.jsx)(I.a,{className:L.a.icon});break;case"redirect":x=Object(p.jsx)(B.a,{className:L.a.icon});break;default:x=Object(p.jsx)(S.a,{className:L.a.icon})}else x=Object(p.jsx)("div",{className:"".concat(L.a.icon," ").concat(k?L.a.square:L.a.round),style:{backgroundImage:"url(".concat(window.domains.backend,"download_url?f=").concat(window.imageFormat||"jpg","&w=40&h=40&url=").concat(encodeURIComponent(m),")")},alt:j});var w=null,_=f||b;r.hasOwnProperty("link")?"string"===typeof r.link&&(_=r.link):r.hasOwnProperty("click")&&"function"===typeof r.click&&(w=r.click);var C=Object(h.getBlockColor)(t),P=C.color,A=void 0===P?"inherit":P,T=C.colorRGB,N=void 0===T?"--on-background-rgb":T;if("string"===typeof _&&_.length>0)return _.includes(":")?Object(p.jsx)("a",{href:_,target:"_blank",rel:"noreferrer",title:j,className:"clickable_card ".concat(L.a.root),style:{display:"block",cursor:"pointer",color:A,"--on-background-rgb":N},children:Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[x,Object(p.jsx)("span",{dir:"auto",className:L.a.title,children:j})]})}):Object(p.jsx)($.b,{to:_,title:j,className:"clickable_card ".concat(L.a.root),style:{display:"block",cursor:"pointer",color:A,"--on-background-rgb":N},children:Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[x,Object(p.jsx)("span",{dir:"auto",className:L.a.title,children:j})]})});var E={};return"function"===typeof w&&(E.onClick=w),Object(p.jsx)("div",Object(a.a)(Object(a.a)({},E),{},{title:j,className:"clickable_card ".concat(L.a.root),style:{cursor:"function"===typeof w?"pointer":"auto",color:A,"--on-background-rgb":N},children:Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[x,Object(p.jsx)("span",{dir:"auto",className:L.a.title,children:j})]})}))},A=n(260),T=n.n(A),N=n(233),E=n(240),D=n(231),R=["block","actions","size","dragable"];function q(e,t){for(var n in(e=JSON.parse(JSON.stringify(e))).hasOwnProperty(t)&&delete e[t],e)e.hasOwnProperty(n)&&"object"==typeof e[n]&&null!==e[n]&&q(e[n],t);return e}t.a=function(e){var t=e.block,n=void 0===t?{}:t,o=e.actions,l=void 0===o?{}:o,u=(e.size,e.dragable),d=void 0!==u&&u,b=Object(c.a)(e,R),f=null,v=Object(D.a)().userroles,O=function(e){var t=e.keys,n=void 0===t?[]:t,r=Object(s.useRef)(new Set);return Object(s.useEffect)((function(){function e(e){var t=e.key.toLowerCase();n.includes(t)&&r.current.add(t)}function t(e){var t=e.key.toLowerCase();r.current.delete(t)}return window.addEventListener("keydown",e),window.addEventListener("keyup",t),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}}),[n]),{getPressedKeys:function(){return r.current}}}({keys:["shift"]}).getPressedKeys;switch(n.type||null){case"text":f=Object(p.jsx)(y,Object(a.a)({block:n,actions:l},b),n._id);break;case"button":f=Object(p.jsx)(k,Object(a.a)({block:n,actions:l},b),n._id);break;case"divider":f=Object(p.jsx)(m,Object(a.a)({block:n,actions:l},b),n._id);break;case"checkbox":f=Object(p.jsx)(_,Object(a.a)({block:n,actions:l},b),n._id);break;case"page":case"person":case"redirect":f=Object(p.jsx)(P,Object(a.a)({block:n,actions:l},b),n._id);break;default:f=JSON.stringify(n)}var g=Object(E.a)(),h=Object(s.useCallback)(function(){var e=Object(r.a)(i.a.mark((function e(t){var r,a,c,o,s,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.data,"object"!==typeof(a=((void 0===r?{}:r)||{})["application/json"])||null===a){e.next=23;break}if(c=q(c=a,"__typename"),o=n.computed.roles||[],s=c.computed.roles||[],c._id===n._id||!(v.includes("admin")||(o.includes("editor")||o.includes("owner"))&&(s.includes("editor")||s.includes("owner")))){e.next=23;break}return l=O(),u=!1,e.prev=10,e.next=13,g({mutation:N.b,variables:{movingBlockId:c._id,newParentId:n._id,newIndex:0}});case 13:if(!l.has("shift")){e.next=16;break}return e.next=16,g({mutation:N.d,variables:{_id:c._id,key:"active",value:!1}});case 16:u=!0,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.error(e.t0);case 22:u&&console.log("TODO reload sidebar");case 23:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(t){return e.apply(this,arguments)}}(),[g,n,O,v]),x=Object(s.useCallback)((function(e){var t=e.data,n=((void 0===t?{}:t)||{})["application/json"],r=!1;if("object"===typeof n&&null!==n&&n.hasOwnProperty("computed")&&n.computed.hasOwnProperty("roles")){var a=n.computed.roles||[];(v.includes("admin")||a.includes("editor")||a.includes("owner"))&&(r=!0)}return r}),[v]);return Object(p.jsx)(j,{draggable:d,className:T.a.root,onTransmit:function(){return{data:{"text/plain":n.properties.text||"","application/json":n}}},onReceive:h,checkEntry:x,children:f},n._id)}},239:function(e,t,n){"use strict";var r=n(39),a=n(22),c=n.n(a),o=n(0),i=n(414),s=n(230);t.a=function(){var e=Object(i.a)(),t=Object(o.useCallback)((function(t){return new Promise((function(n){e.query({query:s.d,variables:t}).then(function(){var e=Object(r.a)(c.a.mark((function e(t){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.errors,a=t.data,!(Array.isArray(r)&&r.length>0)){e.next=5;break}throw r;case 5:if(!Array.isArray(a.blocks)){e.next=9;break}n(a.blocks),e.next=10;break;case 9:throw new Error("Unknown error while loading blocks.");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.error("error",t),n([]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))}),[e]);return t}},240:function(e,t,n){"use strict";var r=n(0),a=n(414);t.a=function(){var e=Object(a.a)();return Object(r.useCallback)((function(t){return new Promise((function(n,r){e.mutate(t).then((function(e){var t=e.data;"string"===typeof t.error?r(t.error):n(t)})).catch(r)}))}),[e])}},241:function(e,t,n){"use strict";var r=n(25),a=n(7),c=n(0),o=n(213),i=n(467),s=n(210),l=n(4);t.a=function(e){var t=e.trigger,n=e.children,u=void 0===n?function(){}:n,d=e.onToogle,b=void 0===d?function(){}:d,p=e.setOpenBlockMenuRef,f=Object(c.useRef)(null),j=Object(c.useState)(!1),v=Object(a.a)(j,2),O=v[0],g=v[1],h=Object(c.useCallback)((function(e){g(e)}),[g]);Object(c.useEffect)((function(){p&&(p.current=h)}),[h,p]);var y=function(){b(!1),g(!1)},k=O?"popover-"+(Math.random()+1).toString(36).substring(7):void 0;return Object(l.jsxs)(l.Fragment,{children:[t({ref:f,"aria-describedby":k,onClick:function(){g((function(e){return b(!e),!e}))},style:{pointerEvents:O?"none":"all"}},{isOpen:O}),Object(l.jsxs)(o.a,{children:[Object(l.jsx)("div",{onClick:y,style:{display:O?"block":"none",position:"fixed",top:0,right:0,bottom:0,left:0,zIndex:1299,cursor:"pointer"}}),Object(l.jsx)(i.a,{id:k,open:O,anchorEl:f.current,transition:!0,placement:"bottom-start",disablePortal:!0,modifiers:[{name:"flip",enabled:!0,options:{altBoundary:!0,rootBoundary:"viewport",padding:8}}],style:{zIndex:1300},children:function(e){var t=e.TransitionProps;return Object(l.jsx)(s.a,Object(r.a)(Object(r.a)({},t),{},{children:Object(l.jsx)("div",{children:u&&"function"===typeof u?u({open:O,style:{transformOrigin:"top left"},closePopover:y}):null})}))}})]})]})}},249:function(e,t,n){var r=n(102).negotiateLanguages;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=Object.keys(e);if(0===n.length)return null;var a=r(t,n,{defaultLocale:n[0],strategy:"lookup"});return 0===a.length?null:e[a[0]]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"locale",a=e.map((function(e){return e[n]})).filter(Boolean);if(0===a.length)return null;var c=r(t,a,{defaultLocale:a[0],strategy:"lookup"});return 0===c.length?null:e.filter((function(e){return e[n]===c[0]}))}e.exports={fluentByObject:a,fluentByArray:c,fluentByAny:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["en"],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(e)){var r=c(e,t);Array.isArray(r)&&r.length>0&&(e=r[0].value)}else"object"===typeof e&&(e=a(e,t));return"string"!==typeof e&&(e=n),e}}},255:function(e,t,n){e.exports={drag_over:"DataTransmat_drag_over__3XVzh",drag_active:"DataTransmat_drag_active__2nwCM"}},259:function(e,t,n){e.exports={icon:"ViewerLine_icon__DvsyX",square:"ViewerLine_square__3knjg",round:"ViewerLine_round__1pnCx",title:"ViewerLine_title__35XNW"}},260:function(e,t,n){e.exports={root:"ViewerAuto_root__1p6KG"}}}]);
//# sourceMappingURL=2.32775264.chunk.js.map